(self.webpackChunkComendie_Frontend=self.webpackChunkComendie_Frontend||[]).push([[179],{721:(Ge,ye,T)=>{"use strict";function H(e){return"function"==typeof e}let k=!1;const y={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const n=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+n.stack)}else k&&console.log("RxJS: Back to a better error behavior. Thank you. <3");k=e},get useDeprecatedSynchronousErrorHandling(){return k}};function M(e){setTimeout(()=>{throw e},0)}const E={closed:!0,next(e){},error(e){if(y.useDeprecatedSynchronousErrorHandling)throw e;M(e)},complete(){}},g=Array.isArray||(e=>e&&"number"==typeof e.length);function v(e){return null!==e&&"object"==typeof e}const I=(()=>{function e(n){return Error.call(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((t,r)=>`${r+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n,this}return e.prototype=Object.create(Error.prototype),e})();class D{constructor(n){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,n&&(this._ctorUnsubscribe=!0,this._unsubscribe=n)}unsubscribe(){let n;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof D)t.remove(this);else if(null!==t)for(let s=0;s<t.length;++s)t[s].remove(this);if(H(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(s){n=s instanceof I?j(s.errors):[s]}}if(g(o)){let s=-1,a=o.length;for(;++s<a;){const d=o[s];if(v(d))try{d.unsubscribe()}catch(h){n=n||[],h instanceof I?n=n.concat(j(h.errors)):n.push(h)}}}if(n)throw new I(n)}add(n){let t=n;if(!n)return D.EMPTY;switch(typeof n){case"function":t=new D(n);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof D)){const o=t;t=new D,t._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}let{_parentOrParents:r}=t;if(null===r)t._parentOrParents=this;else if(r instanceof D){if(r===this)return t;t._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return t;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[t]:i.push(t),t}remove(n){const t=this._subscriptions;if(t){const r=t.indexOf(n);-1!==r&&t.splice(r,1)}}}var e;function j(e){return e.reduce((n,t)=>n.concat(t instanceof I?t.errors:t),[])}D.EMPTY=((e=new D).closed=!0,e);const L="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class F extends D{constructor(n,t,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=E;break;case 1:if(!n){this.destination=E;break}if("object"==typeof n){n instanceof F?(this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,n.add(this)):(this.syncErrorThrowable=!0,this.destination=new x(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new x(this,n,t,r)}}[L](){return this}static create(n,t,r){const i=new F(n,t,r);return i.syncErrorThrowable=!1,i}next(n){this.isStopped||this._next(n)}error(n){this.isStopped||(this.isStopped=!0,this._error(n))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(n){this.destination.next(n)}_error(n){this.destination.error(n),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:n}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=n,this}}class x extends F{constructor(n,t,r,i){super(),this._parentSubscriber=n;let o,s=this;H(t)?o=t:t&&(o=t.next,r=t.error,i=t.complete,t!==E&&(s=Object.create(t),H(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=r,this._complete=i}next(n){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;y.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,n)&&this.unsubscribe():this.__tryOrUnsub(this._next,n)}}error(n){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:r}=y;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,n),this.unsubscribe()):(this.__tryOrUnsub(this._error,n),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=n,t.syncErrorThrown=!0):M(n),this.unsubscribe();else{if(this.unsubscribe(),r)throw n;M(n)}}}complete(){if(!this.isStopped){const{_parentSubscriber:n}=this;if(this._complete){const t=()=>this._complete.call(this._context);y.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(n,t){try{n.call(this._context,t)}catch(r){if(this.unsubscribe(),y.useDeprecatedSynchronousErrorHandling)throw r;M(r)}}__tryOrSetError(n,t,r){if(!y.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(i){return y.useDeprecatedSynchronousErrorHandling?(n.syncErrorValue=i,n.syncErrorThrown=!0,!0):(M(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:n}=this;this._context=null,this._parentSubscriber=null,n.unsubscribe()}}const q="function"==typeof Symbol&&Symbol.observable||"@@observable";function se(e){return e}function Ee(e){return 0===e.length?se:1===e.length?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}let Se=(()=>{class e{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){const{operator:o}=this,s=function P(e,n,t){if(e){if(e instanceof F)return e;if(e[L])return e[L]()}return e||n||t?new F(e,n,t):new F(E)}(t,r,i);if(s.add(o?o.call(s,this.source):this.source||y.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),y.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){y.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),function A(e){for(;e;){const{closed:n,destination:t,isStopped:r}=e;if(n||r)return!1;e=t&&t instanceof F?t:null}return!0}(t)?t.error(r):console.warn(r)}}forEach(t,r){return new(r=ze(r))((i,o)=>{let s;s=this.subscribe(a=>{try{t(a)}catch(d){o(d),s&&s.unsubscribe()}},o,i)})}_subscribe(t){const{source:r}=this;return r&&r.subscribe(t)}[q](){return this}pipe(...t){return 0===t.length?this:Ee(t)(this)}toPromise(t){return new(t=ze(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=n=>new e(n),e})();function ze(e){if(e||(e=y.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const Z=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class Ze extends D{constructor(n,t){super(),this.subject=n,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const n=this.subject,t=n.observers;if(this.subject=null,!t||0===t.length||n.isStopped||n.closed)return;const r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}class nn extends F{constructor(n){super(n),this.destination=n}}let qe=(()=>{class e extends Se{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[L](){return new nn(this)}lift(t){const r=new pn(this,this);return r.operator=t,r}next(t){if(this.closed)throw new Z;if(!this.isStopped){const{observers:r}=this,i=r.length,o=r.slice();for(let s=0;s<i;s++)o[s].next(t)}}error(t){if(this.closed)throw new Z;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:r}=this,i=r.length,o=r.slice();for(let s=0;s<i;s++)o[s].error(t);this.observers.length=0}complete(){if(this.closed)throw new Z;this.isStopped=!0;const{observers:t}=this,r=t.length,i=t.slice();for(let o=0;o<r;o++)i[o].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new Z;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new Z;return this.hasError?(t.error(this.thrownError),D.EMPTY):this.isStopped?(t.complete(),D.EMPTY):(this.observers.push(t),new Ze(this,t))}asObservable(){const t=new Se;return t.source=this,t}}return e.create=(n,t)=>new pn(n,t),e})();class pn extends qe{constructor(n,t){super(),this.destination=n,this.source=t}next(n){const{destination:t}=this;t&&t.next&&t.next(n)}error(n){const{destination:t}=this;t&&t.error&&this.destination.error(n)}complete(){const{destination:n}=this;n&&n.complete&&this.destination.complete()}_subscribe(n){const{source:t}=this;return t?this.source.subscribe(n):D.EMPTY}}function jt(e){return e&&"function"==typeof e.schedule}function Ce(e,n){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new Et(e,n))}}class Et{constructor(n,t){this.project=n,this.thisArg=t}call(n,t){return t.subscribe(new At(n,this.project,this.thisArg))}}class At extends F{constructor(n,t,r){super(n),this.project=t,this.count=0,this.thisArg=r||this}_next(n){let t;try{t=this.project.call(this.thisArg,n,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Bt=e=>n=>{for(let t=0,r=e.length;t<r&&!n.closed;t++)n.next(e[t]);n.complete()},gn=function Ht(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),dr=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Ar(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const Y=e=>{if(e&&"function"==typeof e[q])return(e=>n=>{const t=e[q]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(n)})(e);if(dr(e))return Bt(e);if(Ar(e))return(e=>n=>(e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,M),n))(e);if(e&&"function"==typeof e[gn])return(e=>n=>{const t=e[gn]();for(;;){let r;try{r=t.next()}catch(i){return n.error(i),n}if(r.done){n.complete();break}if(n.next(r.value),n.closed)break}return"function"==typeof t.return&&n.add(()=>{t.return&&t.return()}),n})(e);{const t=`You provided ${v(e)?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function K(e,n){return new Se(t=>{const r=new D;let i=0;return r.add(n.schedule(function(){i!==e.length?(t.next(e[i++]),t.closed||r.add(this.schedule())):t.complete()})),r})}function Ie(e,n){return n?function Fe(e,n){if(null!=e){if(function ee(e){return e&&"function"==typeof e[q]}(e))return function C(e,n){return new Se(t=>{const r=new D;return r.add(n.schedule(()=>{const i=e[q]();r.add(i.subscribe({next(o){r.add(n.schedule(()=>t.next(o)))},error(o){r.add(n.schedule(()=>t.error(o)))},complete(){r.add(n.schedule(()=>t.complete()))}}))})),r})}(e,n);if(Ar(e))return function S(e,n){return new Se(t=>{const r=new D;return r.add(n.schedule(()=>e.then(i=>{r.add(n.schedule(()=>{t.next(i),r.add(n.schedule(()=>t.complete()))}))},i=>{r.add(n.schedule(()=>t.error(i)))}))),r})}(e,n);if(dr(e))return K(e,n);if(function fe(e){return e&&"function"==typeof e[gn]}(e)||"string"==typeof e)return function te(e,n){if(!e)throw new Error("Iterable cannot be null");return new Se(t=>{const r=new D;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(n.schedule(()=>{i=e[gn](),r.add(n.schedule(function(){if(t.closed)return;let o,s;try{const a=i.next();o=a.value,s=a.done}catch(a){return void t.error(a)}s?t.complete():(t.next(o),this.schedule())}))})),r})}(e,n)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,n):e instanceof Se?e:new Se(Y(e))}class pt extends F{constructor(n){super(),this.parent=n}_next(n){this.parent.notifyNext(n)}_error(n){this.parent.notifyError(n),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class mt extends F{notifyNext(n){this.destination.next(n)}notifyError(n){this.destination.error(n)}notifyComplete(){this.destination.complete()}}function fr(e,n){if(n.closed)return;if(e instanceof Se)return e.subscribe(n);let t;try{t=Y(e)(n)}catch(r){n.error(r)}return t}function Gt(e,n,t=Number.POSITIVE_INFINITY){return"function"==typeof n?r=>r.pipe(Gt((i,o)=>Ie(e(i,o)).pipe(Ce((s,a)=>n(i,s,o,a))),t)):("number"==typeof n&&(t=n),r=>r.lift(new qs(e,t)))}class qs{constructor(n,t=Number.POSITIVE_INFINITY){this.project=n,this.concurrent=t}call(n,t){return t.subscribe(new jr(n,this.project,this.concurrent))}}class jr extends mt{constructor(n,t,r=Number.POSITIVE_INFINITY){super(n),this.project=t,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(n){this.active<this.concurrent?this._tryNext(n):this.buffer.push(n)}_tryNext(n){let t;const r=this.index++;try{t=this.project(n,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t)}_innerSub(n){const t=new pt(this),r=this.destination;r.add(t);const i=fr(n,t);i!==t&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(n){this.destination.next(n)}notifyComplete(){const n=this.buffer;this.active--,n.length>0?this._next(n.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Zi(e=Number.POSITIVE_INFINITY){return Gt(se,e)}function et(e,n){return n?K(e,n):new Se(Bt(e))}function St(){return function(n){return n.lift(new Li(n))}}class Li{constructor(n){this.connectable=n}call(n,t){const{connectable:r}=this;r._refCount++;const i=new Jl(n,r),o=t.subscribe(i);return i.closed||(i.connection=r.connect()),o}}class Jl extends F{constructor(n,t){super(n),this.connectable=t}_unsubscribe(){const{connectable:n}=this;if(!n)return void(this.connection=null);this.connectable=null;const t=n._refCount;if(t<=0)return void(this.connection=null);if(n._refCount=t-1,t>1)return void(this.connection=null);const{connection:r}=this,i=n._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class $ extends Se{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let n=this._connection;return n||(this._isComplete=!1,n=this._connection=new D,n.add(this.source.subscribe(new Hr(this.getSubject(),this))),n.closed&&(this._connection=null,n=D.EMPTY)),n}refCount(){return St()(this)}}const es=(()=>{const e=$.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class Hr extends nn{constructor(n,t){super(n),this.connectable=t}_error(n){this._unsubscribe(),super._error(n)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const n=this.connectable;if(n){this.connectable=null;const t=n._connection;n._refCount=0,n._subject=null,n._connection=null,t&&t.unsubscribe()}}}class Js{constructor(n,t){this.subjectFactory=n,this.selector=t}call(n,t){const{selector:r}=this,i=this.subjectFactory(),o=r(i).subscribe(n);return o.add(t.subscribe(i)),o}}function pi(){return new qe}function Nt(e){for(let n in e)if(e[n]===Nt)return n;throw Error("Could not find renamed property on target object.")}function sn(e,n){for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Xe(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Xe).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function ts(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const Pn=Nt({__forward_ref__:Nt});function ht(e){return e.__forward_ref__=ht,e.toString=function(){return Xe(this())},e}function We(e){return Qs(e)?e():e}function Qs(e){return"function"==typeof e&&e.hasOwnProperty(Pn)&&e.__forward_ref__===ht}function Zs(e){return e&&!!e.\u0275providers}class be extends Error{constructor(n,t){super(function Ur(e,n){return`NG0${Math.abs(e)}${n?": "+n.trim():""}`}(n,t)),this.code=n}}function rt(e){return"string"==typeof e?e:null==e?"":String(e)}function ns(e,n){throw new be(-201,!1)}function hr(e,n){null==e&&function Rt(e,n,t,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${t} ${r} ${n} <=Actual]`))}(n,e,null,"!=")}function je(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function c(e){return{providers:e.providers||[],imports:e.imports||[]}}function u(e){return p(e,B)||p(e,J)}function p(e,n){return e.hasOwnProperty(n)?e[n]:null}function U(e){return e&&(e.hasOwnProperty(G)||e.hasOwnProperty(W))?e[G]:null}const B=Nt({\u0275prov:Nt}),G=Nt({\u0275inj:Nt}),J=Nt({ngInjectableDef:Nt}),W=Nt({ngInjectorDef:Nt});var z=(()=>((z=z||{})[z.Default=0]="Default",z[z.Host=1]="Host",z[z.Self=2]="Self",z[z.SkipSelf=4]="SkipSelf",z[z.Optional=8]="Optional",z))();let X;function ae(e){const n=X;return X=e,n}function ce(e,n,t){const r=u(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&z.Optional?null:void 0!==n?n:void ns(Xe(e))}const me=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Be={},Ot="__NG_DI_FLAG__",wt="ngTempTokenPath",Ue=/\n/gm,Wt="__source";let Nn;function zt(e){const n=Nn;return Nn=e,n}function Io(e,n=z.Default){if(void 0===Nn)throw new be(-203,!1);return null===Nn?ce(e,void 0,n):Nn.get(e,n&z.Optional?null:void 0,n)}function Ne(e,n=z.Default){return(function oe(){return X}()||Io)(We(e),n)}function ut(e,n=z.Default){return Ne(e,eo(n))}function eo(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function pr(e){const n=[];for(let t=0;t<e.length;t++){const r=We(e[t]);if(Array.isArray(r)){if(0===r.length)throw new be(900,!1);let i,o=z.Default;for(let s=0;s<r.length;s++){const a=r[s],d=rs(a);"number"==typeof d?-1===d?i=a.token:o|=d:i=a}n.push(Ne(i,o))}else n.push(Ne(r))}return n}function zn(e,n){return e[Ot]=n,e.prototype[Ot]=n,e}function rs(e){return e[Ot]}function gr(e){return{toString:e}.toString()}var mr=(()=>((mr=mr||{})[mr.OnPush=0]="OnPush",mr[mr.Default=1]="Default",mr))(),an=(()=>(function(e){e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom"}(an||(an={})),an))();const Rr={},yt=[],to=Nt({\u0275cmp:Nt}),no=Nt({\u0275dir:Nt}),os=Nt({\u0275pipe:Nt}),xo=Nt({\u0275mod:Nt}),wn=Nt({\u0275fac:Nt}),Or=Nt({__NG_ELEMENT_ID__:Nt});let gi=0;function Qe(e){return gr(()=>{const t=!0===e.standalone,r={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===mr.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||yt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||an.Emulated,id:"c"+gi++,styles:e.styles||yt,_:null,setInput:null,schemas:e.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},o=e.dependencies,s=e.features;return i.inputs=Bi(e.inputs,r),i.outputs=Bi(e.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(ro).filter(mn):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(_r).filter(mn):null,i})}function ro(e){return Ft(e)||ir(e)}function mn(e){return null!==e}function Mt(e){return gr(()=>({type:e.type,bootstrap:e.bootstrap||yt,declarations:e.declarations||yt,imports:e.imports||yt,exports:e.exports||yt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Bi(e,n){if(null==e)return Rr;const t={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,n&&(n[i]=o)}return t}const Oe=Qe;function rr(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Ft(e){return e[to]||null}function ir(e){return e[no]||null}function _r(e){return e[os]||null}function Gr(e,n){const t=e[xo]||null;if(!t&&!0===n)throw new Error(`Type ${Xe(e)} does not have '\u0275mod' property.`);return t}function kr(e){return Array.isArray(e)&&"object"==typeof e[1]}function vi(e){return Array.isArray(e)&&!0===e[1]}function Of(e){return 0!=(4&e.flags)}function nu(e){return e.componentOffset>-1}function ru(e){return 1==(1&e.flags)}function yi(e){return null!==e.template}function mT(e){return 0!=(256&e[2])}function us(e,n){return e.hasOwnProperty(wn)?e[wn]:null}class yT{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function vr(){return C_}function C_(e){return e.type.prototype.ngOnChanges&&(e.setInput=wT),bT}function bT(){const e=E_(this),n=e?.current;if(n){const t=e.previous;if(t===Rr)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function wT(e,n,t,r){const i=this.declaredInputs[t],o=E_(e)||function DT(e,n){return e[S_]=n}(e,{previous:Rr,current:null}),s=o.current||(o.current={}),a=o.previous,d=a[i];s[i]=new yT(d&&d.currentValue,n,a===Rr),e[r]=n}vr.ngInherit=!0;const S_="__ngSimpleChanges__";function E_(e){return e[S_]||null}function xn(e){for(;Array.isArray(e);)e=e[0];return e}function iu(e,n){return xn(n[e])}function zr(e,n){return xn(n[e.index])}function Vf(e,n){return e.data[n]}function oa(e,n){return e[n]}function qr(e,n){const t=n[e];return kr(t)?t:t[0]}function ou(e){return 64==(64&e[2])}function Mo(e,n){return null==n?null:e[n]}function T_(e){e[18]=0}function jf(e,n){e[5]+=n;let t=e,r=e[3];for(;null!==r&&(1===n&&1===t[5]||-1===n&&0===t[5]);)r[5]+=n,t=r,r=r[3]}const st={lFrame:P_(null),bindingsEnabled:!0};function N_(){return st.bindingsEnabled}function ve(){return st.lFrame.lView}function Tt(){return st.lFrame.tView}function cn(e){return st.lFrame.contextLView=e,e[8]}function ln(e){return st.lFrame.contextLView=null,e}function Xn(){let e=x_();for(;null!==e&&64===e.type;)e=e.parent;return e}function x_(){return st.lFrame.currentTNode}function Vi(e,n){const t=st.lFrame;t.currentTNode=e,t.isParent=n}function Hf(){return st.lFrame.isParent}function Uf(){st.lFrame.isParent=!1}function yr(){const e=st.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function sa(){return st.lFrame.bindingIndex++}function so(e){const n=st.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function LT(e,n){const t=st.lFrame;t.bindingIndex=t.bindingRootIndex=e,$f(n)}function $f(e){st.lFrame.currentDirectiveIndex=e}function R_(){return st.lFrame.currentQueryIndex}function Wf(e){st.lFrame.currentQueryIndex=e}function VT(e){const n=e[1];return 2===n.type?n.declTNode:1===n.type?e[6]:null}function O_(e,n,t){if(t&z.SkipSelf){let i=n,o=e;for(;!(i=i.parent,null!==i||t&z.Host||(i=VT(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;n=i,e=o}const r=st.lFrame=k_();return r.currentTNode=n,r.lView=e,!0}function zf(e){const n=k_(),t=e[1];st.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function k_(){const e=st.lFrame,n=null===e?null:e.child;return null===n?P_(e):n}function P_(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function L_(){const e=st.lFrame;return st.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const B_=L_;function qf(){const e=L_();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function br(){return st.lFrame.selectedIndex}function ds(e){st.lFrame.selectedIndex=e}function un(){const e=st.lFrame;return Vf(e.tView,e.selectedIndex)}function su(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const o=e.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:d,ngAfterViewChecked:h,ngOnDestroy:m}=o;s&&(e.contentHooks||(e.contentHooks=[])).push(-t,s),a&&((e.contentHooks||(e.contentHooks=[])).push(t,a),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(t,a)),d&&(e.viewHooks||(e.viewHooks=[])).push(-t,d),h&&((e.viewHooks||(e.viewHooks=[])).push(t,h),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(t,h)),null!=m&&(e.destroyHooks||(e.destroyHooks=[])).push(t,m)}}function au(e,n,t){V_(e,n,3,t)}function cu(e,n,t,r){(3&e[2])===t&&V_(e,n,t,r)}function Kf(e,n){let t=e[2];(3&t)===n&&(t&=2047,t+=1,e[2]=t)}function V_(e,n,t,r){const o=r??-1,s=n.length-1;let a=0;for(let d=void 0!==r?65535&e[18]:0;d<s;d++)if("number"==typeof n[d+1]){if(a=n[d],null!=r&&a>=r)break}else n[d]<0&&(e[18]+=65536),(a<o||-1==o)&&(KT(e,t,n,d),e[18]=(4294901760&e[18])+d+2),d++}function KT(e,n,t,r){const i=t[r]<0,o=t[r+1],a=e[i?-t[r]:t[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===n){e[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class wc{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Yf(e,n,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];e.setAttribute(n,s,a,o)}else{const o=i,s=t[++r];H_(o)?e.setProperty(n,o,s):e.setAttribute(n,o,s),r++}}return r}function j_(e){return 3===e||4===e||6===e}function H_(e){return 64===e.charCodeAt(0)}function Cc(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const i=n[r];"number"==typeof i?t=i:0===t||U_(e,t,i,null,-1===t||2===t?n[++r]:null)}}return e}function U_(e,n,t,r,i){let o=0,s=e.length;if(-1===n)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===n){s=-1;break}if(a>n){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,n),o=s+1),e.splice(o++,0,t),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function $_(e){return-1!==e}function aa(e){return 32767&e}function ca(e,n){let t=function XT(e){return e>>16}(e),r=n;for(;t>0;)r=r[15],t--;return r}let Qf=!0;function lu(e){const n=Qf;return Qf=e,n}let eI=0;const ji={};function uu(e,n){const t=Xf(e,n);if(-1!==t)return t;const r=n[1];r.firstCreatePass&&(e.injectorIndex=n.length,Zf(r.data,e),Zf(n,null),Zf(r.blueprint,null));const i=du(e,n),o=e.injectorIndex;if($_(i)){const s=aa(i),a=ca(i,n),d=a[1].data;for(let h=0;h<8;h++)n[o+h]=a[s+h]|d[s+h]}return n[o+8]=i,o}function Zf(e,n){e.push(0,0,0,0,0,0,0,0,n)}function Xf(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function du(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;null!==i;){if(r=Z_(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function eh(e,n,t){!function tI(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Or)&&(r=t[Or]),null==r&&(r=t[Or]=eI++);const i=255&r;n.data[e+(i>>5)]|=1<<i}(e,n,t)}function z_(e,n,t){if(t&z.Optional||void 0!==e)return e;ns()}function q_(e,n,t,r){if(t&z.Optional&&void 0===r&&(r=null),0==(t&(z.Self|z.Host))){const i=e[9],o=ae(void 0);try{return i?i.get(n,r,t&z.Optional):ce(n,r,t&z.Optional)}finally{ae(o)}}return z_(r,0,t)}function K_(e,n,t,r=z.Default,i){if(null!==e){if(1024&n[2]){const s=function sI(e,n,t,r,i){let o=e,s=n;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=J_(o,s,t,r|z.Self,ji);if(a!==ji)return a;let d=o.parent;if(!d){const h=s[21];if(h){const m=h.get(t,ji,r);if(m!==ji)return m}d=Z_(s),s=s[15]}o=d}return i}(e,n,t,r,ji);if(s!==ji)return s}const o=J_(e,n,t,r,ji);if(o!==ji)return o}return q_(n,t,r,i)}function J_(e,n,t,r,i){const o=function iI(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Or)?e[Or]:void 0;return"number"==typeof n?n>=0?255&n:oI:n}(t);if("function"==typeof o){if(!O_(n,e,r))return r&z.Host?z_(i,0,r):q_(n,t,r,i);try{const s=o(r);if(null!=s||r&z.Optional)return s;ns()}finally{B_()}}else if("number"==typeof o){let s=null,a=Xf(e,n),d=-1,h=r&z.Host?n[16][6]:null;for((-1===a||r&z.SkipSelf)&&(d=-1===a?du(e,n):n[a+8],-1!==d&&Q_(r,!1)?(s=n[1],a=aa(d),n=ca(d,n)):a=-1);-1!==a;){const m=n[1];if(Y_(o,a,m.data)){const b=rI(a,n,t,s,r,h);if(b!==ji)return b}d=n[a+8],-1!==d&&Q_(r,n[1].data[a+8]===h)&&Y_(o,a,n)?(s=m,a=aa(d),n=ca(d,n)):a=-1}}return i}function rI(e,n,t,r,i,o){const s=n[1],a=s.data[e+8],m=fu(a,s,t,null==r?nu(a)&&Qf:r!=s&&0!=(3&a.type),i&z.Host&&o===a);return null!==m?la(n,s,m,a):ji}function fu(e,n,t,r,i){const o=e.providerIndexes,s=n.data,a=1048575&o,d=e.directiveStart,m=o>>20,R=i?a+m:e.directiveEnd;for(let V=r?a:a+m;V<R;V++){const Q=s[V];if(V<d&&t===Q||V>=d&&Q.type===t)return V}if(i){const V=s[d];if(V&&yi(V)&&V.type===t)return d}return null}function la(e,n,t,r){let i=e[t];const o=n.data;if(function JT(e){return e instanceof wc}(i)){const s=i;s.resolving&&function Xs(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new be(-200,`Circular dependency in DI detected for ${e}${t}`)}(function xt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():rt(e)}(o[t]));const a=lu(s.canSeeViewProviders);s.resolving=!0;const d=s.injectImpl?ae(s.injectImpl):null;O_(e,r,z.Default);try{i=e[t]=s.factory(void 0,o,e,r),n.firstCreatePass&&t>=r.directiveStart&&function qT(e,n,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){const s=C_(n);(t.preOrderHooks||(t.preOrderHooks=[])).push(e,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,s)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-e,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,o))}(t,o[t],n)}finally{null!==d&&ae(d),lu(a),s.resolving=!1,B_()}}return i}function Y_(e,n,t){return!!(t[n+(e>>5)]&1<<e)}function Q_(e,n){return!(e&z.Self||e&z.Host&&n)}class ua{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return K_(this._tNode,this._lView,n,eo(r),t)}}function oI(){return new ua(Xn(),ve())}function ar(e){return gr(()=>{const n=e.prototype.constructor,t=n[wn]||th(n),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const o=i[wn]||th(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function th(e){return Qs(e)?()=>{const n=th(We(e));return n&&n()}:us(e)}function Z_(e){const n=e[1],t=n.type;return 2===t?n.declTNode:1===t?e[6]:null}const ha="__parameters__";function ga(e,n,t){return gr(()=>{const r=function nh(e){return function(...t){if(e){const r=e(...t);for(const i in r)this[i]=r[i]}}}(n);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(d,h,m){const b=d.hasOwnProperty(ha)?d[ha]:Object.defineProperty(d,ha,{value:[]})[ha];for(;b.length<=m;)b.push(null);return(b[m]=b[m]||[]).push(s),d}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class $e{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=je({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Kr(e,n){void 0===n&&(n=e);for(let t=0;t<e.length;t++){let r=e[t];Array.isArray(r)?(n===e&&(n=e.slice(0,t)),Kr(r,n)):n!==e&&n.push(r)}return n}function fs(e,n){e.forEach(t=>Array.isArray(t)?fs(t,n):n(t))}function e0(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function hu(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Tc(e,n){const t=[];for(let r=0;r<e;r++)t.push(n);return t}function Jr(e,n,t){let r=ma(e,n);return r>=0?e[1|r]=t:(r=~r,function uI(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(1===i)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;)e[i]=e[i-2],i--;e[n]=t,e[n+1]=r}}(e,r,n,t)),r}function ih(e,n){const t=ma(e,n);if(t>=0)return e[1|t]}function ma(e,n){return function r0(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=e[o<<t];if(n===s)return o<<t;s>n?i=o:r=o+1}return~(i<<t)}(e,n,1)}const Ic=zn(ga("Optional"),8),Nc=zn(ga("SkipSelf"),4);var Pr=(()=>((Pr=Pr||{})[Pr.Important=1]="Important",Pr[Pr.DashCase=2]="DashCase",Pr))();const uh=new Map;let AI=0;const fh="__ngContext__";function cr(e,n){kr(n)?(e[fh]=n[20],function OI(e){uh.set(e[20],e)}(n)):e[fh]=n}function ph(e,n){return undefined(e,n)}function Ac(e){const n=e[3];return vi(n)?n[3]:n}function gh(e){return E0(e[13])}function mh(e){return E0(e[4])}function E0(e){for(;null!==e&&!vi(e);)e=e[4];return e}function va(e,n,t,r,i){if(null!=r){let o,s=!1;vi(r)?o=r:kr(r)&&(s=!0,r=r[0]);const a=xn(r);0===e&&null!==t?null==i?F0(n,t,a):hs(n,t,a,i||null,!0):1===e&&null!==t?hs(n,t,a,i||null,!0):2===e?function Ch(e,n,t){const r=_u(e,n);r&&function tN(e,n,t,r){e.removeChild(n,t,r)}(e,r,n,t)}(n,a,s):3===e&&n.destroyNode(a),null!=o&&function iN(e,n,t,r,i){const o=t[7];o!==xn(t)&&va(n,e,r,o,i);for(let a=10;a<t.length;a++){const d=t[a];Rc(d[1],d,e,n,r,o)}}(n,e,o,t,i)}}function vh(e,n,t){return e.createElement(n,t)}function I0(e,n){const t=e[9],r=t.indexOf(n),i=n[3];512&n[2]&&(n[2]&=-513,jf(i,-1)),t.splice(r,1)}function yh(e,n){if(e.length<=10)return;const t=10+n,r=e[t];if(r){const i=r[17];null!==i&&i!==e&&I0(i,r),n>0&&(e[t-1][4]=r[4]);const o=hu(e,10+n);!function qI(e,n){Rc(e,n,n[11],2,null,null),n[0]=null,n[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function N0(e,n){if(!(128&n[2])){const t=n[11];t.destroyNode&&Rc(e,n,t,3,null,null),function YI(e){let n=e[13];if(!n)return bh(e[1],e);for(;n;){let t=null;if(kr(n))t=n[13];else{const r=n[10];r&&(t=r)}if(!t){for(;n&&!n[4]&&n!==e;)kr(n)&&bh(n[1],n),n=n[3];null===n&&(n=e),kr(n)&&bh(n[1],n),t=n&&n[4]}n=t}}(n)}}function bh(e,n){if(!(128&n[2])){n[2]&=-65,n[2]|=128,function eN(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const i=n[t[r]];if(!(i instanceof wc)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],d=o[s+1];try{d.call(a)}finally{}}else try{o.call(i)}finally{}}}}(e,n),function XI(e,n){const t=e.cleanup,r=n[7];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+1],a="function"==typeof s?s(n):xn(n[s]),d=r[i=t[o+2]],h=t[o+3];"boolean"==typeof h?a.removeEventListener(t[o],d,h):h>=0?r[i=h]():r[i=-h].unsubscribe(),o+=2}else{const s=r[i=t[o+1]];t[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();n[7]=null}}(e,n),1===n[1].type&&n[11].destroy();const t=n[17];if(null!==t&&vi(n[3])){t!==n[3]&&I0(t,n);const r=n[19];null!==r&&r.detachView(e)}!function kI(e){uh.delete(e[20])}(n)}}function x0(e,n,t){return function M0(e,n,t){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return t[0];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=e.data[r.directiveStart+i];if(o===an.None||o===an.Emulated)return null}return zr(r,t)}}(e,n.parent,t)}function hs(e,n,t,r,i){e.insertBefore(n,t,r,i)}function F0(e,n,t){e.appendChild(n,t)}function A0(e,n,t,r,i){null!==r?hs(e,n,t,r,i):F0(e,n,t)}function _u(e,n){return e.parentNode(n)}function R0(e,n,t){return k0(e,n,t)}let Th,wu,k0=function O0(e,n,t){return 40&e.type?zr(e,t):null};function vu(e,n,t,r){const i=x0(e,r,n),o=n[11],a=R0(r.parent||n[6],r,n);if(null!=i)if(Array.isArray(t))for(let d=0;d<t.length;d++)A0(o,i,t[d],a,!1);else A0(o,i,t,a,!1)}function yu(e,n){if(null!==n){const t=n.type;if(3&t)return zr(n,e);if(4&t)return Dh(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return yu(e,r);{const i=e[n.index];return vi(i)?Dh(-1,i):xn(i)}}if(32&t)return ph(n,e)()||xn(e[n.index]);{const r=L0(e,n);return null!==r?Array.isArray(r)?r[0]:yu(Ac(e[16]),r):yu(e,n.next)}}return null}function L0(e,n){return null!==n?e[16][6].projection[n.projection]:null}function Dh(e,n){const t=10+e+1;if(t<n.length){const r=n[t],i=r[1].firstChild;if(null!==i)return yu(r,i)}return n[7]}function Sh(e,n,t,r,i,o,s){for(;null!=t;){const a=r[t.index],d=t.type;if(s&&0===n&&(a&&cr(xn(a),r),t.flags|=2),32!=(32&t.flags))if(8&d)Sh(e,n,t.child,r,i,o,!1),va(n,e,i,a,o);else if(32&d){const h=ph(t,r);let m;for(;m=h();)va(n,e,i,m,o);va(n,e,i,a,o)}else 16&d?B0(e,n,r,t,i,o):va(n,e,i,a,o);t=s?t.projectionNext:t.next}}function Rc(e,n,t,r,i,o){Sh(t,r,e.firstChild,n,i,o,!1)}function B0(e,n,t,r,i,o){const s=t[16],d=s[6].projection[r.projection];if(Array.isArray(d))for(let h=0;h<d.length;h++)va(n,e,i,d[h],o);else Sh(e,n,d,s[3],i,o,!0)}function V0(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function j0(e,n,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&Yf(e,n,r),null!==i&&V0(e,n,i),null!==o&&function sN(e,n,t){e.setAttribute(n,"style",t)}(e,n,o)}function G0(e){return function Ih(){if(void 0===wu&&(wu=null,me.trustedTypes))try{wu=me.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return wu}()?.createScriptURL(e)||e}class W0{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ao(e){return e instanceof W0?e.changingThisBreaksApplicationSecurity:e}function Oc(e,n){const t=function mN(e){return e instanceof W0&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===n}const bN=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Mn=(()=>((Mn=Mn||{})[Mn.NONE=0]="NONE",Mn[Mn.HTML=1]="HTML",Mn[Mn.STYLE=2]="STYLE",Mn[Mn.SCRIPT=3]="SCRIPT",Mn[Mn.URL=4]="URL",Mn[Mn.RESOURCE_URL=5]="RESOURCE_URL",Mn))();function Kn(e){const n=Pc();return n?n.sanitize(Mn.URL,e)||"":Oc(e,"URL")?Ao(e):function Nh(e){return(e=String(e)).match(bN)?e:"unsafe:"+e}(rt(e))}function Z0(e){const n=Pc();if(n)return G0(n.sanitize(Mn.RESOURCE_URL,e)||"");if(Oc(e,"ResourceURL"))return G0(Ao(e));throw new be(904,!1)}function Pc(){const e=ve();return e&&e[12]}const Cu=new $e("ENVIRONMENT_INITIALIZER"),ev=new $e("INJECTOR",-1),tv=new $e("INJECTOR_DEF_TYPES");class nv{get(n,t=Be){if(t===Be){const r=new Error(`NullInjectorError: No provider for ${Xe(n)}!`);throw r.name="NullInjectorError",r}return t}}function ON(...e){return{\u0275providers:rv(0,e),\u0275fromNgModule:!0}}function rv(e,...n){const t=[],r=new Set;let i;return fs(n,o=>{const s=o;Ah(s,t,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&iv(i,t),t}function iv(e,n){for(let t=0;t<e.length;t++){const{providers:i}=e[t];Rh(i,o=>{n.push(o)})}}function Ah(e,n,t,r){if(!(e=We(e)))return!1;let i=null,o=U(e);const s=!o&&Ft(e);if(o||s){if(s&&!s.standalone)return!1;i=e}else{const d=e.ngModule;if(o=U(d),!o)return!1;i=d}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const d="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const h of d)Ah(h,n,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let h;r.add(i);try{fs(o.imports,m=>{Ah(m,n,t,r)&&(h||(h=[]),h.push(m))})}finally{}void 0!==h&&iv(h,n)}if(!a){const h=us(i)||(()=>new i);n.push({provide:i,useFactory:h,deps:yt},{provide:tv,useValue:i,multi:!0},{provide:Cu,useValue:()=>Ne(i),multi:!0})}const d=o.providers;null==d||a||Rh(d,m=>{n.push(m)})}}return i!==e&&void 0!==e.providers}function Rh(e,n){for(let t of e)Zs(t)&&(t=t.\u0275providers),Array.isArray(t)?Rh(t,n):n(t)}const kN=Nt({provide:String,useValue:Nt});function Oh(e){return null!==e&&"object"==typeof e&&kN in e}function gs(e){return"function"==typeof e}const kh=new $e("Set Injector scope."),Su={},LN={};let Ph;function Eu(){return void 0===Ph&&(Ph=new nv),Ph}class co{}class av extends co{constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Bh(n,s=>this.processProvider(s)),this.records.set(ev,ya(void 0,this)),i.has("environment")&&this.records.set(co,ya(void 0,this));const o=this.records.get(kh);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(tv.multi,yt,z.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const t=zt(this),r=ae(void 0);try{return n()}finally{zt(t),ae(r)}}get(n,t=Be,r=z.Default){this.assertNotDestroyed(),r=eo(r);const i=zt(this),o=ae(void 0);try{if(!(r&z.SkipSelf)){let a=this.records.get(n);if(void 0===a){const d=function UN(e){return"function"==typeof e||"object"==typeof e&&e instanceof $e}(n)&&u(n);a=d&&this.injectableDefInScope(d)?ya(Lh(n),Su):null,this.records.set(n,a)}if(null!=a)return this.hydrate(n,a)}return(r&z.Self?Eu():this.parent).get(n,t=r&z.Optional&&t===Be?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[wt]=s[wt]||[]).unshift(Xe(n)),i)throw s;return function No(e,n,t,r){const i=e[wt];throw n[Wt]&&i.unshift(n[Wt]),e.message=function is(e,n,t,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=Xe(n);if(Array.isArray(n))i=n.map(Xe).join(" -> ");else if("object"==typeof n){let o=[];for(let s in n)if(n.hasOwnProperty(s)){let a=n[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Xe(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(Ue,"\n  ")}`}("\n"+e.message,i,t,r),e.ngTokenPath=i,e[wt]=null,e}(s,n,"R3InjectorError",this.source)}throw s}finally{ae(o),zt(i)}}resolveInjectorInitializers(){const n=zt(this),t=ae(void 0);try{const r=this.get(Cu.multi,yt,z.Self);for(const i of r)i()}finally{zt(n),ae(t)}}toString(){const n=[],t=this.records;for(const r of t.keys())n.push(Xe(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(n){let t=gs(n=We(n))?n:We(n&&n.provide);const r=function VN(e){return Oh(e)?ya(void 0,e.useValue):ya(cv(e),Su)}(n);if(gs(n)||!0!==n.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=ya(void 0,Su,!0),i.factory=()=>pr(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t){return t.value===Su&&(t.value=LN,t.value=t.factory()),"object"==typeof t.value&&t.value&&function HN(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=We(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Lh(e){const n=u(e),t=null!==n?n.factory:us(e);if(null!==t)return t;if(e instanceof $e)throw new be(204,!1);if(e instanceof Function)return function BN(e){const n=e.length;if(n>0)throw Tc(n,"?"),new be(204,!1);const t=function w(e){const n=e&&(e[B]||e[J]);if(n){const t=function N(e){if(e.hasOwnProperty("name"))return e.name;const n=(""+e).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),n}return null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new be(204,!1)}function cv(e,n,t){let r;if(gs(e)){const i=We(e);return us(i)||Lh(i)}if(Oh(e))r=()=>We(e.useValue);else if(function sv(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...pr(e.deps||[]));else if(function ov(e){return!(!e||!e.useExisting)}(e))r=()=>Ne(We(e.useExisting));else{const i=We(e&&(e.useClass||e.provide));if(!function jN(e){return!!e.deps}(e))return us(i)||Lh(i);r=()=>new i(...pr(e.deps))}return r}function ya(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function Bh(e,n){for(const t of e)Array.isArray(t)?Bh(t,n):t&&Zs(t)?Bh(t.\u0275providers,n):n(t)}class $N{}class lv{}class WN{resolveComponentFactory(n){throw function GN(e){const n=Error(`No component factory found for ${Xe(e)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=e,n}(n)}}let Lc=(()=>{class e{}return e.NULL=new WN,e})();function zN(){return ba(Xn(),ve())}function ba(e,n){return new Qt(zr(e,n))}let Qt=(()=>{class e{constructor(t){this.nativeElement=t}}return e.__NG_ELEMENT_ID__=zN,e})();function qN(e){return e instanceof Qt?e.nativeElement:e}class Vh{}let bi=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function KN(){const e=ve(),t=qr(Xn().index,e);return(kr(t)?t:e)[11]}(),e})(),JN=(()=>{class e{}return e.\u0275prov=je({token:e,providedIn:"root",factory:()=>null}),e})();class Bc{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const YN=new Bc("15.0.0"),jh={};function Uh(e){return e.ngOriginalError}class wa{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&Uh(n);for(;t&&Uh(t);)t=Uh(t);return t||null}}function lo(e){return e instanceof Function?e():e}function fv(e,n,t){let r=e.length;for(;;){const i=e.indexOf(n,t);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=n.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}t=i+1}}const hv="ng-template";function ax(e,n,t){let r=0;for(;r<e.length;){let i=e[r++];if(t&&"class"===i){if(i=e[r],-1!==fv(i.toLowerCase(),n,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===n)return!0;return!1}}return!1}function pv(e){return 4===e.type&&e.value!==hv}function cx(e,n,t){return n===(4!==e.type||t?e.value:hv)}function lx(e,n,t){let r=4;const i=e.attrs||[],o=function fx(e){for(let n=0;n<e.length;n++)if(j_(e[n]))return n;return e.length}(i);let s=!1;for(let a=0;a<n.length;a++){const d=n[a];if("number"!=typeof d){if(!s)if(4&r){if(r=2|1&r,""!==d&&!cx(e,d,t)||""===d&&1===n.length){if(wi(r))return!1;s=!0}}else{const h=8&r?d:n[++a];if(8&r&&null!==e.attrs){if(!ax(e.attrs,h,t)){if(wi(r))return!1;s=!0}continue}const b=ux(8&r?"class":d,i,pv(e),t);if(-1===b){if(wi(r))return!1;s=!0;continue}if(""!==h){let R;R=b>o?"":i[b+1].toLowerCase();const V=8&r?R:null;if(V&&-1!==fv(V,h,0)||2&r&&h!==R){if(wi(r))return!1;s=!0}}}}else{if(!s&&!wi(r)&&!wi(d))return!1;if(s&&wi(d))continue;s=!1,r=d|1&r}}return wi(r)||s}function wi(e){return 0==(1&e)}function ux(e,n,t,r){if(null===n)return-1;let i=0;if(r||!t){let o=!1;for(;i<n.length;){const s=n[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=n[++i];for(;"string"==typeof a;)a=n[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function hx(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function gv(e,n,t=!1){for(let r=0;r<n.length;r++)if(lx(e,n[r],t))return!0;return!1}function px(e,n){e:for(let t=0;t<n.length;t++){const r=n[t];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function mv(e,n){return e?":not("+n.trim()+")":n}function gx(e){let n=e[0],t=1,r=2,i="",o=!1;for(;t<e.length;){let s=e[t];if("string"==typeof s)if(2&r){const a=e[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!wi(s)&&(n+=mv(o,i),i=""),r=s,o=o||!wi(r);t++}return""!==i&&(n+=mv(o,i)),n}const at={};function ge(e){_v(Tt(),ve(),br()+e,!1)}function _v(e,n,t,r){if(!r)if(3==(3&n[2])){const o=e.preOrderCheckHooks;null!==o&&au(n,o,t)}else{const o=e.preOrderHooks;null!==o&&cu(n,o,0,t)}ds(t)}function wv(e,n=null,t=null,r){const i=Dv(e,n,t,r);return i.resolveInjectorInitializers(),i}function Dv(e,n=null,t=null,r,i=new Set){const o=[t||yt,ON(e)];return r=r||("object"==typeof e?void 0:Xe(e)),new av(o,n||Eu(),r||null,i)}let Dr=(()=>{class e{static create(t,r){if(Array.isArray(t))return wv({name:""},r,t,"");{const i=t.name??"";return wv({name:i},t.parent,t.providers,i)}}}return e.THROW_IF_NOT_FOUND=Be,e.NULL=new nv,e.\u0275prov=je({token:e,providedIn:"any",factory:()=>Ne(ev)}),e.__NG_ELEMENT_ID__=-1,e})();function ne(e,n=z.Default){const t=ve();return null===t?Ne(e,n):K_(Xn(),t,We(e),n)}function qh(){throw new Error("invalid")}function Iu(e,n){return e<<17|n<<2}function Di(e){return e>>17&32767}function Kh(e){return 2|e}function uo(e){return(131068&e)>>2}function Jh(e,n){return-131069&e|n<<2}function Yh(e){return 1|e}function Vv(e,n){const t=e.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],o=t[r+1];if(-1!==o){const s=e.data[o];Wf(i),s.contentQueries(2,n[o],o)}}}function Mu(e,n,t,r,i,o,s,a,d,h,m){const b=n.blueprint.slice();return b[0]=i,b[2]=76|r,(null!==m||e&&1024&e[2])&&(b[2]|=1024),T_(b),b[3]=b[15]=e,b[8]=t,b[10]=s||e&&e[10],b[11]=a||e&&e[11],b[12]=d||e&&e[12]||null,b[9]=h||e&&e[9]||null,b[6]=o,b[20]=function RI(){return AI++}(),b[21]=m,b[16]=2==n.type?e[16]:b,b}function Sa(e,n,t,r,i){let o=e.data[n];if(null===o)o=function ip(e,n,t,r,i){const o=x_(),s=Hf(),d=e.data[n]=function Qx(e,n,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,n,r,i);return null===e.firstChild&&(e.firstChild=d),null!==o&&(s?null==o.child&&null!==d.parent&&(o.child=d):null===o.next&&(o.next=d)),d}(e,n,t,r,i),function PT(){return st.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function bc(){const e=st.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Vi(o,!0),o}function Vc(e,n,t,r){if(0===t)return-1;const i=n.length;for(let o=0;o<t;o++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function op(e,n,t){zf(n);try{const r=e.viewQuery;null!==r&&gp(1,r,t);const i=e.template;null!==i&&jv(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Vv(e,n),e.staticViewQueries&&gp(2,e.viewQuery,t);const o=e.components;null!==o&&function Kx(e,n){for(let t=0;t<n.length;t++)mM(e,n[t])}(n,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[2]&=-5,qf()}}function Fu(e,n,t,r){const i=n[2];if(128!=(128&i)){zf(n);try{T_(n),function F_(e){return st.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&jv(e,n,t,2,r);const s=3==(3&i);if(s){const h=e.preOrderCheckHooks;null!==h&&au(n,h,null)}else{const h=e.preOrderHooks;null!==h&&cu(n,h,0,null),Kf(n,0)}if(function pM(e){for(let n=gh(e);null!==n;n=mh(n)){if(!n[2])continue;const t=n[9];for(let r=0;r<t.length;r++){const i=t[r],o=i[3];0==(512&i[2])&&jf(o,1),i[2]|=512}}}(n),function hM(e){for(let n=gh(e);null!==n;n=mh(n))for(let t=10;t<n.length;t++){const r=n[t],i=r[1];ou(r)&&Fu(i,r,i.template,r[8])}}(n),null!==e.contentQueries&&Vv(e,n),s){const h=e.contentCheckHooks;null!==h&&au(n,h)}else{const h=e.contentHooks;null!==h&&cu(n,h,1),Kf(n,1)}!function zx(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)ds(~i);else{const o=i,s=t[++r],a=t[++r];LT(s,o),a(2,n[o])}}}finally{ds(-1)}}(e,n);const a=e.components;null!==a&&function qx(e,n){for(let t=0;t<n.length;t++)gM(e,n[t])}(n,a);const d=e.viewQuery;if(null!==d&&gp(2,d,r),s){const h=e.viewCheckHooks;null!==h&&au(n,h)}else{const h=e.viewHooks;null!==h&&cu(n,h,2),Kf(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[2]&=-41,512&n[2]&&(n[2]&=-513,jf(n[3],-1))}finally{qf()}}}function jv(e,n,t,r,i){const o=br(),s=2&r;try{ds(-1),s&&n.length>22&&_v(e,n,22,!1),t(r,i)}finally{ds(o)}}function sp(e,n,t){if(Of(n)){const i=n.directiveEnd;for(let o=n.directiveStart;o<i;o++){const s=e.data[o];s.contentQueries&&s.contentQueries(1,t[o],o)}}}function ap(e,n,t){!N_()||(function rM(e,n,t,r){const i=t.directiveStart,o=t.directiveEnd;e.firstCreatePass||uu(t,n),cr(r,n);const s=t.initialInputs;for(let a=i;a<o;a++){const d=e.data[a],h=yi(d);h&&uM(n,t,d);const m=la(n,e,a,t);cr(m,n),null!==s&&dM(0,a-i,m,d,0,s),h&&(qr(t.index,n)[8]=m)}}(e,n,t,zr(t,n)),64==(64&t.flags)&&qv(e,n,t))}function cp(e,n,t=zr){const r=n.localNames;if(null!==r){let i=n.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(n,e):e[s];e[i++]=a}}}function Hv(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=lp(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):n}function lp(e,n,t,r,i,o,s,a,d,h){const m=22+r,b=m+i,R=function Jx(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:at);return t}(m,b),V="function"==typeof h?h():h;return R[1]={type:e,blueprint:R,template:t,queries:null,viewQuery:a,declTNode:n,data:R.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:d,consts:V,incompleteFirstPass:!1}}function Uv(e,n,t,r){const i=Jv(n);null===t?i.push(r):(i.push(t),e.firstCreatePass&&Yv(e).push(r,i.length-1))}function $v(e,n,t,r){for(let i in e)if(e.hasOwnProperty(i)){t=null===t?{}:t;const o=e[i];null===r?Gv(t,n,i,o):r.hasOwnProperty(i)&&Gv(t,n,r[i],o)}return t}function Gv(e,n,t,r){e.hasOwnProperty(t)?e[t].push(n,r):e[t]=[n,r]}function Yr(e,n,t,r,i,o,s,a){const d=zr(n,t);let m,h=n.inputs;!a&&null!=h&&(m=h[r])?(mp(e,t,m,r,i),nu(n)&&Wv(t,n.index)):3&n.type&&(r=function Xx(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=s?s(i,n.value||"",r):i,o.setProperty(d,r,i))}function Wv(e,n){const t=qr(n,e);16&t[2]||(t[2]|=32)}function up(e,n,t,r){let i=!1;if(N_()){const o=null===r?null:{"":-1},s=function oM(e,n){const t=e.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(gv(n,s.selectors,!1))if(r||(r=[]),yi(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),dp(e,n,a.length)}else r.unshift(s),dp(e,n,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(e,t);let a,d;null===s?a=d=null:[a,d]=s,null!==a&&(i=!0,zv(e,n,t,a,o,d)),o&&function sM(e,n,t){if(n){const r=e.localNames=[];for(let i=0;i<n.length;i+=2){const o=t[n[i+1]];if(null==o)throw new be(-301,!1);r.push(n[i],o)}}}(t,r,o)}return t.mergedAttrs=Cc(t.mergedAttrs,t.attrs),i}function zv(e,n,t,r,i,o){for(let h=0;h<r.length;h++)eh(uu(t,n),e,r[h].type);!function cM(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}(t,e.data.length,r.length);for(let h=0;h<r.length;h++){const m=r[h];m.providersResolver&&m.providersResolver(m)}let s=!1,a=!1,d=Vc(e,n,r.length,null);for(let h=0;h<r.length;h++){const m=r[h];t.mergedAttrs=Cc(t.mergedAttrs,m.hostAttrs),lM(e,t,n,d,m),aM(d,m,i),null!==m.contentQueries&&(t.flags|=4),(null!==m.hostBindings||null!==m.hostAttrs||0!==m.hostVars)&&(t.flags|=64);const b=m.type.prototype;!s&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t.index),s=!0),!a&&(b.ngOnChanges||b.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t.index),a=!0),d++}!function Zx(e,n,t){const i=n.directiveEnd,o=e.data,s=n.attrs,a=[];let d=null,h=null;for(let m=n.directiveStart;m<i;m++){const b=o[m],R=t?t.get(b):null,Q=R?R.outputs:null;d=$v(b.inputs,m,d,R?R.inputs:null),h=$v(b.outputs,m,h,Q);const re=null===d||null===s||pv(n)?null:fM(d,m,s);a.push(re)}null!==d&&(d.hasOwnProperty("class")&&(n.flags|=8),d.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=a,n.inputs=d,n.outputs=h}(e,t,o)}function qv(e,n,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function BT(){return st.lFrame.currentDirectiveIndex}();try{ds(o);for(let a=r;a<i;a++){const d=e.data[a],h=n[a];$f(a),(null!==d.hostBindings||0!==d.hostVars||null!==d.hostAttrs)&&iM(d,h)}}finally{ds(-1),$f(s)}}function iM(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function dp(e,n,t){n.componentOffset=t,(e.components||(e.components=[])).push(n.index)}function aM(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;yi(n)&&(t[""]=e)}}function lM(e,n,t,r,i){e.data[r]=i;const o=i.factory||(i.factory=us(i.type)),s=new wc(o,yi(i),ne);e.blueprint[r]=s,t[r]=s,function tM(e,n,t,r,i){const o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const a=~n.index;(function nM(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(e,n,r,Vc(e,t,i.hostVars,at),i)}function uM(e,n,t){const r=zr(n,e),i=Hv(t),o=e[10],s=Au(e,Mu(e,i,null,t.onPush?32:16,r,n,o,o.createRenderer(r,t),null,null,null));e[n.index]=s}function Hi(e,n,t,r,i,o){const s=zr(e,n);!function fp(e,n,t,r,i,o,s){if(null==o)e.removeAttribute(n,i,t);else{const a=null==s?rt(o):s(o,r||"",i);e.setAttribute(n,i,a,t)}}(n[11],s,o,e.value,t,r,i)}function dM(e,n,t,r,i,o){const s=o[n];if(null!==s){const a=r.setInput;for(let d=0;d<s.length;){const h=s[d++],m=s[d++],b=s[d++];null!==a?r.setInput(t,b,h,m):t[m]=b}}}function fM(e,n,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(e.hasOwnProperty(o)){null===r&&(r=[]);const s=e[o];for(let a=0;a<s.length;a+=2)if(s[a]===n){r.push(o,s[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function Kv(e,n,t,r){return new Array(e,!0,!1,n,null,0,r,t,null,null)}function gM(e,n){const t=qr(n,e);if(ou(t)){const r=t[1];48&t[2]?Fu(r,t,r.template,t[8]):t[5]>0&&hp(t)}}function hp(e){for(let r=gh(e);null!==r;r=mh(r))for(let i=10;i<r.length;i++){const o=r[i];if(ou(o))if(512&o[2]){const s=o[1];Fu(s,o,s.template,o[8])}else o[5]>0&&hp(o)}const t=e[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=qr(t[r],e);ou(i)&&i[5]>0&&hp(i)}}function mM(e,n){const t=qr(n,e),r=t[1];(function _M(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])})(r,t),op(r,t,t[8])}function Au(e,n){return e[13]?e[14][4]=n:e[13]=n,e[14]=n,n}function pp(e){for(;e;){e[2]|=32;const n=Ac(e);if(mT(e)&&!n)return e;e=n}return null}function Ru(e,n,t,r=!0){const i=n[10];i.begin&&i.begin();try{Fu(e,n,e.template,t)}catch(s){throw r&&Zv(n,s),s}finally{i.end&&i.end()}}function gp(e,n,t){Wf(0),n(e,t)}function Jv(e){return e[7]||(e[7]=[])}function Yv(e){return e.cleanup||(e.cleanup=[])}function Zv(e,n){const t=e[9],r=t?t.get(wa,null):null;r&&r.handleError(n)}function mp(e,n,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],d=n[s],h=e.data[s];null!==h.setInput?h.setInput(d,i,r,a):d[a]=i}}function Ou(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,o=0;if(null!==n)for(let s=0;s<n.length;s++){const a=n[s];"number"==typeof a?o=a:1==o?i=ts(i,a):2==o&&(r=ts(r,a+": "+n[++s]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}function ku(e,n,t,r,i=!1){for(;null!==t;){const o=n[t.index];if(null!==o&&r.push(xn(o)),vi(o))for(let a=10;a<o.length;a++){const d=o[a],h=d[1].firstChild;null!==h&&ku(d[1],d,h,r)}const s=t.type;if(8&s)ku(e,n,t.child,r);else if(32&s){const a=ph(t,n);let d;for(;d=a();)r.push(d)}else if(16&s){const a=L0(n,t);if(Array.isArray(a))r.push(...a);else{const d=Ac(n[16]);ku(d[1],d,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class jc{constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,t=n[1];return ku(t,n,t.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(vi(n)){const t=n[8],r=t?t.indexOf(this):-1;r>-1&&(yh(n,r),hu(t,r))}this._attachedToViewContainer=!1}N0(this._lView[1],this._lView)}onDestroy(n){Uv(this._lView[1],this._lView,null,n)}markForCheck(){pp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ru(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function JI(e,n){Rc(e,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=n}}class vM extends jc{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Ru(n[1],n,n[8],!1)}checkNoChanges(){}get context(){return null}}class _p extends Lc{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=Ft(n);return new Hc(t,this.ngModule)}}function Xv(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class bM{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){r=eo(r);const i=this.injector.get(n,jh,r);return i!==jh||t===jh?i:this.parentInjector.get(n,t,r)}}class Hc extends lv{constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function mx(e){return e.map(gx).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Xv(this.componentDef.inputs)}get outputs(){return Xv(this.componentDef.outputs)}create(n,t,r,i){let o=(i=i||this.ngModule)instanceof co?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new bM(n,o):n,a=s.get(Vh,null);if(null===a)throw new be(407,!1);const d=s.get(JN,null),h=a.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",b=r?function Yx(e,n,t){return e.selectRootElement(n,t===an.ShadowDom)}(h,r,this.componentDef.encapsulation):vh(h,m,function yM(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(m)),R=this.componentDef.onPush?288:272,V=lp(0,null,null,1,0,null,null,null,null,null),Q=Mu(null,V,null,R,null,null,a,h,d,s,null);let re,le;zf(Q);try{const pe=this.componentDef;let _e,ue=null;pe.findHostDirectiveDefs?(_e=[],ue=new Map,pe.findHostDirectiveDefs(pe,_e,ue),_e.push(pe)):_e=[pe];const Te=function CM(e,n){const t=e[1];return e[22]=n,Sa(t,22,2,"#host",null)}(Q,b),Le=function SM(e,n,t,r,i,o,s,a){const d=i[1];!function EM(e,n,t,r){for(const i of e)n.mergedAttrs=Cc(n.mergedAttrs,i.hostAttrs);null!==n.mergedAttrs&&(Ou(n,n.mergedAttrs,!0),null!==t&&j0(r,t,n))}(r,e,n,s);const h=o.createRenderer(n,t),m=Mu(i,Hv(t),null,t.onPush?32:16,i[e.index],e,o,h,a||null,null,null);return d.firstCreatePass&&dp(d,e,r.length-1),Au(i,m),i[e.index]=m}(Te,b,pe,_e,Q,a,h);le=Vf(V,22),b&&function IM(e,n,t,r){if(r)Yf(e,t,["ng-version",YN.full]);else{const{attrs:i,classes:o}=function _x(e){const n=[],t=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&n.push(o,e[++r]):8===i&&t.push(o);else{if(!wi(i))break;i=o}r++}return{attrs:n,classes:t}}(n.selectors[0]);i&&Yf(e,t,i),o&&o.length>0&&V0(e,t,o.join(" "))}}(h,pe,b,r),void 0!==t&&function NM(e,n,t){const r=e.projection=[];for(let i=0;i<n.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(le,this.ngContentSelectors,t),re=function TM(e,n,t,r,i,o){const s=Xn(),a=i[1],d=zr(s,i);zv(a,i,s,t,null,r);for(let m=0;m<t.length;m++)cr(la(i,a,s.directiveStart+m,s),i);qv(a,i,s),d&&cr(d,i);const h=la(i,a,s.directiveStart+s.componentOffset,s);if(e[8]=i[8]=h,null!==o)for(const m of o)m(h,n);return sp(a,s,e),h}(Le,pe,_e,ue,Q,[xM]),op(V,Q,null)}finally{qf()}return new DM(this.componentType,re,ba(le,Q),Q,le)}}class DM extends $N{constructor(n,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new vM(i),this.componentType=n}setInput(n,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[n])){const o=this._rootLView;mp(o[1],o,i,n,t),Wv(o,this._tNode.index)}}get injector(){return new ua(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function xM(){const e=Xn();su(ve()[1],e)}function Pt(e){let n=function ey(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const r=[e];for(;n;){let i;if(yi(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new be(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);const s=e;s.inputs=vp(e.inputs),s.declaredInputs=vp(e.declaredInputs),s.outputs=vp(e.outputs);const a=i.hostBindings;a&&RM(e,a);const d=i.viewQuery,h=i.contentQueries;if(d&&FM(e,d),h&&AM(e,h),sn(e.inputs,i.inputs),sn(e.declaredInputs,i.declaredInputs),sn(e.outputs,i.outputs),yi(i)&&i.data.animation){const m=e.data;m.animation=(m.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(e),a===Pt&&(t=!1)}}n=Object.getPrototypeOf(n)}!function MM(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=Cc(i.hostAttrs,t=Cc(t,i.hostAttrs))}}(r)}function vp(e){return e===Rr?{}:e===yt?[]:e}function FM(e,n){const t=e.viewQuery;e.viewQuery=t?(r,i)=>{n(r,i),t(r,i)}:n}function AM(e,n){const t=e.contentQueries;e.contentQueries=t?(r,i,o)=>{n(r,i,o),t(r,i,o)}:n}function RM(e,n){const t=e.hostBindings;e.hostBindings=t?(r,i)=>{n(r,i),t(r,i)}:n}let Pu=null;function ms(){if(!Pu){const e=me.Symbol;if(e&&e.iterator)Pu=e.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<n.length;++t){const r=n[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Pu=r)}}}return Pu}function Uc(e){return!!yp(e)&&(Array.isArray(e)||!(e instanceof Map)&&ms()in e)}function yp(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Ui(e,n,t){return e[n]=t}function lr(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function _s(e,n,t,r){const i=lr(e,n,t);return lr(e,n+1,r)||i}function Ut(e,n,t,r){const i=ve();return lr(i,sa(),n)&&(Tt(),Hi(un(),i,e,n,t,r)),Ut}function Ta(e,n,t,r){return lr(e,sa(),t)?n+rt(t)+r:at}function Ia(e,n,t,r,i,o){const a=_s(e,function oo(){return st.lFrame.bindingIndex}(),t,i);return so(2),a?n+rt(t)+r+rt(i)+o:at}function Me(e,n,t,r,i,o,s,a){const d=ve(),h=Tt(),m=e+22,b=h.firstCreatePass?function $M(e,n,t,r,i,o,s,a,d){const h=n.consts,m=Sa(n,e,4,s||null,Mo(h,a));up(n,t,m,Mo(h,d)),su(n,m);const b=m.tViews=lp(2,m,r,i,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,h);return null!==n.queries&&(n.queries.template(n,m),b.queries=n.queries.embeddedTView(m)),m}(m,h,d,n,t,r,i,o,s):h.data[m];Vi(b,!1);const R=d[11].createComment("");vu(h,d,R,b),cr(R,d),Au(d,d[m]=Kv(R,d,R,b)),ru(b)&&ap(h,d,b),null!=s&&cp(d,b,a)}function Ci(e){return oa(function kT(){return st.lFrame.contextLView}(),22+e)}function De(e,n,t){const r=ve();return lr(r,sa(),n)&&Yr(Tt(),un(),r,e,n,r[11],t,!1),De}function bp(e,n,t,r,i){const s=i?"class":"style";mp(e,t,n.inputs[s],s,r)}function de(e,n,t,r){const i=ve(),o=Tt(),s=22+e,a=i[11],d=i[s]=vh(a,n,function zT(){return st.lFrame.currentNamespace}()),h=o.firstCreatePass?function WM(e,n,t,r,i,o,s){const a=n.consts,h=Sa(n,e,2,i,Mo(a,o));return up(n,t,h,Mo(a,s)),null!==h.attrs&&Ou(h,h.attrs,!1),null!==h.mergedAttrs&&Ou(h,h.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,h),h}(s,o,i,0,n,t,r):o.data[s];return Vi(h,!0),j0(a,d,h),32!=(32&h.flags)&&vu(o,i,d,h),0===function MT(){return st.lFrame.elementDepthCount}()&&cr(d,i),function FT(){st.lFrame.elementDepthCount++}(),ru(h)&&(ap(o,i,h),sp(o,h,i)),null!==r&&cp(i,h),de}function he(){let e=Xn();Hf()?Uf():(e=e.parent,Vi(e,!1));const n=e;!function AT(){st.lFrame.elementDepthCount--}();const t=Tt();return t.firstCreatePass&&(su(t,e),Of(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function QT(e){return 0!=(8&e.flags)}(n)&&bp(t,n,ve(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function ZT(e){return 0!=(16&e.flags)}(n)&&bp(t,n,ve(),n.stylesWithoutHost,!1),he}function Dt(e,n,t,r){return de(e,n,t,r),he(),Dt}function Dn(){return ve()}function Gc(e){return!!e&&"function"==typeof e.then}const Cp=function py(e){return!!e&&"function"==typeof e.subscribe};function ot(e,n,t,r){const i=ve(),o=Tt(),s=Xn();return function my(e,n,t,r,i,o,s,a){const d=ru(r),m=e.firstCreatePass&&Yv(e),b=n[8],R=Jv(n);let V=!0;if(3&r.type||a){const le=zr(r,n),pe=a?a(le):le,_e=R.length,ue=a?Le=>a(xn(Le[r.index])):r.index;let Te=null;if(!a&&d&&(Te=function qM(e,n,t,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=n[7],d=i[o+2];return a.length>d?a[d]:null}"string"==typeof s&&(o+=2)}return null}(e,n,i,r.index)),null!==Te)(Te.__ngLastListenerFn__||Te).__ngNextListenerFn__=o,Te.__ngLastListenerFn__=o,V=!1;else{o=vy(r,n,b,o,!1);const Le=t.listen(pe,i,o);R.push(o,Le),m&&m.push(i,ue,_e,_e+1)}}else o=vy(r,n,b,o,!1);const Q=r.outputs;let re;if(V&&null!==Q&&(re=Q[i])){const le=re.length;if(le)for(let pe=0;pe<le;pe+=2){const Je=n[re[pe]][re[pe+1]].subscribe(o),It=R.length;R.push(o,Je),m&&m.push(i,r.index,It,-(It+1))}}}(o,i,i[11],s,e,n,0,r),ot}function _y(e,n,t,r){try{return!1!==t(r)}catch(i){return Zv(e,i),!1}}function vy(e,n,t,r,i){return function o(s){if(s===Function)return r;pp(e.componentOffset>-1?qr(e.index,n):n);let d=_y(n,0,r,s),h=o.__ngNextListenerFn__;for(;h;)d=_y(n,0,h,s)&&d,h=h.__ngNextListenerFn__;return i&&!1===d&&(s.preventDefault(),s.returnValue=!1),d}}function He(e=1){return function jT(e){return(st.lFrame.contextLView=function HT(e,n){for(;e>0;)n=n[15],e--;return n}(e,st.lFrame.contextLView))[8]}(e)}function KM(e,n){let t=null;const r=function dx(e){const n=e.attrs;if(null!=n){const t=n.indexOf(5);if(0==(1&t))return n[t+1]}return null}(e);for(let i=0;i<n.length;i++){const o=n[i];if("*"!==o){if(null===r?gv(e,o,!0):px(r,o))return i}else t=i}return t}function Cr(e,n,t){return Jn(e,"",n,"",t),Cr}function Jn(e,n,t,r,i){const o=ve(),s=Ta(o,n,t,r);return s!==at&&Yr(Tt(),un(),o,e,s,o[11],i,!1),Jn}function Bu(e,n,t,r,i,o,s){const a=ve(),d=Ia(a,n,t,r,i,o);return d!==at&&Yr(Tt(),un(),a,e,d,a[11],s,!1),Bu}function Ny(e,n,t,r,i){const o=e[t+1],s=null===n;let a=r?Di(o):uo(o),d=!1;for(;0!==a&&(!1===d||s);){const m=e[a+1];QM(e[a],n)&&(d=!0,e[a+1]=r?Yh(m):Kh(m)),a=r?Di(m):uo(m)}d&&(e[t+1]=r?Kh(o):Yh(o))}function QM(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&ma(e,n)>=0}const Vn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xy(e){return e.substring(Vn.key,Vn.keyEnd)}function My(e,n){const t=Vn.textEnd;return t===n?-1:(n=Vn.keyEnd=function tF(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}(e,Vn.key=n,t),Oa(e,n,t))}function Oa(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function vn(e,n){return function Si(e,n,t,r){const i=ve(),o=Tt(),s=so(2);o.firstUpdatePass&&Py(o,e,s,r),n!==at&&lr(i,s,n)&&By(o,o.data[br()],i,i[11],e,i[s+1]=function dF(e,n){return null==e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Xe(Ao(e)))),e}(n,t),r,s)}(e,n,null,!0),vn}function vs(e){!function Ei(e,n,t,r){const i=Tt(),o=so(2);i.firstUpdatePass&&Py(i,null,o,r);const s=ve();if(t!==at&&lr(s,o,t)){const a=i.data[br()];if(jy(a,r)&&!ky(i,o)){let d=r?a.classesWithoutHost:a.stylesWithoutHost;null!==d&&(t=ts(d,t||"")),bp(i,a,s,t,r)}else!function uF(e,n,t,r,i,o,s,a){i===at&&(i=yt);let d=0,h=0,m=0<i.length?i[0]:null,b=0<o.length?o[0]:null;for(;null!==m||null!==b;){const R=d<i.length?i[d+1]:void 0,V=h<o.length?o[h+1]:void 0;let re,Q=null;m===b?(d+=2,h+=2,R!==V&&(Q=b,re=V)):null===b||null!==m&&m<b?(d+=2,Q=m):(h+=2,Q=b,re=V),null!==Q&&By(e,n,t,r,Q,re,s,a),m=d<i.length?i[d]:null,b=h<o.length?o[h]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function lF(e,n,t){if(null==t||""===t)return yt;const r=[],i=Ao(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else"string"==typeof i&&n(r,i);return r}(e,n,t),r,o)}}(Jr,Gi,e,!0)}function Gi(e,n){for(let t=function XM(e){return function Ay(e){Vn.key=0,Vn.keyEnd=0,Vn.value=0,Vn.valueEnd=0,Vn.textEnd=e.length}(e),My(e,Oa(e,0,Vn.textEnd))}(n);t>=0;t=My(n,t))Jr(e,xy(n),!0)}function ky(e,n){return n>=e.expandoStartIndex}function Py(e,n,t,r){const i=e.data;if(null===i[t+1]){const o=i[br()],s=ky(e,t);jy(o,r)&&null===n&&!s&&(n=!1),n=function oF(e,n,t,r){const i=function Gf(e){const n=st.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let o=r?n.residualClasses:n.residualStyles;if(null===i)0===(r?n.classBindings:n.styleBindings)&&(t=Wc(t=Ep(null,e,n,t,r),n.attrs,r),o=null);else{const s=n.directiveStylingLast;if(-1===s||e[s]!==i)if(t=Ep(i,e,n,t,r),null===o){let d=function sF(e,n,t){const r=t?n.classBindings:n.styleBindings;if(0!==uo(r))return e[Di(r)]}(e,n,r);void 0!==d&&Array.isArray(d)&&(d=Ep(null,e,n,d[1],r),d=Wc(d,n.attrs,r),function aF(e,n,t,r){e[Di(t?n.classBindings:n.styleBindings)]=r}(e,n,r,d))}else o=function cF(e,n,t){let r;const i=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<i;o++)r=Wc(r,e[o].hostAttrs,t);return Wc(r,n.attrs,t)}(e,n,r)}return void 0!==o&&(r?n.residualClasses=o:n.residualStyles=o),t}(i,o,n,r),function JM(e,n,t,r,i,o){let s=o?n.classBindings:n.styleBindings,a=Di(s),d=uo(s);e[r]=t;let m,h=!1;if(Array.isArray(t)){const b=t;m=b[1],(null===m||ma(b,m)>0)&&(h=!0)}else m=t;if(i)if(0!==d){const R=Di(e[a+1]);e[r+1]=Iu(R,a),0!==R&&(e[R+1]=Jh(e[R+1],r)),e[a+1]=function Px(e,n){return 131071&e|n<<17}(e[a+1],r)}else e[r+1]=Iu(a,0),0!==a&&(e[a+1]=Jh(e[a+1],r)),a=r;else e[r+1]=Iu(d,0),0===a?a=r:e[d+1]=Jh(e[d+1],r),d=r;h&&(e[r+1]=Kh(e[r+1])),Ny(e,m,r,!0),Ny(e,m,r,!1),function YM(e,n,t,r,i){const o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof n&&ma(o,n)>=0&&(t[r+1]=Yh(t[r+1]))}(n,m,e,r,o),s=Iu(a,d),o?n.classBindings=s:n.styleBindings=s}(i,o,n,t,s,r)}}function Ep(e,n,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=n[a],r=Wc(r,o.hostAttrs,i),o!==e);)a++;return null!==e&&(t.directiveStylingLast=a),r}function Wc(e,n,t){const r=t?1:2;let i=-1;if(null!==n)for(let o=0;o<n.length;o++){const s=n[o];"number"==typeof s?i=s:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Jr(e,s,!!t||n[++o]))}return void 0===e?null:e}function By(e,n,t,r,i,o,s,a){if(!(3&n.type))return;const d=e.data,h=d[a+1];Vu(function Fv(e){return 1==(1&e)}(h)?Vy(d,n,t,i,uo(h),s):void 0)||(Vu(o)||function Mv(e){return 2==(2&e)}(h)&&(o=Vy(d,null,t,i,a,s)),function oN(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:Pr.DashCase;null==i?e.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Pr.Important),e.setStyle(t,r,i,o))}}(r,s,iu(br(),t),i,o))}function Vy(e,n,t,r,i,o){const s=null===n;let a;for(;i>0;){const d=e[i],h=Array.isArray(d),m=h?d[1]:d,b=null===m;let R=t[i+1];R===at&&(R=b?yt:void 0);let V=b?ih(R,r):m===r?R:void 0;if(h&&!Vu(V)&&(V=ih(d,r)),Vu(V)&&(a=V,s))return a;const Q=e[i+1];i=s?Di(Q):uo(Q)}if(null!==n){let d=o?n.residualClasses:n.residualStyles;null!=d&&(a=ih(d,r))}return a}function Vu(e){return void 0!==e}function jy(e,n){return 0!=(e.flags&(n?8:16))}function Ve(e,n=""){const t=ve(),r=Tt(),i=e+22,o=r.firstCreatePass?Sa(r,i,1,n,null):r.data[i],s=t[i]=function _h(e,n){return e.createText(n)}(t[11],n);vu(r,t,s,o),Vi(o,!1)}function ko(e){return Kt("",e,""),ko}function Kt(e,n,t){const r=ve(),i=Ta(r,e,n,t);return i!==at&&function fo(e,n,t){const r=iu(n,e);!function T0(e,n,t){e.setValue(n,t)}(e[11],r,t)}(r,br(),i),Kt}function ka(e,n,t){const r=ve();return lr(r,sa(),n)&&Yr(Tt(),un(),r,e,n,r[11],t,!0),ka}const ys=void 0;var FF=["en",[["a","p"],["AM","PM"],ys],[["AM","PM"],ys,ys],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ys,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ys,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ys,"{1} 'at' {0}",ys],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function MF(e){const t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let Pa={};function Sr(e){const n=function AF(e){return e.toLowerCase().replace(/_/g,"-")}(e);let t=sb(n);if(t)return t;const r=n.split("-")[0];if(t=sb(r),t)return t;if("en"===r)return FF;throw new be(701,!1)}function sb(e){return e in Pa||(Pa[e]=me.ng&&me.ng.common&&me.ng.common.locales&&me.ng.common.locales[e]),Pa[e]}var Pe=(()=>((Pe=Pe||{})[Pe.LocaleId=0]="LocaleId",Pe[Pe.DayPeriodsFormat=1]="DayPeriodsFormat",Pe[Pe.DayPeriodsStandalone=2]="DayPeriodsStandalone",Pe[Pe.DaysFormat=3]="DaysFormat",Pe[Pe.DaysStandalone=4]="DaysStandalone",Pe[Pe.MonthsFormat=5]="MonthsFormat",Pe[Pe.MonthsStandalone=6]="MonthsStandalone",Pe[Pe.Eras=7]="Eras",Pe[Pe.FirstDayOfWeek=8]="FirstDayOfWeek",Pe[Pe.WeekendRange=9]="WeekendRange",Pe[Pe.DateFormat=10]="DateFormat",Pe[Pe.TimeFormat=11]="TimeFormat",Pe[Pe.DateTimeFormat=12]="DateTimeFormat",Pe[Pe.NumberSymbols=13]="NumberSymbols",Pe[Pe.NumberFormats=14]="NumberFormats",Pe[Pe.CurrencyCode=15]="CurrencyCode",Pe[Pe.CurrencySymbol=16]="CurrencySymbol",Pe[Pe.CurrencyName=17]="CurrencyName",Pe[Pe.Currencies=18]="Currencies",Pe[Pe.Directionality=19]="Directionality",Pe[Pe.PluralCase=20]="PluralCase",Pe[Pe.ExtraData=21]="ExtraData",Pe))();const La="en-US";let ab=La;function xp(e,n,t,r,i){if(e=We(e),Array.isArray(e))for(let o=0;o<e.length;o++)xp(e[o],n,t,r,i);else{const o=Tt(),s=ve();let a=gs(e)?e:We(e.provide),d=cv(e);const h=Xn(),m=1048575&h.providerIndexes,b=h.directiveStart,R=h.providerIndexes>>20;if(gs(e)||!e.multi){const V=new wc(d,i,ne),Q=Fp(a,n,i?m:m+R,b);-1===Q?(eh(uu(h,s),o,a),Mp(o,e,n.length),n.push(a),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),t.push(V),s.push(V)):(t[Q]=V,s[Q]=V)}else{const V=Fp(a,n,m+R,b),Q=Fp(a,n,m,m+R),re=V>=0&&t[V],le=Q>=0&&t[Q];if(i&&!le||!i&&!re){eh(uu(h,s),o,a);const pe=function IA(e,n,t,r,i){const o=new wc(e,t,ne);return o.multi=[],o.index=n,o.componentProviders=0,Ab(o,i,r&&!t),o}(i?TA:EA,t.length,i,r,d);!i&&le&&(t[Q].providerFactory=pe),Mp(o,e,n.length,0),n.push(a),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),t.push(pe),s.push(pe)}else Mp(o,e,V>-1?V:Q,Ab(t[i?Q:V],d,!i&&r));!i&&r&&le&&t[Q].componentProviders++}}}function Mp(e,n,t,r){const i=gs(n),o=function PN(e){return!!e.useClass}(n);if(i||o){const d=(o?We(n.useClass):n).prototype.ngOnDestroy;if(d){const h=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){const m=h.indexOf(t);-1===m?h.push(t,[r,d]):h[m+1].push(r,d)}else h.push(t,d)}}}function Ab(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function Fp(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function EA(e,n,t,r){return Ap(this.multi,[])}function TA(e,n,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=la(t,t[1],this.providerFactory.index,r);o=a.slice(0,s),Ap(i,o);for(let d=s;d<a.length;d++)o.push(a[d])}else o=[],Ap(i,o);return o}function Ap(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function Zt(e,n=[]){return t=>{t.providersResolver=(r,i)=>function SA(e,n,t){const r=Tt();if(r.firstCreatePass){const i=yi(e);xp(t,r.data,r.blueprint,i,!0),xp(n,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,n)}}class bs{}class Rb{}class Ob extends bs{constructor(n,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _p(this);const r=Gr(n);this._bootstrapComponents=lo(r.bootstrap),this._r3Injector=Dv(n,t,[{provide:bs,useValue:this},{provide:Lc,useValue:this.componentFactoryResolver}],Xe(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Rp extends Rb{constructor(n){super(),this.moduleType=n}create(n){return new Ob(this.moduleType,n)}}class xA extends bs{constructor(n,t,r){super(),this.componentFactoryResolver=new _p(this),this.instance=null;const i=new av([...n,{provide:bs,useValue:this},{provide:Lc,useValue:this.componentFactoryResolver}],t||Eu(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Gu(e,n,t=null){return new xA(e,n,t).injector}let MA=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=rv(0,t.type),i=r.length>0?Gu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=je({token:e,providedIn:"environment",factory:()=>new e(Ne(co))}),e})();function kb(e){e.getStandaloneInjector=n=>n.get(MA).getOrCreateStandaloneInjector(e)}function Wu(e,n,t){const r=yr()+e,i=ve();return i[r]===at?Ui(i,r,t?n.call(t):n()):function $c(e,n){return e[n]}(i,r)}function Qc(e,n){const t=e[n];return t===at?void 0:t}function $b(e,n,t,r,i,o,s){const a=n+t;return _s(e,a,i,o)?Ui(e,a+2,s?r.call(s,i,o):r(i,o)):Qc(e,a+2)}function Pp(e,n){const t=Tt();let r;const i=e+22;t.firstCreatePass?(r=function WA(e,n){if(n)for(let t=n.length-1;t>=0;t--){const r=n[t];if(e===r.name)return r}}(n,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(i,r.onDestroy)):r=t.data[i];const o=r.factory||(r.factory=us(r.type)),s=ae(ne);try{const a=lu(!1),d=o();return lu(a),function GM(e,n,t,r){t>=e.data.length&&(e.data[t]=null,e.blueprint[t]=null),n[t]=r}(t,ve(),i,d),d}finally{ae(s)}}function qb(e,n,t){const r=e+22,i=ve(),o=oa(i,r);return Zc(i,r)?function Ub(e,n,t,r,i,o){const s=n+t;return lr(e,s,i)?Ui(e,s+1,o?r.call(o,i):r(i)):Qc(e,s+1)}(i,yr(),n,o.transform,t,o):o.transform(t)}function Zc(e,n){return e[1].data[n].pure}function Lp(e){return n=>{setTimeout(e,void 0,n)}}const ct=class JA extends qe{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,r){let i=n,o=t||(()=>null),s=r;if(n&&"object"==typeof n){const d=n;i=d.next?.bind(d),o=d.error?.bind(d),s=d.complete?.bind(d)}this.__isAsync&&(o=Lp(o),i&&(i=Lp(i)),s&&(s=Lp(s)));const a=super.subscribe({next:i,error:o,complete:s});return n instanceof D&&n.add(a),a}};function YA(){return this._results[ms()]()}class Bp{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=ms(),r=Bp.prototype;r[t]||(r[t]=YA)}get changes(){return this._changes||(this._changes=new ct)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){const r=this;r.dirty=!1;const i=Kr(n);(this._changesDetected=!function cI(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let bn=(()=>{class e{}return e.__NG_ELEMENT_ID__=XA,e})();const QA=bn,ZA=class extends QA{constructor(n,t,r){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(n,t){const r=this._declarationTContainer.tViews,i=Mu(this._declarationLView,r,n,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(r)),op(r,i,n),new jc(i)}};function XA(){return qu(Xn(),ve())}function qu(e,n){return 4&e.type?new ZA(n,e,ba(e,n)):null}let Ti=(()=>{class e{}return e.__NG_ELEMENT_ID__=eR,e})();function eR(){return Qb(Xn(),ve())}const tR=Ti,Jb=class extends tR{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return ba(this._hostTNode,this._hostLView)}get injector(){return new ua(this._hostTNode,this._hostLView)}get parentInjector(){const n=du(this._hostTNode,this._hostLView);if($_(n)){const t=ca(n,this._hostLView),r=aa(n);return new ua(t[1].data[r+8],t)}return new ua(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=Yb(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=n.createEmbeddedView(t||{},o);return this.insert(s,i),s}createComponent(n,t,r,i,o){const s=n&&!function Ec(e){return"function"==typeof e}(n);let a;if(s)a=t;else{const b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}const d=s?n:new Hc(Ft(n)),h=r||this.parentInjector;if(!o&&null==d.ngModule){const R=(s?h:this.parentInjector).get(co,null);R&&(o=R)}const m=d.create(h,i,void 0,o);return this.insert(m.hostView,a),m}insert(n,t){const r=n._lView,i=r[1];if(function xT(e){return vi(e[3])}(r)){const m=this.indexOf(n);if(-1!==m)this.detach(m);else{const b=r[3],R=new Jb(b,b[6],b[3]);R.detach(R.indexOf(n))}}const o=this._adjustIndex(t),s=this._lContainer;!function QI(e,n,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=n),r<o-10?(n[4]=t[i],e0(t,10+r,n)):(t.push(n),n[4]=null),n[3]=t;const s=n[17];null!==s&&t!==s&&function ZI(e,n){const t=e[9];n[16]!==n[3][3][16]&&(e[2]=!0),null===t?e[9]=[n]:t.push(n)}(s,n);const a=n[19];null!==a&&a.insertView(e),n[2]|=64}(i,r,s,o);const a=Dh(o,s),d=r[11],h=_u(d,s[7]);return null!==h&&function KI(e,n,t,r,i,o){r[0]=i,r[6]=n,Rc(e,r,t,1,i,o)}(i,s[6],d,r,h,a),n.attachToViewContainerRef(),e0(Vp(s),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=Yb(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=yh(this._lContainer,t);r&&(hu(Vp(this._lContainer),t),N0(r[1],r))}detach(n){const t=this._adjustIndex(n,-1),r=yh(this._lContainer,t);return r&&null!=hu(Vp(this._lContainer),t)?new jc(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function Yb(e){return e[8]}function Vp(e){return e[8]||(e[8]=[])}function Qb(e,n){let t;const r=n[e.index];if(vi(r))t=r;else{let i;if(8&e.type)i=xn(r);else{const o=n[11];i=o.createComment("");const s=zr(e,n);hs(o,_u(o,s),i,function nN(e,n){return e.nextSibling(n)}(o,s),!1)}n[e.index]=t=Kv(r,n,i,e),Au(n,t)}return new Jb(t,e,n)}class jp{constructor(n){this.queryList=n,this.matches=null}clone(){return new jp(this.queryList)}setDirty(){this.queryList.setDirty()}}class Hp{constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const r=null!==n.contentQueries?n.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const s=t.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new Hp(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==n1(n,t).matches&&this.queries[t].setDirty()}}class Zb{constructor(n,t,r=null){this.predicate=n,this.flags=t,this.read=r}}class Up{constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(n,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new Up(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class $p{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new $p(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(n,t,iR(t,o)),this.matchTNodeWithReadOption(n,t,fu(t,n,o,!1,!1))}else r===bn?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,fu(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Qt||i===Ti||i===bn&&4&t.type)this.addMatch(t.index,-2);else{const o=fu(t,n,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function iR(e,n){const t=e.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1];return null}function sR(e,n,t,r){return-1===t?function oR(e,n){return 11&e.type?ba(e,n):4&e.type?qu(e,n):null}(n,e):-2===t?function aR(e,n,t){return t===Qt?ba(n,e):t===bn?qu(n,e):t===Ti?Qb(n,e):void 0}(e,n,r):la(e,e[1],t,n)}function Xb(e,n,t,r){const i=n[19].queries[r];if(null===i.matches){const o=e.data,s=t.matches,a=[];for(let d=0;d<s.length;d+=2){const h=s[d];a.push(h<0?null:sR(n,o[h],s[d+1],t.metadata.read))}i.matches=a}return i.matches}function Gp(e,n,t,r){const i=e.queries.getByIndex(t),o=i.matches;if(null!==o){const s=Xb(e,n,i,t);for(let a=0;a<o.length;a+=2){const d=o[a];if(d>0)r.push(s[a/2]);else{const h=o[a+1],m=n[-d];for(let b=10;b<m.length;b++){const R=m[b];R[17]===R[3]&&Gp(R[1],R,h,r)}if(null!==m[9]){const b=m[9];for(let R=0;R<b.length;R++){const V=b[R];Gp(V[1],V,h,r)}}}}}return r}function Xt(e){const n=ve(),t=Tt(),r=R_();Wf(r+1);const i=n1(t,r);if(e.dirty&&function NT(e){return 4==(4&e[2])}(n)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const o=i.crossesNgTemplate?Gp(t,n,r,[]):Xb(t,n,i,r);e.reset(o,qN),e.notifyOnChanges()}return!0}return!1}function Va(e,n,t){const r=Tt();r.firstCreatePass&&(t1(r,new Zb(e,n,t),-1),2==(2&n)&&(r.staticViewQueries=!0)),e1(r,ve(),n)}function Fn(e,n,t,r){const i=Tt();if(i.firstCreatePass){const o=Xn();t1(i,new Zb(n,t,r),o.index),function lR(e,n){const t=e.contentQueries||(e.contentQueries=[]);n!==(t.length?t[t.length-1]:-1)&&t.push(e.queries.length-1,n)}(i,e),2==(2&t)&&(i.staticContentQueries=!0)}e1(i,ve(),t)}function en(){return function cR(e,n){return e[19].queries[n].queryList}(ve(),R_())}function e1(e,n,t){const r=new Bp(4==(4&t));Uv(e,n,r,r.destroy),null===n[19]&&(n[19]=new Hp),n[19].queries.push(new jp(r))}function t1(e,n,t){null===e.queries&&(e.queries=new Up),e.queries.track(new $p(n,t))}function n1(e,n){return e.queries.getByIndex(n)}function Wi(e,n){return qu(e,n)}function Ju(...e){}const Yu=new $e("Application Initializer");let Qu=(()=>{class e{constructor(t){this.appInits=t,this.resolve=Ju,this.reject=Ju,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Gc(o))t.push(o);else if(Cp(o)){const s=new Promise((a,d)=>{o.subscribe({complete:a,error:d})});t.push(s)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Ne(Yu,8))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const el=new $e("AppId",{providedIn:"root",factory:function w1(){return`${Jp()}${Jp()}${Jp()}`}});function Jp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const D1=new $e("Platform Initializer"),Zu=new $e("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),C1=new $e("appBootstrapListener");let xR=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const ho=new $e("LocaleId",{providedIn:"root",factory:()=>ut(ho,z.Optional|z.SkipSelf)||function MR(){return typeof $localize<"u"&&$localize.locale||La}()});class AR{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let Yp=(()=>{class e{compileModuleSync(t){return new Rp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=lo(Gr(t).declarations).reduce((s,a)=>{const d=Ft(a);return d&&s.push(new Hc(d)),s},[]);return new AR(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const kR=(()=>Promise.resolve(0))();function Qp(e){typeof Zone>"u"?kR.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class $t{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ct(!1),this.onMicrotaskEmpty=new ct(!1),this.onStable=new ct(!1),this.onError=new ct(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function PR(){let e=me.requestAnimationFrame,n=me.cancelAnimationFrame;if(typeof Zone<"u"&&e&&n){const t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function VR(e){const n=()=>{!function BR(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(me,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Xp(e),e.isCheckStableRunning=!0,Zp(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Xp(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{try{return T1(e),t.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&n(),I1(e)}},onInvoke:(t,r,i,o,s,a,d)=>{try{return T1(e),t.invoke(i,o,s,a,d)}finally{e.shouldCoalesceRunChangeDetection&&n(),I1(e)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,Xp(e),Zp(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$t.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if($t.isInAngularZone())throw new be(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,n,LR,Ju,Ju);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const LR={};function Zp(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Xp(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function T1(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function I1(e){e._nesting--,Zp(e)}class jR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ct,this.onMicrotaskEmpty=new ct,this.onStable=new ct,this.onError=new ct}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}}const N1=new $e(""),Xu=new $e("");let ng,eg=(()=>{class e{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ng||(function HR(e){ng=e}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$t.assertNotInAngularZone(),Qp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Qp(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return e.\u0275fac=function(t){return new(t||e)(Ne($t),Ne(tg),Ne(Xu))},e.\u0275prov=je({token:e,factory:e.\u0275fac}),e})(),tg=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return ng?.findTestabilityInTree(this,t,r)??null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),Lo=null;const x1=new $e("AllowMultipleToken"),rg=new $e("PlatformDestroyListeners");class M1{constructor(n,t){this.name=n,this.token=t}}function A1(e,n,t=[]){const r=`Platform: ${n}`,i=new $e(r);return(o=[])=>{let s=ig();if(!s||s.injector.get(x1,!1)){const a=[...t,...o,{provide:i,useValue:!0}];e?e(a):function GR(e){if(Lo&&!Lo.get(x1,!1))throw new be(400,!1);Lo=e;const n=e.get(O1);(function F1(e){const n=e.get(D1,null);n&&n.forEach(t=>t())})(e)}(function R1(e=[],n){return Dr.create({name:n,providers:[{provide:kh,useValue:"platform"},{provide:rg,useValue:new Set([()=>Lo=null])},...e]})}(a,r))}return function zR(e){const n=ig();if(!n)throw new be(401,!1);return n}()}}function ig(){return Lo?.get(O1)??null}let O1=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function P1(e,n){let t;return t="noop"===e?new jR:("zone.js"===e?void 0:e)||new $t(n),t}(r?.ngZone,function k1(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:$t,useValue:i}];return i.run(()=>{const s=Dr.create({providers:o,parent:this.injector,name:t.moduleType.name}),a=t.create(s),d=a.injector.get(wa,null);if(!d)throw new be(402,!1);return i.runOutsideAngular(()=>{const h=i.onError.subscribe({next:m=>{d.handleError(m)}});a.onDestroy(()=>{ed(this._modules,a),h.unsubscribe()})}),function L1(e,n,t){try{const r=t();return Gc(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}(d,i,()=>{const h=a.injector.get(Qu);return h.runInitializers(),h.donePromise.then(()=>(function cb(e){hr(e,"Expected localeId to be defined"),"string"==typeof e&&(ab=e.toLowerCase().replace(/_/g,"-"))}(a.injector.get(ho,La)||La),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=B1({},r);return function UR(e,n,t){const r=new Rp(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(tl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new be(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(rg,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Ne(Dr))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function B1(e,n){return Array.isArray(n)?n.reduce(B1,e):{...e,...n}}let tl=(()=>{class e{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Se(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new Se(a=>{let d;this._zone.runOutsideAngular(()=>{d=this._zone.onStable.subscribe(()=>{$t.assertNotInAngularZone(),Qp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const h=this._zone.onUnstable.subscribe(()=>{$t.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{d.unsubscribe(),h.unsubscribe()}});this.isStable=function Wn(...e){let n=Number.POSITIVE_INFINITY,t=null,r=e[e.length-1];return jt(r)?(t=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof r&&(n=e.pop()),null===t&&1===e.length&&e[0]instanceof Se?e[0]:Zi(n)(et(e,t))}(o,s.pipe(function Ys(){return e=>St()(function Ql(e,n){return function(r){let i;if(i="function"==typeof e?e:function(){return e},"function"==typeof n)return r.lift(new Js(i,n));const o=Object.create(r,es);return o.source=r,o.subjectFactory=i,o}}(pi)(e))}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof lv;if(!this._injector.get(Qu).done)throw!i&&function ta(e){const n=Ft(e)||ir(e)||_r(e);return null!==n&&n.standalone}(t),new be(405,false);let s;s=i?t:this._injector.get(Lc).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function $R(e){return e.isBoundToModule}(s)?void 0:this._injector.get(bs),h=s.create(Dr.NULL,[],r||s.selector,a),m=h.location.nativeElement,b=h.injector.get(N1,null);return b?.registerApplication(m),h.onDestroy(()=>{this.detachView(h.hostView),ed(this.components,h),b?.unregisterApplication(m)}),this._loadComponent(h),h}tick(){if(this._runningTick)throw new be(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;ed(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(C1,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ed(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new be(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(t){return new(t||e)(Ne($t),Ne(co),Ne(wa))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function ed(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}let go=(()=>{class e{}return e.__NG_ELEMENT_ID__=KR,e})();function KR(e){return function JR(e,n,t){if(nu(e)&&!t){const r=qr(e.index,n);return new jc(r,r)}return 47&e.type?new jc(n[16],n):null}(Xn(),ve(),16==(16&e))}class $1{constructor(){}supports(n){return Uc(n)}create(n){return new tO(n)}}const eO=(e,n)=>n;class tO{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||eO}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<W1(r,i,o)?t:r,a=W1(s,i,o),d=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const h=a-i,m=d-i;if(h!=m){for(let R=0;R<h;R++){const V=R<o.length?o[R]:o[R]=0,Q=V+R;m<=Q&&Q<h&&(o[R]=V+1)}o[s.previousIndex]=m-h}}a!==d&&n(s,a,d)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!Uc(n))throw new be(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)o=n[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function jM(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[ms()]();let r;for(;!(r=t.next()).done;)n(r.value)}}(n,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,r,i){let o;return null===n?o=this._itTail:(o=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,o,i)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,o,i)):n=this._addAfter(new nO(t,r),o,i),n}_verifyReinsertion(n,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?n=this._reinsertAfter(o,n._prev,i):n.currentIndex!=i&&(n.currentIndex=i,this._addToMoves(n,i)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const i=n._prevRemoved,o=n._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(n,t,r),this._addToMoves(n,r),n}_moveAfter(n,t,r){return this._unlink(n),this._insertAfter(n,t,r),this._addToMoves(n,r),n}_addAfter(n,t,r){return this._insertAfter(n,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,r){const i=null===t?this._itHead:t._next;return n._next=i,n._prev=t,null===i?this._itTail=n:i._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new G1),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,r=n._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new G1),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class nO{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rO{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const t=n._prevDup,r=n._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class G1{constructor(){this.map=new Map}put(n){const t=n.trackById;let r=this.map.get(t);r||(r=new rO,this.map.set(t,r)),r.add(n)}get(n,t){const i=this.map.get(n);return i?i.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function W1(e,n,t){const r=e.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+n+i}class z1{constructor(){}supports(n){return n instanceof Map||yp(n)}create(){return new iO}}class iO{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let t;for(t=this._mapHead;null!==t;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}diff(n){if(n){if(!(n instanceof Map||yp(n)))throw new be(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){const r=n._prev;return t._next=n,t._prev=r,n._prev=t,r&&(r._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){const i=this._records.get(n);this._maybeAddToChanges(i,t);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new oO(n);return this._records.set(n,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(r=>t(n[r],r))}}class oO{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function q1(){return new rd([new $1])}let rd=(()=>{class e{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||q1()),deps:[[e,new Nc,new Ic]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new be(901,!1)}}return e.\u0275prov=je({token:e,providedIn:"root",factory:q1}),e})();function K1(){return new nl([new z1])}let nl=(()=>{class e{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||K1()),deps:[[e,new Nc,new Ic]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new be(901,!1)}}return e.\u0275prov=je({token:e,providedIn:"root",factory:K1}),e})();const cO=A1(null,"core",[]);let lO=(()=>{class e{constructor(t){}}return e.\u0275fac=function(t){return new(t||e)(Ne(tl))},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({}),e})();function Ua(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function lg(e,n){const t=Ft(e),r=n.elementInjector||Eu();return new Hc(t).create(r,n.projectableNodes,n.hostElement,n.environmentInjector)}let id=null;function zi(){return id}class fO{}const Cn=new $e("DocumentToken");let ug=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=je({token:e,factory:function(){return function hO(){return Ne(J1)}()},providedIn:"platform"}),e})();const pO=new $e("Location Initialized");let J1=(()=>{class e extends ug{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return zi().getBaseHref(this._doc)}onPopState(t){const r=zi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=zi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Y1()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Y1()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Ne(Cn))},e.\u0275prov=je({token:e,factory:function(){return function gO(){return new J1(Ne(Cn))}()},providedIn:"platform"}),e})();function Y1(){return!!window.history.pushState}function dg(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function Q1(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function mo(e){return e&&"?"!==e[0]?"?"+e:e}let Ds=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=je({token:e,factory:function(){return ut(X1)},providedIn:"root"}),e})();const Z1=new $e("appBaseHref");let X1=(()=>{class e extends Ds{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ut(Cn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return dg(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+mo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+mo(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+mo(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Ne(ug),Ne(Z1,8))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),mO=(()=>{class e extends Ds{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=dg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+mo(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+mo(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Ne(ug),Ne(Z1,8))},e.\u0275prov=je({token:e,factory:e.\u0275fac}),e})(),fg=(()=>{class e{constructor(t){this._subject=new ct,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Q1(ew(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+mo(r))}normalize(t){return e.stripTrailingSlash(function vO(e,n){return e&&n.startsWith(e)?n.substring(e.length):n}(this._baseHref,ew(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return e.normalizeQueryParams=mo,e.joinWithSlash=dg,e.stripTrailingSlash=Q1,e.\u0275fac=function(t){return new(t||e)(Ne(Ds))},e.\u0275prov=je({token:e,factory:function(){return function _O(){return new fg(Ne(Ds))}()},providedIn:"root"}),e})();function ew(e){return e.replace(/\/index.html$/,"")}var Sn=(()=>((Sn=Sn||{})[Sn.Format=0]="Format",Sn[Sn.Standalone=1]="Standalone",Sn))(),bt=(()=>((bt=bt||{})[bt.Narrow=0]="Narrow",bt[bt.Abbreviated=1]="Abbreviated",bt[bt.Wide=2]="Wide",bt[bt.Short=3]="Short",bt))(),dn=(()=>((dn=dn||{})[dn.Short=0]="Short",dn[dn.Medium=1]="Medium",dn[dn.Long=2]="Long",dn[dn.Full=3]="Full",dn))(),tt=(()=>((tt=tt||{})[tt.Decimal=0]="Decimal",tt[tt.Group=1]="Group",tt[tt.List=2]="List",tt[tt.PercentSign=3]="PercentSign",tt[tt.PlusSign=4]="PlusSign",tt[tt.MinusSign=5]="MinusSign",tt[tt.Exponential=6]="Exponential",tt[tt.SuperscriptingExponent=7]="SuperscriptingExponent",tt[tt.PerMille=8]="PerMille",tt[tt.Infinity=9]="Infinity",tt[tt.NaN=10]="NaN",tt[tt.TimeSeparator=11]="TimeSeparator",tt[tt.CurrencyDecimal=12]="CurrencyDecimal",tt[tt.CurrencyGroup=13]="CurrencyGroup",tt))();function od(e,n){return ci(Sr(e)[Pe.DateFormat],n)}function sd(e,n){return ci(Sr(e)[Pe.TimeFormat],n)}function ad(e,n){return ci(Sr(e)[Pe.DateTimeFormat],n)}function ai(e,n){const t=Sr(e),r=t[Pe.NumberSymbols][n];if(typeof r>"u"){if(n===tt.CurrencyDecimal)return t[Pe.NumberSymbols][tt.Decimal];if(n===tt.CurrencyGroup)return t[Pe.NumberSymbols][tt.Group]}return r}function nw(e){if(!e[Pe.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[Pe.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ci(e,n){for(let t=n;t>-1;t--)if(typeof e[t]<"u")return e[t];throw new Error("Locale data API: locale data undefined")}function pg(e){const[n,t]=e.split(":");return{hours:+n,minutes:+t}}const FO=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,rl={},AO=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var jn=(()=>((jn=jn||{})[jn.Short=0]="Short",jn[jn.ShortGMT=1]="ShortGMT",jn[jn.Long=2]="Long",jn[jn.Extended=3]="Extended",jn))(),nt=(()=>((nt=nt||{})[nt.FullYear=0]="FullYear",nt[nt.Month=1]="Month",nt[nt.Date=2]="Date",nt[nt.Hours=3]="Hours",nt[nt.Minutes=4]="Minutes",nt[nt.Seconds=5]="Seconds",nt[nt.FractionalSeconds=6]="FractionalSeconds",nt[nt.Day=7]="Day",nt))(),ft=(()=>((ft=ft||{})[ft.DayPeriods=0]="DayPeriods",ft[ft.Days=1]="Days",ft[ft.Months=2]="Months",ft[ft.Eras=3]="Eras",ft))();function RO(e,n,t,r){let i=function UO(e){if(ow(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[i,o=1,s=1]=e.split("-").map(a=>+a);return cd(i,o-1,s)}const t=parseFloat(e);if(!isNaN(e-t))return new Date(t);let r;if(r=e.match(FO))return function $O(e){const n=new Date(0);let t=0,r=0;const i=e[8]?n.setUTCFullYear:n.setFullYear,o=e[8]?n.setUTCHours:n.setHours;e[9]&&(t=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(n,Number(e[1]),Number(e[2])-1,Number(e[3]));const s=Number(e[4]||0)-t,a=Number(e[5]||0)-r,d=Number(e[6]||0),h=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return o.call(n,s,a,d,h),n}(r)}const n=new Date(e);if(!ow(n))throw new Error(`Unable to convert "${e}" into a date`);return n}(e);n=_o(t,n)||n;let a,s=[];for(;n;){if(a=AO.exec(n),!a){s.push(n);break}{s=s.concat(a.slice(1));const m=s.pop();if(!m)break;n=m}}let d=i.getTimezoneOffset();r&&(d=iw(r,d),i=function HO(e,n,t){const r=t?-1:1,i=e.getTimezoneOffset();return function jO(e,n){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+n),e}(e,r*(iw(n,i)-i))}(i,r,!0));let h="";return s.forEach(m=>{const b=function VO(e){if(mg[e])return mg[e];let n;switch(e){case"G":case"GG":case"GGG":n=Jt(ft.Eras,bt.Abbreviated);break;case"GGGG":n=Jt(ft.Eras,bt.Wide);break;case"GGGGG":n=Jt(ft.Eras,bt.Narrow);break;case"y":n=Rn(nt.FullYear,1,0,!1,!0);break;case"yy":n=Rn(nt.FullYear,2,0,!0,!0);break;case"yyy":n=Rn(nt.FullYear,3,0,!1,!0);break;case"yyyy":n=Rn(nt.FullYear,4,0,!1,!0);break;case"Y":n=fd(1);break;case"YY":n=fd(2,!0);break;case"YYY":n=fd(3);break;case"YYYY":n=fd(4);break;case"M":case"L":n=Rn(nt.Month,1,1);break;case"MM":case"LL":n=Rn(nt.Month,2,1);break;case"MMM":n=Jt(ft.Months,bt.Abbreviated);break;case"MMMM":n=Jt(ft.Months,bt.Wide);break;case"MMMMM":n=Jt(ft.Months,bt.Narrow);break;case"LLL":n=Jt(ft.Months,bt.Abbreviated,Sn.Standalone);break;case"LLLL":n=Jt(ft.Months,bt.Wide,Sn.Standalone);break;case"LLLLL":n=Jt(ft.Months,bt.Narrow,Sn.Standalone);break;case"w":n=gg(1);break;case"ww":n=gg(2);break;case"W":n=gg(1,!0);break;case"d":n=Rn(nt.Date,1);break;case"dd":n=Rn(nt.Date,2);break;case"c":case"cc":n=Rn(nt.Day,1);break;case"ccc":n=Jt(ft.Days,bt.Abbreviated,Sn.Standalone);break;case"cccc":n=Jt(ft.Days,bt.Wide,Sn.Standalone);break;case"ccccc":n=Jt(ft.Days,bt.Narrow,Sn.Standalone);break;case"cccccc":n=Jt(ft.Days,bt.Short,Sn.Standalone);break;case"E":case"EE":case"EEE":n=Jt(ft.Days,bt.Abbreviated);break;case"EEEE":n=Jt(ft.Days,bt.Wide);break;case"EEEEE":n=Jt(ft.Days,bt.Narrow);break;case"EEEEEE":n=Jt(ft.Days,bt.Short);break;case"a":case"aa":case"aaa":n=Jt(ft.DayPeriods,bt.Abbreviated);break;case"aaaa":n=Jt(ft.DayPeriods,bt.Wide);break;case"aaaaa":n=Jt(ft.DayPeriods,bt.Narrow);break;case"b":case"bb":case"bbb":n=Jt(ft.DayPeriods,bt.Abbreviated,Sn.Standalone,!0);break;case"bbbb":n=Jt(ft.DayPeriods,bt.Wide,Sn.Standalone,!0);break;case"bbbbb":n=Jt(ft.DayPeriods,bt.Narrow,Sn.Standalone,!0);break;case"B":case"BB":case"BBB":n=Jt(ft.DayPeriods,bt.Abbreviated,Sn.Format,!0);break;case"BBBB":n=Jt(ft.DayPeriods,bt.Wide,Sn.Format,!0);break;case"BBBBB":n=Jt(ft.DayPeriods,bt.Narrow,Sn.Format,!0);break;case"h":n=Rn(nt.Hours,1,-12);break;case"hh":n=Rn(nt.Hours,2,-12);break;case"H":n=Rn(nt.Hours,1);break;case"HH":n=Rn(nt.Hours,2);break;case"m":n=Rn(nt.Minutes,1);break;case"mm":n=Rn(nt.Minutes,2);break;case"s":n=Rn(nt.Seconds,1);break;case"ss":n=Rn(nt.Seconds,2);break;case"S":n=Rn(nt.FractionalSeconds,1);break;case"SS":n=Rn(nt.FractionalSeconds,2);break;case"SSS":n=Rn(nt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":n=ud(jn.Short);break;case"ZZZZZ":n=ud(jn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=ud(jn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":n=ud(jn.Long);break;default:return null}return mg[e]=n,n}(m);h+=b?b(i,t,d):"''"===m?"'":m.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}function cd(e,n,t){const r=new Date(0);return r.setFullYear(e,n,t),r.setHours(0,0,0),r}function _o(e,n){const t=function yO(e){return Sr(e)[Pe.LocaleId]}(e);if(rl[t]=rl[t]||{},rl[t][n])return rl[t][n];let r="";switch(n){case"shortDate":r=od(e,dn.Short);break;case"mediumDate":r=od(e,dn.Medium);break;case"longDate":r=od(e,dn.Long);break;case"fullDate":r=od(e,dn.Full);break;case"shortTime":r=sd(e,dn.Short);break;case"mediumTime":r=sd(e,dn.Medium);break;case"longTime":r=sd(e,dn.Long);break;case"fullTime":r=sd(e,dn.Full);break;case"short":const i=_o(e,"shortTime"),o=_o(e,"shortDate");r=ld(ad(e,dn.Short),[i,o]);break;case"medium":const s=_o(e,"mediumTime"),a=_o(e,"mediumDate");r=ld(ad(e,dn.Medium),[s,a]);break;case"long":const d=_o(e,"longTime"),h=_o(e,"longDate");r=ld(ad(e,dn.Long),[d,h]);break;case"full":const m=_o(e,"fullTime"),b=_o(e,"fullDate");r=ld(ad(e,dn.Full),[m,b])}return r&&(rl[t][n]=r),r}function ld(e,n){return n&&(e=e.replace(/\{([^}]+)}/g,function(t,r){return null!=n&&r in n?n[r]:t})),e}function Ni(e,n,t="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=1-e:(e=-e,o=t));let s=String(e);for(;s.length<n;)s="0"+s;return r&&(s=s.slice(s.length-n)),o+s}function Rn(e,n,t=0,r=!1,i=!1){return function(o,s){let a=function kO(e,n){switch(e){case nt.FullYear:return n.getFullYear();case nt.Month:return n.getMonth();case nt.Date:return n.getDate();case nt.Hours:return n.getHours();case nt.Minutes:return n.getMinutes();case nt.Seconds:return n.getSeconds();case nt.FractionalSeconds:return n.getMilliseconds();case nt.Day:return n.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,o);if((t>0||a>-t)&&(a+=t),e===nt.Hours)0===a&&-12===t&&(a=12);else if(e===nt.FractionalSeconds)return function OO(e,n){return Ni(e,3).substring(0,n)}(a,n);const d=ai(s,tt.MinusSign);return Ni(a,n,d,r,i)}}function Jt(e,n,t=Sn.Format,r=!1){return function(i,o){return function PO(e,n,t,r,i,o){switch(t){case ft.Months:return function DO(e,n,t){const r=Sr(e),o=ci([r[Pe.MonthsFormat],r[Pe.MonthsStandalone]],n);return ci(o,t)}(n,i,r)[e.getMonth()];case ft.Days:return function wO(e,n,t){const r=Sr(e),o=ci([r[Pe.DaysFormat],r[Pe.DaysStandalone]],n);return ci(o,t)}(n,i,r)[e.getDay()];case ft.DayPeriods:const s=e.getHours(),a=e.getMinutes();if(o){const h=function TO(e){const n=Sr(e);return nw(n),(n[Pe.ExtraData][2]||[]).map(r=>"string"==typeof r?pg(r):[pg(r[0]),pg(r[1])])}(n),m=function IO(e,n,t){const r=Sr(e);nw(r);const o=ci([r[Pe.ExtraData][0],r[Pe.ExtraData][1]],n)||[];return ci(o,t)||[]}(n,i,r),b=h.findIndex(R=>{if(Array.isArray(R)){const[V,Q]=R,re=s>=V.hours&&a>=V.minutes,le=s<Q.hours||s===Q.hours&&a<Q.minutes;if(V.hours<Q.hours){if(re&&le)return!0}else if(re||le)return!0}else if(R.hours===s&&R.minutes===a)return!0;return!1});if(-1!==b)return m[b]}return function bO(e,n,t){const r=Sr(e),o=ci([r[Pe.DayPeriodsFormat],r[Pe.DayPeriodsStandalone]],n);return ci(o,t)}(n,i,r)[s<12?0:1];case ft.Eras:return function CO(e,n){return ci(Sr(e)[Pe.Eras],n)}(n,r)[e.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,o,e,n,t,r)}}function ud(e){return function(n,t,r){const i=-1*r,o=ai(t,tt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case jn.Short:return(i>=0?"+":"")+Ni(s,2,o)+Ni(Math.abs(i%60),2,o);case jn.ShortGMT:return"GMT"+(i>=0?"+":"")+Ni(s,1,o);case jn.Long:return"GMT"+(i>=0?"+":"")+Ni(s,2,o)+":"+Ni(Math.abs(i%60),2,o);case jn.Extended:return 0===r?"Z":(i>=0?"+":"")+Ni(s,2,o)+":"+Ni(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${e}"`)}}}function rw(e){return cd(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function gg(e,n=!1){return function(t,r){let i;if(n){const o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{const o=rw(t),s=function BO(e){const n=cd(e,0,1).getDay();return cd(e,0,1+(n<=4?4:11)-n)}(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Ni(i,e,ai(r,tt.MinusSign))}}function fd(e,n=!1){return function(t,r){return Ni(rw(t).getFullYear(),e,ai(r,tt.MinusSign),n)}}const mg={};function iw(e,n){e=e.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(t)?n:t}function ow(e){return e instanceof Date&&!isNaN(e.valueOf())}function lw(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}let uw=(()=>{class e{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Uc(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Xe(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return e.\u0275fac=function(t){return new(t||e)(ne(rd),ne(nl),ne(Qt),ne(bi))},e.\u0275dir=Oe({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),e})();class nk{constructor(n,t,r,i){this.$implicit=n,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qr=(()=>{class e{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new nk(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),hw(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{hw(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(ne(Ti),ne(bn),ne(rd))},e.\u0275dir=Oe({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function hw(e,n){e.context.$implicit=n.item}let On=(()=>{class e{constructor(t,r){this._viewContainer=t,this._context=new ik,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pw("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pw("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(ne(Ti),ne(bn))},e.\u0275dir=Oe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class ik{constructor(){this.$implicit=null,this.ngIf=null}}function pw(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Xe(n)}'.`)}const yk=new $e("DATE_PIPE_DEFAULT_TIMEZONE"),bk=new $e("DATE_PIPE_DEFAULT_OPTIONS");let mw=(()=>{class e{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(null==t||""===t||t!=t)return null;try{return RO(t,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw function xi(e,n){return new be(2100,!1)}()}}}return e.\u0275fac=function(t){return new(t||e)(ne(ho,16),ne(yk,24),ne(bk,24))},e.\u0275pipe=rr({name:"date",type:e,pure:!0,standalone:!0}),e})(),_w=(()=>{class e{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=vw}transform(t,r=vw){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const i=this.differ.diff(t),o=r!==this.compareFn;return i&&(this.keyValues=[],i.forEachItem(s=>{this.keyValues.push(function Ek(e,n){return{key:e,value:n}}(s.key,s.currentValue))})),(i||o)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}}return e.\u0275fac=function(t){return new(t||e)(ne(nl,16))},e.\u0275pipe=rr({name:"keyvalue",type:e,pure:!1,standalone:!0}),e})();function vw(e,n){const t=e.key,r=n.key;if(t===r)return 0;if(void 0===t)return 1;if(void 0===r)return-1;if(null===t)return 1;if(null===r)return-1;if("string"==typeof t&&"string"==typeof r)return t<r?-1:1;if("number"==typeof t&&"number"==typeof r)return t-r;if("boolean"==typeof t&&"boolean"==typeof r)return t<r?-1:1;const i=String(t),o=String(r);return i==o?0:i<o?-1:1}let Zr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({}),e})();let Ok=(()=>{class e{}return e.\u0275prov=je({token:e,providedIn:"root",factory:()=>new kk(Ne(Cn),window)}),e})();class kk{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function Pk(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=n)}}scrollToElement(n){const t=n.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=bw(this.window.history)||bw(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function bw(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class ww{}class lP extends fO{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ng extends lP{static makeCurrent(){!function dO(e){id||(id=e)}(new Ng)}onAndCancel(n,t,r){return n.addEventListener(t,r,!1),()=>{n.removeEventListener(t,r,!1)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function uP(){return al=al||document.querySelector("base"),al?al.getAttribute("href"):null}();return null==t?null:function dP(e){gd=gd||document.createElement("a"),gd.setAttribute("href",e);const n=gd.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){al=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return lw(document.cookie,n)}}let gd,al=null;const Iw=new $e("TRANSITION_ID"),hP=[{provide:Yu,useFactory:function fP(e,n,t){return()=>{t.get(Qu).donePromise.then(()=>{const r=zi(),i=n.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Iw,Cn,Dr],multi:!0}];let gP=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=je({token:e,factory:e.\u0275fac}),e})();const md=new $e("EventManagerPlugins");let _d=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(t))return this._eventNameToPlugin.set(t,s),s}throw new Error(`No event manager plugin found for event ${t}`)}}return e.\u0275fac=function(t){return new(t||e)(Ne(md),Ne($t))},e.\u0275prov=je({token:e,factory:e.\u0275fac}),e})();class Nw{constructor(n){this._doc=n}addGlobalEventListener(n,t,r){const i=zi().getGlobalEventTarget(this._doc,n);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let xw=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=je({token:e,factory:e.\u0275fac}),e})(),cl=(()=>{class e extends xw{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Mw),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Mw))}}return e.\u0275fac=function(t){return new(t||e)(Ne(Cn))},e.\u0275prov=je({token:e,factory:e.\u0275fac}),e})();function Mw(e){zi().remove(e)}const xg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Mg=/%COMP%/g;function vd(e,n,t){for(let r=0;r<n.length;r++){let i=n[r];Array.isArray(i)?vd(e,i,t):(i=i.replace(Mg,e),t.push(i))}return t}function Rw(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}let Fg=(()=>{class e{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ag(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case an.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new wP(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case an.ShadowDom:return new DP(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=vd(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Ne(_d),Ne(cl),Ne(el))},e.\u0275prov=je({token:e,factory:e.\u0275fac}),e})();class Ag{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?document.createElementNS(xg[t]||t,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,t){(kw(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(kw(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let r="string"==typeof n?document.querySelector(n):n;if(!r)throw new Error(`The selector "${n}" did not match any elements`);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;const o=xg[i];o?n.setAttributeNS(o,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const i=xg[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(Pr.DashCase|Pr.Important)?n.style.setProperty(t,r,i&Pr.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&Pr.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n[t]=r}setValue(n,t){n.nodeValue=t}listen(n,t,r){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,t,Rw(r)):this.eventManager.addEventListener(n,t,Rw(r))}}function kw(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class wP extends Ag{constructor(n,t,r,i){super(n),this.component=r;const o=vd(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function vP(e){return"_ngcontent-%COMP%".replace(Mg,e)}(i+"-"+r.id),this.hostAttr=function yP(e){return"_nghost-%COMP%".replace(Mg,e)}(i+"-"+r.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}class DP extends Ag{constructor(n,t,r,i){super(n),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=vd(i.id,i.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let CP=(()=>{class e extends Nw{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return e.\u0275fac=function(t){return new(t||e)(Ne(Cn))},e.\u0275prov=je({token:e,factory:e.\u0275fac}),e})();const Pw=["alt","control","meta","shift"],SP={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},EP={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let TP=(()=>{class e extends Nw{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,i){const o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Pw.forEach(h=>{const m=r.indexOf(h);m>-1&&(r.splice(m,1),s+=h+".")}),s+=o,0!=r.length||0===o.length)return null;const d={};return d.domEventName=i,d.fullKey=s,d}static matchEventFullKeyCode(t,r){let i=SP[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Pw.forEach(s=>{s!==i&&(0,EP[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{e.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return e.\u0275fac=function(t){return new(t||e)(Ne(Cn))},e.\u0275prov=je({token:e,factory:e.\u0275fac}),e})();const Bw=[{provide:Zu,useValue:"browser"},{provide:D1,useValue:function IP(){Ng.makeCurrent()},multi:!0},{provide:Cn,useFactory:function xP(){return function uN(e){Th=e}(document),document},deps:[]}],MP=A1(cO,"browser",Bw),Vw=new $e(""),jw=[{provide:Xu,useClass:class pP{addToWindow(n){me.getAngularTestability=(r,i=!0)=>{const o=n.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},me.getAllAngularTestabilities=()=>n.getAllTestabilities(),me.getAllAngularRootElements=()=>n.getAllRootElements(),me.frameworkStabilizers||(me.frameworkStabilizers=[]),me.frameworkStabilizers.push(r=>{const i=me.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(d){s=s||d,o--,0==o&&r(s)};i.forEach(function(d){d.whenStable(a)})})}findTestabilityInTree(n,t,r){return null==t?null:n.getTestability(t)??(r?zi().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:N1,useClass:eg,deps:[$t,tg,Xu]},{provide:eg,useClass:eg,deps:[$t,tg,Xu]}],Hw=[{provide:kh,useValue:"root"},{provide:wa,useFactory:function NP(){return new wa},deps:[]},{provide:md,useClass:CP,multi:!0,deps:[Cn,$t,Zu]},{provide:md,useClass:TP,multi:!0,deps:[Cn]},{provide:Fg,useClass:Fg,deps:[_d,cl,el]},{provide:Vh,useExisting:Fg},{provide:xw,useExisting:cl},{provide:cl,useClass:cl,deps:[Cn]},{provide:_d,useClass:_d,deps:[md,$t]},{provide:ww,useClass:gP,deps:[]},[]];let FP=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:el,useValue:t.appId},{provide:Iw,useExisting:el},hP]}}}return e.\u0275fac=function(t){return new(t||e)(Ne(Vw,12))},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({providers:[...Hw,...jw],imports:[Zr,lO]}),e})(),Uw=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return e.\u0275fac=function(t){return new(t||e)(Ne(Cn))},e.\u0275prov=je({token:e,factory:function(t){let r=null;return r=t?new t:function RP(){return new Uw(Ne(Cn))}(),r},providedIn:"root"}),e})();function Ke(...e){let n=e[e.length-1];return jt(n)?(e.pop(),K(e,n)):et(e)}typeof window<"u"&&window;class Yn extends qe{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return t&&!t.closed&&n.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Z;return this._value}next(n){super.next(this._value=n)}}const yd=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();class kg extends F{notifyNext(n,t,r,i,o){this.destination.next(t)}notifyError(n,t){this.destination.error(n)}notifyComplete(n){this.destination.complete()}}class HP extends F{constructor(n,t,r){super(),this.parent=n,this.outerValue=t,this.outerIndex=r,this.index=0}_next(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)}_error(n){this.parent.notifyError(n,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Pg(e,n,t,r,i=new HP(e,t,r)){if(!i.closed)return n instanceof Se?n.subscribe(i):Y(n)(i)}const Ww={};function bd(...e){let n,t;return jt(e[e.length-1])&&(t=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&g(e[0])&&(e=e[0]),et(e,t).lift(new UP(n))}class UP{constructor(n){this.resultSelector=n}call(n,t){return t.subscribe(new $P(n,this.resultSelector))}}class $P extends kg{constructor(n,t){super(n),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(n){this.values.push(Ww),this.observables.push(n)}_complete(){const n=this.observables,t=n.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(Pg(this,n[r],void 0,r))}}notifyComplete(n){0==(this.active-=1)&&this.destination.complete()}notifyNext(n,t,r){const i=this.values,s=this.toRespond?i[r]===Ww?--this.toRespond:this.toRespond:0;i[r]=t,0===s&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(n){let t;try{t=this.resultSelector.apply(this,n)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}function wd(...e){return function GP(){return Zi(1)}()(Ke(...e))}const Cs=new Se(e=>e.complete());function Dd(e){return e?function WP(e){return new Se(n=>e.schedule(()=>n.complete()))}(e):Cs}function zw(e){return new Se(n=>{let t;try{t=e()}catch(i){return void n.error(i)}return(t?Ie(t):Dd()).subscribe(n)})}function $a(e,n){return new Se(n?t=>n.schedule(zP,0,{error:e,subscriber:t}):t=>t.error(e))}function zP({error:e,subscriber:n}){n.error(e)}function Xr(e,n){return"function"==typeof n?t=>t.pipe(Xr((r,i)=>Ie(e(r,i)).pipe(Ce((o,s)=>n(r,o,i,s))))):t=>t.lift(new qP(e))}class qP{constructor(n){this.project=n}call(n,t){return t.subscribe(new KP(n,this.project))}}class KP extends mt{constructor(n,t){super(n),this.project=t,this.index=0}_next(n){let t;const r=this.index++;try{t=this.project(n,r)}catch(i){return void this.destination.error(i)}this._innerSub(t)}_innerSub(n){const t=this.innerSubscription;t&&t.unsubscribe();const r=new pt(this),i=this.destination;i.add(r),this.innerSubscription=fr(n,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}const qw=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function Tr(e){return n=>0===e?Dd():n.lift(new JP(e))}class JP{constructor(n){if(this.total=n,this.total<0)throw new qw}call(n,t){return t.subscribe(new YP(n,this.total))}}class YP extends F{constructor(n,t){super(n),this.total=t,this.count=0}_next(n){const t=this.total,r=++this.count;r<=t&&(this.destination.next(n),r===t&&(this.destination.complete(),this.unsubscribe()))}}function Ir(e,n){return function(r){return r.lift(new QP(e,n))}}class QP{constructor(n,t){this.predicate=n,this.thisArg=t}call(n,t){return t.subscribe(new ZP(n,this.predicate,this.thisArg))}}class ZP extends F{constructor(n,t,r){super(n),this.predicate=t,this.thisArg=r,this.count=0}_next(n){let t;try{t=this.predicate.call(this.thisArg,n,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(n)}}function Sd(e=null){return n=>n.lift(new XP(e))}class XP{constructor(n){this.defaultValue=n}call(n,t){return t.subscribe(new e2(n,this.defaultValue))}}class e2 extends F{constructor(n,t){super(n),this.defaultValue=t,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Kw(e=r2){return n=>n.lift(new t2(e))}class t2{constructor(n){this.errorFactory=n}call(n,t){return t.subscribe(new n2(n,this.errorFactory))}}class n2 extends F{constructor(n,t){super(n),this.errorFactory=t,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(t){n=t}this.destination.error(n)}}}function r2(){return new yd}function Vo(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Ir((i,o)=>e(i,o,r)):se,Tr(1),t?Sd(n):Kw(()=>new yd))}function jo(e,n){return Gt(e,n,1)}function vo(){}function Qn(e,n,t){return function(i){return i.lift(new o2(e,n,t))}}class o2{constructor(n,t,r){this.nextOrObserver=n,this.error=t,this.complete=r}call(n,t){return t.subscribe(new s2(n,this.nextOrObserver,this.error,this.complete))}}class s2 extends F{constructor(n,t,r,i){super(n),this._tapNext=vo,this._tapError=vo,this._tapComplete=vo,this._tapError=r||vo,this._tapComplete=i||vo,H(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||vo,this._tapError=t.error||vo,this._tapComplete=t.complete||vo)}_next(n){try{this._tapNext.call(this._context,n)}catch(t){return void this.destination.error(t)}this.destination.next(n)}_error(n){try{this._tapError.call(this._context,n)}catch(t){return void this.destination.error(t)}this.destination.error(n)}_complete(){try{this._tapComplete.call(this._context)}catch(n){return void this.destination.error(n)}return this.destination.complete()}}function Ss(e){return function(t){const r=new a2(e),i=t.lift(r);return r.caught=i}}class a2{constructor(n){this.selector=n}call(n,t){return t.subscribe(new c2(n,this.selector,this.caught))}}class c2 extends mt{constructor(n,t,r){super(n),this.selector=t,this.caught=r}error(n){if(!this.isStopped){let t;try{t=this.selector(n,this.caught)}catch(o){return void super.error(o)}this._unsubscribeAndRecycle();const r=new pt(this);this.add(r);const i=fr(t,r);i!==r&&this.add(i)}}}function Jw(e,n){let t=!1;return arguments.length>=2&&(t=!0),function(i){return i.lift(new l2(e,n,t))}}class l2{constructor(n,t,r=!1){this.accumulator=n,this.seed=t,this.hasSeed=r}call(n,t){return t.subscribe(new u2(n,this.accumulator,this.seed,this.hasSeed))}}class u2 extends F{constructor(n,t,r,i){super(n),this.accumulator=t,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const t=this.index++;let r;try{r=this.accumulator(this.seed,n,t)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function Lg(e){return function(t){return 0===e?Dd():t.lift(new d2(e))}}class d2{constructor(n){if(this.total=n,this.total<0)throw new qw}call(n,t){return t.subscribe(new f2(n,this.total))}}class f2 extends F{constructor(n,t){super(n),this.total=t,this.ring=new Array,this.count=0}_next(n){const t=this.ring,r=this.total,i=this.count++;t.length<r?t.push(n):t[i%r]=n}_complete(){const n=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let o=0;o<r;o++){const s=t++%r;n.next(i[s])}}n.complete()}}function Yw(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Ir((i,o)=>e(i,o,r)):se,Lg(1),t?Sd(n):Kw(()=>new yd))}class p2{constructor(n,t){this.predicate=n,this.inclusive=t}call(n,t){return t.subscribe(new g2(n,this.predicate,this.inclusive))}}class g2 extends F{constructor(n,t,r){super(n),this.predicate=t,this.inclusive=r,this.index=0}_next(n){const t=this.destination;let r;try{r=this.predicate(n,this.index++)}catch(i){return void t.error(i)}this.nextOrComplete(n,r)}nextOrComplete(n,t){const r=this.destination;Boolean(t)?r.next(n):(this.inclusive&&r.next(n),r.complete())}}class _2{constructor(n){this.value=n}call(n,t){return t.subscribe(new v2(n,this.value))}}class v2 extends F{constructor(n,t){super(n),this.value=t}_next(n){this.destination.next(this.value)}}function Bg(e){return n=>n.lift(new y2(e))}class y2{constructor(n){this.callback=n}call(n,t){return t.subscribe(new b2(n,this.callback))}}class b2 extends F{constructor(n,t){super(n),this.add(new D(t))}}const gt="primary",ll=Symbol("RouteTitle");class w2{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ga(e){return new w2(e)}function D2(e,n,t){const r=t.path.split("/");if(r.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=e[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function qi(e,n){const t=e?Object.keys(e):void 0,r=n?Object.keys(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Qw(e[i],n[i]))return!1;return!0}function Qw(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),r=[...n].sort();return t.every((i,o)=>r[o]===i)}return e===n}function Zw(e){return Array.prototype.concat.apply([],e)}function Xw(e){return e.length>0?e[e.length-1]:null}function er(e,n){for(const t in e)e.hasOwnProperty(t)&&n(e[t],t)}function Ho(e){return Cp(e)?e:Gc(e)?Ie(Promise.resolve(e)):Ke(e)}const Ed=!1,S2={exact:function nD(e,n,t){if(!Ts(e.segments,n.segments)||!Td(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!nD(e.children[r],n.children[r],t))return!1;return!0},subset:rD},eD={exact:function E2(e,n){return qi(e,n)},subset:function T2(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>Qw(e[t],n[t]))},ignored:()=>!0};function tD(e,n,t){return S2[t.paths](e.root,n.root,t.matrixParams)&&eD[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function rD(e,n,t){return iD(e,n,n.segments,t)}function iD(e,n,t,r){if(e.segments.length>t.length){const i=e.segments.slice(0,t.length);return!(!Ts(i,t)||n.hasChildren()||!Td(i,t,r))}if(e.segments.length===t.length){if(!Ts(e.segments,t)||!Td(e.segments,t,r))return!1;for(const i in n.children)if(!e.children[i]||!rD(e.children[i],n.children[i],r))return!1;return!0}{const i=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!!(Ts(e.segments,i)&&Td(e.segments,i,r)&&e.children[gt])&&iD(e.children[gt],n,o,r)}}function Td(e,n,t){return n.every((r,i)=>eD[t](e[i].parameters,r.parameters))}class Es{constructor(n=new _t([],{}),t={},r=null){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ga(this.queryParams)),this._queryParamMap}toString(){return x2.serialize(this)}}class _t{constructor(n,t){this.segments=n,this.children=t,this.parent=null,er(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Id(this)}}class ul{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ga(this.parameters)),this._parameterMap}toString(){return cD(this)}}function Ts(e,n){return e.length===n.length&&e.every((t,r)=>t.path===n[r].path)}let oD=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=je({token:e,factory:function(){return new Vg},providedIn:"root"}),e})();class Vg{parse(n){const t=new B2(n);return new Es(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${dl(n.root,!0)}`,r=function A2(e){const n=Object.keys(e).map(t=>{const r=e[t];return Array.isArray(r)?r.map(i=>`${Nd(t)}=${Nd(i)}`).join("&"):`${Nd(t)}=${Nd(r)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams),i="string"==typeof n.fragment?`#${function M2(e){return encodeURI(e)}(n.fragment)}`:"";return`${t}${r}${i}`}}const x2=new Vg;function Id(e){return e.segments.map(n=>cD(n)).join("/")}function dl(e,n){if(!e.hasChildren())return Id(e);if(n){const t=e.children[gt]?dl(e.children[gt],!1):"",r=[];return er(e.children,(i,o)=>{o!==gt&&r.push(`${o}:${dl(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function N2(e,n){let t=[];return er(e.children,(r,i)=>{i===gt&&(t=t.concat(n(r,i)))}),er(e.children,(r,i)=>{i!==gt&&(t=t.concat(n(r,i)))}),t}(e,(r,i)=>i===gt?[dl(e.children[gt],!1)]:[`${i}:${dl(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[gt]?`${Id(e)}/${t[0]}`:`${Id(e)}/(${t.join("//")})`}}function sD(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nd(e){return sD(e).replace(/%3B/gi,";")}function jg(e){return sD(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xd(e){return decodeURIComponent(e)}function aD(e){return xd(e.replace(/\+/g,"%20"))}function cD(e){return`${jg(e.path)}${function F2(e){return Object.keys(e).map(n=>`;${jg(n)}=${jg(e[n])}`).join("")}(e.parameters)}`}const R2=/^[^\/()?;=#]+/;function Md(e){const n=e.match(R2);return n?n[0]:""}const O2=/^[^=?&#]+/,P2=/^[^&#]+/;class B2{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _t([],{}):new _t([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[gt]=new _t(n,t)),r}parseSegment(){const n=Md(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new be(4009,Ed);return this.capture(n),new ul(xd(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=Md(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Md(this.remaining);i&&(r=i,this.capture(r))}n[xd(t)]=xd(r)}parseQueryParam(n){const t=function k2(e){const n=e.match(O2);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function L2(e){const n=e.match(P2);return n?n[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=aD(t),o=aD(r);if(n.hasOwnProperty(i)){let s=n[i];Array.isArray(s)||(s=[s],n[i]=s),s.push(o)}else n[i]=o}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Md(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new be(4010,Ed);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=gt);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[gt]:new _t([],s),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new be(4011,Ed)}}function Hg(e){return e.segments.length>0?new _t([],{[gt]:e}):e}function Fd(e){const n={};for(const r of Object.keys(e.children)){const o=Fd(e.children[r]);(o.segments.length>0||o.hasChildren())&&(n[r]=o)}return function V2(e){if(1===e.numberOfChildren&&e.children[gt]){const n=e.children[gt];return new _t(e.segments.concat(n.segments),n.children)}return e}(new _t(e.segments,n))}function Is(e){return e instanceof Es}function U2(e,n,t,r,i){if(0===t.length)return Wa(n.root,n.root,n.root,r,i);const o=function dD(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new uD(!0,0,e);let n=0,t=!1;const r=e.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return er(o.outlets,(d,h)=>{a[h]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,d)=>{0==d&&"."===a||(0==d&&""===a?t=!0:".."===a?n++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new uD(t,n,r)}(t);return o.toRoot()?Wa(n.root,n.root,new _t([],{}),r,i):function s(d){const h=function G2(e,n,t,r){if(e.isAbsolute)return new za(n.root,!0,0);if(-1===r)return new za(t,t===n.root,0);return function fD(e,n,t){let r=e,i=n,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new be(4005,!1);i=r.segments.length}return new za(r,!1,i-o)}(t,r+(fl(e.commands[0])?0:1),e.numberOfDoubleDots)}(o,n,e.snapshot?._urlSegment,d),m=h.processChildren?pl(h.segmentGroup,h.index,o.commands):$g(h.segmentGroup,h.index,o.commands);return Wa(n.root,h.segmentGroup,m,r,i)}(e.snapshot?._lastPathIndex)}function fl(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function hl(e){return"object"==typeof e&&null!=e&&e.outlets}function Wa(e,n,t,r,i){let s,o={};r&&er(r,(d,h)=>{o[h]=Array.isArray(d)?d.map(m=>`${m}`):`${d}`}),s=e===n?t:lD(e,n,t);const a=Hg(Fd(s));return new Es(a,o,i)}function lD(e,n,t){const r={};return er(e.children,(i,o)=>{r[o]=i===n?t:lD(i,n,t)}),new _t(e.segments,r)}class uD{constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&fl(r[0]))throw new be(4003,!1);const i=r.find(hl);if(i&&i!==Xw(r))throw new be(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class za{constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}}function $g(e,n,t){if(e||(e=new _t([],{})),0===e.segments.length&&e.hasChildren())return pl(e,n,t);const r=function z2(e,n,t){let r=0,i=n;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return o;const s=e.segments[i],a=t[r];if(hl(a))break;const d=`${a}`,h=r<t.length-1?t[r+1]:null;if(i>0&&void 0===d)break;if(d&&h&&"object"==typeof h&&void 0===h.outlets){if(!pD(d,h,s))return o;r+=2}else{if(!pD(d,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new _t(e.segments.slice(0,r.pathIndex),{});return o.children[gt]=new _t(e.segments.slice(r.pathIndex),e.children),pl(o,0,i)}return r.match&&0===i.length?new _t(e.segments,{}):r.match&&!e.hasChildren()?Gg(e,n,t):r.match?pl(e,0,i):Gg(e,n,t)}function pl(e,n,t){if(0===t.length)return new _t(e.segments,{});{const r=function W2(e){return hl(e[0])?e[0].outlets:{[gt]:e}}(t),i={};return er(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=$g(e.children[s],n,o))}),er(e.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new _t(e.segments,i)}}function Gg(e,n,t){const r=e.segments.slice(0,n);let i=0;for(;i<t.length;){const o=t[i];if(hl(o)){const d=q2(o.outlets);return new _t(r,d)}if(0===i&&fl(t[0])){r.push(new ul(e.segments[n].path,hD(t[0]))),i++;continue}const s=hl(o)?o.outlets[gt]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&fl(a)?(r.push(new ul(s,hD(a))),i+=2):(r.push(new ul(s,{})),i++)}return new _t(r,{})}function q2(e){const n={};return er(e,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(n[r]=Gg(new _t([],{}),0,t))}),n}function hD(e){const n={};return er(e,(t,r)=>n[r]=`${t}`),n}function pD(e,n,t){return e==t.path&&qi(n,t.parameters)}class yo{constructor(n,t){this.id=n,this.url=t}}class Wg extends yo{constructor(n,t,r="imperative",i=null){super(n,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ns extends yo{constructor(n,t,r){super(n,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ad extends yo{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class gD extends yo{constructor(n,t,r,i){super(n,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class K2 extends yo{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J2 extends yo{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y2 extends yo{constructor(n,t,r,i,o){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Q2 extends yo{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Z2 extends yo{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X2{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class eL{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class tL{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nL{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rL{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iL{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mD{constructor(n,t,r){this.routerEvent=n,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class _D{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=zg(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){const t=zg(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=qg(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return qg(n,this._root).map(t=>t.value)}}function zg(e,n){if(e===n.value)return n;for(const t of n.children){const r=zg(e,t);if(r)return r}return null}function qg(e,n){if(e===n.value)return[n];for(const t of n.children){const r=qg(e,t);if(r.length)return r.unshift(n),r}return[]}class bo{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function qa(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class vD extends _D{constructor(n,t){super(n),this.snapshot=t,Kg(this,n)}toString(){return this.snapshot.toString()}}function yD(e,n){const t=function sL(e,n){const s=new Rd([],{},{},"",{},gt,n,null,e.root,-1,{});return new wD("",new bo(s,[]))}(e,n),r=new Yn([new ul("",{})]),i=new Yn({}),o=new Yn({}),s=new Yn({}),a=new Yn(""),d=new Uo(r,i,s,a,o,gt,n,t.root);return d.snapshot=t.root,new vD(new bo(d,[]),t)}class Uo{constructor(n,t,r,i,o,s,a,d){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe(Ce(h=>h[ll]))??Ke(void 0),this._futureSnapshot=d}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ce(n=>Ga(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ce(n=>Ga(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bD(e,n="emptyOnly"){const t=e.pathFromRoot;let r=0;if("always"!==n)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function aL(e){return e.reduce((n,t)=>({params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Rd{constructor(n,t,r,i,o,s,a,d,h,m,b){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=d,this._urlSegment=h,this._lastPathIndex=m,this._resolve=b}get title(){return this.data?.[ll]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ga(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ga(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wD extends _D{constructor(n,t){super(t),this.url=n,Kg(this,t)}toString(){return DD(this._root)}}function Kg(e,n){n.value._routerState=e,n.children.forEach(t=>Kg(e,t))}function DD(e){const n=e.children.length>0?` { ${e.children.map(DD).join(", ")} } `:"";return`${e.value}${n}`}function Jg(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,qi(n.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),n.fragment!==t.fragment&&e.fragment.next(t.fragment),qi(n.params,t.params)||e.params.next(t.params),function C2(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!qi(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.url.next(t.url),qi(n.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Yg(e,n){const t=qi(e.params,n.params)&&function I2(e,n){return Ts(e,n)&&e.every((t,r)=>qi(t.parameters,n[r].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||Yg(e.parent,n.parent))}function gl(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=n.value;const i=function lL(e,n,t){return n.children.map(r=>{for(const i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return gl(e,r,i);return gl(e,r)})}(e,n,t);return new bo(r,i)}{if(e.shouldAttach(n.value)){const o=e.retrieve(n.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(a=>gl(e,a)),s}}const r=function uL(e){return new Uo(new Yn(e.url),new Yn(e.params),new Yn(e.queryParams),new Yn(e.fragment),new Yn(e.data),e.outlet,e.component,e)}(n.value),i=n.children.map(o=>gl(e,o));return new bo(r,i)}}const Qg="ngNavigationCancelingError";function CD(e,n){const{redirectTo:t,navigationBehaviorOptions:r}=Is(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=SD(!1,0,n);return i.url=t,i.navigationBehaviorOptions=r,i}function SD(e,n,t){const r=new Error("NavigationCancelingError: "+(e||""));return r[Qg]=!0,r.cancellationCode=n,t&&(r.url=t),r}function ED(e){return TD(e)&&Is(e.url)}function TD(e){return e&&e[Qg]}class dL{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ml,this.attachRef=null}}let ml=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new dL,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Od=!1;let Zg=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=gt,this.activateEvents=new ct,this.deactivateEvents=new ct,this.attachEvents=new ct,this.detachEvents=new ct,this.parentContexts=ut(ml),this.location=ut(Ti),this.changeDetector=ut(go),this.environmentInjector=ut(co)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new be(4012,Od);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new be(4012,Od);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new be(4012,Od);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new be(4013,Od);this._activatedRoute=t;const i=this.location,s=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,d=new fL(t,a,i.injector);if(r&&function hL(e){return!!e.resolveComponentFactory}(r)){const h=r.resolveComponentFactory(s);this.activated=i.createComponent(h,i.length,d)}else this.activated=i.createComponent(s,{index:i.length,injector:d,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Oe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[vr]}),e})();class fL{constructor(n,t,r){this.route=n,this.childContexts=t,this.parent=r}get(n,t){return n===Uo?this.route:n===ml?this.childContexts:this.parent.get(n,t)}}let Xg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Qe({type:e,selectors:[["ng-component"]],standalone:!0,features:[kb],decls:1,vars:0,template:function(t,r){1&t&&Dt(0,"router-outlet")},dependencies:[Zg],encapsulation:2}),e})();function ID(e,n){return e.providers&&!e._injector&&(e._injector=Gu(e.providers,n,`Route: ${e.path}`)),e._injector??n}function tm(e){const n=e.children&&e.children.map(tm),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==gt&&(t.component=Xg),t}function li(e){return e.outlet||gt}function ND(e,n){const t=e.filter(r=>li(r)===n);return t.push(...e.filter(r=>li(r)!==n)),t}function _l(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class vL{constructor(n,t,r,i){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(n){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),Jg(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){const i=qa(t);n.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),er(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(n,t,s.children)}else this.deactivateChildRoutes(n,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=qa(n);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:a})}}deactivateRouteAndOutlet(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=qa(n);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(n,t,r){const i=qa(t);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new iL(o.value.snapshot))}),n.children.length&&this.forwardEvent(new nL(n.value.snapshot))}activateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(Jg(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,s.children)}else this.activateChildRoutes(n,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Jg(a.route.value),this.activateChildRoutes(n,null,s.children)}else{const a=_l(i.snapshot),d=a?.get(Lc)??null;s.attachRef=null,s.route=i,s.resolver=d,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(n,null,s.children)}}else this.activateChildRoutes(n,null,r)}}class xD{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class kd{constructor(n,t){this.component=n,this.route=t}}function yL(e,n,t){const r=e._root;return vl(r,n?n._root:null,t,[r.value])}function Ka(e,n){const t=Symbol(),r=n.get(e,t);return r===t?"function"!=typeof e||function f(e){return null!==u(e)}(e)?n.get(e):e:r}function vl(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=qa(n);return e.children.forEach(s=>{(function wL(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=n?n.value:null,a=t?t.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const d=function DL(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!Ts(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Ts(e.url,n.url)||!qi(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yg(e,n)||!qi(e.queryParams,n.queryParams);default:return!Yg(e,n)}}(s,o,o.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new xD(r)):(o.data=s.data,o._resolvedData=s._resolvedData),vl(e,n,o.component?a?a.children:null:t,r,i),d&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new kd(a.outlet.component,s))}else s&&yl(n,a,i),i.canActivateChecks.push(new xD(r)),vl(e,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),er(o,(s,a)=>yl(s,t.getContext(a),i)),i}function yl(e,n,t){const r=qa(e),i=e.value;er(r,(o,s)=>{yl(o,i.component?n?n.children.getContext(s):null:n,t)}),t.canDeactivateChecks.push(new kd(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}function bl(e){return"function"==typeof e}function nm(e){return e instanceof yd||"EmptyError"===e?.name}const Pd=Symbol("INITIAL_VALUE");function Ja(){return Xr(e=>bd(e.map(n=>n.pipe(Tr(1),function Cd(...e){const n=e[e.length-1];return jt(n)?(e.pop(),t=>wd(e,t,n)):t=>wd(e,t)}(Pd)))).pipe(Ce(n=>{for(const t of n)if(!0!==t){if(t===Pd)return Pd;if(!1===t||t instanceof Es)return t}return!0}),Ir(n=>n!==Pd),Tr(1)))}function MD(e){return function ie(...e){return Ee(e)}(Qn(n=>{if(Is(n))throw CD(0,n)}),Ce(n=>!0===n))}const rm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function FD(e,n,t,r,i){const o=im(e,n,t);return o.matched?function VL(e,n,t,r){const i=n.canMatch;return i&&0!==i.length?Ke(i.map(s=>{const a=Ka(s,e);return Ho(function NL(e){return e&&bl(e.canMatch)}(a)?a.canMatch(n,t):e.runInContext(()=>a(n,t)))})).pipe(Ja(),MD()):Ke(!0)}(r=ID(n,r),n,t).pipe(Ce(s=>!0===s?o:{...rm})):Ke(o)}function im(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...rm}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(n.matcher||D2)(t,e,n);if(!i)return{...rm};const o={};er(i.posParams,(a,d)=>{o[d]=a.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Ld(e,n,t,r){if(t.length>0&&function UL(e,n,t){return t.some(r=>Bd(e,n,r)&&li(r)!==gt)}(e,t,r)){const o=new _t(n,function HL(e,n,t,r){const i={};i[gt]=r,r._sourceSegment=e,r._segmentIndexShift=n.length;for(const o of t)if(""===o.path&&li(o)!==gt){const s=new _t([],{});s._sourceSegment=e,s._segmentIndexShift=n.length,i[li(o)]=s}return i}(e,n,r,new _t(t,e.children)));return o._sourceSegment=e,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function $L(e,n,t){return t.some(r=>Bd(e,n,r))}(e,t,r)){const o=new _t(e.segments,function jL(e,n,t,r,i){const o={};for(const s of r)if(Bd(e,t,s)&&!i[li(s)]){const a=new _t([],{});a._sourceSegment=e,a._segmentIndexShift=n.length,o[li(s)]=a}return{...i,...o}}(e,n,t,r,e.children));return o._sourceSegment=e,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:t}}const i=new _t(e.segments,e.children);return i._sourceSegment=e,i._segmentIndexShift=n.length,{segmentGroup:i,slicedSegments:t}}function Bd(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}function AD(e,n,t,r){return!!(li(e)===r||r!==gt&&Bd(n,t,e))&&("**"===e.path||im(n,e,t).matched)}function RD(e,n,t){return 0===n.length&&!e.children[t]}const Vd=!1;class jd{constructor(n){this.segmentGroup=n||null}}class OD{constructor(n){this.urlTree=n}}function wl(e){return $a(new jd(e))}function kD(e){return $a(new OD(e))}class qL{constructor(n,t,r,i,o){this.injector=n,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const n=Ld(this.urlTree.root,[],[],this.config).segmentGroup,t=new _t(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,t,gt).pipe(Ce(o=>this.createUrlTree(Fd(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ss(o=>{if(o instanceof OD)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof jd?this.noMatchError(o):o}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,gt).pipe(Ce(i=>this.createUrlTree(Fd(i),n.queryParams,n.fragment))).pipe(Ss(i=>{throw i instanceof jd?this.noMatchError(i):i}))}noMatchError(n){return new be(4002,Vd)}createUrlTree(n,t,r){const i=Hg(n);return new Es(i,t,r)}expandSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(n,t,r).pipe(Ce(o=>new _t([],o))):this.expandSegment(n,r,t,r.segments,i,!0)}expandChildren(n,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Ie(i).pipe(jo(o=>{const s=r.children[o],a=ND(t,o);return this.expandSegmentGroup(n,a,s,o).pipe(Ce(d=>({segment:d,outlet:o})))}),Jw((o,s)=>(o[s.outlet]=s.segment,o),{}),Yw())}expandSegment(n,t,r,i,o,s){return Ie(r).pipe(jo(a=>this.expandSegmentAgainstRoute(n,t,r,a,i,o,s).pipe(Ss(h=>{if(h instanceof jd)return Ke(null);throw h}))),Vo(a=>!!a),Ss((a,d)=>{if(nm(a))return RD(t,i,o)?Ke(new _t([],{})):wl(t);throw a}))}expandSegmentAgainstRoute(n,t,r,i,o,s,a){return AD(i,t,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,t,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,s):wl(t):wl(t)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?kD(o):this.lineralizeSegments(r,o).pipe(Gt(s=>{const a=new _t(s,{});return this.expandSegment(n,a,t,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,o,s){const{matched:a,consumedSegments:d,remainingSegments:h,positionalParamSegments:m}=im(t,i,o);if(!a)return wl(t);const b=this.applyRedirectCommands(d,i.redirectTo,m);return i.redirectTo.startsWith("/")?kD(b):this.lineralizeSegments(i,b).pipe(Gt(R=>this.expandSegment(n,t,r,R.concat(h),s,!1)))}matchSegmentAgainstRoute(n,t,r,i,o){return"**"===r.path?(n=ID(r,n),r.loadChildren?(r._loadedRoutes?Ke({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(n,r)).pipe(Ce(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new _t(i,{})))):Ke(new _t(i,{}))):FD(t,r,i,n).pipe(Xr(({matched:s,consumedSegments:a,remainingSegments:d})=>s?this.getChildConfig(n=r._injector??n,r,i).pipe(Gt(m=>{const b=m.injector??n,R=m.routes,{segmentGroup:V,slicedSegments:Q}=Ld(t,a,d,R),re=new _t(V.segments,V.children);if(0===Q.length&&re.hasChildren())return this.expandChildren(b,R,re).pipe(Ce(ue=>new _t(a,ue)));if(0===R.length&&0===Q.length)return Ke(new _t(a,{}));const le=li(r)===o;return this.expandSegment(b,re,R,Q,le?gt:o,!0).pipe(Ce(_e=>new _t(a.concat(_e.segments),_e.children)))})):wl(t)))}getChildConfig(n,t,r){return t.children?Ke({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?Ke({routes:t._loadedRoutes,injector:t._loadedInjector}):function BL(e,n,t,r){const i=n.canLoad;return void 0===i||0===i.length?Ke(!0):Ke(i.map(s=>{const a=Ka(s,e);return Ho(function SL(e){return e&&bl(e.canLoad)}(a)?a.canLoad(n,t):e.runInContext(()=>a(n,t)))})).pipe(Ja(),MD())}(n,t,r).pipe(Gt(i=>i?this.configLoader.loadChildren(n,t).pipe(Qn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function WL(e){return $a(SD(Vd,3))}())):Ke({routes:[],injector:n})}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ke(r);if(i.numberOfChildren>1||!i.children[gt])return $a(new be(4e3,Vd));i=i.children[gt]}}applyRedirectCommands(n,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,r)}applyRedirectCreateUrlTree(n,t,r,i){const o=this.createSegmentGroup(n,t.root,r,i);return new Es(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const r={};return er(n,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(n,t,r,i){const o=this.createSegments(n,t.segments,r,i);let s={};return er(t.children,(a,d)=>{s[d]=this.createSegmentGroup(n,a,r,i)}),new _t(o,s)}createSegments(n,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(n,o,i):this.findOrReturn(o,r))}findPosParam(n,t,r){const i=r[t.path.substring(1)];if(!i)throw new be(4001,Vd);return i}findOrReturn(n,t){let r=0;for(const i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}}class JL{}class ZL{constructor(n,t,r,i,o,s,a){this.injector=n,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const n=Ld(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,gt).pipe(Ce(t=>{if(null===t)return null;const r=new Rd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},gt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new bo(r,t),o=new wD(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(n){const t=n.value,r=bD(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),n.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,t,r):this.processSegment(n,t,r,r.segments,i)}processChildren(n,t,r){return Ie(Object.keys(r.children)).pipe(jo(i=>{const o=r.children[i],s=ND(t,i);return this.processSegmentGroup(n,s,o,i)}),Jw((i,o)=>i&&o?(i.push(...o),i):null),function h2(e,n=!1){return t=>t.lift(new p2(e,n))}(i=>null!==i),Sd(null),Yw(),Ce(i=>{if(null===i)return null;const o=LD(i);return function XL(e){e.sort((n,t)=>n.value.outlet===gt?-1:t.value.outlet===gt?1:n.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(n,t,r,i,o){return Ie(t).pipe(jo(s=>this.processSegmentAgainstRoute(s._injector??n,s,r,i,o)),Vo(s=>!!s),Ss(s=>{if(nm(s))return RD(r,i,o)?Ke([]):Ke(null);throw s}))}processSegmentAgainstRoute(n,t,r,i,o){if(t.redirectTo||!AD(t,r,i,o))return Ke(null);let s;if("**"===t.path){const a=i.length>0?Xw(i).parameters:{},d=VD(r)+i.length;s=Ke({snapshot:new Rd(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jD(t),li(t),t.component??t._loadedComponent??null,t,BD(r),d,HD(t)),consumedSegments:[],remainingSegments:[]})}else s=FD(r,t,i,n).pipe(Ce(({matched:a,consumedSegments:d,remainingSegments:h,parameters:m})=>{if(!a)return null;const b=VD(r)+d.length;return{snapshot:new Rd(d,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jD(t),li(t),t.component??t._loadedComponent??null,t,BD(r),b,HD(t)),consumedSegments:d,remainingSegments:h}}));return s.pipe(Xr(a=>{if(null===a)return Ke(null);const{snapshot:d,consumedSegments:h,remainingSegments:m}=a;n=t._injector??n;const b=t._loadedInjector??n,R=function e3(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:Q}=Ld(r,h,m,R.filter(le=>void 0===le.redirectTo));if(0===Q.length&&V.hasChildren())return this.processChildren(b,R,V).pipe(Ce(le=>null===le?null:[new bo(d,le)]));if(0===R.length&&0===Q.length)return Ke([new bo(d,[])]);const re=li(t)===o;return this.processSegment(b,R,V,Q,re?gt:o).pipe(Ce(le=>null===le?null:[new bo(d,le)]))}))}}function t3(e){const n=e.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function LD(e){const n=[],t=new Set;for(const r of e){if(!t3(r)){n.push(r);continue}const i=n.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):n.push(r)}for(const r of t){const i=LD(r.children);n.push(new bo(r.value,i))}return n.filter(r=>!t.has(r))}function BD(e){let n=e;for(;n._sourceSegment;)n=n._sourceSegment;return n}function VD(e){let n=e,t=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,t+=n._segmentIndexShift??0;return t-1}function jD(e){return e.data||{}}function HD(e){return e.resolve||{}}function UD(e){return"string"==typeof e.title||null===e.title}function om(e){return Xr(n=>{const t=e(n);return t?Ie(t).pipe(Ce(()=>n)):Ke(n)})}let $D=(()=>{class e{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===gt);return r}getResolvedTitleForRoute(t){return t.data[ll]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=je({token:e,factory:function(){return ut(GD)},providedIn:"root"}),e})(),GD=(()=>{class e extends $D{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(t){return new(t||e)(Ne(Uw))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class u3{}class d3{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}class f3 extends d3{}const Hd=new $e("",{providedIn:"root",factory:()=>({})}),Ya=new $e("ROUTES");let sm=(()=>{class e{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ke(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ho(t.loadComponent()).pipe(Ce(zD),Qn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Bg(()=>{this.componentLoaders.delete(t)})),i=new $(r,()=>new qe).pipe(St());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ke({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Ce(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let d,h,m=!1;Array.isArray(a)?h=a:(d=a.create(t).injector,h=Zw(d.get(Ya,[],z.Self|z.Optional)));return{routes:h.map(tm),injector:d}}),Bg(()=>{this.childrenLoaders.delete(r)})),s=new $(o,()=>new qe).pipe(St());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(t){return Ho(t()).pipe(Ce(zD),Gt(i=>i instanceof Rb||Array.isArray(i)?Ke(i):Ie(this.compiler.compileModuleAsync(i))))}}return e.\u0275fac=function(t){return new(t||e)(Ne(Dr),Ne(Yp))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function zD(e){return function g3(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}class m3{}class _3{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,t){return n}}function v3(e){throw e}function y3(e,n,t){return n.parse("/")}const b3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},w3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function qD(){const e=ut(oD),n=ut(ml),t=ut(fg),r=ut(Dr),i=ut(Yp),o=ut(Ya,{optional:!0})??[],s=ut(Hd,{optional:!0})??{},a=ut(GD),d=ut($D,{optional:!0}),h=ut(m3,{optional:!0}),m=ut(u3,{optional:!0}),b=new En(null,e,n,t,r,i,Zw(o));return h&&(b.urlHandlingStrategy=h),m&&(b.routeReuseStrategy=m),b.titleStrategy=d??a,function D3(e,n){e.errorHandler&&(n.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(n.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(n.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.urlUpdateStrategy&&(n.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(n.canceledNavigationResolution=e.canceledNavigationResolution)}(s,b),b}let En=(()=>{class e{constructor(t,r,i,o,s,a,d){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=d,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new qe,this.errorHandler=v3,this.malformedUriErrorHandler=y3,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ke(void 0),this.urlHandlingStrategy=new _3,this.routeReuseStrategy=new f3,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.canceledNavigationResolution="replace",this.configLoader=s.get(sm),this.configLoader.onLoadEndListener=R=>this.triggerEvent(new eL(R)),this.configLoader.onLoadStartListener=R=>this.triggerEvent(new X2(R)),this.ngModule=s.get(bs),this.console=s.get(xR);const b=s.get($t);this.isNgZoneEnabled=b instanceof $t&&$t.isInAngularZone(),this.resetConfig(d),this.currentUrlTree=new Es,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=yD(this.currentUrlTree,this.rootComponentType),this.transitions=new Yn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ir(i=>0!==i.id),Ce(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Xr(i=>{let o=!1,s=!1;return Ke(i).pipe(Qn(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Xr(a=>{const d=this.browserUrlTree.toString(),h=!this.navigated||a.extractedUrl.toString()!==d||d!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||h)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return KD(a.source)&&(this.browserUrlTree=a.extractedUrl),Ke(a).pipe(Xr(b=>{const R=this.transitions.getValue();return r.next(new Wg(b.id,this.serializeUrl(b.extractedUrl),b.source,b.restoredState)),R!==this.transitions.getValue()?Cs:Promise.resolve(b)}),function KL(e,n,t,r){return Xr(i=>function zL(e,n,t,r,i){return new qL(e,n,t,r,i).apply()}(e,n,t,i.extractedUrl,r).pipe(Ce(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Qn(b=>{this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},i.urlAfterRedirects=b.urlAfterRedirects}),function r3(e,n,t,r,i){return Gt(o=>function QL(e,n,t,r,i,o,s="emptyOnly"){return new ZL(e,n,t,r,i,s,o).recognize().pipe(Xr(a=>null===a?function YL(e){return new Se(n=>n.error(e))}(new JL):Ke(a)))}(e,n,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe(Ce(s=>({...o,targetSnapshot:s}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy),Qn(b=>{if(i.targetSnapshot=b.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!b.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);this.setBrowserUrl(V,b)}this.browserUrlTree=b.urlAfterRedirects}const R=new K2(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);r.next(R)}));if(h&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:V,source:Q,restoredState:re,extras:le}=a,pe=new Wg(R,this.serializeUrl(V),Q,re);r.next(pe);const _e=yD(V,this.rootComponentType).snapshot;return Ke(i={...a,targetSnapshot:_e,urlAfterRedirects:V,extras:{...le,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),Cs}),Qn(a=>{const d=new J2(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(d)}),Ce(a=>i={...a,guards:yL(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function ML(e,n){return Gt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?Ke({...t,guardsResult:!0}):function FL(e,n,t,r){return Ie(e).pipe(Gt(i=>function LL(e,n,t,r,i){const o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return o&&0!==o.length?Ke(o.map(a=>{const d=_l(n)??i,h=Ka(a,d);return Ho(function IL(e){return e&&bl(e.canDeactivate)}(h)?h.canDeactivate(e,n,t,r):d.runInContext(()=>h(e,n,t,r))).pipe(Vo())})).pipe(Ja()):Ke(!0)}(i.component,i.route,t,n,r)),Vo(i=>!0!==i,!0))}(s,r,i,e).pipe(Gt(a=>a&&function CL(e){return"boolean"==typeof e}(a)?function AL(e,n,t,r){return Ie(n).pipe(jo(i=>wd(function OL(e,n){return null!==e&&n&&n(new tL(e)),Ke(!0)}(i.route.parent,r),function RL(e,n){return null!==e&&n&&n(new rL(e)),Ke(!0)}(i.route,r),function PL(e,n,t){const r=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(s=>function bL(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(s)).filter(s=>null!==s).map(s=>zw(()=>Ke(s.guards.map(d=>{const h=_l(s.node)??t,m=Ka(d,h);return Ho(function TL(e){return e&&bl(e.canActivateChild)}(m)?m.canActivateChild(r,e):h.runInContext(()=>m(r,e))).pipe(Vo())})).pipe(Ja())));return Ke(o).pipe(Ja())}(e,i.path,t),function kL(e,n,t){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return Ke(!0);const i=r.map(o=>zw(()=>{const s=_l(n)??t,a=Ka(o,s);return Ho(function EL(e){return e&&bl(e.canActivate)}(a)?a.canActivate(n,e):s.runInContext(()=>a(n,e))).pipe(Vo())}));return Ke(i).pipe(Ja())}(e,i.route,t))),Vo(i=>!0!==i,!0))}(r,o,e,n):Ke(a)),Ce(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Qn(a=>{if(i.guardsResult=a.guardsResult,Is(a.guardsResult))throw CD(0,a.guardsResult);const d=new Y2(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(d)}),Ir(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),om(a=>{if(a.guards.canActivateChecks.length)return Ke(a).pipe(Qn(d=>{const h=new Q2(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(h)}),Xr(d=>{let h=!1;return Ke(d).pipe(function o3(e,n){return Gt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ke(t);let o=0;return Ie(i).pipe(jo(s=>function s3(e,n,t,r){const i=e.routeConfig,o=e._resolve;return void 0!==i?.title&&!UD(i)&&(o[ll]=i.title),function a3(e,n,t,r){const i=function c3(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return Ke({});const o={};return Ie(i).pipe(Gt(s=>function l3(e,n,t,r){const i=_l(n)??r,o=Ka(e,i);return Ho(o.resolve?o.resolve(n,t):i.runInContext(()=>o(n,t)))}(e[s],n,t,r).pipe(Vo(),Qn(a=>{o[s]=a}))),Lg(1),function m2(e){return n=>n.lift(new _2(e))}(o),Ss(s=>nm(s)?Cs:$a(s)))}(o,e,n,r).pipe(Ce(s=>(e._resolvedData=s,e.data=bD(e,t).resolve,i&&UD(i)&&(e.data[ll]=i.title),null)))}(s.route,r,e,n)),Qn(()=>o++),Lg(1),Gt(s=>o===i.length?Ke(t):Cs))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Qn({next:()=>h=!0,complete:()=>{h||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",2))}}))}),Qn(d=>{const h=new Z2(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(h)}))}),om(a=>{const d=h=>{const m=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(h.routeConfig).pipe(Qn(b=>{h.component=b}),Ce(()=>{})));for(const b of h.children)m.push(...d(b));return m};return bd(d(a.targetSnapshot.root)).pipe(Sd(),Tr(1))}),om(()=>this.afterPreactivation()),Ce(a=>{const d=function cL(e,n,t){const r=gl(e,n._root,t?t._root:void 0);return new vD(r,n)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return i={...a,targetRouterState:d}}),Qn(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((e,n,t)=>Ce(r=>(new vL(n,r.targetRouterState,r.currentRouterState,t).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Qn({next(){o=!0},complete(){o=!0}}),Bg(()=>{o||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Ss(a=>{if(s=!0,TD(a)){ED(a)||(this.navigated=!0,this.restoreHistory(i,!0));const d=new Ad(i.id,this.serializeUrl(i.extractedUrl),a.message,a.cancellationCode);if(r.next(d),ED(a)){const h=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),m={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||KD(i.source)};this.scheduleNavigation(h,"imperative",null,m,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const d=new gD(i.id,this.serializeUrl(i.extractedUrl),a,i.targetSnapshot??void 0);r.next(d);try{i.resolve(this.errorHandler(a))}catch(h){i.reject(h)}}return Cs}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const a={...o};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(i.state=a)}const s=this.parseUrl(t.url);this.scheduleNavigation(s,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(tm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:d}=r,h=i||this.routerState.root,m=d?this.currentUrlTree.fragment:s;let b=null;switch(a){case"merge":b={...this.currentUrlTree.queryParams,...o};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=o||null}return null!==b&&(b=this.removeEmptyProps(b)),U2(h,this.currentUrlTree,t,b,m??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Is(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function C3(e){for(let n=0;n<e.length;n++){if(null==e[n])throw new be(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...b3}:!1===r?{...w3}:r,Is(t))return tD(this.currentUrlTree,t,i);const o=this.parseUrl(t);return tD(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ns(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,d,h;s?(a=s.resolve,d=s.reject,h=s.promise):h=new Promise((R,V)=>{a=R,d=V});const m=++this.navigationId;let b;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),b=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):b=0,this.setTransition({id:m,targetPageId:b,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:a,reject:d,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(R=>Promise.reject(R))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const o=new Ad(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return e.\u0275fac=function(t){qh()},e.\u0275prov=je({token:e,factory:function(){return qD()},providedIn:"root"}),e})();function KD(e){return"imperative"!==e}let xs=(()=>{class e{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new qe;const d=s.nativeElement.tagName;this.isAnchorElement="A"===d||"AREA"===d,this.isAnchorElement?this.subscription=t.events.subscribe(h=>{h instanceof Ns&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=Ua(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=Ua(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=Ua(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function X0(e,n,t){return function AN(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?Z0:Kn}(n,t)(e)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return e.\u0275fac=function(t){return new(t||e)(ne(En),ne(Uo),function da(e){return function nI(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(j_(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===n)return t[i+1];i+=2}}}return null}(Xn(),e)}("tabindex"),ne(bi),ne(Qt),ne(Ds))},e.\u0275dir=Oe({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&ot("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&Ut("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[vr]}),e})();class JD{}let T3=(()=>{class e{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ir(t=>t instanceof Ns),jo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=Gu(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ie(i).pipe(Zi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ke(null);const o=i.pipe(Gt(s=>null===s?Ke(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?Ie([o,this.loader.loadComponent(r)]).pipe(Zi()):o})}}return e.\u0275fac=function(t){return new(t||e)(Ne(En),Ne(Yp),Ne(co),Ne(JD),Ne(sm))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const am=new $e("");let YD=(()=>{class e{constructor(t,r,i,o={}){this.router=t,this.viewportScroller=r,this.zone=i,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Wg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ns&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof mD&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.router.triggerEvent(new mD(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){qh()},e.\u0275prov=je({token:e,factory:e.\u0275fac}),e})();function Za(e,n){return{\u0275kind:e,\u0275providers:n}}function ZD(){const e=ut(Dr);return n=>{const t=e.get(tl);if(n!==t.components[0])return;const r=e.get(En),i=e.get(XD);1===e.get(lm)&&r.initialNavigation(),e.get(eC,null,z.Optional)?.setUpPreloading(),e.get(am,null,z.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const XD=new $e("",{factory:()=>new qe}),lm=new $e("",{providedIn:"root",factory:()=>1});const eC=new $e("");function F3(e){return Za(0,[{provide:eC,useExisting:T3},{provide:JD,useExisting:e}])}const tC=new $e("ROUTER_FORROOT_GUARD"),A3=[fg,{provide:oD,useClass:Vg},{provide:En,useFactory:qD},ml,{provide:Uo,useFactory:function QD(e){return e.routerState.root},deps:[En]},sm,[]];function R3(){return new M1("Router",En)}let nC=(()=>{class e{constructor(t){}static forRoot(t,r){return{ngModule:e,providers:[A3,[],{provide:Ya,multi:!0,useValue:t},{provide:tC,useFactory:L3,deps:[[En,new Ic,new Nc]]},{provide:Hd,useValue:r||{}},r?.useHash?{provide:Ds,useClass:mO}:{provide:Ds,useClass:X1},{provide:am,useFactory:()=>{const e=ut(En),n=ut(Ok),t=ut($t),r=ut(Hd);return r.scrollOffset&&n.setOffset(r.scrollOffset),new YD(e,n,t,r)}},r?.preloadingStrategy?F3(r.preloadingStrategy).\u0275providers:[],{provide:M1,multi:!0,useFactory:R3},r?.initialNavigation?B3(r):[],[{provide:rC,useFactory:ZD},{provide:C1,multi:!0,useExisting:rC}]]}}static forChild(t){return{ngModule:e,providers:[{provide:Ya,multi:!0,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)(Ne(tC,8))},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Xg]}),e})();function L3(e){return"guarded"}function B3(e){return["disabled"===e.initialNavigation?Za(3,[{provide:Yu,multi:!0,useFactory:()=>{const n=ut(En);return()=>{n.setUpLocationChangeListener()}}},{provide:lm,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Za(2,[{provide:lm,useValue:0},{provide:Yu,multi:!0,deps:[Dr],useFactory:n=>{const t=n.get(pO,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(o=>{const s=n.get(En),a=n.get(XD);(function i(o){n.get(En).events.pipe(Ir(a=>a instanceof Ns||a instanceof Ad||a instanceof gD),Ce(a=>a instanceof Ns||a instanceof Ad&&(0===a.code||1===a.code)&&null),Ir(a=>null!==a),Tr(1)).subscribe(()=>{o()})})(()=>{o(!0),r=!0}),s.afterPreactivation=()=>(o(!0),r||a.closed?Ke(void 0):a),s.initialNavigation()}))}}]).\u0275providers:[]]}const rC=new $e(""),Mi={production:!0,personasServiceURL:"https://recommendation-service.azurewebsites.net/api/personas",recommendationServiceURL:"https://recommendation-service.azurewebsites.net/api/recommendations",interestServiceURL:"https://recommendation-service.azurewebsites.net/api/interests",commentServiceURL:"https://comment-service.azurewebsites.net/api/comments",authenticationAuthority:"https://commendie.azurewebsites.net",baseHref:"/WikiRecord-Frontend/",hostsRequiringAccessToken:["https://commendie.azurewebsites.net","https://recommendation-service.azurewebsites.net"]};var $o=(()=>(function(e){e.FallbackPersonaImage="assets/img/fallback-person-image.jpg",e.RedHeart="assets/img/heart.webp"}($o||($o={})),$o))();class Cl{constructor(n){Object.assign(this,n)}static AttachMethods(n){const t=Object.assign(new Cl,n);return n.recommendations&&(t.recommendations=n.recommendations.map(Sl.AttachMethods)),t}getProfileImagePath({fallback:n="",width:t=600}={}){return this.imageUri?this.imageUri+"?width="+t:n||$o.FallbackPersonaImage}}class Xa{constructor(n){Object.assign(this,n)}static AttachMethods(n){return Object.assign(new Xa,n)}getIconPath(){return`assets/img/interestIcons/${this.type||"Other"}.png`}getImagePath({fallback:n="",width:t=600}={}){return this.imageUri?this.imageUri+"?width="+t:n||this.getIconPath()}}var Go=(()=>(function(e){e.Book="Book",e.Movie="Movie",e.Game="Game",e.Podcast="Podcast",e.Other="Other"}(Go||(Go={})),Go))();class Sl{static AttachMethods(n){const t=Object.assign(new Sl,n);return n.persona&&(t.persona=Cl.AttachMethods(n.persona)),n.interest&&(t.interest=Xa.AttachMethods(n.interest)),t}}class El{constructor(n){this.recommendations=[],Object.assign(this,n)}get confirmedRecommendations(){return this.recommendations.filter(n=>n.isConfirmed)}get pendingRecommendations(){return this.recommendations.filter(n=>!n.isConfirmed)}static AttachMethods(n){const t=Object.assign(new El,n);return n.recommendations&&(t.recommendations=n.recommendations.map(Sl.AttachMethods)),t}get shortRecommendationsList(){return this.confirmedRecommendations.slice(0,4)}getProfileImagePath({fallback:n="",width:t=600}={}){return this.imageUri?this.imageUri+"?width="+t:n||$o.FallbackPersonaImage}geConfirmedtRecommendationsByType(){return function j3(e,n){return e.reduce((t,r)=>{const i=n instanceof Function?n(r):r[n];return t[i]=t[i]||[],t[i].push(r),t},{})}(this.confirmedRecommendations,n=>n.interest.type)}}class $d{}class um{}class wo{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(n).forEach(t=>{let r=n[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof wo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new wo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof wo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,t);const i=("a"===n.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=n.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class H3{encodeKey(n){return iC(n)}encodeValue(n){return iC(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const $3=/%(\d[a-f0-9])/gi,G3={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function iC(e){return encodeURIComponent(e).replace($3,(n,t)=>G3[t]??n)}function Gd(e){return`${e}`}class Wo{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new H3,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function U3(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,o)),n.decodeValue(i.slice(o+1))],d=t.get(s)||[];d.push(a),t.set(s,d)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const r=n.fromObject[t],i=Array.isArray(r)?r.map(Gd):[Gd(r)];this.map.set(t,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(r=>{const i=n[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new Wo({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(Gd(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const i=r.indexOf(Gd(n.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class W3{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function oC(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function sC(e){return typeof Blob<"u"&&e instanceof Blob}function aC(e){return typeof FormData<"u"&&e instanceof FormData}class Tl{constructor(n,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function z3(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new wo),this.context||(this.context=new W3),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new Wo,this.urlWithParams=t}serializeBody(){return null===this.body?null:oC(this.body)||sC(this.body)||aC(this.body)||function q3(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Wo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||aC(this.body)?null:sC(this.body)?this.body.type||null:oC(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Wo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const t=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,o=void 0!==n.body?n.body:this.body,s=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,a=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let d=n.headers||this.headers,h=n.params||this.params;const m=n.context??this.context;return void 0!==n.setHeaders&&(d=Object.keys(n.setHeaders).reduce((b,R)=>b.set(R,n.setHeaders[R]),d)),n.setParams&&(h=Object.keys(n.setParams).reduce((b,R)=>b.set(R,n.setParams[R]),h)),new Tl(t,r,o,{params:h,headers:d,context:m,reportProgress:a,responseType:i,withCredentials:s})}}var kn=(()=>((kn=kn||{})[kn.Sent=0]="Sent",kn[kn.UploadProgress=1]="UploadProgress",kn[kn.ResponseHeader=2]="ResponseHeader",kn[kn.DownloadProgress=3]="DownloadProgress",kn[kn.Response=4]="Response",kn[kn.User=5]="User",kn))();class dm{constructor(n,t=200,r="OK"){this.headers=n.headers||new wo,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class fm extends dm{constructor(n={}){super(n),this.type=kn.ResponseHeader}clone(n={}){return new fm({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Wd extends dm{constructor(n={}){super(n),this.type=kn.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new Wd({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class zd extends dm{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function hm(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let ec=(()=>{class e{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Tl)o=t;else{let d,h;d=i.headers instanceof wo?i.headers:new wo(i.headers),i.params&&(h=i.params instanceof Wo?i.params:new Wo({fromObject:i.params})),o=new Tl(t,r,void 0!==i.body?i.body:null,{headers:d,context:i.context,params:h,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=Ke(o).pipe(jo(d=>this.handler.handle(d)));if(t instanceof Tl||"events"===i.observe)return s;const a=s.pipe(Ir(d=>d instanceof Wd));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Ce(d=>{if(null!==d.body&&!(d.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return d.body}));case"blob":return a.pipe(Ce(d=>{if(null!==d.body&&!(d.body instanceof Blob))throw new Error("Response is not a Blob.");return d.body}));case"text":return a.pipe(Ce(d=>{if(null!==d.body&&"string"!=typeof d.body)throw new Error("Response is not a string.");return d.body}));default:return a.pipe(Ce(d=>d.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Wo).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,hm(i,r))}post(t,r,i={}){return this.request("POST",t,hm(i,r))}put(t,r,i={}){return this.request("PUT",t,hm(i,r))}}return e.\u0275fac=function(t){return new(t||e)(Ne($d))},e.\u0275prov=je({token:e,factory:e.\u0275fac}),e})();function cC(e,n){return n(e)}function K3(e,n){return(t,r)=>n.intercept(t,{handle:i=>e(i,r)})}const lC=new $e("HTTP_INTERCEPTORS"),Il=new $e("HTTP_INTERCEPTOR_FNS");function Y3(){let e=null;return(n,t)=>(null===e&&(e=(ut(lC,{optional:!0})??[]).reduceRight(K3,cC)),e(n,t))}let uC=(()=>{class e extends $d{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(Il)));this.chain=r.reduceRight((i,o)=>function J3(e,n,t){return(r,i)=>t.runInContext(()=>n(r,o=>e(o,i)))}(i,o,this.injector),cC)}return this.chain(t,r=>this.backend.handle(r))}}return e.\u0275fac=function(t){return new(t||e)(Ne(um),Ne(co))},e.\u0275prov=je({token:e,factory:e.\u0275fac}),e})();const eB=/^\)\]\}',?\n/;let fC=(()=>{class e{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Se(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((V,Q)=>i.setRequestHeader(V,Q.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const V=t.detectContentTypeHeader();null!==V&&i.setRequestHeader("Content-Type",V)}if(t.responseType){const V=t.responseType.toLowerCase();i.responseType="json"!==V?V:"text"}const o=t.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const V=i.statusText||"OK",Q=new wo(i.getAllResponseHeaders()),re=function tB(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(i)||t.url;return s=new fm({headers:Q,status:i.status,statusText:V,url:re}),s},d=()=>{let{headers:V,status:Q,statusText:re,url:le}=a(),pe=null;204!==Q&&(pe=typeof i.response>"u"?i.responseText:i.response),0===Q&&(Q=pe?200:0);let _e=Q>=200&&Q<300;if("json"===t.responseType&&"string"==typeof pe){const ue=pe;pe=pe.replace(eB,"");try{pe=""!==pe?JSON.parse(pe):null}catch(Te){pe=ue,_e&&(_e=!1,pe={error:Te,text:pe})}}_e?(r.next(new Wd({body:pe,headers:V,status:Q,statusText:re,url:le||void 0})),r.complete()):r.error(new zd({error:pe,headers:V,status:Q,statusText:re,url:le||void 0}))},h=V=>{const{url:Q}=a(),re=new zd({error:V,status:i.status||0,statusText:i.statusText||"Unknown Error",url:Q||void 0});r.error(re)};let m=!1;const b=V=>{m||(r.next(a()),m=!0);let Q={type:kn.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(Q.total=V.total),"text"===t.responseType&&!!i.responseText&&(Q.partialText=i.responseText),r.next(Q)},R=V=>{let Q={type:kn.UploadProgress,loaded:V.loaded};V.lengthComputable&&(Q.total=V.total),r.next(Q)};return i.addEventListener("load",d),i.addEventListener("error",h),i.addEventListener("timeout",h),i.addEventListener("abort",h),t.reportProgress&&(i.addEventListener("progress",b),null!==o&&i.upload&&i.upload.addEventListener("progress",R)),i.send(o),r.next({type:kn.Sent}),()=>{i.removeEventListener("error",h),i.removeEventListener("abort",h),i.removeEventListener("load",d),i.removeEventListener("timeout",h),t.reportProgress&&(i.removeEventListener("progress",b),null!==o&&i.upload&&i.upload.removeEventListener("progress",R)),i.readyState!==i.DONE&&i.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(Ne(ww))},e.\u0275prov=je({token:e,factory:e.\u0275fac}),e})();const pm=new $e("XSRF_ENABLED"),hC="XSRF-TOKEN",pC=new $e("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>hC}),gC="X-XSRF-TOKEN",mC=new $e("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>gC});class _C{}let nB=(()=>{class e{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=lw(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(Ne(Cn),Ne(Zu),Ne(pC))},e.\u0275prov=je({token:e,factory:e.\u0275fac}),e})();function rB(e,n){const t=e.url.toLowerCase();if(!ut(pm)||"GET"===e.method||"HEAD"===e.method||t.startsWith("http://")||t.startsWith("https://"))return n(e);const r=ut(_C).getToken(),i=ut(mC);return null!=r&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),n(e)}var Tn=(()=>((Tn=Tn||{})[Tn.Interceptors=0]="Interceptors",Tn[Tn.LegacyInterceptors=1]="LegacyInterceptors",Tn[Tn.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Tn[Tn.NoXsrfProtection=3]="NoXsrfProtection",Tn[Tn.JsonpSupport=4]="JsonpSupport",Tn[Tn.RequestsMadeViaParent=5]="RequestsMadeViaParent",Tn))();function tc(e,n){return{\u0275kind:e,\u0275providers:n}}function iB(...e){const n=[ec,fC,uC,{provide:$d,useExisting:uC},{provide:um,useExisting:fC},{provide:Il,useValue:rB,multi:!0},{provide:pm,useValue:!0},{provide:_C,useClass:nB}];for(const t of e)n.push(...t.\u0275providers);return function RN(e){return{\u0275providers:e}}(n)}const vC=new $e("LEGACY_INTERCEPTOR_FN");function sB({cookieName:e,headerName:n}){const t=[];return void 0!==e&&t.push({provide:pC,useValue:e}),void 0!==n&&t.push({provide:mC,useValue:n}),tc(Tn.CustomXsrfConfiguration,t)}let aB=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({providers:[iB(tc(Tn.LegacyInterceptors,[{provide:vC,useFactory:Y3},{provide:Il,useExisting:vC,multi:!0}]),sB({cookieName:hC,headerName:gC}))]}),e})();const qd=Mi.personasServiceURL;let nc=(()=>{class e{constructor(t){this.http=t,this.searchResults=new qe,this.searchObserver=this.searchResults.asObservable()}find(t){return this.http.get(`${qd}/${t}/recommendations`)}getRecommendedPersonas(){return this.http.get(qd+"/discover")}create(t){return this.http.post(qd,t)}launchSearch(t){this.http.get(qd+"/search/"+t).subscribe(r=>{this.searchResults.next(r.map(El.AttachMethods))})}clearSearch(){this.searchResults.next(null)}}return e.\u0275fac=function(t){return new(t||e)(Ne(ec))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function cB(e,n){if(1&e&&(de(0,"div"),Dt(1,"img",1),de(2,"span"),Ve(3),he()()),2&e){const t=He();ge(1),Cr("src",t.interest.getIconPath(),Kn),Jn("alt","",t.interest.type," icon"),ge(2),Kt(" ",t.interest.name," ")}}let yC=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Qe({type:e,selectors:[["app-interest-short-entry"]],inputs:{interest:"interest"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"img-icon",3,"src","alt"]],template:function(t,r){1&t&&Me(0,cB,4,3,"div",0),2&t&&De("ngIf",r.interest)},dependencies:[On]}),e})();function lB(e,n){if(1&e&&(de(0,"span",1),Ve(1),he()),2&e){const t=He();Jn("routerLink","/personas/",t.persona.id,""),ge(1),Kt(" ",t.persona.name," ")}}let bC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Qe({type:e,selectors:[["app-persona-name-button"]],inputs:{persona:"persona"},decls:1,vars:1,consts:[["class","font-weight-bold cursor-pointer",3,"routerLink",4,"ngIf"],[1,"font-weight-bold","cursor-pointer",3,"routerLink"]],template:function(t,r){1&t&&Me(0,lB,2,2,"span",0),2&t&&De("ngIf",r.persona)},dependencies:[On,xs],encapsulation:2}),e})();function uB(e,n){if(1&e&&Dt(0,"app-interest-short-entry",6),2&e){const t=n.$implicit;Jn("routerLink","recommendations/",t.id,""),De("interest",t.interest)}}function dB(e,n){if(1&e&&(de(0,"div",1),Dt(1,"img",2),de(2,"div",3),Dt(3,"app-persona-name-button",4),Me(4,uB,1,2,"app-interest-short-entry",5),he()()),2&e){const t=He();ge(1),Jn("routerLink","/personas/",t.persona.id,""),Cr("src",t.persona.getProfileImagePath(),Kn),Jn("alt","Image of ",t.persona.name,""),ge(2),De("persona",t.persona),ge(1),De("ngForOf",t.persona.shortRecommendationsList)}}let wC=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Qe({type:e,selectors:[["app-persona-recommendations-card"]],inputs:{persona:"persona"},decls:1,vars:1,consts:[["class","card","style","width: 18rem;",4,"ngIf"],[1,"card",2,"width","18rem"],[1,"card-img-top","person-card-image","cursor-pointer",3,"routerLink","src","alt"],[1,"card-body"],[1,"card-title","lead",3,"persona"],["class","card-text cursor-pointer",3,"interest","routerLink",4,"ngFor","ngForOf"],[1,"card-text","cursor-pointer",3,"interest","routerLink"]],template:function(t,r){1&t&&Me(0,dB,5,5,"div",0),2&t&&De("ngIf",r.persona)},dependencies:[Qr,On,xs,yC,bC],styles:[".person-card-image[_ngcontent-%COMP%]{max-height:50%;object-fit:cover;object-position:0 20%}"]}),e})(),rc=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Qe({type:e,selectors:[["app-loading-indicator"]],decls:3,vars:0,consts:[[1,"lead","d-flex","justify-content-center"]],template:function(t,r){1&t&&(de(0,"div",0)(1,"h1"),Ve(2," Loading... "),he()())}}),e})();function fB(e,n){1&e&&Dt(0,"app-persona-recommendations-card",4),2&e&&De("persona",n.$implicit)}function hB(e,n){if(1&e&&(de(0,"div",2),Me(1,fB,1,1,"app-persona-recommendations-card",3),he()),2&e){const t=He();ge(1),De("ngForOf",t.personas)}}function pB(e,n){1&e&&Dt(0,"app-loading-indicator")}let gB=(()=>{class e{constructor(t){this.personasService=t,this.personas=[]}ngOnInit(){this.personasService.getRecommendedPersonas().subscribe(t=>{this.personas=t.map(El.AttachMethods)})}}return e.\u0275fac=function(t){return new(t||e)(ne(nc))},e.\u0275cmp=Qe({type:e,selectors:[["app-discover-personas-view"]],decls:2,vars:2,consts:[["class","card-deck d-flex justify-content-center",4,"ngIf"],[4,"ngIf"],[1,"card-deck","d-flex","justify-content-center"],["class","d-flex mb-5",3,"persona",4,"ngFor","ngForOf"],[1,"d-flex","mb-5",3,"persona"]],template:function(t,r){1&t&&(Me(0,hB,2,1,"div",0),Me(1,pB,1,0,"app-loading-indicator",1)),2&t&&(De("ngIf",r.personas.length),ge(1),De("ngIf",!r.personas.length))},dependencies:[Qr,On,wC,rc]}),e})();function mB(e,n){1&e&&Dt(0,"app-persona-recommendations-card",4),2&e&&De("persona",n.$implicit)}function _B(e,n){if(1&e&&(de(0,"div",2),Me(1,mB,1,1,"app-persona-recommendations-card",3),he()),2&e){const t=He();ge(1),De("ngForOf",t.searchresult)}}function vB(e,n){1&e&&(de(0,"div")(1,"h1"),Ve(2,"Popular recommendations:"),he(),Dt(3,"app-discover-personas-view"),he())}let DC=(()=>{class e{constructor(t){this.personas=t}ngOnInit(){this.personas.searchObserver.subscribe(t=>this.searchresult=t)}}return e.\u0275fac=function(t){return new(t||e)(ne(nc))},e.\u0275cmp=Qe({type:e,selectors:[["app-home-page"]],decls:3,vars:2,consts:[["class","card-deck d-flex justify-content-center",4,"ngIf"],[4,"ngIf"],[1,"card-deck","d-flex","justify-content-center"],["class","d-flex mb-5",3,"persona",4,"ngFor","ngForOf"],[1,"d-flex","mb-5",3,"persona"]],template:function(t,r){1&t&&(de(0,"div"),Me(1,_B,2,1,"div",0),Me(2,vB,4,0,"div",1),he()),2&t&&(ge(1),De("ngIf",r.searchresult),ge(1),De("ngIf",!r.searchresult))},dependencies:[Qr,On,wC,gB]}),e})();const CC=Mi.recommendationServiceURL;let SC=(()=>{class e{constructor(t){this.http=t}getById(t){return this.http.get(CC+"/"+t)}createAndObserveResponse(t){return this.http.post(CC,t,{observe:"response"})}}return e.\u0275fac=function(t){return new(t||e)(Ne(ec))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function ui(e,n,t,r){return new(t||(t=Promise))(function(o,s){function a(m){try{h(r.next(m))}catch(b){s(b)}}function d(m){try{h(r.throw(m))}catch(b){s(b)}}function h(m){m.done?o(m.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(m.value).then(a,d)}h((r=r.apply(e,n||[])).next())})}class wB{constructor(n){Object.assign(this,n)}}const NC=Mi.commentServiceURL;let mm=(()=>{class e{constructor(t){this.http=t}create(t){return this.http.post(NC,t)}getPage(t,r,i=10,o=0){return this.http.get(`${t}/${r}/comments?limit=${i}&skip=${o}`)}delete(t){return this.http.delete(NC+"/"+t).toPromise()}}return e.\u0275fac=function(t){return new(t||e)(Ne(ec))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Jd(e,n){return new Se(t=>{const r=e.length;if(0===r)return void t.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const d=Ie(e[a]);let h=!1;t.add(d.subscribe({next:m=>{h||(h=!0,s++),i[a]=m},error:m=>t.error(m),complete:()=>{o++,(o===r||!h)&&(s===r&&t.next(n?n.reduce((m,b,R)=>(m[b]=i[R],m),{}):i),t.complete())}}))}})}let xC=(()=>{class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return e.\u0275fac=function(t){return new(t||e)(ne(bi),ne(Qt))},e.\u0275dir=Oe({type:e}),e})(),Ms=(()=>{class e extends xC{}return e.\u0275fac=function(){let n;return function(r){return(n||(n=ar(e)))(r||e)}}(),e.\u0275dir=Oe({type:e,features:[Pt]}),e})();const Ki=new $e("NgValueAccessor"),SB={provide:Ki,useExisting:ht(()=>Do),multi:!0},TB=new $e("CompositionEventMode");let Do=(()=>{class e extends xC{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function EB(){const e=zi()?zi().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return e.\u0275fac=function(t){return new(t||e)(ne(bi),ne(Qt),ne(TB,8))},e.\u0275dir=Oe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&ot("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Zt([SB]),Pt]}),e})();const ur=new $e("NgValidators"),qo=new $e("NgAsyncValidators");function OC(e){return function zo(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}(e.value)?{required:!0}:null}function Yd(e){return null}function jC(e){return null!=e}function HC(e){return Gc(e)?Ie(e):e}function UC(e){let n={};return e.forEach(t=>{n=null!=t?{...n,...t}:n}),0===Object.keys(n).length?null:n}function $C(e,n){return n.map(t=>t(e))}function GC(e){return e.map(n=>function xB(e){return!e.validate}(n)?n:t=>n.validate(t))}function _m(e){return null!=e?function WC(e){if(!e)return null;const n=e.filter(jC);return 0==n.length?null:function(t){return UC($C(t,n))}}(GC(e)):null}function vm(e){return null!=e?function zC(e){if(!e)return null;const n=e.filter(jC);return 0==n.length?null:function(t){return function DB(...e){if(1===e.length){const n=e[0];if(g(n))return Jd(n,null);if(v(n)&&Object.getPrototypeOf(n)===Object.prototype){const t=Object.keys(n);return Jd(t.map(r=>n[r]),t)}}if("function"==typeof e[e.length-1]){const n=e.pop();return Jd(e=1===e.length&&g(e[0])?e[0]:e,null).pipe(Ce(t=>n(...t)))}return Jd(e,null)}($C(t,n).map(HC)).pipe(Ce(UC))}}(GC(e)):null}function qC(e,n){return null===e?[n]:Array.isArray(e)?[...e,n]:[e,n]}function ym(e){return e?Array.isArray(e)?e:[e]:[]}function Qd(e,n){return Array.isArray(e)?e.includes(n):e===n}function YC(e,n){const t=ym(n);return ym(e).forEach(i=>{Qd(t,i)||t.push(i)}),t}function QC(e,n){return ym(n).filter(t=>!Qd(e,t))}class ZC{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=_m(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=vm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,t){return!!this.control&&this.control.hasError(n,t)}getError(n,t){return this.control?this.control.getError(n,t):null}}class Nr extends ZC{get formDirective(){return null}get path(){return null}}class Ko extends ZC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class XC{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Fs=(()=>{class e extends XC{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(ne(Ko,2))},e.\u0275dir=Oe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&vn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Pt]}),e})(),As=(()=>{class e extends XC{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(ne(Nr,10))},e.\u0275dir=Oe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&vn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Pt]}),e})();const Nl="VALID",Xd="INVALID",ic="PENDING",xl="DISABLED";function Cm(e){return(ef(e)?e.validators:e)||null}function tS(e){return Array.isArray(e)?_m(e):e||null}function Sm(e,n){return(ef(n)?n.asyncValidators:e)||null}function nS(e){return Array.isArray(e)?vm(e):e||null}function ef(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class oS{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=t,this._composedValidatorFn=tS(this._rawValidators),this._composedAsyncValidatorFn=nS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Nl}get invalid(){return this.status===Xd}get pending(){return this.status==ic}get disabled(){return this.status===xl}get enabled(){return this.status!==xl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=tS(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=nS(n)}addValidators(n){this.setValidators(YC(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(YC(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(QC(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(QC(n,this._rawAsyncValidators))}hasValidator(n){return Qd(this._rawValidators,n)}hasAsyncValidator(n){return Qd(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=ic,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=xl,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=Nl,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Nl||this.status===ic)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xl:Nl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=ic,this._hasOwnPendingAsyncValidator=!0;const t=HC(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(!1!==t.emitEvent)}get(n){let t=n;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(n,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new ct,this.statusChanges=new ct}_calculateStatus(){return this._allControlsDisabled()?xl:this.errors?Xd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ic)?ic:this._anyControlsHaveStatus(Xd)?Xd:Nl}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){ef(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}}class Em extends oS{constructor(n,t,r){super(Cm(t),Sm(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,r={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){(function iS(e,n,t){e._forEachChild((r,i)=>{if(void 0===t[i])throw new be(1002,"")})})(this,0,n),Object.keys(n).forEach(r=>{(function rS(e,n,t){const r=e.controls;if(!(n?Object.keys(r):r).length)throw new be(1e3,"");if(!r[t])throw new be(1001,"")})(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(Object.keys(n).forEach(r=>{const i=this.controls[r];i&&i.patchValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((r,i)=>{r.reset(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,r)=>(n[r]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&n(r,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(n,t){let r=n;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}const Ml=new $e("CallSetDisabledState",{providedIn:"root",factory:()=>Tm}),Tm="always";function Fl(e,n,t=Tm){Im(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||"always"===t)&&n.valueAccessor.setDisabledState?.(e.disabled),function BB(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&sS(e,n)})}(e,n),function jB(e,n){const t=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,n),function VB(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&sS(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),function LB(e,n){if(n.valueAccessor.setDisabledState){const t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,n)}function rf(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function Im(e,n){const t=function KC(e){return e._rawValidators}(e);null!==n.validator?e.setValidators(qC(t,n.validator)):"function"==typeof t&&e.setValidators([t]);const r=function JC(e){return e._rawAsyncValidators}(e);null!==n.asyncValidator?e.setAsyncValidators(qC(r,n.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();rf(n._rawValidators,i),rf(n._rawAsyncValidators,i)}function sS(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}const WB={provide:Nr,useExisting:ht(()=>Co)},Al=(()=>Promise.resolve())();let Co=(()=>{class e extends Nr{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ct,this.form=new Em({},_m(t),vm(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Al.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Fl(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Al.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Al.then(()=>{const r=this._findContainer(t.path),i=new Em({});(function aS(e,n){Im(e,n)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Al.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Al.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function cS(e,n){e._syncPendingControls(),n.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return e.\u0275fac=function(t){return new(t||e)(ne(ur,10),ne(qo,10),ne(Ml,8))},e.\u0275dir=Oe({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&ot("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Zt([WB]),Pt]}),e})();function lS(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function uS(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const dS=class extends oS{constructor(n=null,t,r){super(Cm(t),Sm(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ef(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=uS(n)?n.value:n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){lS(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){lS(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){uS(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},KB={provide:Ko,useExisting:ht(()=>Jo)},pS=(()=>Promise.resolve())();let Jo=(()=>{class e extends Ko{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new dS,this._registered=!1,this.update=new ct,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Mm(e,n){if(!n)return null;let t,r,i;return Array.isArray(n),n.forEach(o=>{o.constructor===Do?t=o:function $B(e){return Object.getPrototypeOf(e.constructor)===Ms}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function xm(e,n){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(n,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Fl(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){pS.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&Ua(r);pS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function tf(e,n){return[...n.path,e]}(t,this._parent):[t]}}return e.\u0275fac=function(t){return new(t||e)(ne(Nr,9),ne(ur,10),ne(qo,10),ne(Ki,10),ne(go,8),ne(Ml,8))},e.\u0275dir=Oe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Zt([KB]),Pt,vr]}),e})(),Rs=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Oe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),mS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({}),e})(),Os=(()=>{class e{constructor(){this._validator=Yd}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Yd,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Oe({type:e,features:[vr]}),e})();const fV={provide:ur,useExisting:ht(()=>ks),multi:!0};let ks=(()=>{class e extends Os{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ua,this.createValidator=t=>OC}enabled(t){return t}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=ar(e)))(r||e)}}(),e.\u0275dir=Oe({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&Ut("required",r._enabled?"":null)},inputs:{required:"required"},features:[Zt([fV]),Pt]}),e})(),vV=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[mS]}),e})(),OS=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:Ml,useValue:t.callSetDisabledState??Tm}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[vV]}),e})();function bV(e,n){if(1&e&&(de(0,"div",5),Ve(1),he()),2&e){const t=He();ge(1),Kt(" ",t.errorMessage," ")}}let wV=(()=>{class e{constructor(t){this.commentService=t,this.text="",this.disabled=!1,this.errorMessage=null}ngOnInit(){}submit(){return ui(this,void 0,void 0,function*(){this.disabled=!0;try{const t=new wB({domain:this.domain,entityId:this.entityId,text:this.text});yield this.commentService.create(t).toPromise()}catch(t){if(console.log(t),!(t instanceof zd))throw t;this.errorMessage=429===t.status?"You have posted too many comments.":"Soething went wrong. Try again later."}finally{this.disabled=!1}this.text=""})}}return e.\u0275fac=function(t){return new(t||e)(ne(mm))},e.\u0275cmp=Qe({type:e,selectors:[["app-comment-box"]],inputs:{domain:"domain",entityId:"entityId"},decls:5,vars:4,consts:[["action","javascript:void(0)",3,"submit"],[1,"form-group","d-flex","flex-column"],["class","alert alert-danger",4,"ngIf"],["type","text","name","comment","placeholder","Leave a comment","rows","5",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","value","Submit",1,"btn","btn-primary","justify-content-end",3,"disabled"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(de(0,"form",0),ot("submit",function(){return r.submit()}),de(1,"div",1),Me(2,bV,2,1,"div",2),de(3,"textarea",3),ot("ngModelChange",function(o){return r.text=o}),he(),Dt(4,"input",4),he()()),2&t&&(ge(2),De("ngIf",r.errorMessage),ge(1),De("ngModel",r.text),ge(1),De("disabled",r.disabled)("disabled",r.disabled))},dependencies:[On,Rs,Do,Fs,As,Jo,Co]}),e})();var kS=T(497);class PS{constructor(n){this.user=n,this.isLoggedIn=()=>null!=this.user&&!this.user.expired,this.getAuthorizationHeaderValue=()=>this.user?this.user.token_type+" "+this.user.access_token:null}get claims(){return this.user.profile||null}}const Pm=window.origin+Mi.baseHref;let So=(()=>{class e{constructor(t){this.router=t,this.manager=new kS.UserManager({authority:Mi.authenticationAuthority,client_id:"angular-app",redirect_uri:Pm+"auth-callback",post_logout_redirect_uri:Pm+"auth-signout-callback",response_type:"code",automaticSilentRenew:!0,scope:"openid profile recommendation-service user-profile-service comment-service",filterProtocolClaims:!0,loadUserInfo:!0,silent_redirect_uri:Pm+"auth-silent-callback"}),this.UserChanged=new ct,this.completeAuthentication=()=>{window.location.search&&this.manager.signinRedirectCallback().then(()=>this.restorePath())},this.completeAuthenticationSilently=()=>this.manager.signinSilentCallback(),this.completeSignOut=()=>this.manager.signoutRedirectCallback().then(this.restorePath),this.saveRestorePath=(r=null)=>localStorage.setItem("restore-url",r||window.location.pathname),this.restorePath=()=>{this.router.navigateByUrl(localStorage.getItem("restore-url")||"/")},Mi.production||(kS.Log.logger=console),this.manager.events.addUserLoaded(r=>this.notifyUserChanged(r)),this.manager.events.addUserUnloaded(()=>this.notifyUserChanged())}notifyUserChanged(t){this.UserChanged.emit(t?new PS(t):null)}startAuthentication(t=null){this.saveRestorePath(t),this.manager.signinRedirect().catch(r=>console.log({authenticationError:r}))}startRegistrationRedirect(){this.saveRestorePath();const t=encodeURIComponent(window.location.origin+"/registration-callback");window.location.href=Mi.authenticationAuthority+"/Account/Register?returnUrl="+t}startAuthenticationSilently(){this.manager.signinSilent().then(this.restorePath).catch(t=>console.log({authenticationError:t}))}startSignOut(){this.saveRestorePath("/"),this.manager.signoutRedirect()}getAuthenticatedeUser(){return ui(this,void 0,void 0,function*(){try{const t=yield this.manager.getUser();return new PS(t)}catch(t){console.log({authenticationError:t})}})}}return e.\u0275fac=function(t){return new(t||e)(Ne(En))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function DV(e,n){if(1&e&&(de(0,"div",14),Ve(1),he()),2&e){const t=He(2);ge(1),Kt(" ",t.errorMessage," ")}}function CV(e,n){if(1&e){const t=Dn();de(0,"button",15),ot("click",function(){return cn(t),ln(He(2).removeComment())}),Ve(1," Remove "),he()}2&e&&De("disabled",He(2).disabled)}function SV(e,n){if(1&e&&(de(0,"div",1)(1,"div",2)(2,"button",3),Ve(3," \u22c0 "),he(),de(4,"button",4),Ve(5," \u22c1 "),he()(),de(6,"div",5),Me(7,DV,2,1,"div",6),de(8,"div",7)(9,"pre",8),Ve(10),he()(),de(11,"div",9)(12,"span",10),Ve(13),he(),de(14,"span",11),Ve(15),Pp(16,"date"),he(),de(17,"button",12),Ve(18,"Reply"),he(),Me(19,CV,2,1,"button",13),he()()()),2&e){const t=He();ge(2),De("disabled",t.disabled),ge(2),De("disabled",t.disabled),ge(3),De("ngIf",t.errorMessage),ge(3),ko(null==t.comment.text?null:t.comment.text.trim()),ge(3),Kt("",t.comment.username||"Annonymous"," "),ge(2),Kt("",function Kb(e,n,t,r){const i=e+22,o=ve(),s=oa(o,i);return Zc(o,i)?$b(o,yr(),n,s.transform,t,r,s):s.transform(t,r)}(16,8,t.comment.createdAt,"short")," "),ge(2),De("disabled",t.disabled),ge(2),De("ngIf",t.canEdit())}}let EV=(()=>{class e{constructor(t,r){this.service=t,this.authService=r,this.disabled=!1,this.deleted=!1,this.errorMessage=null}ngOnInit(){this.authService.getAuthenticatedeUser().then(t=>this.user=t),this.authService.UserChanged.subscribe(t=>this.user=t)}canEdit(){var t;return(null===(t=this.user)||void 0===t?void 0:t.isLoggedIn())&&this.user.claims.name===this.comment.username}removeComment(){return ui(this,void 0,void 0,function*(){try{this.disabled=!0,yield this.service.delete(this.comment.id),this.deleted=!0}catch(t){t instanceof zd?(console.log(t),404===t.status&&(this.errorMessage="Could not confirm deletion. Please try again later."),403===t.status&&(this.errorMessage="You can't delete this."),console.log(this.errorMessage)):this.disabled=!1}})}}return e.\u0275fac=function(t){return new(t||e)(ne(mm),ne(So))},e.\u0275cmp=Qe({type:e,selectors:[["app-comment"]],inputs:{comment:"comment"},decls:1,vars:1,consts:[["class","comment-wrapper d-flex",4,"ngIf"],[1,"comment-wrapper","d-flex"],[1,"d-flex","flex-column","justify-content-end"],[1,"btn","px-0","pb-0","font-weight-bold",3,"disabled"],[1,"btn","px-0","pt-0","font-weight-bold",3,"disabled"],[1,"d-flex","flex-column","ml-2"],["class","alert alert-warning",4,"ngIf"],[1,"comment-message"],[1,"m-0"],[1,"mt-auto","comment-footer"],[1,"username","font-weight-bold"],[1,"text-muted"],[1,"btn","font-weight-bold","py-0",3,"disabled"],["class","btn text-danger font-weight-bold py-0",3,"disabled","click",4,"ngIf"],[1,"alert","alert-warning"],[1,"btn","text-danger","font-weight-bold","py-0",3,"disabled","click"]],template:function(t,r){1&t&&Me(0,SV,20,11,"div",0),2&t&&De("ngIf",!r.deleted)},dependencies:[On,mw],styles:[".comment-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem;padding:.5rem;border-left:1px solid #333}.comment-footer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:2px;display:inline-block}"]}),e})();function TV(e,n){1&e&&Dt(0,"app-comment",5),2&e&&De("comment",n.$implicit)}function IV(e,n){if(1&e){const t=Dn();de(0,"div",6),ot("click",function(){return cn(t),ln(He(2).onShowMore())}),Ve(1," Load more "),he()}}function NV(e,n){if(1&e&&(de(0,"div",2),Me(1,TV,1,1,"app-comment",3),Me(2,IV,2,0,"div",4),he()),2&e){const t=He();ge(1),De("ngForOf",t.comments),ge(1),De("ngIf",t.moreAvailable)}}function xV(e,n){1&e&&Dt(0,"app-loading-indicator")}let MV=(()=>{class e{constructor(t){this.commentService=t,this.comments=[],this.moreAvailable=!0}get commentUrl(){return Mi[this.domain+"ServiceURL"]}ngOnInit(){this.commentService.getPage(this.commentUrl,this.entityId,10).subscribe({next:t=>{this.comments=t,this.moreAvailable=t.length>=10}})}onShowMore(){var t;this.commentService.getPage(this.commentUrl,this.entityId,10,(null===(t=this.comments)||void 0===t?void 0:t.length)||0).subscribe({next:r=>{this.comments.push(...r),this.moreAvailable=r.length>=10}})}}return e.\u0275fac=function(t){return new(t||e)(ne(mm))},e.\u0275cmp=Qe({type:e,selectors:[["app-comment-list"]],inputs:{entity:"entity",domain:"domain",entityId:"entityId"},decls:2,vars:2,consts:[["class","d-flex flex-column",4,"ngIf"],[4,"ngIf"],[1,"d-flex","flex-column"],[3,"comment",4,"ngFor","ngForOf"],["class","btn btn-outline-primary mb-5 align-self-center",3,"click",4,"ngIf"],[3,"comment"],[1,"btn","btn-outline-primary","mb-5","align-self-center",3,"click"]],template:function(t,r){1&t&&(Me(0,NV,3,2,"div",0),Me(1,xV,1,0,"app-loading-indicator",1)),2&t&&(De("ngIf",r.comments.length),ge(1),De("ngIf",!r.comments.length))},dependencies:[Qr,On,rc,EV]}),e})();function FV(e,n){1&e&&Dt(0,"img",20),2&e&&Cr("src",He(2).HEART_PATH,Kn)}function AV(e,n){1&e&&(de(0,"span"),Ve(1,"(maybe)"),he())}const RV=function(e,n){return{"text-success":e,"text-danger":n}};function OV(e,n){if(1&e&&(de(0,"div",2)(1,"div",3)(2,"div",4),Dt(3,"img",5),he(),de(4,"div",6),Me(5,FV,1,1,"img",7),he(),de(6,"div",8),Dt(7,"img",5),he()(),de(8,"div",9)(9,"div",4),Dt(10,"app-persona-name-button",10),he(),de(11,"div",11),Me(12,AV,2,0,"span",1),Ve(13," recommends "),he(),de(14,"div",12),Ve(15),he()(),de(16,"div",13)(17,"a",14),Ve(18),he(),de(19,"strong",15),Ve(20),he(),de(21,"div")(22,"a",16),Ve(23,"\u22c0 Legitimate "),he(),de(24,"a",16),Ve(25,"\u22c1 Fake "),he()(),de(26,"a",16),Ve(27,"Share"),he()(),de(28,"div",17),Dt(29,"app-comment-box",18),he(),de(30,"div",17),Dt(31,"app-comment-list",19),he()()),2&e){const t=He();ge(3),Cr("src",t.recommendation.persona.getProfileImagePath(),Kn),Jn("alt","Image of ",t.recommendation.persona.name,""),ge(2),De("ngIf",t.recommendation.isConfirmed),ge(2),Cr("src",t.recommendation.interest.getImagePath(),Kn),Bu("alt","Icon for ",t.recommendation.interest.name," ",t.recommendation.interest.type,""),ge(3),De("persona",t.recommendation.persona),ge(2),De("ngIf",!t.recommendation.isConfirmed),ge(3),Kt(" ",t.recommendation.interest.name," "),ge(2),Cr("href",t.recommendation.context,Kn),ge(1),Kt(" ",t.recommendation.isConfirmed?"Context":"Proof"," "),ge(1),De("ngClass",function Ba(e,n,t,r,i){return $b(ve(),yr(),e,n,t,r,i)}(18,RV,t.recommendation.isConfirmed,!t.recommendation.isConfirmed)),ge(1),Kt(" Certainty ",t.recommendation.isConfirmed?100:0," % "),ge(9),De("domain","recommendation")("entityId",t.recommendation.id.toString()),ge(2),De("domain","recommendation")("entity","recommendations")("entityId",t.recommendation.id.toString())}}function kV(e,n){1&e&&Dt(0,"app-loading-indicator")}let PV=(()=>{class e{constructor(t,r){this.recommendations=t,this.route=r,this.HEART_PATH=$o.RedHeart}ngOnInit(){this.id=Number(this.route.snapshot.paramMap.get("id")),this.recommendations.getById(this.id).subscribe({next:t=>this.recommendation=Sl.AttachMethods(t)})}}return e.\u0275fac=function(t){return new(t||e)(ne(SC),ne(Uo))},e.\u0275cmp=Qe({type:e,selectors:[["app-recommendation-page"]],decls:2,vars:2,consts:[["class","container-fluid",4,"ngIf"],[4,"ngIf"],[1,"container-fluid"],[1,"row","justify-content-center","wrap"],[1,"col-4","text-right"],[1,"persona-profile-img",3,"src","alt"],[1,"col-2","col-lg-3","text-center"],["alt","Heart icon","class","recommendation-heart",3,"src",4,"ngIf"],[1,"col-4"],[1,"row","justify-content-center","recommendation-view"],[3,"persona"],[1,"col-3","text-center"],[1,"col-4","text-left"],[1,"d-flex","justify-content-start","button-pane","mt-3"],["target","_blank",3,"href"],[3,"ngClass"],["href","#"],[1,"mt-3"],[3,"domain","entityId"],[3,"domain","entity","entityId"],["alt","Heart icon",1,"recommendation-heart",3,"src"]],template:function(t,r){1&t&&(Me(0,OV,32,21,"div",0),Me(1,kV,1,0,"app-loading-indicator",1)),2&t&&(De("ngIf",r.recommendation),ge(1),De("ngIf",!r.recommendation))},dependencies:[uw,On,rc,bC,wV,MV],styles:[".recommendation-heart[_ngcontent-%COMP%]{width:15vw;height:15vw;min-width:6rem;min-height:6rem;max-width:10rem;max-height:10rem}.recommendation-view[_ngcontent-%COMP%]{font-size:1.8em}.button-pane[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 15px}.button-pane[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:unset;font-weight:700}"]}),e})(),LV=(()=>{class e{constructor(t,r){this.authService=t,this.router=r}ngOnInit(){this.authService.completeAuthentication()}}return e.\u0275fac=function(t){return new(t||e)(ne(So),ne(En))},e.\u0275cmp=Qe({type:e,selectors:[["app-auth-callback-page"]],decls:2,vars:0,template:function(t,r){1&t&&(de(0,"p"),Ve(1,"Redirecting..."),he())},encapsulation:2}),e})(),BV=(()=>{class e{constructor(t,r){this.authService=t,this.router=r}ngOnInit(){this.authService.completeSignOut()}}return e.\u0275fac=function(t){return new(t||e)(ne(So),ne(En))},e.\u0275cmp=Qe({type:e,selectors:[["app-auth-signout-callback-page"]],decls:2,vars:0,template:function(t,r){1&t&&(de(0,"p"),Ve(1,"Redirecting..."),he())},encapsulation:2}),e})(),VV=(()=>{class e{constructor(t){this.auth=t}ngOnInit(){this.auth.startAuthenticationSilently()}}return e.\u0275fac=function(t){return new(t||e)(ne(So))},e.\u0275cmp=Qe({type:e,selectors:[["app-registration-callback-page"]],decls:2,vars:0,template:function(t,r){1&t&&(de(0,"p"),Ve(1,"Redirecting..."),he())},encapsulation:2}),e})(),jV=(()=>{class e{constructor(t){this.auth=t}ngOnInit(){this.auth.completeAuthenticationSilently()}}return e.\u0275fac=function(t){return new(t||e)(ne(So))},e.\u0275cmp=Qe({type:e,selectors:[["app-auth-silent-callback-page"]],decls:2,vars:0,template:function(t,r){1&t&&(de(0,"p"),Ve(1,"Redirecting..."),he())},encapsulation:2}),e})();class HV{constructor(n){Object.assign(this,n)}}var UV=T(166),Lm=T.n(UV),Rl=(()=>(function(e){e.InstanceOf="P31",e.Image="P18"}(Rl||(Rl={})),Rl))();let Ol=(()=>{class e{constructor(t){Object.assign(this,t)}static OrderByModifiedDateDesc(t,r){return r.modified.localeCompare(t.modified)}static PersonaModelMapper(t){return new e({wikiId:t.id,name:t.labels.en,description:t.descriptions.en,modified:t.modified,images:t.claims[Rl.Image]})}getImageUri(t=600){return this.images?Lm().getImageUrl(this.images[0],t):$o.FallbackPersonaImage}}return e.PersonaEntityFilter=n=>n.claims.P31&&"Q5"===n.claims.P31[0],e})(),$V=(()=>{class e{constructor(){this.wiki=Lm()({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"})}searchEntities(t){return this.wiki.searchEntities(t)}getManyEntities(t){return this.wiki.getManyEntities(t)[0]}simplifyEntities(t){return this.wiki.simplify.entities(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Bm=(()=>{class e{constructor(t,r){this.http=t,this.wiki=r}GetSearchResults(t){return new Se(r=>this.SearchAndPublishSegment(t,0,r))}SearchAndPublishSegment(t,r,i){if(r>90||null==r)return i.complete();const o=this.wiki.searchEntities({search:t,language:"en",limit:20,continue:r});this.http.get(o).subscribe(s=>{i.next(s),this.SearchAndPublishSegment(t,s["search-continue"],i)},s=>i.error(s))}GetEntitiesByIds(...t){return ui(this,void 0,void 0,function*(){if(!t||0===t.length)return Promise.resolve([]);const r=this.wiki.getManyEntities({ids:t,languages:["en"],props:["info","labels","claims","descriptions"]}),i=yield this.http.get(r).toPromise();return Object.values(this.wiki.simplifyEntities(i.entities))||[]})}}return e.\u0275fac=function(t){return new(t||e)(Ne(ec),Ne($V))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function GV(e,n){if(1&e){const t=Dn();de(0,"div",8)(1,"div",9)(2,"div",10)(3,"a",11)(4,"h5"),Ve(5),he(),de(6,"span",12),Ve(7),he()(),de(8,"p"),Ve(9),he()(),de(10,"div",13)(11,"div",14),ot("click",function(){const o=cn(t).$implicit;return ln(He().addPersona(o))}),Ve(12,"Add"),he()()()()}if(2&e){const t=n.$implicit;ge(3),Jn("href","https://www.wikidata.org/wiki/",t.wikiId,"",Kn),ge(2),Kt("",t.name," "),ge(2),ko(t.wikiId),ge(2),Kt("",t.description," ")}}function WV(e,n){1&e&&Dt(0,"app-loading-indicator")}const zV=function(){return[]};let qV=(()=>{class e{constructor(t,r){this.personasService=t,this.wiki=r,this.model=new Ol,this.isLoading=!1,this.endLoading=()=>{this.isLoading=!1}}ngOnInit(){}onSubmit(){}updateSugestions(){this.startLoading();const t=this.model.name;setTimeout(()=>ui(this,void 0,void 0,function*(){this.searchStillRelevant(t)&&(yield this.populateSuggestions(t))}),300)}startLoading(){this.wikiModel=[],this.isLoading=!0}searchStillRelevant(t){return this.model.name&&t===this.model.name}populateSuggestions(t){this.personaSubscription=this.wiki.GetSearchResults(t).subscribe({next:r=>ui(this,void 0,void 0,function*(){return yield this.AddDetailed(t,r)}),error:console.error,complete:this.endLoading})}AddDetailed(t,r){return ui(this,void 0,void 0,function*(){if(!r.search||!1===this.searchStillRelevant(t))return;this.wikiModel.length>25&&this.personaSubscription.unsubscribe();const i=r.search.map(a=>a.id),o=yield this.wiki.GetEntitiesByIds(...i);if(!o||!this.searchStillRelevant(t))return;const s=o.filter(a=>a.claims.P31&&"Q5"===a.claims.P31[0]).map(a=>new Ol({wikiId:a.id,name:a.labels.en,description:a.descriptions.en,modified:a.modified})).sort(Ol.OrderByModifiedDateDesc);this.wikiModel.push(...s),this.wikiModel.length>25&&this.personaSubscription.unsubscribe()})}addPersona(t){this.personasService.create(new HV(t)).subscribe(r=>console.log(r)),this.wikiModel=this.wikiModel.filter(r=>r!==t)}}return e.\u0275fac=function(t){return new(t||e)(ne(nc),ne(Bm))},e.\u0275cmp=Qe({type:e,selectors:[["app-add-persona-page"]],decls:12,vars:4,consts:[[1,"container","row","justify-content-center"],[1,"col","col-md-8","col-lg-6"],[1,"form-group"],["for","name"],["type","text","required","","id","name","name","name",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-deck","d-flex","justify-content-center"],["class","d-flex col-4 mb-3",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-flex","col-4","mb-3"],[1,"card"],[1,"card-body"],["target","_blank",1,"card-title",3,"href"],[1,"text-muted"],[1,"card-footer"],[1,"btn","btn-primary","float-right",3,"click"]],template:function(t,r){1&t&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ve(3,"Add Persona"),he(),de(4,"form")(5,"div",2)(6,"label",3),Ve(7,"Name as seen on Wikipedia or Wikibase ID"),he(),de(8,"input",4),ot("ngModelChange",function(o){return r.model.name=o})("ngModelChange",function(){return r.updateSugestions()}),he()()()()(),de(9,"div",5),Me(10,GV,13,4,"div",6),he(),Me(11,WV,1,0,"app-loading-indicator",7)),2&t&&(ge(8),De("ngModel",r.model.name),ge(2),De("ngForOf",r.wikiModel||Wu(3,zV)),ge(1),De("ngIf",r.isLoading))},dependencies:[Qr,On,Rs,Do,Fs,As,ks,Jo,Co,rc]}),e})();class KV{constructor(n){Object.assign(this,n)}}var Lt=(()=>(function(e){e.Human="Q5",e.Anthalogy="Q105420",e.Book="Q571",e.EpicPoem="Q37484",e.Haiku="Q37707",e.LiteraryWork="Q7725634",e.Myth="Q12827256",e.Novel="Q8261",e.Novella="Q149537",e.Play="Q25379",e.Poem="Q5185279",e.ShortStory="Q49084",e.ShortNovel="Q12799318",e.WrittenWork="Q47461344",e.Xiaoshuo="Q59126",e.AnimatedSeries="Q581714",e.AnimeTVSeries="Q63952888",e.FeatureFilm="Q24869",e.Film="Q11424",e.Film3D="Q229390",e.Miniseries="Q1259759",e.TVSeries="Q5398426",e.TVSerial="Q7724161",e.VideoGame="Q7889",e.VideoGameMod="Q865493",e.Podcast="Q24634210",e.RadioDramaSeries="Q3511312",e.CreativeWork="Q17537576"}(Lt||(Lt={})),Lt))();class Ps{constructor(n){Object.assign(this,n)}static OrderByModifiedDateDesc(n,t){return t.modified.localeCompare(n.modified)}static InterestEntityFilter(n){const t=n.claims.P31||["undefined"];return Object.keys(LS).includes(t[0])}static InterestModelMapper(n){return new Ps({wikiId:n.id,name:n.labels.en,description:n.descriptions.en,modified:n.modified,instanceOf:n.claims.P31[0],images:n.claims[Rl.Image]})}getImageUri(n){return this.images?Lm().getImageUrl(this.images[0],n):null}}const YV=[Lt.AnimatedSeries,Lt.AnimeTVSeries,Lt.FeatureFilm,Lt.Film3D,Lt.Film,Lt.Miniseries,Lt.TVSeries,Lt.TVSerial],QV=[Lt.VideoGame,Lt.VideoGameMod],ZV=[Lt.Podcast,Lt.RadioDramaSeries],XV=[Lt.CreativeWork],oc={};[Lt.Anthalogy,Lt.Book,Lt.EpicPoem,Lt.Haiku,Lt.LiteraryWork,Lt.Myth,Lt.Novel,Lt.Novella,Lt.Play,Lt.Poem,Lt.ShortStory,Lt.ShortNovel,Lt.WrittenWork,Lt.Xiaoshuo].forEach(e=>oc[e.toString()]=Go.Book),YV.forEach(e=>oc[e.toString()]=Go.Movie),QV.forEach(e=>oc[e.toString()]=Go.Game),ZV.forEach(e=>oc[e.toString()]=Go.Podcast),XV.forEach(e=>oc[e.toString()]=Go.Other);const LS=oc;let BS=(()=>{class e{constructor(t){this.http=t,this.baseUrl=Mi.interestServiceURL}create(t){return this.http.post(this.baseUrl,t)}}return e.\u0275fac=function(t){return new(t||e)(Ne(ec))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function ej(e,n){if(1&e){const t=Dn();de(0,"div",8)(1,"div",9)(2,"div",10)(3,"a",11)(4,"h5"),Ve(5),he(),de(6,"span",12),Ve(7),he()(),de(8,"p"),Ve(9),he()(),de(10,"div",13)(11,"div",14),ot("click",function(){const o=cn(t).$implicit;return ln(He().addInterest(o))}),Ve(12,"Add"),he()()()()}if(2&e){const t=n.$implicit;ge(3),Jn("href","https://www.wikidata.org/wiki/",t.wikiId,"",Kn),ge(2),Kt("",t.name," "),ge(2),ko(t.wikiId),ge(2),Kt("",t.description," ")}}function tj(e,n){1&e&&Dt(0,"app-loading-indicator")}const nj=function(){return[]};let rj=(()=>{class e{constructor(t,r){this.wiki=t,this.service=r,this.model=new Xa,this.isLoading=!1,this.endLoading=()=>{this.isLoading=!1}}ngOnInit(){}updateSugestions(){this.startLoading();const t=this.model.name;setTimeout(()=>{this.searchStillRelevant(t)&&this.populateSuggestions(t)},300)}startLoading(){this.wikiModel=[],this.isLoading=!0}searchStillRelevant(t){return this.model.name&&t===this.model.name}populateSuggestions(t){this.interestSubscription=this.wiki.GetSearchResults(t).subscribe({next:r=>ui(this,void 0,void 0,function*(){return yield this.AddDetailed(t,r)}),error:console.error,complete:this.endLoading})}AddDetailed(t,r){return ui(this,void 0,void 0,function*(){if(!1===this.searchStillRelevant(t))return;const i=r.search.map(a=>a.id),o=yield this.wiki.GetEntitiesByIds(...i);if(!o||!this.searchStillRelevant(t))return;const s=o.filter(Ps.InterestEntityFilter).map(Ps.InterestModelMapper).sort(Ps.OrderByModifiedDateDesc);this.wikiModel.push(...s)})}addInterest(t){this.service.create(new KV(t)).subscribe(console.log),this.wikiModel=this.wikiModel.filter(r=>r!==t)}}return e.\u0275fac=function(t){return new(t||e)(ne(Bm),ne(BS))},e.\u0275cmp=Qe({type:e,selectors:[["app-add-interest-page"]],decls:12,vars:4,consts:[[1,"container","row","justify-content-center"],[1,"col","col-md-8","col-lg-6"],[1,"form-group"],["for","name"],["type","text","required","","id","name","name","name",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-deck","d-flex","justify-content-center"],["class","d-flex col-4 mb-3",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-flex","col-4","mb-3"],[1,"card"],[1,"card-body"],["target","_blank",1,"card-title",3,"href"],[1,"text-muted"],[1,"card-footer"],[1,"btn","btn-primary","float-right",3,"click"]],template:function(t,r){1&t&&(de(0,"div",0)(1,"div",1)(2,"h1"),Ve(3,"Add Interest"),he(),de(4,"form")(5,"div",2)(6,"label",3),Ve(7,"Name"),he(),de(8,"input",4),ot("ngModelChange",function(o){return r.model.name=o})("ngModelChange",function(){return r.updateSugestions()}),he()()()()(),de(9,"div",5),Me(10,ej,13,4,"div",6),he(),Me(11,tj,1,0,"app-loading-indicator",7)),2&t&&(ge(8),De("ngModel",r.model.name),ge(2),De("ngForOf",r.wikiModel||Wu(3,nj)),ge(1),De("ngIf",r.isLoading))},dependencies:[Qr,On,Rs,Do,Fs,As,ks,Jo,Co,rc]}),e})();class ij{}function oj(e,n){if(1&e&&Dt(0,"img",16),2&e){const t=He().$implicit;Cr("src",t.getImageUri(600),Kn),Jn("alt","Image of ",t.name,"")}}function sj(e,n){if(1&e){const t=Dn();de(0,"div",8)(1,"div",9),Me(2,oj,1,2,"img",10),de(3,"div",11)(4,"a",12)(5,"h5"),Ve(6),he(),de(7,"span",13),Ve(8),he()(),de(9,"p"),Ve(10),he()(),de(11,"div",14)(12,"button",15),ot("click",function(){const o=cn(t).$implicit;return ln(He().selectEntity(o))}),Ve(13,"Select"),he()()()()}if(2&e){const t=n.$implicit;ge(2),De("ngIf",t.images),ge(2),Jn("href","https://www.wikidata.org/wiki/",t.wikiId,"",Kn),ge(2),Kt("",t.name," "),ge(2),ko(t.wikiId),ge(2),Kt("",t.description," ")}}function aj(e,n){1&e&&Dt(0,"app-loading-indicator")}const cj=function(){return[]};let lj=(()=>{class e{constructor(t){this.wiki=t,this.isLoading=!1,this.title="Select entity",this.EntitySelected=new ct,this.endLoading=()=>{this.isLoading=!1}}ngOnInit(){}updateSugestions(){this.startLoading();const t=this.searchQueryModel;setTimeout(()=>{!1===this.searchIsOutdated(t)&&this.populateSuggestions(t)},300)}startLoading(){this.wikiModel=[],this.isLoading=!0}searchIsOutdated(t){return!t||t!==this.searchQueryModel}populateSuggestions(t){this.entitiesSubscription=this.wiki.GetSearchResults(t).subscribe({next:r=>ui(this,void 0,void 0,function*(){return yield this.AddDetailed(t,r)}),error:console.error,complete:this.endLoading})}AddDetailed(t,r){return ui(this,void 0,void 0,function*(){if(!r.search||this.searchIsOutdated(t))return;this.wikiModel.length>25&&this.entitiesSubscription.unsubscribe();const i=r.search.map(a=>a.id),o=yield this.wiki.GetEntitiesByIds(...i);if(!o||this.searchIsOutdated(t))return;const s=o.filter(this.EntityFilter).map(this.ModelMapper);this.wikiModel.push(...s),this.wikiModel.length>25&&this.entitiesSubscription.unsubscribe()})}selectEntity(t){this.EntitySelected.emit(t)}}return e.\u0275fac=function(t){return new(t||e)(ne(Bm))},e.\u0275cmp=Qe({type:e,selectors:[["app-wiki-entity-selector"]],inputs:{ModelMapper:"ModelMapper",EntityFilter:"EntityFilter",title:"title"},outputs:{EntitySelected:"EntitySelected"},decls:12,vars:5,consts:[[1,"container","row","justify-content-center"],[1,"col","col-md-8","col-lg-6"],[1,"form-group"],["for","name"],["type","search","required","","name","name",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-deck","d-flex","justify-content-center"],["class","d-flex col-4 mb-4",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-flex","col-4","mb-4"],[1,"card","m-0"],["class","card-img-top person-card-image cursor-pointer",3,"src","alt",4,"ngIf"],[1,"card-body"],["target","_blank",1,"card-title",3,"href"],[1,"text-muted"],[1,"card-footer"],[1,"btn","btn-primary","float-right",3,"click"],[1,"card-img-top","person-card-image","cursor-pointer",3,"src","alt"]],template:function(t,r){1&t&&(de(0,"div",0)(1,"div",1)(2,"h3"),Ve(3),he(),de(4,"form")(5,"div",2)(6,"label",3),Ve(7,"Name as seen on Wikipedia or the Wikibase ID"),he(),de(8,"input",4),ot("ngModelChange",function(o){return r.searchQueryModel=o})("ngModelChange",function(){return r.updateSugestions()}),he()()()()(),de(9,"div",5),Me(10,sj,14,5,"div",6),he(),Me(11,aj,1,0,"app-loading-indicator",7)),2&t&&(ge(3),ko(r.title),ge(5),De("ngModel",r.searchQueryModel),ge(2),De("ngForOf",r.wikiModel||Wu(4,cj)),ge(1),De("ngIf",r.isLoading))},dependencies:[Qr,On,Rs,Do,Fs,As,ks,Jo,Co,rc]}),e})();const uj=["PersonaSelectionForm"],dj=["InterestSelectionForm"],fj=["submitForm"];function hj(e,n){if(1&e&&(de(0,"div",5),Dt(1,"img",11),he()),2&e){const t=He();ge(1),Cr("src",t.persona.getProfileImagePath(),Kn),Jn("alt","Image of ",t.persona.name,"")}}function pj(e,n){if(1&e&&(de(0,"div",12),Dt(1,"img",13),he()),2&e){const t=He();ge(1),Cr("src",t.HEART_IMAGE,Kn)}}function gj(e,n){if(1&e&&(de(0,"div",14),Dt(1,"img",11),he()),2&e){const t=He();ge(1),Cr("src",t.interest.getImagePath(),Kn),Bu("alt","Icon for ",t.interest.name," ",t.interest.type,"")}}function mj(e,n){1&e&&(de(0,"div",12),Ve(1," recommends "),he())}function _j(e,n){if(1&e&&(de(0,"div",15),Ve(1),he()),2&e){const t=He();ge(1),Kt(" ",t.interest.name," ")}}function vj(e,n){if(1&e){const t=Dn();de(0,"app-wiki-entity-selector",16,17),ot("EntitySelected",function(i){return cn(t),ln(He().personaSelected(i))}),he()}if(2&e){const t=He();De("ModelMapper",t.PersonaModelMapper)("EntityFilter",t.PersonaEntityFilter)}}function yj(e,n){if(1&e){const t=Dn();de(0,"app-wiki-entity-selector",18,19),ot("EntitySelected",function(i){return cn(t),ln(He().interestSelected(i))}),he()}if(2&e){const t=He();De("ModelMapper",t.InterestModelMapper)("EntityFilter",t.InterestEntityFilter)}}function bj(e,n){if(1&e){const t=Dn();de(0,"div",20)(1,"div",21)(2,"form",22,23),ot("ngSubmit",function(){return cn(t),ln(He().addRecommendation())}),de(4,"div",24)(5,"div",25),Ve(6," Please enter an url to a credible source for this recommendation. Best sources are official blog posts, interviews, tweets, Youtube videos etc. "),he(),de(7,"input",26),ot("ngModelChange",function(i){return cn(t),ln(He().model.context=i)}),he()(),de(8,"button",27),Ve(9," Register "),he()()()()}if(2&e){const t=Ci(3),r=He();ge(7),De("ngModel",r.model.context),ge(1),De("disabled",!t.form.valid||!r.model.interestId||!r.model.personaId)}}let wj=(()=>{class e{constructor(t,r,i,o){this.service=t,this.personasService=r,this.interestsService=i,this.router=o,this.model=new ij,this.persona=null,this.interest=null,this.HEART_IMAGE=$o.RedHeart;const s=this.router.getCurrentNavigation();s&&s.extras.state&&(this.persona=s.extras.state.persona,this.model.personaId=this.persona.id)}ngOnInit(){}personaSelected(t){this.persona=new Cl({name:t.name,imageUri:t.getImageUri()}),this.personasService.create(t).subscribe(r=>{this.persona=Cl.AttachMethods(r),this.model.personaId=r.id})}interestSelected(t){this.interest=new Xa({name:t.name,type:LS[t.instanceOf]}),this.interestsService.create(t).subscribe(r=>{this.interest=Xa.AttachMethods(r),this.model.interestId=r.id})}addRecommendation(){const t=window.location.href;this.service.createAndObserveResponse(this.model).subscribe({next:r=>{switch(t===window.location.href&&this.router.navigate(["recommendations",r.body.id]),r.status){case 200:console.log("recommendation already existed");break;case 201:console.log("new recommendation created")}}})}get PersonaModelMapper(){return Ol.PersonaModelMapper}get PersonaEntityFilter(){return Ol.PersonaEntityFilter}get InterestModelMapper(){return Ps.InterestModelMapper}get InterestEntityFilter(){return Ps.InterestEntityFilter}}return e.\u0275fac=function(t){return new(t||e)(ne(SC),ne(nc),ne(BS),ne(En))},e.\u0275cmp=Qe({type:e,selectors:[["app-add-recommendation-page"]],viewQuery:function(t,r){if(1&t&&(Va(uj,5),Va(dj,5),Va(fj,5)),2&t){let i;Xt(i=en())&&(r.PersonaSelectionForm=i.first),Xt(i=en())&&(r.InterestSelectionForm=i.first),Xt(i=en())&&(r.submitForm=i.first)}},decls:14,vars:9,consts:[[1,"row","justify-content-center","wrap"],["class","col-4 text-right ",4,"ngIf"],["class","col-3 text-center ",4,"ngIf"],["class","col-4",4,"ngIf"],[1,"row","justify-content-center","recommendation-view","mb-3"],[1,"col-4","text-right"],["class","col-3 text-center",4,"ngIf"],["class","col-4 text-left",4,"ngIf"],["title","Select Persona",3,"ModelMapper","EntityFilter","EntitySelected",4,"ngIf"],["title","Select Interest",3,"ModelMapper","EntityFilter","EntitySelected",4,"ngIf"],["class","row justify-content-center",4,"ngIf"],[1,"persona-profile-img",3,"src","alt"],[1,"col-3","text-center"],["alt","Heart icon",1,"recommendation-heart",3,"src"],[1,"col-4"],[1,"col-4","text-left"],["title","Select Persona",3,"ModelMapper","EntityFilter","EntitySelected"],["PersonaSelectionForm",""],["title","Select Interest",3,"ModelMapper","EntityFilter","EntitySelected"],["InterestSelectionForm",""],[1,"row","justify-content-center"],[1,"col","col-lg-6","align-self-center"],[3,"ngSubmit"],["submitForm","ngForm"],[1,"form-group"],[1,"text-muted"],["type","url","required","","placeholder","Proof","name","context","id","context",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","float-right",3,"disabled"]],template:function(t,r){1&t&&(de(0,"h2"),Ve(1,"Register recommednation"),he(),de(2,"div",0),Me(3,hj,2,2,"div",1),Me(4,pj,2,1,"div",2),Me(5,gj,2,3,"div",3),he(),de(6,"div",4)(7,"div",5),Ve(8),he(),Me(9,mj,2,0,"div",6),Me(10,_j,2,1,"div",7),he(),Me(11,vj,2,2,"app-wiki-entity-selector",8),Me(12,yj,2,2,"app-wiki-entity-selector",9),Me(13,bj,10,2,"div",10)),2&t&&(ge(3),De("ngIf",r.persona),ge(1),De("ngIf",r.persona&&r.interest),ge(1),De("ngIf",r.interest),ge(3),Kt(" ",null==r.persona?null:r.persona.name," "),ge(1),De("ngIf",r.persona&&r.interest),ge(1),De("ngIf",r.interest),ge(1),De("ngIf",!r.persona),ge(1),De("ngIf",r.persona&&!r.interest),ge(1),De("ngIf",r.persona&&r.interest))},dependencies:[On,Rs,Do,Fs,As,ks,Jo,Co,lj],styles:[".recommendation-heart[_ngcontent-%COMP%]{width:15vw;height:15vw;min-width:6rem;min-height:6rem;max-width:10rem;max-height:10rem}.recommendation-view[_ngcontent-%COMP%]{font-size:1.8em}"]}),e})(),Vm=(()=>{class e{constructor(t){this.auth=t}canActivate(t){return ui(this,void 0,void 0,function*(){return!!(yield this.auth.getAuthenticatedeUser()).isLoggedIn()||(this.auth.startAuthentication(t.url.join("/")),!1)})}}return e.\u0275fac=function(t){return new(t||e)(Ne(So))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Dj(e,n){1&e&&(de(0,"a",13),Dt(1,"img",14),he()),2&e&&Cr("href",He(2).persona.wikipediaUri,Kn)}function Cj(e,n){if(1&e){const t=Dn();de(0,"div",3)(1,"div",4),Dt(2,"img",5),he(),de(3,"div",6)(4,"h1"),Ve(5),he(),de(6,"span",7),Ve(7),he(),de(8,"a",8),Ve(9),he(),de(10,"div",9),Me(11,Dj,2,1,"a",10),he(),de(12,"div")(13,"div",11),ot("click",function(){return cn(t),ln(He().registerButtonClicked())}),Ve(14," Add recommendation "),he(),de(15,"div",12),Ve(16," Follow "),he()()()()}if(2&e){const t=He();ge(2),Cr("src",t.persona.getProfileImagePath(),Kn),ge(3),ko(t.persona.name),ge(2),Kt(" ",t.persona.description,""),ge(1),Jn("href","https://www.wikidata.org/wiki/",t.persona.wikiId,"",Kn),ge(1),Kt(" ",t.persona.wikiId,""),ge(2),De("ngIf",t.persona.wikipediaUri)}}function Sj(e,n){if(1&e&&Dt(0,"app-interest-short-entry",23),2&e){const t=n.$implicit;Jn("routerLink","/recommendations/",t.id,""),De("interest",t.interest)}}function Ej(e,n){if(1&e&&(de(0,"div",20)(1,"div",18),Ve(2),he(),de(3,"div",21),Me(4,Sj,1,2,"app-interest-short-entry",22),he()()),2&e){const t=n.$implicit;ge(2),Kt(" ",t.key,"s "),ge(2),De("ngForOf",t.value)}}function Tj(e,n){if(1&e&&(de(0,"div",24),Dt(1,"app-interest-short-entry",23),he()),2&e){const t=n.$implicit;ge(1),Jn("routerLink","/recommendations/",t.id,""),De("interest",t.interest)}}function Ij(e,n){if(1&e&&(de(0,"div",15),Me(1,Ej,5,2,"div",16),Pp(2,"keyvalue"),de(3,"div",17)(4,"div",18),Ve(5," Pending "),he(),Me(6,Tj,2,2,"div",19),he()()),2&e){const t=He();ge(1),De("ngForOf",qb(2,2,t.persona.geConfirmedtRecommendationsByType())),ge(5),De("ngForOf",t.persona.pendingRecommendations)}}const Nj=[{path:"",component:DC},{path:"recommendations/add",component:wj,canActivate:[Vm]},{path:"recommendations/:id",component:PV},{path:"auth-callback",component:LV},{path:"auth-signout-callback",component:BV},{path:"registration-callback",component:VV},{path:"auth-silent-callback",component:jV},{path:"personas/add",component:qV,canActivate:[Vm]},{path:"personas/:id",component:(()=>{class e{constructor(t,r,i){this.personaService=t,this.route=r,this.router=i}ngOnInit(){this.personaService.find(this.route.snapshot.params.id).subscribe(t=>{this.persona=El.AttachMethods(t)})}registerButtonClicked(){this.router.navigate(["recommendations","add"],{state:{persona:this.persona}})}}return e.\u0275fac=function(t){return new(t||e)(ne(nc),ne(Uo),ne(En))},e.\u0275cmp=Qe({type:e,selectors:[["app-view-persona-page"]],decls:5,vars:2,consts:[["class","row justify-content-center",4,"ngIf"],[1,"mt-5"],["class","row",4,"ngIf"],[1,"row","justify-content-center"],[1,"col-3"],[1,"w-100",3,"src"],[1,"col","col-md-5","justify-content-left"],[1,"text-muted"],[1,"btn-link","text-muted",3,"href"],[1,"mb-3"],["target","_blank",3,"href",4,"ngIf"],[1,"btn","btn-primary","mx-2",3,"click"],[1,"btn","btn-primary","mx-2"],["target","_blank",3,"href"],["src","assets/img/icons/wiki.png","alt","Wikipedia logo",1,"img-icon-lg"],[1,"row"],["class","col p-0 m-0 interest-column",4,"ngFor","ngForOf"],[1,"col","p-0"],[1,"lead","column-header","p-1"],["class","px-1",4,"ngFor","ngForOf"],[1,"col","p-0","m-0","interest-column"],[1,"p-1"],["class","cursor-pointer",3,"interest","routerLink",4,"ngFor","ngForOf"],[1,"cursor-pointer",3,"interest","routerLink"],[1,"px-1"]],template:function(t,r){1&t&&(de(0,"div"),Me(1,Cj,17,6,"div",0),de(2,"h3",1),Ve(3,"Recommendations:"),he(),Me(4,Ij,7,4,"div",2),he()),2&t&&(ge(1),De("ngIf",r.persona),ge(3),De("ngIf",r.persona))},dependencies:[Qr,On,xs,yC,_w],styles:[".column-header[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid black}.interest-column[_ngcontent-%COMP%]{border-right:2px solid black}"]}),e})()},{path:"interests/add",component:rj,canActivate:[Vm]},{path:"**",component:DC}];let xj=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[nC.forRoot(Nj),nC]}),e})();function Br(e,n,t,r){return H(t)&&(r=t,t=void 0),r?Br(e,n,t).pipe(Ce(i=>g(i)?r(...i):r(i))):new Se(i=>{VS(e,n,function o(s){i.next(arguments.length>1?Array.prototype.slice.call(arguments):s)},i,t)})}function VS(e,n,t,r,i){let o;if(function Aj(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){const s=e;e.addEventListener(n,t,i),o=()=>s.removeEventListener(n,t,i)}else if(function Fj(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){const s=e;e.on(n,t),o=()=>s.off(n,t)}else if(function Mj(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){const s=e;e.addListener(n,t),o=()=>s.removeListener(n,t)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,a=e.length;s<a;s++)VS(e[s],n,t,r,i)}r.add(o)}class Rj extends D{constructor(n,t){super()}schedule(n,t=0){return this}}let jS=(()=>{class e{constructor(t,r=e.now){this.SchedulerAction=t,this.now=r}schedule(t,r=0,i){return new this.SchedulerAction(this,t).schedule(i,r)}}return e.now=()=>Date.now(),e})();class Yo extends jS{constructor(n,t=jS.now){super(n,()=>Yo.delegate&&Yo.delegate!==this?Yo.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(n,t=0,r){return Yo.delegate&&Yo.delegate!==this?Yo.delegate.schedule(n,t,r):super.schedule(n,t,r)}flush(n){const{actions:t}=this;if(this.active)return void t.push(n);let r;this.active=!0;do{if(r=n.execute(n.state,n.delay))break}while(n=t.shift());if(this.active=!1,r){for(;n=t.shift();)n.unsubscribe();throw r}}}const HS=new Yo(class Oj extends Rj{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){if(this.closed)return this;this.state=n;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(n,t,r=0){return setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,t,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(n,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let i,r=!1;try{this.work(n)}catch(o){r=!0,i=!!o&&o||new Error(o)}if(r)return this.unsubscribe(),i}_unsubscribe(){const n=this.id,t=this.scheduler,r=t.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null}});function US(e){return!g(e)&&e-parseFloat(e)+1>=0}function kj(e){const{index:n,period:t,subscriber:r}=e;if(r.next(n),!r.closed){if(-1===t)return r.complete();e.index=n+1,this.schedule(e,t)}}function GS(...e){if(1===e.length){if(!g(e[0]))return e[0];e=e[0]}return et(e,void 0).lift(new Pj)}class Pj{call(n,t){return t.subscribe(new Lj(n))}}class Lj extends kg{constructor(n){super(n),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(n){this.observables.push(n)}_complete(){const n=this.observables,t=n.length;if(0===t)this.destination.complete();else{for(let r=0;r<t&&!this.hasFirst;r++){const o=Pg(this,n[r],void 0,r);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}}notifyNext(n,t,r){if(!this.hasFirst){this.hasFirst=!0;for(let i=0;i<this.subscriptions.length;i++)if(i!==r){let o=this.subscriptions[i];o.unsubscribe(),this.remove(o)}this.subscriptions=null}this.destination.next(t)}}function cf(...e){const n=e[e.length-1];return"function"==typeof n&&e.pop(),et(e,void 0).lift(new Bj(n))}new Se(vo);class Bj{constructor(n){this.resultSelector=n}call(n,t){return t.subscribe(new Vj(n,this.resultSelector))}}class Vj extends F{constructor(n,t,r=Object.create(null)){super(n),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(n){const t=this.iterators;g(n)?t.push(new Hj(n)):t.push("function"==typeof n[gn]?new jj(n[gn]()):new Uj(this.destination,this,n))}_complete(){const n=this.iterators,t=n.length;if(this.unsubscribe(),0!==t){this.active=t;for(let r=0;r<t;r++){let i=n[r];i.stillUnsubscribed?this.destination.add(i.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const n=this.iterators,t=n.length,r=this.destination;for(let s=0;s<t;s++){let a=n[s];if("function"==typeof a.hasValue&&!a.hasValue())return}let i=!1;const o=[];for(let s=0;s<t;s++){let a=n[s],d=a.next();if(a.hasCompleted()&&(i=!0),d.done)return void r.complete();o.push(d.value)}this.resultSelector?this._tryresultSelector(o):r.next(o),i&&r.complete()}_tryresultSelector(n){let t;try{t=this.resultSelector.apply(this,n)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class jj{constructor(n){this.iterator=n,this.nextResult=n.next()}hasValue(){return!0}next(){const n=this.nextResult;return this.nextResult=this.iterator.next(),n}hasCompleted(){const n=this.nextResult;return Boolean(n&&n.done)}}class Hj{constructor(n){this.array=n,this.index=0,this.length=0,this.length=n.length}[gn](){return this}next(n){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class Uj extends mt{constructor(n,t,r){super(n),this.parent=t,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[gn](){return this}next(){const n=this.buffer;return 0===n.length&&this.isComplete?{value:null,done:!0}:{value:n.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(n){this.buffer.push(n),this.parent.checkIterators()}subscribe(){return fr(this.observable,new pt(this))}}function Un(e){return n=>n.lift(new Gj(e))}class Gj{constructor(n){this.notifier=n}call(n,t){const r=new Wj(n),i=fr(this.notifier,new pt(r));return i&&!r.seenValue?(r.add(i),t.subscribe(r)):r}}class Wj extends mt{constructor(n){super(n),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function Hm(...e){return n=>{let t;return"function"==typeof e[e.length-1]&&(t=e.pop()),n.lift(new Kj(e,t))}}class Kj{constructor(n,t){this.observables=n,this.project=t}call(n,t){return t.subscribe(new Jj(n,this.observables,this.project))}}class Jj extends kg{constructor(n,t,r){super(n),this.observables=t,this.project=r,this.toRespond=[];const i=t.length;this.values=new Array(i);for(let o=0;o<i;o++)this.toRespond.push(o);for(let o=0;o<i;o++)this.add(Pg(this,t[o],void 0,o))}notifyNext(n,t,r){this.values[r]=t;const i=this.toRespond;if(i.length>0){const o=i.indexOf(r);-1!==o&&i.splice(o,1)}}notifyComplete(){}_next(n){if(0===this.toRespond.length){const t=[n,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(n){let t;try{t=this.project.apply(this,n)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class Fi{constructor(n,t,r){this.kind=n,this.value=t,this.error=r,this.hasValue="N"===n}observe(n){switch(this.kind){case"N":return n.next&&n.next(this.value);case"E":return n.error&&n.error(this.error);case"C":return n.complete&&n.complete()}}do(n,t,r){switch(this.kind){case"N":return n&&n(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}}accept(n,t,r){return n&&"function"==typeof n.next?this.observe(n):this.do(n,t,r)}toObservable(){switch(this.kind){case"N":return Ke(this.value);case"E":return $a(this.error);case"C":return Dd()}throw new Error("unexpected notification kind value")}static createNext(n){return typeof n<"u"?new Fi("N",n):Fi.undefinedValueNotification}static createError(n){return new Fi("E",void 0,n)}static createComplete(){return Fi.completeNotification}}Fi.completeNotification=new Fi("C"),Fi.undefinedValueNotification=new Fi("N",void 0);class Zj{constructor(n,t){this.delay=n,this.scheduler=t}call(n,t){return t.subscribe(new Um(n,this.delay,this.scheduler))}}class Um extends F{constructor(n,t,r){super(n),this.delay=t,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}static dispatch(n){const t=n.source,r=t.queue,i=n.scheduler,o=n.destination;for(;r.length>0&&r[0].time-i.now()<=0;)r.shift().notification.observe(o);if(r.length>0){const s=Math.max(0,r[0].time-i.now());this.schedule(n,s)}else this.unsubscribe(),t.active=!1}_schedule(n){this.active=!0,this.destination.add(n.schedule(Um.dispatch,this.delay,{source:this,destination:this.destination,scheduler:n}))}scheduleNotification(n){if(!0===this.errored)return;const t=this.scheduler,r=new Xj(t.now()+this.delay,n);this.queue.push(r),!1===this.active&&this._schedule(t)}_next(n){this.scheduleNotification(Fi.createNext(n))}_error(n){this.errored=!0,this.queue=[],this.destination.error(n),this.unsubscribe()}_complete(){this.scheduleNotification(Fi.createComplete()),this.unsubscribe()}}class Xj{constructor(n,t){this.time=n,this.notification=t}}var r8={left:"right",right:"left",bottom:"top",top:"bottom"};function lf(e){return e.replace(/left|right|bottom|top/g,function(n){return r8[n]})}function Ji(e){return e.split("-")[0]}var i8={start:"end",end:"start"};function zS(e){return e.replace(/start|end/g,function(n){return i8[n]})}var ei="top",Ai="bottom",Ri="right",ti="left",$m="auto",kl=[ei,Ai,Ri,ti],sc="start",Pl="end",qS="viewport",Ll="popper",KS=kl.reduce(function(e,n){return e.concat([n+"-"+sc,n+"-"+Pl])},[]),JS=[].concat(kl,[$m]).reduce(function(e,n){return e.concat([n,n+"-"+sc,n+"-"+Pl])},[]),m8=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function di(e){if(null==e)return window;if("[object Window]"!==e.toString()){var n=e.ownerDocument;return n&&n.defaultView||window}return e}function Ls(e){return e instanceof di(e).Element||e instanceof Element}function fi(e){return e instanceof di(e).HTMLElement||e instanceof HTMLElement}function Gm(e){return!(typeof ShadowRoot>"u")&&(e instanceof di(e).ShadowRoot||e instanceof ShadowRoot)}function Qo(e){return((Ls(e)?e.ownerDocument:e.document)||window.document).documentElement}var Bs=Math.max,uf=Math.min,ac=Math.round;function Wm(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function YS(){return!/^((?!chrome|android).)*safari/i.test(Wm())}function cc(e,n,t){void 0===n&&(n=!1),void 0===t&&(t=!1);var r=e.getBoundingClientRect(),i=1,o=1;n&&fi(e)&&(i=e.offsetWidth>0&&ac(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&ac(r.height)/e.offsetHeight||1);var a=(Ls(e)?di(e):window).visualViewport,d=!YS()&&t,h=(r.left+(d&&a?a.offsetLeft:0))/i,m=(r.top+(d&&a?a.offsetTop:0))/o,b=r.width/i,R=r.height/o;return{width:b,height:R,top:m,right:h+b,bottom:m+R,left:h,x:h,y:m}}function zm(e){var n=di(e);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function qm(e){return cc(Qo(e)).left+zm(e).scrollLeft}function Eo(e){return di(e).getComputedStyle(e)}function Yi(e){return e?(e.nodeName||"").toLowerCase():null}function df(e){return"html"===Yi(e)?e:e.assignedSlot||e.parentNode||(Gm(e)?e.host:null)||Qo(e)}function Km(e){var n=Eo(e);return/auto|scroll|overlay|hidden/.test(n.overflow+n.overflowY+n.overflowX)}function QS(e){return["html","body","#document"].indexOf(Yi(e))>=0?e.ownerDocument.body:fi(e)&&Km(e)?e:QS(df(e))}function Bl(e,n){var t;void 0===n&&(n=[]);var r=QS(e),i=r===(null==(t=e.ownerDocument)?void 0:t.body),o=di(r),s=i?[o].concat(o.visualViewport||[],Km(r)?r:[]):r,a=n.concat(s);return i?a:a.concat(Bl(df(s)))}function y8(e){return["table","td","th"].indexOf(Yi(e))>=0}function ZS(e){return fi(e)&&"fixed"!==Eo(e).position?e.offsetParent:null}function Vl(e){for(var n=di(e),t=ZS(e);t&&y8(t)&&"static"===Eo(t).position;)t=ZS(t);return t&&("html"===Yi(t)||"body"===Yi(t)&&"static"===Eo(t).position)?n:t||function b8(e){var n=/firefox/i.test(Wm());if(/Trident/i.test(Wm())&&fi(e)&&"fixed"===Eo(e).position)return null;var i=df(e);for(Gm(i)&&(i=i.host);fi(i)&&["html","body"].indexOf(Yi(i))<0;){var o=Eo(i);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||n&&"filter"===o.willChange||n&&o.filter&&"none"!==o.filter)return i;i=i.parentNode}return null}(e)||n}function XS(e,n){var t=n.getRootNode&&n.getRootNode();if(e.contains(n))return!0;if(t&&Gm(t)){var r=n;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Jm(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function eE(e,n,t){return n===qS?Jm(function _8(e,n){var t=di(e),r=Qo(e),i=t.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,d=0;if(i){o=i.width,s=i.height;var h=YS();(h||!h&&"fixed"===n)&&(a=i.offsetLeft,d=i.offsetTop)}return{width:o,height:s,x:a+qm(e),y:d}}(e,t)):Ls(n)?function w8(e,n){var t=cc(e,!1,"fixed"===n);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(n,t):Jm(function v8(e){var n,t=Qo(e),r=zm(e),i=null==(n=e.ownerDocument)?void 0:n.body,o=Bs(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Bs(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+qm(e),d=-r.scrollTop;return"rtl"===Eo(i||t).direction&&(a+=Bs(t.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:d}}(Qo(e)))}function lc(e){return e.split("-")[1]}function Ym(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function tE(e){var d,n=e.reference,t=e.element,r=e.placement,i=r?Ji(r):null,o=r?lc(r):null,s=n.x+n.width/2-t.width/2,a=n.y+n.height/2-t.height/2;switch(i){case ei:d={x:s,y:n.y-t.height};break;case Ai:d={x:s,y:n.y+n.height};break;case Ri:d={x:n.x+n.width,y:a};break;case ti:d={x:n.x-t.width,y:a};break;default:d={x:n.x,y:n.y}}var h=i?Ym(i):null;if(null!=h){var m="y"===h?"height":"width";switch(o){case sc:d[h]=d[h]-(n[m]/2-t[m]/2);break;case Pl:d[h]=d[h]+(n[m]/2-t[m]/2)}}return d}function rE(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function iE(e,n){return n.reduce(function(t,r){return t[r]=e,t},{})}function Qm(e,n){void 0===n&&(n={});var r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,s=void 0===o?e.strategy:o,a=n.boundary,d=void 0===a?"clippingParents":a,h=n.rootBoundary,m=void 0===h?qS:h,b=n.elementContext,R=void 0===b?Ll:b,V=n.altBoundary,Q=void 0!==V&&V,re=n.padding,le=void 0===re?0:re,pe=rE("number"!=typeof le?le:iE(le,kl)),ue=e.rects.popper,Te=e.elements[Q?R===Ll?"reference":Ll:R],Le=function C8(e,n,t,r){var i="clippingParents"===n?function D8(e){var n=Bl(df(e)),r=["absolute","fixed"].indexOf(Eo(e).position)>=0&&fi(e)?Vl(e):e;return Ls(r)?n.filter(function(i){return Ls(i)&&XS(i,r)&&"body"!==Yi(i)}):[]}(e):[].concat(n),o=[].concat(i,[t]),a=o.reduce(function(d,h){var m=eE(e,h,r);return d.top=Bs(m.top,d.top),d.right=uf(m.right,d.right),d.bottom=uf(m.bottom,d.bottom),d.left=Bs(m.left,d.left),d},eE(e,o[0],r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(Ls(Te)?Te:Te.contextElement||Qo(e.elements.popper),d,m,s),Je=cc(e.elements.reference),It=tE({reference:Je,element:ue,strategy:"absolute",placement:i}),kt=Jm(Object.assign({},ue,It)),fn=R===Ll?kt:Je,hn={top:Le.top-fn.top+pe.top,bottom:fn.bottom-Le.bottom+pe.bottom,left:Le.left-fn.left+pe.left,right:fn.right-Le.right+pe.right},tn=e.modifiersData.offset;if(R===Ll&&tn){var Mr=tn[i];Object.keys(hn).forEach(function(Gn){var ki=[Ri,Ai].indexOf(Gn)>=0?1:-1,Pi=[ei,Ai].indexOf(Gn)>=0?"y":"x";hn[Gn]+=Mr[Pi]*ki})}return hn}const I8={name:"flip",enabled:!0,phase:"main",fn:function T8(e){var n=e.state,t=e.options,r=e.name;if(!n.modifiersData[r]._skip){for(var i=t.mainAxis,o=void 0===i||i,s=t.altAxis,a=void 0===s||s,d=t.fallbackPlacements,h=t.padding,m=t.boundary,b=t.rootBoundary,R=t.altBoundary,V=t.flipVariations,Q=void 0===V||V,re=t.allowedAutoPlacements,le=n.options.placement,pe=Ji(le),ue=d||(pe!==le&&Q?function E8(e){if(Ji(e)===$m)return[];var n=lf(e);return[zS(e),n,zS(n)]}(le):[lf(le)]),Te=[le].concat(ue).reduce(function(fc,Xo){return fc.concat(Ji(Xo)===$m?function S8(e,n){void 0===n&&(n={});var i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,d=n.allowedAutoPlacements,h=void 0===d?JS:d,m=lc(n.placement),b=m?a?KS:KS.filter(function(Q){return lc(Q)===m}):kl,R=b.filter(function(Q){return h.indexOf(Q)>=0});0===R.length&&(R=b);var V=R.reduce(function(Q,re){return Q[re]=Qm(e,{placement:re,boundary:i,rootBoundary:o,padding:s})[Ji(re)],Q},{});return Object.keys(V).sort(function(Q,re){return V[Q]-V[re]})}(n,{placement:Xo,boundary:m,rootBoundary:b,padding:h,flipVariations:Q,allowedAutoPlacements:re}):Xo)},[]),Le=n.rects.reference,Je=n.rects.popper,It=new Map,kt=!0,fn=Te[0],hn=0;hn<Te.length;hn++){var tn=Te[hn],Mr=Ji(tn),Gn=lc(tn)===sc,ki=[ei,Ai].indexOf(Mr)>=0,Pi=ki?"width":"height",tr=Qm(n,{placement:tn,boundary:m,rootBoundary:b,altBoundary:R,padding:h}),ni=ki?Gn?Ri:ti:Gn?Ai:ei;Le[Pi]>Je[Pi]&&(ni=lf(ni));var wf=lf(ni),Gs=[];if(o&&Gs.push(tr[Mr]<=0),a&&Gs.push(tr[ni]<=0,tr[wf]<=0),Gs.every(function(fc){return fc})){fn=tn,kt=!1;break}It.set(tn,Gs)}if(kt)for(var f_=function(Xo){var Kl=Te.find(function(Sf){var Ws=It.get(Sf);if(Ws)return Ws.slice(0,Xo).every(function(h_){return h_})});if(Kl)return fn=Kl,"break"},ql=Q?3:1;ql>0&&"break"!==f_(ql);ql--);n.placement!==fn&&(n.modifiersData[r]._skip=!0,n.placement=fn,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function jl(e,n,t){return Bs(e,uf(n,t))}function Zm(e){var n=cc(e),t=e.offsetWidth,r=e.offsetHeight;return Math.abs(n.width-t)<=1&&(t=n.width),Math.abs(n.height-r)<=1&&(r=n.height),{x:e.offsetLeft,y:e.offsetTop,width:t,height:r}}const F8={name:"preventOverflow",enabled:!0,phase:"main",fn:function M8(e){var n=e.state,t=e.options,r=e.name,i=t.mainAxis,o=void 0===i||i,s=t.altAxis,a=void 0!==s&&s,R=t.tether,V=void 0===R||R,Q=t.tetherOffset,re=void 0===Q?0:Q,le=Qm(n,{boundary:t.boundary,rootBoundary:t.rootBoundary,padding:t.padding,altBoundary:t.altBoundary}),pe=Ji(n.placement),_e=lc(n.placement),ue=!_e,Te=Ym(pe),Le=function N8(e){return"x"===e?"y":"x"}(Te),Je=n.modifiersData.popperOffsets,It=n.rects.reference,kt=n.rects.popper,fn="function"==typeof re?re(Object.assign({},n.rects,{placement:n.placement})):re,hn="number"==typeof fn?{mainAxis:fn,altAxis:fn}:Object.assign({mainAxis:0,altAxis:0},fn),tn=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,Mr={x:0,y:0};if(Je){if(o){var Gn,ki="y"===Te?ei:ti,Pi="y"===Te?Ai:Ri,tr="y"===Te?"height":"width",ni=Je[Te],wf=ni+le[ki],Gs=ni-le[Pi],Df=V?-kt[tr]/2:0,f_=_e===sc?It[tr]:kt[tr],ql=_e===sc?-kt[tr]:-It[tr],Cf=n.elements.arrow,fc=V&&Cf?Zm(Cf):{width:0,height:0},Xo=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Kl=Xo[ki],Sf=Xo[Pi],Ws=jl(0,It[tr],fc[tr]),h_=ue?It[tr]/2-Df-Ws-Kl-hn.mainAxis:f_-Ws-Kl-hn.mainAxis,U5=ue?-It[tr]/2+Df+Ws+Sf+hn.mainAxis:ql+Ws+Sf+hn.mainAxis,p_=n.elements.arrow&&Vl(n.elements.arrow),iT=null!=(Gn=tn?.[Te])?Gn:0,W5=ni+U5-iT,oT=jl(V?uf(wf,ni+h_-iT-(p_?"y"===Te?p_.clientTop||0:p_.clientLeft||0:0)):wf,ni,V?Bs(Gs,W5):Gs);Je[Te]=oT,Mr[Te]=oT-ni}if(a){var sT,zs=Je[Le],Ef="y"===Le?"height":"width",aT=zs+le["x"===Te?ei:ti],cT=zs-le["x"===Te?Ai:Ri],g_=-1!==[ei,ti].indexOf(pe),lT=null!=(sT=tn?.[Le])?sT:0,uT=g_?aT:zs-It[Ef]-kt[Ef]-lT+hn.altAxis,dT=g_?zs+It[Ef]+kt[Ef]-lT-hn.altAxis:cT,fT=V&&g_?function x8(e,n,t){var r=jl(e,n,t);return r>t?t:r}(uT,zs,dT):jl(V?uT:aT,zs,V?dT:cT);Je[Le]=fT,Mr[Le]=fT-zs}n.modifiersData[r]=Mr}},requiresIfExists:["offset"]},k8={name:"arrow",enabled:!0,phase:"main",fn:function R8(e){var n,t=e.state,r=e.name,i=e.options,o=t.elements.arrow,s=t.modifiersData.popperOffsets,a=Ji(t.placement),d=Ym(a),m=[ti,Ri].indexOf(a)>=0?"height":"width";if(o&&s){var b=function(n,t){return rE("number"!=typeof(n="function"==typeof n?n(Object.assign({},t.rects,{placement:t.placement})):n)?n:iE(n,kl))}(i.padding,t),R=Zm(o),V="y"===d?ei:ti,Q="y"===d?Ai:Ri,re=t.rects.reference[m]+t.rects.reference[d]-s[d]-t.rects.popper[m],le=s[d]-t.rects.reference[d],pe=Vl(o),_e=pe?"y"===d?pe.clientHeight||0:pe.clientWidth||0:0,Je=_e/2-R[m]/2+(re/2-le/2),It=jl(b[V],Je,_e-R[m]-b[Q]);t.modifiersData[r]=((n={})[d]=It,n.centerOffset=It-Je,n)}},effect:function O8(e){var n=e.state,r=e.options.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"==typeof i&&!(i=n.elements.popper.querySelector(i))||!XS(n.elements.popper,i)||(n.elements.arrow=i))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function V8(e,n,t){void 0===t&&(t=!1);var r=fi(n),i=fi(n)&&function B8(e){var n=e.getBoundingClientRect(),t=ac(n.width)/e.offsetWidth||1,r=ac(n.height)/e.offsetHeight||1;return 1!==t||1!==r}(n),o=Qo(n),s=cc(e,i,t),a={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!t)&&(("body"!==Yi(n)||Km(o))&&(a=function L8(e){return e!==di(e)&&fi(e)?function P8(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}(e):zm(e)}(n)),fi(n)?((d=cc(n,!0)).x+=n.clientLeft,d.y+=n.clientTop):o&&(d.x=qm(o))),{x:s.left+a.scrollLeft-d.x,y:s.top+a.scrollTop-d.y,width:s.width,height:s.height}}function j8(e){var n=new Map,t=new Set,r=[];function i(o){t.add(o.name),[].concat(o.requires||[],o.requiresIfExists||[]).forEach(function(a){if(!t.has(a)){var d=n.get(a);d&&i(d)}}),r.push(o)}return e.forEach(function(o){n.set(o.name,o)}),e.forEach(function(o){t.has(o.name)||i(o)}),r}function U8(e){var n;return function(){return n||(n=new Promise(function(t){Promise.resolve().then(function(){n=void 0,t(e())})})),n}}var oE={placement:"bottom",modifiers:[],strategy:"absolute"};function sE(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return!n.some(function(r){return!(r&&"function"==typeof r.getBoundingClientRect)})}function G8(e){void 0===e&&(e={});var t=e.defaultModifiers,r=void 0===t?[]:t,i=e.defaultOptions,o=void 0===i?oE:i;return function(a,d,h){void 0===h&&(h=o);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},oE,o),modifiersData:{},elements:{reference:a,popper:d},attributes:{},styles:{}},b=[],R=!1,V={state:m,setOptions:function(pe){var _e="function"==typeof pe?pe(m.options):pe;re(),m.options=Object.assign({},o,m.options,_e),m.scrollParents={reference:Ls(a)?Bl(a):a.contextElement?Bl(a.contextElement):[],popper:Bl(d)};var ue=function H8(e){var n=j8(e);return m8.reduce(function(t,r){return t.concat(n.filter(function(i){return i.phase===r}))},[])}(function $8(e){var n=e.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(n).map(function(t){return n[t]})}([].concat(r,m.options.modifiers)));return m.orderedModifiers=ue.filter(function(tn){return tn.enabled}),function Q(){m.orderedModifiers.forEach(function(le){var _e=le.options,Te=le.effect;if("function"==typeof Te){var Le=Te({state:m,name:le.name,instance:V,options:void 0===_e?{}:_e});b.push(Le||function(){})}})}(),V.update()},forceUpdate:function(){if(!R){var pe=m.elements,_e=pe.reference,ue=pe.popper;if(sE(_e,ue)){m.rects={reference:V8(_e,Vl(ue),"fixed"===m.options.strategy),popper:Zm(ue)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(tn){return m.modifiersData[tn.name]=Object.assign({},tn.data)});for(var Le=0;Le<m.orderedModifiers.length;Le++)if(!0!==m.reset){var Je=m.orderedModifiers[Le],It=Je.fn,kt=Je.options;"function"==typeof It&&(m=It({state:m,options:void 0===kt?{}:kt,name:Je.name,instance:V})||m)}else m.reset=!1,Le=-1}}},update:U8(function(){return new Promise(function(le){V.forceUpdate(),le(m)})}),destroy:function(){re(),R=!0}};if(!sE(a,d))return V;function re(){b.forEach(function(le){return le()}),b=[]}return V.setOptions(h).then(function(le){!R&&h.onFirstUpdate&&h.onFirstUpdate(le)}),V}}var ff={passive:!0};const z8={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function W8(e){var n=e.state,t=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,d=di(n.elements.popper),h=[].concat(n.scrollParents.reference,n.scrollParents.popper);return o&&h.forEach(function(m){m.addEventListener("scroll",t.update,ff)}),a&&d.addEventListener("resize",t.update,ff),function(){o&&h.forEach(function(m){m.removeEventListener("scroll",t.update,ff)}),a&&d.removeEventListener("resize",t.update,ff)}},data:{}},K8={name:"popperOffsets",enabled:!0,phase:"read",fn:function q8(e){var n=e.state;n.modifiersData[e.name]=tE({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})},data:{}};var J8={top:"auto",right:"auto",bottom:"auto",left:"auto"};function aE(e){var n,t=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,d=e.gpuAcceleration,h=e.adaptive,m=e.roundOffsets,b=e.isFixed,R=s.x,V=void 0===R?0:R,Q=s.y,re=void 0===Q?0:Q,le="function"==typeof m?m({x:V,y:re}):{x:V,y:re};V=le.x,re=le.y;var pe=s.hasOwnProperty("x"),_e=s.hasOwnProperty("y"),ue=ti,Te=ei,Le=window;if(h){var Je=Vl(t),It="clientHeight",kt="clientWidth";Je===di(t)&&"static"!==Eo(Je=Qo(t)).position&&"absolute"===a&&(It="scrollHeight",kt="scrollWidth"),(i===ei||(i===ti||i===Ri)&&o===Pl)&&(Te=Ai,re-=(b&&Je===Le&&Le.visualViewport?Le.visualViewport.height:Je[It])-r.height,re*=d?1:-1),i!==ti&&(i!==ei&&i!==Ai||o!==Pl)||(ue=Ri,V-=(b&&Je===Le&&Le.visualViewport?Le.visualViewport.width:Je[kt])-r.width,V*=d?1:-1)}var Gn,tn=Object.assign({position:a},h&&J8),Mr=!0===m?function Y8(e){var t=e.y,i=window.devicePixelRatio||1;return{x:ac(e.x*i)/i||0,y:ac(t*i)/i||0}}({x:V,y:re}):{x:V,y:re};return V=Mr.x,re=Mr.y,Object.assign({},tn,d?((Gn={})[Te]=_e?"0":"",Gn[ue]=pe?"0":"",Gn.transform=(Le.devicePixelRatio||1)<=1?"translate("+V+"px, "+re+"px)":"translate3d("+V+"px, "+re+"px, 0)",Gn):((n={})[Te]=_e?re+"px":"",n[ue]=pe?V+"px":"",n.transform="",n))}const Z8={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function Q8(e){var n=e.state,t=e.options,r=t.gpuAcceleration,i=void 0===r||r,o=t.adaptive,s=void 0===o||o,a=t.roundOffsets,d=void 0===a||a,m={placement:Ji(n.placement),variation:lc(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:i,isFixed:"fixed"===n.options.strategy};null!=n.modifiersData.popperOffsets&&(n.styles.popper=Object.assign({},n.styles.popper,aE(Object.assign({},m,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:s,roundOffsets:d})))),null!=n.modifiersData.arrow&&(n.styles.arrow=Object.assign({},n.styles.arrow,aE(Object.assign({},m,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})},data:{}};var tH=[z8,K8,Z8,{name:"applyStyles",enabled:!0,phase:"write",fn:function X8(e){var n=e.state;Object.keys(n.elements).forEach(function(t){var r=n.styles[t]||{},i=n.attributes[t]||{},o=n.elements[t];!fi(o)||!Yi(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];!1===a?o.removeAttribute(s):o.setAttribute(s,!0===a?"":a)}))})},effect:function eH(e){var n=e.state,t={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,t.popper),n.styles=t,n.elements.arrow&&Object.assign(n.elements.arrow.style,t.arrow),function(){Object.keys(n.elements).forEach(function(r){var i=n.elements[r],o=n.attributes[r]||{},a=Object.keys(n.styles.hasOwnProperty(r)?n.styles[r]:t[r]).reduce(function(d,h){return d[h]="",d},{});!fi(i)||!Yi(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(d){i.removeAttribute(d)}))})}},requires:["computeStyles"]}],nH=G8({defaultModifiers:tH});const oH={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function iH(e){var n=e.state,r=e.name,i=e.options.offset,o=void 0===i?[0,0]:i,s=JS.reduce(function(m,b){return m[b]=function rH(e,n,t){var r=Ji(e),i=[ti,ei].indexOf(r)>=0?-1:1,o="function"==typeof t?t(Object.assign({},n,{placement:e})):t,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[ti,Ri].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(b,n.rects,o),m},{}),a=s[n.placement],h=a.y;null!=n.modifiersData.popperOffsets&&(n.modifiersData.popperOffsets.x+=a.x,n.modifiersData.popperOffsets.y+=h),n.modifiersData[r]=s}},hH=["*"],FH=["dialog"];function e_(e){return"string"==typeof e}function Vs(e){return null!=e}function uc(e){return(e||document.body).getBoundingClientRect()}const lE={animation:!0,transitionTimerDelayMs:5},E4=()=>{},{transitionTimerDelayMs:T4}=lE,Hl=new Map,xr=(e,n,t,r)=>{let i=r.context||{};const o=Hl.get(n);if(o)switch(r.runningTransition){case"continue":return Cs;case"stop":e.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),Hl.delete(n)}const s=t(n,r.animation,i)||E4;if(!r.animation||"none"===window.getComputedStyle(n).transitionProperty)return e.run(()=>s()),Ke(void 0).pipe(function C4(e){return n=>new Se(t=>n.subscribe({next:s=>e.run(()=>t.next(s)),error:s=>e.run(()=>t.error(s)),complete:()=>e.run(()=>t.complete())}))}(e));const a=new qe,d=new qe,h=a.pipe(function $j(...e){return n=>wd(n,Ke(...e))}(!0));Hl.set(n,{transition$:a,complete:()=>{d.next(),d.complete()},context:i});const m=function S4(e){const{transitionDelay:n,transitionDuration:t}=window.getComputedStyle(e);return 1e3*(parseFloat(n)+parseFloat(t))}(n);return e.runOutsideAngular(()=>{const b=Br(n,"transitionend").pipe(Un(h),Ir(({target:V})=>V===n));GS(function $S(e=0,n,t){let r=-1;return US(n)?r=Number(n)<1?1:Number(n):jt(n)&&(t=n),jt(t)||(t=HS),new Se(i=>{const o=US(e)?e:+e-t.now();return t.schedule(kj,o,{index:0,period:r,subscriber:i})})}(m+T4).pipe(Un(h)),b,d).pipe(Un(h)).subscribe(()=>{Hl.delete(n),e.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};let pf=(()=>{class e{constructor(){this.animation=lE.animation}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),gE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Zr]}),e})(),mE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Zr]}),e})(),yE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Zr]}),e})(),bE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({}),e})();var $n=(()=>(function(e){e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown"}($n||($n={})),$n))();const mf=(e,n)=>!!n&&n.some(t=>t.contains(e)),wE=(e,n)=>!n||null!=function D4(e,n){return!n||typeof e.closest>"u"?null:e.closest(n)}(e,n),$4=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function W4(e,n,t,r,i,o,s,a){t&&e.runOutsideAngular((e=>$4?()=>setTimeout(()=>e(),100):e)(()=>{const h=Br(n,"keydown").pipe(Un(i),Ir(R=>R.which===$n.Escape),Qn(R=>R.preventDefault())),m=Br(n,"mousedown").pipe(Ce(R=>{const V=R.target;return 2!==R.button&&!mf(V,s)&&("inside"===t?mf(V,o)&&wE(V,a):"outside"===t?!mf(V,o):wE(V,a)||!mf(V,o))}),Un(i)),b=Br(n,"mouseup").pipe(Hm(m),Ir(([R,V])=>V),function Qj(e,n=HS){const r=function Yj(e){return e instanceof Date&&!isNaN(+e)}(e)?+e-n.now():Math.abs(e);return i=>i.lift(new Zj(r,n))}(0),Un(i));GS([h.pipe(Ce(R=>0)),b.pipe(Ce(R=>1))]).subscribe(R=>e.run(()=>r(R)))}))}const DE=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function CE(e){const n=Array.from(e.querySelectorAll(DE)).filter(t=>-1!==t.tabIndex);return[n[0],n[n.length-1]]}const q4=/\s+/,K4=/  +/gi,J4={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]},Q4=/^left/,Z4=/^right/,X4=/^start/,e5=/^end/;function SE({placement:e,baseClass:n},t){let r=Array.isArray(e)?e:e.split(q4),o=r.findIndex(h=>"auto"===h);o>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(h){null==r.find(m=>-1!==m.search("^"+h))&&r.splice(o++,1,h)});const s=r.map(h=>function Y4(e,n){const[t,r]=J4[e];return n&&r||t}(h,t.isRTL()));return{placement:s.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!n,phase:"write",fn({state:h}){const m=new RegExp(n+"(-[a-z]+)*","gi"),b=h.elements.popper,R=h.placement;let V=b.className;V=V.replace(m,""),V+=` ${function t5(e,n){let[t,r]=n.split("-");const i=t.replace(Q4,"start").replace(Z4,"end");let o=[i];if(r){let s=r;("left"===t||"right"===t)&&(s=s.replace(X4,"top").replace(e5,"bottom")),o.push(`${i}-${s}`)}return e&&(o=o.map(s=>`${e}-${s}`)),o.join(" ")}(n,R)}`,V=V.trim().replace(K4," "),b.className=V}},I8,F8,k8,{enabled:!0,name:"flip",options:{fallbackPlacements:s}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function EE(e){return e}let o5=(()=>{class e{constructor(t){this._element=t.documentElement}isRTL(){return"rtl"===(this._element.getAttribute("dir")||"").toLowerCase()}}return e.\u0275fac=function(t){return new(t||e)(Ne(Cn))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();new Date(1882,10,12),new Date(2174,10,25);let FE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Zr,OS]}),e})(),h5=(()=>{class e{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"],this.popperOptions=t=>t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),a_=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Oe({type:e,selectors:[["",8,"navbar"]]}),e})(),AE=(()=>{class e{constructor(t,r){this.elementRef=t,this._renderer=r,this._disabled=!1}set disabled(t){this._disabled=""===t||!0===t,this._renderer.setProperty(this.elementRef.nativeElement,"disabled",this._disabled)}get disabled(){return this._disabled}}return e.\u0275fac=function(t){return new(t||e)(ne(Qt),ne(bi))},e.\u0275dir=Oe({type:e,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:3,hostBindings:function(t,r){2&t&&(ka("tabIndex",r.disabled?-1:0),vn("disabled",r.disabled))},inputs:{disabled:"disabled"}}),e})(),c_=(()=>{class e{constructor(t,r){this.dropdown=t,this.placement="bottom",this.isOpen=!1,this.nativeElement=r.nativeElement}}return e.\u0275fac=function(t){return new(t||e)(ne(ht(()=>Wl)),ne(Qt))},e.\u0275dir=Oe({type:e,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(t,r,i){if(1&t&&Fn(i,AE,4),2&t){let o;Xt(o=en())&&(r.menuItems=o)}},hostVars:4,hostBindings:function(t,r){1&t&&ot("keydown.ArrowUp",function(o){return r.dropdown.onKeyDown(o)})("keydown.ArrowDown",function(o){return r.dropdown.onKeyDown(o)})("keydown.Home",function(o){return r.dropdown.onKeyDown(o)})("keydown.End",function(o){return r.dropdown.onKeyDown(o)})("keydown.Enter",function(o){return r.dropdown.onKeyDown(o)})("keydown.Space",function(o){return r.dropdown.onKeyDown(o)})("keydown.Tab",function(o){return r.dropdown.onKeyDown(o)})("keydown.Shift.Tab",function(o){return r.dropdown.onKeyDown(o)}),2&t&&vn("dropdown-menu",!0)("show",r.dropdown.isOpen())}}),e})(),bf=(()=>{class e{constructor(t,r){this.dropdown=t,this.nativeElement=r.nativeElement}}return e.\u0275fac=function(t){return new(t||e)(ne(ht(()=>Wl)),ne(Qt))},e.\u0275dir=Oe({type:e,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,r){2&t&&Ut("aria-expanded",r.dropdown.isOpen())}}),e})(),RE=(()=>{class e extends bf{constructor(t,r){super(t,r)}}return e.\u0275fac=function(t){return new(t||e)(ne(ht(()=>Wl)),ne(Qt))},e.\u0275dir=Oe({type:e,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,r){1&t&&ot("click",function(){return r.dropdown.toggle()})("keydown.ArrowUp",function(o){return r.dropdown.onKeyDown(o)})("keydown.ArrowDown",function(o){return r.dropdown.onKeyDown(o)})("keydown.Home",function(o){return r.dropdown.onKeyDown(o)})("keydown.End",function(o){return r.dropdown.onKeyDown(o)})("keydown.Tab",function(o){return r.dropdown.onKeyDown(o)})("keydown.Shift.Tab",function(o){return r.dropdown.onKeyDown(o)}),2&t&&Ut("aria-expanded",r.dropdown.isOpen())},features:[Zt([{provide:bf,useExisting:ht(()=>e)}]),Pt]}),e})(),Wl=(()=>{class e{constructor(t,r,i,o,s,a,d,h){this._changeDetector=t,this._document=o,this._ngZone=s,this._elementRef=a,this._renderer=d,this._destroyCloseHandlers$=new qe,this._bodyContainer=null,this._open=!1,this.openChange=new ct,this.placement=i.placement,this.popperOptions=i.popperOptions,this.container=i.container,this.autoClose=i.autoClose,this._positioning=function n5(e){let n=null;return{createPopper(t){if(!n){let i=(t.updatePopperOptions||EE)(SE(t,e));n=nH(t.hostElement,t.targetElement,i)}},update(){n&&n.update()},setOptions(t){if(n){let i=(t.updatePopperOptions||EE)(SE(t,e));n.setOptions(i)}},destroy(){n&&(n.destroy(),n=null)}}}(r),this.display=h?"static":"dynamic"}ngAfterContentInit(){this._ngZone.onStable.pipe(Tr(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(t){if(t.container&&this._open&&this._applyContainer(this.container),t.placement&&!t.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),t.dropdownClass){const{currentValue:r,previousValue:i}=t.dropdownClass;this._applyCustomDropdownClass(r,i)}t.autoClose&&this._open&&(this.autoClose=t.autoClose.currentValue,this._setCloseHandlers())}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:t=>this.popperOptions(function r5(e){return n=>(n.modifiers.push(oH,{name:"offset",options:{offset:()=>e}}),n)}([0,2])(t))}),this._applyPlacementClasses(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positionMenu())})))}_setCloseHandlers(){this._destroyCloseHandlers$.next(),W4(this._ngZone,this._document,this.autoClose,t=>{this.close(),0===t&&this._anchor.nativeElement.focus()},this._destroyCloseHandlers$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this.close()}onKeyDown(t){const r=t.which,i=this._getMenuElements();let o=-1,s=null;const a=this._isEventFromToggle(t);if(!a&&i.length&&i.forEach((d,h)=>{d.contains(t.target)&&(s=d),d===this._document.activeElement&&(o=h)}),r!==$n.Space&&r!==$n.Enter){if(r!==$n.Tab){if(a||s){if(this.open(),i.length){switch(r){case $n.ArrowDown:o=Math.min(o+1,i.length-1);break;case $n.ArrowUp:if(this._isDropup()&&-1===o){o=i.length-1;break}o=Math.max(o-1,0);break;case $n.Home:o=0;break;case $n.End:o=i.length-1}i[o].focus()}t.preventDefault()}}else if(t.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===t.target)return void("body"!==this.container||t.shiftKey?t.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const d=this._menu.nativeElement.querySelectorAll(DE);t.shiftKey&&t.target===d[0]?(this._anchor.nativeElement.focus(),t.preventDefault()):!t.shiftKey&&t.target===d[d.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else Br(t.target,"focusout").pipe(Tr(1)).subscribe(({relatedTarget:d})=>{this._elementRef.nativeElement.contains(d)||this.close()})}}else s&&(!0===this.autoClose||"inside"===this.autoClose)&&Br(s,"click").pipe(Tr(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(t){return this._anchor.nativeElement.contains(t.target)}_getMenuElements(){const t=this._menu;return null==t?[]:t.menuItems.filter(r=>!r.disabled).map(r=>r.elementRef.nativeElement)}_positionMenu(){const t=this._menu;this.isOpen()&&t&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(t){return Array.isArray(t)?t[0]:t.split(" ")[0]}_resetContainer(){const t=this._renderer;this._menu&&t.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(t.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(t=null){if(this._resetContainer(),"body"===t){const r=this._renderer,i=this._menu.nativeElement,o=this._bodyContainer=this._bodyContainer||r.createElement("div");r.setStyle(o,"position","absolute"),r.setStyle(i,"position","static"),r.setStyle(o,"z-index","1055"),r.appendChild(o,i),r.appendChild(this._document.body,o)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(t,r){const i="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;i&&(r&&this._renderer.removeClass(i,r),t&&this._renderer.addClass(i,t))}_applyPlacementClasses(t){const r=this._menu;if(r){t||(t=this._getFirstPlacement(this.placement));const i=this._renderer,o=this._elementRef.nativeElement;i.removeClass(o,"dropup"),i.removeClass(o,"dropdown");const{nativeElement:s}=r;"static"===this.display?(r.placement=null,i.setAttribute(s,"data-bs-popper","static")):(r.placement=t,i.removeAttribute(s,"data-bs-popper"));const a=-1!==t.search("^top")?"dropup":"dropdown";i.addClass(o,a);const d=this._bodyContainer;d&&(i.removeClass(d,"dropup"),i.removeClass(d,"dropdown"),i.addClass(d,a))}}}return e.\u0275fac=function(t){return new(t||e)(ne(go),ne(o5),ne(h5),ne(Cn),ne($t),ne(Qt),ne(bi),ne(a_,8))},e.\u0275dir=Oe({type:e,selectors:[["","ngbDropdown",""]],contentQueries:function(t,r,i){if(1&t&&(Fn(i,c_,5),Fn(i,bf,5)),2&t){let o;Xt(o=en())&&(r._menu=o.first),Xt(o=en())&&(r._anchor=o.first)}},hostVars:2,hostBindings:function(t,r){2&t&&vn("show",r.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",popperOptions:"popperOptions",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[vr]}),e})(),OE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({}),e})();class $s{constructor(n,t,r){this.nodes=n,this.viewRef=t,this.componentRef=r}}let p5=(()=>{class e{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(Tr(1)).subscribe(()=>{xr(this._zone,this._el.nativeElement,(t,r)=>{r&&uc(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return xr(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return e.\u0275fac=function(t){return new(t||e)(ne(Qt),ne($t))},e.\u0275cmp=Qe({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,r){2&t&&(vs("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),vn("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),e})();class kE{close(n){}dismiss(n){}}class g5{constructor(n,t,r,i){this._windowCmptRef=n,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new qe,this._dismissed=new qe,this._hidden=new qe,n.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Un(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Un(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function cE(e){return e&&e.then}(t)?!1!==t&&this._dismiss(n):t.then(r=>{!1!==r&&this._dismiss(n)},()=>{})}else this._dismiss(n)}_removeModalElements(){const n=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Ke(void 0);n.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),cf(n,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var zl=(()=>(function(e){e[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC"}(zl||(zl={})),zl))();let m5=(()=>{class e{constructor(t,r,i){this._document=t,this._elRef=r,this._zone=i,this._closed$=new qe,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new ct,this.shown=new qe,this.hidden=new qe}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":e_(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Tr(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},s=cf(xr(this._zone,t,()=>t.classList.remove("show"),r),xr(this._zone,this._dialogEl.nativeElement,()=>{},r));return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){const t={animation:this.animation,runningTransition:"continue"};cf(xr(this._zone,this._elRef.nativeElement,(o,s)=>{s&&uc(o),o.classList.add("show")},t),xr(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Br(t,"keydown").pipe(Un(this._closed$),Ir(i=>i.which===$n.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(zl.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Br(this._dialogEl.nativeElement,"mousedown").pipe(Un(this._closed$),Qn(()=>r=!1),Xr(()=>Br(t,"mouseup").pipe(Un(this._closed$),Tr(1))),Ir(({target:i})=>t===i)).subscribe(()=>{r=!0}),Br(t,"click").pipe(Un(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(zl.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=CE(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&xr(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return e.\u0275fac=function(t){return new(t||e)(ne(Cn),ne(Qt),ne($t))},e.\u0275cmp=Qe({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&Va(FH,7),2&t){let i;Xt(i=en())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(Ut("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),vs("modal d-block"+(r.windowClass?" "+r.windowClass:"")),vn("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:hH,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(function yy(e){const n=ve()[16][6];if(!n.projection){const r=n.projection=Tc(e?e.length:1,null),i=r.slice();let o=n.child;for(;null!==o;){const s=e?KM(o,e):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}(),de(0,"div",0,1)(2,"div",2),function by(e,n=0,t){const r=ve(),i=Tt(),o=Sa(i,22+e,16,null,t||null);null===o.projection&&(o.projection=n),Uf(),32!=(32&o.flags)&&function rN(e,n,t){B0(n[11],0,n,t,x0(e,t,n),R0(t.parent||n[6],t,n))}(i,r,o)}(3),he()()),2&t&&vs("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),e})(),_5=(()=>{class e{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:o,paddingRight:s}=i;if(t>0){const a=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${a+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=s),i.overflow=o}}}return e.\u0275fac=function(t){return new(t||e)(Ne(Cn))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),v5=(()=>{class e{constructor(t,r,i,o,s,a){this._applicationRef=t,this._injector=r,this._document=i,this._scrollBar=o,this._rendererFactory=s,this._ngZone=a,this._activeWindowCmptHasChanged=new qe,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new ct,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const d=this._windowCmpts[this._windowCmpts.length-1];((e,n,t,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const i=Br(n,"focusin").pipe(Un(t),Ce(o=>o.target));Br(n,"keydown").pipe(Un(t),Ir(o=>o.which===$n.Tab),Hm(i)).subscribe(([o,s])=>{const[a,d]=CE(n);(s===a||s===n)&&o.shiftKey&&(d.focus(),o.preventDefault()),s===d&&!o.shiftKey&&(a.focus(),o.preventDefault())}),r&&Br(n,"click").pipe(Un(t),Hm(i),Ce(o=>o[1])).subscribe(o=>o.focus())})})(0,d.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(d.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i){const o=i.container instanceof HTMLElement?i.container:Vs(i.container)?this._document.querySelector(i.container):this._document.body,s=this._rendererFactory.createRenderer(null,null);if(!o)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const a=new kE,d=this._getContentRef(i.injector||t,r,a,i);let h=!1!==i.backdrop?this._attachBackdrop(o):void 0,m=this._attachWindowComponent(o,d.nodes),b=new g5(m,d,h,i.beforeDismiss);return this._registerModalRef(b),this._registerWindowCmpt(m),b.hidden.pipe(Tr(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=R=>{b.close(R)},a.dismiss=R=>{b.dismiss(R)},this._applyWindowOptions(m.instance,i),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),h&&h.instance&&(this._applyBackdropOptions(h.instance,i),h.changeDetectorRef.detectChanges()),m.changeDetectorRef.detectChanges(),b}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let r=lg(p5,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_attachWindowComponent(t,r){let i=lg(m5,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_applyWindowOptions(t,r){this._windowAttributes.forEach(i=>{Vs(r[i])&&(t[i]=r[i])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(i=>{Vs(r[i])&&(t[i]=r[i])})}_getContentRef(t,r,i,o){return r?r instanceof bn?this._createFromTemplateRef(r,i):e_(r)?this._createFromString(r):this._createFromComponent(t,r,i,o):new $s([])}_createFromTemplateRef(t,r){const o=t.createEmbeddedView({$implicit:r,close(s){r.close(s)},dismiss(s){r.dismiss(s)}});return this._applicationRef.attachView(o),new $s([o.rootNodes],o)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new $s([[r]])}_createFromComponent(t,r,i,o){const s=Dr.create({providers:[{provide:kE,useValue:i}],parent:t}),a=lg(r,{environmentInjector:this._applicationRef.injector,elementInjector:s}),d=a.location.nativeElement;return o.scrollable&&d.classList.add("component-host-scrollable"),this._applicationRef.attachView(a.hostView),new $s([[d]],a.hostView,a)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return e.\u0275fac=function(t){return new(t||e)(Ne(tl),Ne(Dr),Ne(Cn),Ne(_5),Ne(Vh),Ne($t))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),y5=(()=>{class e{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return e.\u0275fac=function(t){return new(t||e)(Ne(pf))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),b5=(()=>{class e{constructor(t,r,i){this._injector=t,this._modalStack=r,this._config=i}open(t,r={}){const i={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return e.\u0275fac=function(t){return new(t||e)(Ne(Dr),Ne(v5),Ne(y5))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),PE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({providers:[b5]}),e})(),jE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Zr]}),e})(),KE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Zr]}),e})(),YE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Zr]}),e})(),QE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Zr]}),e})(),ZE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Zr]}),e})(),XE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Zr]}),e})(),eT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Zr]}),e})(),tT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({}),e})();new $e("live announcer delay",{providedIn:"root",factory:function R5(){return 100}});let nT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Zr]}),e})(),rT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({}),e})();const O5=[gE,mE,yE,bE,FE,OE,PE,jE,rT,KE,YE,QE,ZE,XE,eT,tT,nT];let k5=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[O5,gE,mE,yE,bE,FE,OE,PE,jE,rT,KE,YE,QE,ZE,XE,eT,tT,nT]}),e})();function P5(e,n){if(1&e){const t=Dn();de(0,"div")(1,"div",10)(2,"span",11),Ve(3),he(),de(4,"div",12)(5,"button",13),ot("click",function(){return cn(t),ln(He().logoutButtonClicked())}),Ve(6," Log out"),he()()()()}if(2&e){const t=He();ge(3),Kt(" ",t.user.claims.preferred_username," ")}}function L5(e,n){if(1&e){const t=Dn();de(0,"div",14)(1,"a",15),ot("click",function(){return cn(t),ln(He().loginButtonClicked())}),Ve(2," Log in"),he(),de(3,"span"),Ve(4," / "),he(),de(5,"a",15),ot("click",function(){return cn(t),ln(He().signUpButtonClicked())}),Ve(6," Sign up "),he()()}}let B5=(()=>{class e{constructor(t,r){this.authService=t,this.personas=r}ngOnInit(){this.authService.getAuthenticatedeUser().then(t=>this.user=t),this.authService.UserChanged.subscribe(t=>this.user=t)}loginButtonClicked(){this.authService.startAuthentication()}logoutButtonClicked(){this.authService.startSignOut()}signUpButtonClicked(){this.authService.startRegistrationRedirect()}searchModelChanged(){const t=this.searchModel;setTimeout(()=>{this.searchModel.trim()||this.personas.clearSearch(),this.searchIsStillRelevant(t)&&this.personas.launchSearch(t)},300)}searchIsStillRelevant(t){return t&&t===this.searchModel}}return e.\u0275fac=function(t){return new(t||e)(ne(So),ne(nc))},e.\u0275cmp=Qe({type:e,selectors:[["app-standard-header"]],decls:13,vars:3,consts:[[1,"navbar","navbar-expand-lg"],["aria-selected","false",1,"col-auto","col-lg-2","cursor-pointer","text-center","navbar-brand"],["routerLink","/"],[1,"col","form-inline","my-2","my-lg-0"],["type","search","placeholder","Search","aria-label","Search","name","search",1,"form-control","mr-sm-2","w-100",3,"ngModel","ngModelChange"],[1,"col-auto","btn-group"],["routerLink","/recommendations/add",1,"btn","btn-primary"],[1,"col-auto","col-lg-2"],[4,"ngIf","ngIfElse"],["navigations",""],["ngbDropdown","","placement","bottom-right",1,"d-inline-block","float_right"],["id","userAccountDropdown","ngbDropdownToggle","",1,"cursor-pointer"],["ngbDropdownMenu","","aria-labelledby","userAccountDropdown"],[1,"dropdown-item",3,"click"],[1,"login-navigations"],[1,"btn","btn-link","p-0",3,"click"]],template:function(t,r){if(1&t&&(de(0,"nav",0)(1,"div",1)(2,"h4",2),Ve(3," Comendie "),he()(),de(4,"form",3)(5,"input",4),ot("ngModelChange",function(o){return r.searchModel=o})("ngModelChange",function(){return r.searchModelChanged()}),he()(),de(6,"div",5)(7,"button",6),Ve(8," Add Recommendation "),he()(),de(9,"div",7),Me(10,P5,7,1,"div",8),Me(11,L5,7,0,"ng-template",null,9,Wi),he()()),2&t){const i=Ci(12);ge(5),De("ngModel",r.searchModel),ge(5),De("ngIf",null==r.user?null:r.user.isLoggedIn())("ngIfElse",i)}},dependencies:[On,Rs,Do,Fs,As,Jo,Co,xs,Wl,RE,c_,a_],styles:[".login-navigations[_ngcontent-%COMP%]{text-decoration:none}"]}),e})(),V5=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Qe({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(t,r){1&t&&(Dt(0,"app-standard-header"),de(1,"div",0),Dt(2,"router-outlet"),he())},dependencies:[Zg,B5],encapsulation:2}),e})(),j5=(()=>{class e{constructor(t){this.auth=t}intercept(t,r){return Mi.hostsRequiringAccessToken.some(o=>t.url.startsWith(o))?Ie(this.auth.getAuthenticatedeUser()).pipe(Gt(o=>(o.isLoggedIn()&&(t=t.clone({setHeaders:{Authorization:o.getAuthorizationHeaderValue()}})),r.handle(t)))):r.handle(t)}}return e.\u0275fac=function(t){return new(t||e)(Ne(So))},e.\u0275prov=je({token:e,factory:e.\u0275fac}),e})(),H5=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e,bootstrap:[V5]}),e.\u0275inj=c({providers:[So,{provide:lC,useClass:j5,multi:!0}],imports:[FP,OS,xj,aB,k5]}),e})();MP().bootstrapModule(H5).catch(e=>console.error(e))},497:function(Ge){Ge.exports=function(ye){var T={};function H(k){if(T[k])return T[k].exports;var y=T[k]={i:k,l:!1,exports:{}};return ye[k].call(y.exports,y,y.exports,H),y.l=!0,y.exports}return H.m=ye,H.c=T,H.d=function(k,y,M){H.o(k,y)||Object.defineProperty(k,y,{enumerable:!0,get:M})},H.r=function(k){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},H.t=function(k,y){if(1&y&&(k=H(k)),8&y||4&y&&"object"==typeof k&&k&&k.__esModule)return k;var M=Object.create(null);if(H.r(M),Object.defineProperty(M,"default",{enumerable:!0,value:k}),2&y&&"string"!=typeof k)for(var E in k)H.d(M,E,function(g){return k[g]}.bind(null,E));return M},H.n=function(k){var y=k&&k.__esModule?function(){return k.default}:function(){return k};return H.d(y,"a",y),y},H.o=function(k,y){return Object.prototype.hasOwnProperty.call(k,y)},H.p="",H(H.s=22)}([function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var k=function(){function g(v,_){for(var I=0;I<_.length;I++){var D=_[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(v,D.key,D)}}return function(v,_,I){return _&&g(v.prototype,_),I&&g(v,I),v}}(),y={debug:function(){},info:function(){},warn:function(){},error:function(){}},M=void 0,E=void 0;(T.Log=function(){function g(){!function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")}(this,g)}return g.reset=function(){E=3,M=y},g.debug=function(){if(E>=4){for(var _=arguments.length,I=Array(_),D=0;D<_;D++)I[D]=arguments[D];M.debug.apply(M,Array.from(I))}},g.info=function(){if(E>=3){for(var _=arguments.length,I=Array(_),D=0;D<_;D++)I[D]=arguments[D];M.info.apply(M,Array.from(I))}},g.warn=function(){if(E>=2){for(var _=arguments.length,I=Array(_),D=0;D<_;D++)I[D]=arguments[D];M.warn.apply(M,Array.from(I))}},g.error=function(){if(E>=1){for(var _=arguments.length,I=Array(_),D=0;D<_;D++)I[D]=arguments[D];M.error.apply(M,Array.from(I))}},k(g,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return E},set:function(_){if(!(0<=_&&_<=4))throw new Error("Invalid log level");E=_}},{key:"logger",get:function(){return M},set:function(_){if(!_.debug&&_.info&&(_.debug=_.info),!(_.debug&&_.info&&_.warn&&_.error))throw new Error("Invalid logger");M=_}}]),g}()).reset()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var k=function(){function g(v,_){for(var I=0;I<_.length;I++){var D=_[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(v,D.key,D)}}return function(v,_,I){return _&&g(v.prototype,_),I&&g(v,I),v}}(),y={setInterval:function(g){function v(_,I){return g.apply(this,arguments)}return v.toString=function(){return g.toString()},v}(function(g,v){return setInterval(g,v)}),clearInterval:function(g){function v(_){return g.apply(this,arguments)}return v.toString=function(){return g.toString()},v}(function(g){return clearInterval(g)})},M=!1,E=null;T.Global=function(){function g(){!function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")}(this,g)}return g._testing=function(){M=!0},g.setXMLHttpRequest=function(_){E=_},k(g,null,[{key:"location",get:function(){if(!M)return location}},{key:"localStorage",get:function(){if(!M&&typeof window<"u")return localStorage}},{key:"sessionStorage",get:function(){if(!M&&typeof window<"u")return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!M&&typeof window<"u")return E||XMLHttpRequest}},{key:"timer",get:function(){if(!M)return y}}]),g}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.MetadataService=void 0;var k=function(){function E(g,v){for(var _=0;_<v.length;_++){var I=v[_];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(g,I.key,I)}}return function(g,v,_){return v&&E(g.prototype,v),_&&E(g,_),g}}(),y=H(0),M=H(7);T.MetadataService=function(){function E(g){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.JsonService;if(function(I,D){if(!(I instanceof D))throw new TypeError("Cannot call a class as a function")}(this,E),!g)throw y.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=g,this._jsonService=new v(["application/jwk-set+json"])}return E.prototype.getMetadata=function(){var v=this;return this._settings.metadata?(y.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(y.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(_){return y.Log.debug("MetadataService.getMetadata: json received"),v._settings.metadata=_,_})):(y.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},E.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},E.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},E.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},E.prototype.getTokenEndpoint=function(){return this._getMetadataProperty("token_endpoint",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},E.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},E.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},E.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},E.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},E.prototype._getMetadataProperty=function(v){var _=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return y.Log.debug("MetadataService.getMetadataProperty for: "+v),this.getMetadata().then(function(I){if(y.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===I[v]){if(!0===_)return void y.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+v);throw y.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+v),new Error("Metadata does not contain property "+v)}return I[v]})},E.prototype.getSigningKeys=function(){var v=this;return this._settings.signingKeys?(y.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(_){return y.Log.debug("MetadataService.getSigningKeys: jwks_uri received",_),v._jsonService.getJson(_).then(function(I){if(y.Log.debug("MetadataService.getSigningKeys: key set received",I),!I.keys)throw y.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return v._settings.signingKeys=I.keys,v._settings.signingKeys})})},k(E,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(".well-known/openid-configuration")<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=".well-known/openid-configuration"))),this._metadataUrl}}]),E}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.UrlUtility=void 0;var k=H(0),y=H(1);T.UrlUtility=function(){function M(){!function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}(this,M)}return M.addQueryParam=function(g,v,_){return g.indexOf("?")<0&&(g+="?"),"?"!==g[g.length-1]&&(g+="&"),g+=encodeURIComponent(v),(g+="=")+encodeURIComponent(_)},M.parseUrlFragment=function(g){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";"string"!=typeof g&&(g=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.Global).location.href);var I=g.lastIndexOf(v);I>=0&&(g=g.substr(I+1)),"?"===v&&(I=g.indexOf("#"))>=0&&(g=g.substr(0,I));for(var D,j={},L=/([^&=]+)=([^&]*)/g,O=0;D=L.exec(g);)if(j[decodeURIComponent(D[1])]=decodeURIComponent(D[2]),O++>50)return k.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",g),{error:"Response exceeded expected number of parameters"};for(var F in j)return j;return{}},M}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.JoseUtil=void 0;var E,k=H(25),y=(E=H(32))&&E.__esModule?E:{default:E};T.JoseUtil=(0,y.default)({jws:k.jws,KeyUtil:k.KeyUtil,X509:k.X509,crypto:k.crypto,hextob64u:k.hextob64u,b64tohex:k.b64tohex,AllowedSigningAlgs:k.AllowedSigningAlgs})},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.OidcClientSettings=void 0;var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},y=function(){function L(O,F){for(var x=0;x<F.length;x++){var A=F[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(O,A.key,A)}}return function(O,F,x){return F&&L(O.prototype,F),x&&L(O,x),O}}(),M=H(0),E=H(6),g=H(23),v=H(2),_="id_token",I="openid";T.OidcClientSettings=function(){function L(){var O=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},F=O.authority,x=O.metadataUrl,A=O.metadata,P=O.signingKeys,q=O.client_id,se=O.client_secret,ie=O.response_type,Ee=void 0===ie?_:ie,Se=O.scope,ze=void 0===Se?I:Se,vt=O.redirect_uri,Z=O.post_logout_redirect_uri,Ze=O.prompt,nn=O.display,qe=O.max_age,pn=O.ui_locales,jt=O.acr_values,Ce=O.resource,Et=O.response_mode,At=O.filterProtocolClaims,Bt=void 0===At||At,Yt=O.loadUserInfo,Ht=void 0===Yt||Yt,gn=O.staleStateAge,Vr=void 0===gn?900:gn,Fr=O.clockSkew,Zn=void 0===Fr?300:Fr,dr=O.userInfoJwtIssuer,Ar=void 0===dr?"OP":dr,Y=O.stateStore,C=void 0===Y?new E.WebStorageStateStore:Y,S=O.ResponseValidatorCtor,K=void 0===S?g.ResponseValidator:S,te=O.MetadataServiceCtor,ee=void 0===te?v.MetadataService:te,fe=O.extraQueryParams,Fe=void 0===fe?{}:fe,Ie=O.extraTokenParams,pt=void 0===Ie?{}:Ie;(function(mt,hi){if(!(mt instanceof hi))throw new TypeError("Cannot call a class as a function")})(this,L),this._authority=F,this._metadataUrl=x,this._metadata=A,this._signingKeys=P,this._client_id=q,this._client_secret=se,this._response_type=Ee,this._scope=ze,this._redirect_uri=vt,this._post_logout_redirect_uri=Z,this._prompt=Ze,this._display=nn,this._max_age=qe,this._ui_locales=pn,this._acr_values=jt,this._resource=Ce,this._response_mode=Et,this._filterProtocolClaims=!!Bt,this._loadUserInfo=!!Ht,this._staleStateAge=Vr,this._clockSkew=Zn,this._userInfoJwtIssuer=Ar,this._stateStore=C,this._validator=new K(this),this._metadataService=new ee(this),this._extraQueryParams="object"===(void 0===Fe?"undefined":k(Fe))?Fe:{},this._extraTokenParams="object"===(void 0===pt?"undefined":k(pt))?pt:{}}return y(L,[{key:"client_id",get:function(){return this._client_id},set:function(F){if(this._client_id)throw M.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=F}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(F){if(this._authority)throw M.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=F}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(".well-known/openid-configuration")<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=".well-known/openid-configuration")),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(F){this._metadata=F}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(F){this._signingKeys=F}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(F){this._extraQueryParams="object"===(void 0===F?"undefined":k(F))?F:{}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(F){this._extraTokenParams="object"===(void 0===F?"undefined":k(F))?F:{}}}]),L}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.WebStorageStateStore=void 0;var k=H(0),y=H(1);T.WebStorageStateStore=function(){function M(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=E.prefix,v=void 0===g?"oidc.":g,_=E.store,I=void 0===_?y.Global.localStorage:_;(function(j,L){if(!(j instanceof L))throw new TypeError("Cannot call a class as a function")})(this,M),this._store=I,this._prefix=v}return M.prototype.set=function(g,v){return k.Log.debug("WebStorageStateStore.set",g),this._store.setItem(g=this._prefix+g,v),Promise.resolve()},M.prototype.get=function(g){k.Log.debug("WebStorageStateStore.get",g);var v=this._store.getItem(g=this._prefix+g);return Promise.resolve(v)},M.prototype.remove=function(g){k.Log.debug("WebStorageStateStore.remove",g);var v=this._store.getItem(g=this._prefix+g);return this._store.removeItem(g),Promise.resolve(v)},M.prototype.getAllKeys=function(){k.Log.debug("WebStorageStateStore.getAllKeys");for(var g=[],v=0;v<this._store.length;v++){var _=this._store.key(v);0===_.indexOf(this._prefix)&&g.push(_.substr(this._prefix.length))}return Promise.resolve(g)},M}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.JsonService=void 0;var k=H(0),y=H(1);T.JsonService=function(){function M(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.Global.XMLHttpRequest,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(function(I,D){if(!(I instanceof D))throw new TypeError("Cannot call a class as a function")})(this,M),this._contentTypes=E&&Array.isArray(E)?E.slice():[],this._contentTypes.push("application/json"),v&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=g,this._jwtHandler=v}return M.prototype.getJson=function(g,v){var _=this;if(!g)throw k.Log.error("JsonService.getJson: No url passed"),new Error("url");return k.Log.debug("JsonService.getJson, url: ",g),new Promise(function(I,D){var j=new _._XMLHttpRequest;j.open("GET",g);var L=_._contentTypes,O=_._jwtHandler;j.onload=function(){if(k.Log.debug("JsonService.getJson: HTTP response received, status",j.status),200===j.status){var F=j.getResponseHeader("Content-Type");if(F){var x=L.find(function(A){if(F.startsWith(A))return!0});if("application/jwt"==x)return void O(j).then(I,D);if(x)try{return void I(JSON.parse(j.responseText))}catch(A){return k.Log.error("JsonService.getJson: Error parsing JSON response",A.message),void D(A)}}D(Error("Invalid response Content-Type: "+F+", from URL: "+g))}else D(Error(j.statusText+" ("+j.status+")"))},j.onerror=function(){k.Log.error("JsonService.getJson: network error"),D(Error("Network Error"))},v&&(k.Log.debug("JsonService.getJson: token passed, setting Authorization header"),j.setRequestHeader("Authorization","Bearer "+v)),j.send()})},M.prototype.postForm=function(g,v){var _=this;if(!g)throw k.Log.error("JsonService.postForm: No url passed"),new Error("url");return k.Log.debug("JsonService.postForm, url: ",g),new Promise(function(I,D){var j=new _._XMLHttpRequest;j.open("POST",g);var L=_._contentTypes;j.onload=function(){if(k.Log.debug("JsonService.postForm: HTTP response received, status",j.status),200!==j.status){if(400===j.status&&(P=j.getResponseHeader("Content-Type"))&&L.find(function(q){if(P.startsWith(q))return!0}))try{var A=JSON.parse(j.responseText);if(A&&A.error)return k.Log.error("JsonService.postForm: Error from server: ",A.error),void D(new Error(A.error))}catch(q){return k.Log.error("JsonService.postForm: Error parsing JSON response",q.message),void D(q)}D(Error(j.statusText+" ("+j.status+")"))}else{var P;if((P=j.getResponseHeader("Content-Type"))&&L.find(function(q){if(P.startsWith(q))return!0}))try{return void I(JSON.parse(j.responseText))}catch(q){return k.Log.error("JsonService.postForm: Error parsing JSON response",q.message),void D(q)}D(Error("Invalid response Content-Type: "+P+", from URL: "+g))}},j.onerror=function(){k.Log.error("JsonService.postForm: network error"),D(Error("Network Error"))};var O="";for(var F in v){var x=v[F];x&&(O.length>0&&(O+="&"),O+=encodeURIComponent(F),O+="=",O+=encodeURIComponent(x))}j.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),j.send(O)})},M}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.State=void 0;var g,k=function(){function E(g,v){for(var _=0;_<v.length;_++){var I=v[_];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(g,I.key,I)}}return function(g,v,_){return v&&E(g.prototype,v),_&&E(g,_),g}}(),y=H(0),M=(g=H(14))&&g.__esModule?g:{default:g};T.State=function(){function E(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=g.id,_=g.data,I=g.created,D=g.request_type;(function(L,O){if(!(L instanceof O))throw new TypeError("Cannot call a class as a function")})(this,E),this._id=v||(0,M.default)(),this._data=_,this._created="number"==typeof I&&I>0?I:parseInt(Date.now()/1e3),this._request_type=D}return E.prototype.toStorageString=function(){return y.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},E.fromStorageString=function(v){return y.Log.debug("State.fromStorageString"),new E(JSON.parse(v))},E.clearStaleState=function(v,_){var I=Date.now()/1e3-_;return v.getAllKeys().then(function(D){y.Log.debug("State.clearStaleState: got keys",D);for(var j=[],L=function(A){var P=D[A];F=v.get(P).then(function(q){var se=!1;if(q)try{var ie=E.fromStorageString(q);y.Log.debug("State.clearStaleState: got item from key: ",P,ie.created),ie.created<=I&&(se=!0)}catch(Ee){y.Log.error("State.clearStaleState: Error parsing state for key",P,Ee.message),se=!0}else y.Log.debug("State.clearStaleState: no item in storage for key: ",P),se=!0;if(se)return y.Log.debug("State.clearStaleState: removed item for key: ",P),v.remove(P)}),j.push(F)},O=0;O<D.length;O++){var F;L(O)}return y.Log.debug("State.clearStaleState: waiting on promise count:",j.length),Promise.all(j)})},k(E,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),E}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.OidcClient=void 0;var k=function(){function L(O,F){for(var x=0;x<F.length;x++){var A=F[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(O,A.key,A)}}return function(O,F,x){return F&&L(O.prototype,F),x&&L(O,x),O}}(),y=H(0),M=H(5),E=H(11),g=H(12),v=H(36),_=H(37),I=H(38),D=H(13),j=H(8);T.OidcClient=function(){function L(){var O=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")})(this,L),this._settings=O instanceof M.OidcClientSettings?O:new M.OidcClientSettings(O)}return L.prototype.createSigninRequest=function(){var F=this,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},A=x.response_type,P=x.scope,q=x.redirect_uri,se=x.data,ie=x.state,Ee=x.prompt,Se=x.display,ze=x.max_age,vt=x.ui_locales,Z=x.id_token_hint,Ze=x.login_hint,nn=x.acr_values,qe=x.resource,pn=x.request,jt=x.request_uri,Ce=x.response_mode,Et=x.extraQueryParams,At=x.extraTokenParams,Bt=x.request_type,Yt=x.skipUserInfo,Ht=arguments[1];y.Log.debug("OidcClient.createSigninRequest");var gn=this._settings.client_id;P=P||this._settings.scope,q=q||this._settings.redirect_uri,Ee=Ee||this._settings.prompt,Se=Se||this._settings.display,ze=ze||this._settings.max_age,vt=vt||this._settings.ui_locales,nn=nn||this._settings.acr_values,qe=qe||this._settings.resource,Ce=Ce||this._settings.response_mode,Et=Et||this._settings.extraQueryParams,At=At||this._settings.extraTokenParams;var Vr=this._settings.authority;return g.SigninRequest.isCode(A=A||this._settings.response_type)&&"code"!==A?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(Fr){y.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",Fr);var Zn=new g.SigninRequest({url:Fr,client_id:gn,redirect_uri:q,response_type:A,scope:P,data:se||ie,authority:Vr,prompt:Ee,display:Se,max_age:ze,ui_locales:vt,id_token_hint:Z,login_hint:Ze,acr_values:nn,resource:qe,request:pn,request_uri:jt,extraQueryParams:Et,extraTokenParams:At,request_type:Bt,response_mode:Ce,client_secret:F._settings.client_secret,skipUserInfo:Yt}),dr=Zn.state;return(Ht=Ht||F._stateStore).set(dr.id,dr.toStorageString()).then(function(){return Zn})})},L.prototype.readSigninResponseState=function(F,x){var A=arguments.length>2&&void 0!==arguments[2]&&arguments[2];y.Log.debug("OidcClient.readSigninResponseState");var P="query"===this._settings.response_mode||!this._settings.response_mode&&g.SigninRequest.isCode(this._settings.response_type)?"?":"#",q=new v.SigninResponse(F,P);return q.state?(x=x||this._stateStore,(A?x.remove.bind(x):x.get.bind(x))(q.state).then(function(se){if(!se)throw y.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:D.SigninState.fromStorageString(se),response:q}})):(y.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response")))},L.prototype.processSigninResponse=function(F,x){var A=this;return y.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(F,x,!0).then(function(P){var q=P.state,se=P.response;return y.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),A._validator.validateSigninResponse(q,se)})},L.prototype.createSignoutRequest=function(){var F=this,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},A=x.id_token_hint,P=x.data,q=x.state,se=x.post_logout_redirect_uri,ie=x.extraQueryParams,Ee=x.request_type,Se=arguments[1];return y.Log.debug("OidcClient.createSignoutRequest"),se=se||this._settings.post_logout_redirect_uri,ie=ie||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(ze){if(!ze)throw y.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");y.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",ze);var vt=new _.SignoutRequest({url:ze,id_token_hint:A,post_logout_redirect_uri:se,data:P||q,extraQueryParams:ie,request_type:Ee}),Z=vt.state;return Z&&(y.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(Se=Se||F._stateStore).set(Z.id,Z.toStorageString())),vt})},L.prototype.readSignoutResponseState=function(F,x){var A=arguments.length>2&&void 0!==arguments[2]&&arguments[2];y.Log.debug("OidcClient.readSignoutResponseState");var P=new I.SignoutResponse(F);if(!P.state)return y.Log.debug("OidcClient.readSignoutResponseState: No state in response"),P.error?(y.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",P.error),Promise.reject(new E.ErrorResponse(P))):Promise.resolve({undefined:void 0,response:P});var q=P.state;return x=x||this._stateStore,(A?x.remove.bind(x):x.get.bind(x))(q).then(function(se){if(!se)throw y.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:j.State.fromStorageString(se),response:P}})},L.prototype.processSignoutResponse=function(F,x){var A=this;return y.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(F,x,!0).then(function(P){var q=P.state,se=P.response;return q?(y.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),A._validator.validateSignoutResponse(q,se)):(y.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),se)})},L.prototype.clearStaleState=function(F){return y.Log.debug("OidcClient.clearStaleState"),j.State.clearStaleState(F=F||this._stateStore,this.settings.staleStateAge)},k(L,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),L}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.TokenClient=void 0;var k=H(7),y=H(2),M=H(0);T.TokenClient=function(){function E(g){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.JsonService,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.MetadataService;if(function(D,j){if(!(D instanceof j))throw new TypeError("Cannot call a class as a function")}(this,E),!g)throw M.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=g,this._jsonService=new v,this._metadataService=new _(this._settings)}return E.prototype.exchangeCode=function(){var v=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(_=Object.assign({},_)).grant_type=_.grant_type||"authorization_code",_.client_id=_.client_id||this._settings.client_id,_.redirect_uri=_.redirect_uri||this._settings.redirect_uri,_.code?_.redirect_uri?_.code_verifier?_.client_id?this._metadataService.getTokenEndpoint(!1).then(function(I){return M.Log.debug("TokenClient.exchangeCode: Received token endpoint"),v._jsonService.postForm(I,_).then(function(D){return M.Log.debug("TokenClient.exchangeCode: response received"),D})}):(M.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(M.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(M.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(M.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},E.prototype.exchangeRefreshToken=function(){var v=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(_=Object.assign({},_)).grant_type=_.grant_type||"refresh_token",_.client_id=_.client_id||this._settings.client_id,_.client_secret=_.client_secret||this._settings.client_secret,_.refresh_token?_.client_id?this._metadataService.getTokenEndpoint(!1).then(function(I){return M.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),v._jsonService.postForm(I,_).then(function(D){return M.Log.debug("TokenClient.exchangeRefreshToken: response received"),D})}):(M.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(M.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},E}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.ErrorResponse=void 0;var k=H(0);T.ErrorResponse=function(y){function M(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=E.error,v=E.error_description,_=E.error_uri,I=E.state,D=E.session_state;if(function(O,F){if(!(O instanceof F))throw new TypeError("Cannot call a class as a function")}(this,M),!g)throw k.Log.error("No error passed to ErrorResponse"),new Error("error");var j=function(O,F){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!F||"object"!=typeof F&&"function"!=typeof F?O:F}(this,y.call(this,v||g));return j.name="ErrorResponse",j.error=g,j.error_description=v,j.error_uri=_,j.state=I,j.session_state=D,j}return function(g,v){if("function"!=typeof v&&null!==v)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}(M,y),M}(Error)},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SigninRequest=void 0;var k=H(0),y=H(3),M=H(13);T.SigninRequest=function(){function E(g){var v=g.url,_=g.client_id,I=g.redirect_uri,D=g.response_type,j=g.scope,L=g.authority,O=g.data,F=g.prompt,x=g.display,A=g.max_age,P=g.ui_locales,q=g.id_token_hint,se=g.login_hint,ie=g.acr_values,Ee=g.resource,Se=g.response_mode,ze=g.request,vt=g.request_uri,Z=g.extraQueryParams,Ze=g.request_type,nn=g.client_secret,qe=g.extraTokenParams,pn=g.skipUserInfo;if(function(Ht,gn){if(!(Ht instanceof gn))throw new TypeError("Cannot call a class as a function")}(this,E),!v)throw k.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!_)throw k.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!I)throw k.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!D)throw k.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!j)throw k.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!L)throw k.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var jt=E.isOidc(D),Ce=E.isCode(D);Se||(Se=E.isCode(D)?"query":null),this.state=new M.SigninState({nonce:jt,data:O,client_id:_,authority:L,redirect_uri:I,code_verifier:Ce,request_type:Ze,response_mode:Se,client_secret:nn,scope:j,extraTokenParams:qe,skipUserInfo:pn}),v=y.UrlUtility.addQueryParam(v,"client_id",_),v=y.UrlUtility.addQueryParam(v,"redirect_uri",I),v=y.UrlUtility.addQueryParam(v,"response_type",D),v=y.UrlUtility.addQueryParam(v,"scope",j),v=y.UrlUtility.addQueryParam(v,"state",this.state.id),jt&&(v=y.UrlUtility.addQueryParam(v,"nonce",this.state.nonce)),Ce&&(v=y.UrlUtility.addQueryParam(v,"code_challenge",this.state.code_challenge),v=y.UrlUtility.addQueryParam(v,"code_challenge_method","S256"));var Et={prompt:F,display:x,max_age:A,ui_locales:P,id_token_hint:q,login_hint:se,acr_values:ie,resource:Ee,request:ze,request_uri:vt,response_mode:Se};for(var At in Et)Et[At]&&(v=y.UrlUtility.addQueryParam(v,At,Et[At]));for(var Bt in Z)v=y.UrlUtility.addQueryParam(v,Bt,Z[Bt]);this.url=v}return E.isOidc=function(v){return!!v.split(/\s+/g).filter(function(_){return"id_token"===_})[0]},E.isOAuth=function(v){return!!v.split(/\s+/g).filter(function(_){return"token"===_})[0]},E.isCode=function(v){return!!v.split(/\s+/g).filter(function(_){return"code"===_})[0]},E}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SigninState=void 0;var _,k=function(){function v(_,I){for(var D=0;D<I.length;D++){var j=I[D];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(_,j.key,j)}}return function(_,I,D){return I&&v(_.prototype,I),D&&v(_,D),_}}(),y=H(0),M=H(8),E=H(4),g=(_=H(14))&&_.__esModule?_:{default:_};T.SigninState=function(v){function _(){var I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},D=I.nonce,j=I.authority,L=I.client_id,O=I.redirect_uri,F=I.code_verifier,x=I.response_mode,A=I.client_secret,P=I.scope,q=I.extraTokenParams,se=I.skipUserInfo;!function(ze,vt){if(!(ze instanceof vt))throw new TypeError("Cannot call a class as a function")}(this,_);var ie=function(ze,vt){if(!ze)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!vt||"object"!=typeof vt&&"function"!=typeof vt?ze:vt}(this,v.call(this,arguments[0]));if(!0===D?ie._nonce=(0,g.default)():D&&(ie._nonce=D),!0===F?ie._code_verifier=(0,g.default)()+(0,g.default)()+(0,g.default)():F&&(ie._code_verifier=F),ie.code_verifier){var Ee=E.JoseUtil.hashString(ie.code_verifier,"SHA256");ie._code_challenge=E.JoseUtil.hexToBase64Url(Ee)}return ie._redirect_uri=O,ie._authority=j,ie._client_id=L,ie._response_mode=x,ie._client_secret=A,ie._scope=P,ie._extraTokenParams=q,ie._skipUserInfo=se,ie}return function(D,j){if("function"!=typeof j&&null!==j)throw new TypeError("Super expression must either be null or a function, not "+typeof j);D.prototype=Object.create(j&&j.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(D,j):D.__proto__=j)}(_,v),_.prototype.toStorageString=function(){return y.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},_.fromStorageString=function(D){return y.Log.debug("SigninState.fromStorageString"),new _(JSON.parse(D))},k(_,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),_}(M.State)},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){return(0,k.default)().replace(/-/g,"")};var M,k=(M=H(33))&&M.__esModule?M:{default:M};ye.exports=T.default},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.User=void 0;var k=function(){function M(E,g){for(var v=0;v<g.length;v++){var _=g[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(E,_.key,_)}}return function(E,g,v){return g&&M(E.prototype,g),v&&M(E,v),E}}(),y=H(0);T.User=function(){function M(E){var g=E.id_token,v=E.session_state,_=E.access_token,I=E.refresh_token,D=E.token_type,j=E.scope,L=E.profile,O=E.expires_at,F=E.state;(function(A,P){if(!(A instanceof P))throw new TypeError("Cannot call a class as a function")})(this,M),this.id_token=g,this.session_state=v,this.access_token=_,this.refresh_token=I,this.token_type=D,this.scope=j,this.profile=L,this.expires_at=O,this.state=F}return M.prototype.toStorageString=function(){return y.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},M.fromStorageString=function(g){return y.Log.debug("User.fromStorageString"),new M(JSON.parse(g))},k(M,[{key:"expires_in",get:function(){if(this.expires_at){var g=parseInt(Date.now()/1e3);return this.expires_at-g}},set:function(g){var v=parseInt(g);if("number"==typeof v&&v>0){var _=parseInt(Date.now()/1e3);this.expires_at=_+v}}},{key:"expired",get:function(){var g=this.expires_in;if(void 0!==g)return g<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),M}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.AccessTokenEvents=void 0;var k=H(0),y=H(48);T.AccessTokenEvents=function(){function E(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=g.accessTokenExpiringNotificationTime,_=void 0===v?60:v,I=g.accessTokenExpiringTimer,D=void 0===I?new y.Timer("Access token expiring"):I,j=g.accessTokenExpiredTimer,L=void 0===j?new y.Timer("Access token expired"):j;(function(F,x){if(!(F instanceof x))throw new TypeError("Cannot call a class as a function")})(this,E),this._accessTokenExpiringNotificationTime=_,this._accessTokenExpiring=D,this._accessTokenExpired=L}return E.prototype.load=function(v){if(v.access_token&&void 0!==v.expires_in){var _=v.expires_in;if(k.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",_),_>0){var I=_-this._accessTokenExpiringNotificationTime;I<=0&&(I=1),k.Log.debug("AccessTokenEvents.load: registering expiring timer in:",I),this._accessTokenExpiring.init(I)}else k.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var D=_+1;k.Log.debug("AccessTokenEvents.load: registering expired timer in:",D),this._accessTokenExpired.init(D)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},E.prototype.unload=function(){k.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},E.prototype.addAccessTokenExpiring=function(v){this._accessTokenExpiring.addHandler(v)},E.prototype.removeAccessTokenExpiring=function(v){this._accessTokenExpiring.removeHandler(v)},E.prototype.addAccessTokenExpired=function(v){this._accessTokenExpired.addHandler(v)},E.prototype.removeAccessTokenExpired=function(v){this._accessTokenExpired.removeHandler(v)},E}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Event=void 0;var k=H(0);T.Event=function(){function y(M){(function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")})(this,y),this._name=M,this._callbacks=[]}return y.prototype.addHandler=function(E){this._callbacks.push(E)},y.prototype.removeHandler=function(E){var g=this._callbacks.findIndex(function(v){return v===E});g>=0&&this._callbacks.splice(g,1)},y.prototype.raise=function(){k.Log.debug("Event: Raising event: "+this._name);for(var E=0;E<this._callbacks.length;E++){var g;(g=this._callbacks)[E].apply(g,arguments)}},y}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SessionMonitor=void 0;var k=function(){function g(v,_){for(var I=0;I<_.length;I++){var D=_[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(v,D.key,D)}}return function(v,_,I){return _&&g(v.prototype,_),I&&g(v,I),v}}(),y=H(0),M=H(19),E=H(1);T.SessionMonitor=function(){function g(v){var _=this,I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.CheckSessionIFrame,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.Global.timer;if(function(L,O){if(!(L instanceof O))throw new TypeError("Cannot call a class as a function")}(this,g),!v)throw y.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=v,this._CheckSessionIFrameCtor=I,this._timer=D,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),this._userManager.getUser().then(function(j){j?_._start(j):_._settings.monitorAnonymousSession&&_._userManager.querySessionStatus().then(function(L){var O={session_state:L.session_state};L.sub&&L.sid&&(O.profile={sub:L.sub,sid:L.sid}),_._start(O)}).catch(function(L){y.Log.error("SessionMonitor ctor: error from querySessionStatus:",L.message)})}).catch(function(j){y.Log.error("SessionMonitor ctor: error from getUser:",j.message)})}return g.prototype._start=function(_){var I=this,D=_.session_state;D&&(_.profile?(this._sub=_.profile.sub,this._sid=_.profile.sid,y.Log.debug("SessionMonitor._start: session_state:",D,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,y.Log.debug("SessionMonitor._start: session_state:",D,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(D):this._metadataService.getCheckSessionIframe().then(function(j){if(j){y.Log.debug("SessionMonitor._start: Initializing check session iframe");var L=I._client_id,O=I._checkSessionInterval,F=I._stopCheckSessionOnError;I._checkSessionIFrame=new I._CheckSessionIFrameCtor(I._callback.bind(I),L,j,O,F),I._checkSessionIFrame.load().then(function(){I._checkSessionIFrame.start(D)})}else y.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(j){y.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",j.message)}))},g.prototype._stop=function(){var _=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(y.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var I=this._timer.setInterval(function(){_._timer.clearInterval(I),_._userManager.querySessionStatus().then(function(D){var j={session_state:D.session_state};D.sub&&D.sid&&(j.profile={sub:D.sub,sid:D.sid}),_._start(j)}).catch(function(D){y.Log.error("SessionMonitor: error from querySessionStatus:",D.message)})},1e3)},g.prototype._callback=function(){var _=this;this._userManager.querySessionStatus().then(function(I){var D=!0;I?I.sub===_._sub?(D=!1,_._checkSessionIFrame.start(I.session_state),I.sid===_._sid?y.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",I.session_state):(y.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",I.session_state),_._userManager.events._raiseUserSessionChanged())):y.Log.debug("SessionMonitor._callback: Different subject signed into OP:",I.sub):y.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),D&&(_._sub?(y.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),_._userManager.events._raiseUserSignedOut()):(y.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),_._userManager.events._raiseUserSignedIn()))}).catch(function(I){_._sub&&(y.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",I.message),_._userManager.events._raiseUserSignedOut())})},k(g,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),g}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.CheckSessionIFrame=void 0;var k=H(0);T.CheckSessionIFrame=function(){function M(E,g,v,_){var I=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];(function(L,O){if(!(L instanceof O))throw new TypeError("Cannot call a class as a function")})(this,M),this._callback=E,this._client_id=g,this._url=v,this._interval=_||2e3,this._stopOnError=I;var D=v.indexOf("/",v.indexOf("//")+2);this._frame_origin=v.substr(0,D),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.style.width=0,this._frame.style.height=0,this._frame.src=v}return M.prototype.load=function(){var g=this;return new Promise(function(v){g._frame.onload=function(){v()},window.document.body.appendChild(g._frame),g._boundMessageEvent=g._message.bind(g),window.addEventListener("message",g._boundMessageEvent,!1)})},M.prototype._message=function(g){g.origin===this._frame_origin&&g.source===this._frame.contentWindow&&("error"===g.data?(k.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===g.data?(k.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):k.Log.debug("CheckSessionIFrame: "+g.data+" message from check session op iframe"))},M.prototype.start=function(g){var v=this;if(this._session_state!==g){k.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=g;var _=function(){v._frame.contentWindow.postMessage(v._client_id+" "+v._session_state,v._frame_origin)};_(),this._timer=window.setInterval(_,this._interval)}},M.prototype.stop=function(){this._session_state=null,this._timer&&(k.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},M}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.TokenRevocationClient=void 0;var k=H(0),y=H(2),M=H(1);T.TokenRevocationClient=function(){function E(g){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.Global.XMLHttpRequest,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.MetadataService;if(function(D,j){if(!(D instanceof j))throw new TypeError("Cannot call a class as a function")}(this,E),!g)throw k.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=g,this._XMLHttpRequestCtor=v,this._metadataService=new _(this._settings)}return E.prototype.revoke=function(v,_){var I=this,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!v)throw k.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if("access_token"!==D&&"refresh_token"!=D)throw k.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(j){if(j)return k.Log.debug("TokenRevocationClient.revoke: Revoking "+D),I._revoke(j,I._settings.client_id,I._settings.client_secret,v,D);if(_)throw k.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},E.prototype._revoke=function(v,_,I,D,j){var L=this;return new Promise(function(O,F){var x=new L._XMLHttpRequestCtor;x.open("POST",v),x.onload=function(){k.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",x.status),200===x.status?O():F(Error(x.statusText+" ("+x.status+")"))},x.onerror=function(){k.Log.debug("TokenRevocationClient.revoke: Network Error."),F("Network Error")};var A="client_id="+encodeURIComponent(_);I&&(A+="&client_secret="+encodeURIComponent(I)),A+="&token_type_hint="+encodeURIComponent(j),A+="&token="+encodeURIComponent(D),x.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),x.send(A)})},E}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.CordovaPopupWindow=void 0;var k=function(){function g(v,_){for(var I=0;I<_.length;I++){var D=_[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(v,D.key,D)}}return function(v,_,I){return _&&g(v.prototype,_),I&&g(v,I),v}}(),y=H(0);T.CordovaPopupWindow=function(){function g(v){var _=this;(function(D,j){if(!(D instanceof j))throw new TypeError("Cannot call a class as a function")})(this,g),this._promise=new Promise(function(I,D){_._resolve=I,_._reject=D}),this.features=v.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=v.popupWindowTarget||"_blank",this.redirect_uri=v.startUrl,y.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return g.prototype._isInAppBrowserInstalled=function(_){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(I){return _.hasOwnProperty(I)})},g.prototype.navigate=function(_){if(_&&_.url){if(!window.cordova)return this._error("cordova is undefined");var I=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(I))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(_.url,this.target,this.features),this._popup?(y.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},g.prototype._loadStartCallback=function(_){0===_.url.indexOf(this.redirect_uri)&&this._success({url:_.url})},g.prototype._exitCallback=function(_){this._error(_)},g.prototype._success=function(_){this._cleanup(),y.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(_)},g.prototype._error=function(_){this._cleanup(),y.Log.error(_),this._reject(new Error(_))},g.prototype.close=function(){this._cleanup()},g.prototype._cleanup=function(){this._popup&&(y.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},k(g,[{key:"promise",get:function(){return this._promise}}]),g}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var k=H(0),y=H(9),M=H(5),E=H(6),g=H(39),v=H(40),_=H(16),I=H(2),D=H(50),j=H(51),L=H(19),O=H(20),F=H(18),x=H(1),A=H(15),P=H(52);T.default={Version:P.Version,Log:k.Log,OidcClient:y.OidcClient,OidcClientSettings:M.OidcClientSettings,WebStorageStateStore:E.WebStorageStateStore,InMemoryWebStorage:g.InMemoryWebStorage,UserManager:v.UserManager,AccessTokenEvents:_.AccessTokenEvents,MetadataService:I.MetadataService,CordovaPopupNavigator:D.CordovaPopupNavigator,CordovaIFrameNavigator:j.CordovaIFrameNavigator,CheckSessionIFrame:L.CheckSessionIFrame,TokenRevocationClient:O.TokenRevocationClient,SessionMonitor:F.SessionMonitor,Global:x.Global,User:A.User},ye.exports=T.default},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.ResponseValidator=void 0;var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},y=H(0),M=H(2),E=H(24),g=H(10),v=H(11),_=H(4),I=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];T.ResponseValidator=function(){function D(j){var L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.MetadataService,O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.UserInfoService,F=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_.JoseUtil,x=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g.TokenClient;if(function(P,q){if(!(P instanceof q))throw new TypeError("Cannot call a class as a function")}(this,D),!j)throw y.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=j,this._metadataService=new L(this._settings),this._userInfoService=new O(this._settings),this._joseUtil=F,this._tokenClient=new x(this._settings)}return D.prototype.validateSigninResponse=function(L,O){var F=this;return y.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(L,O).then(function(x){return y.Log.debug("ResponseValidator.validateSigninResponse: state processed"),F._validateTokens(L,x).then(function(A){return y.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),F._processClaims(L,A).then(function(P){return y.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),P})})})},D.prototype.validateSignoutResponse=function(L,O){return L.id!==O.state?(y.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(y.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),O.state=L.data,O.error?(y.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",O.error),Promise.reject(new v.ErrorResponse(O))):Promise.resolve(O))},D.prototype._processSigninParams=function(L,O){if(L.id!==O.state)return y.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!L.client_id)return y.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!L.authority)return y.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==L.authority)return y.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=L.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==L.client_id)return y.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=L.client_id;return y.Log.debug("ResponseValidator._processSigninParams: state validated"),O.state=L.data,O.error?(y.Log.warn("ResponseValidator._processSigninParams: Response was error",O.error),Promise.reject(new v.ErrorResponse(O))):L.nonce&&!O.id_token?(y.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!L.nonce&&O.id_token?(y.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):L.code_verifier&&!O.code?(y.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!L.code_verifier&&O.code?(y.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(O.scope||(O.scope=L.scope),Promise.resolve(O))},D.prototype._processClaims=function(L,O){var F=this;if(O.isOpenIdConnect){if(y.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),O.profile=this._filterProtocolClaims(O.profile),!0!==L.skipUserInfo&&this._settings.loadUserInfo&&O.access_token)return y.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(O.access_token).then(function(x){return y.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),x.sub!==O.profile.sub?(y.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in access_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in access_token"))):(O.profile=F._mergeClaims(O.profile,x),y.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",O.profile),O)});y.Log.debug("ResponseValidator._processClaims: not loading user info")}else y.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(O)},D.prototype._mergeClaims=function(L,O){var F=Object.assign({},L);for(var x in O){var A=O[x];Array.isArray(A)||(A=[A]);for(var P=0;P<A.length;P++){var q=A[P];F[x]?Array.isArray(F[x])?F[x].indexOf(q)<0&&F[x].push(q):F[x]!==q&&(F[x]="object"===(void 0===q?"undefined":k(q))?this._mergeClaims(F[x],q):[F[x],q]):F[x]=q}}return F},D.prototype._filterProtocolClaims=function(L){y.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",L);var O=Object.assign({},L);return this._settings._filterProtocolClaims?(I.forEach(function(F){delete O[F]}),y.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",O)):y.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),O},D.prototype._validateTokens=function(L,O){return O.code?(y.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(L,O)):O.id_token?O.access_token?(y.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(L,O)):(y.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(L,O)):(y.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(O))},D.prototype._processCode=function(L,O){var F=this,x={client_id:L.client_id,client_secret:L.client_secret,code:O.code,redirect_uri:L.redirect_uri,code_verifier:L.code_verifier};return L.extraTokenParams&&"object"===k(L.extraTokenParams)&&Object.assign(x,L.extraTokenParams),this._tokenClient.exchangeCode(x).then(function(A){for(var P in A)O[P]=A[P];return O.id_token?(y.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),F._validateIdTokenAttributes(L,O)):(y.Log.debug("ResponseValidator._processCode: token response successful, returning response"),O)})},D.prototype._validateIdTokenAttributes=function(L,O){var F=this;return this._metadataService.getIssuer().then(function(x){var A=L.client_id,P=F._settings.clockSkew;return y.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",P),F._joseUtil.validateJwtAttributes(O.id_token,x,A,P).then(function(q){return L.nonce&&L.nonce!==q.nonce?(y.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):q.sub?(O.profile=q,O):(y.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})},D.prototype._validateIdTokenAndAccessToken=function(L,O){var F=this;return this._validateIdToken(L,O).then(function(x){return F._validateAccessToken(x)})},D.prototype._validateIdToken=function(L,O){var F=this;if(!L.nonce)return y.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var x=this._joseUtil.parseJwt(O.id_token);if(!x||!x.header||!x.payload)return y.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",x),Promise.reject(new Error("Failed to parse id_token"));if(L.nonce!==x.payload.nonce)return y.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"));var A=x.header.kid;return this._metadataService.getIssuer().then(function(P){return y.Log.debug("ResponseValidator._validateIdToken: Received issuer"),F._metadataService.getSigningKeys().then(function(q){if(!q)return y.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));y.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var se=void 0;if(A)se=q.filter(function(Se){return Se.kid===A})[0];else{if((q=F._filterByAlg(q,x.header.alg)).length>1)return y.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));se=q[0]}if(!se)return y.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var ie=L.client_id,Ee=F._settings.clockSkew;return y.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",Ee),F._joseUtil.validateJwt(O.id_token,se,P,ie,Ee).then(function(){return y.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),x.payload.sub?(O.profile=x.payload,O):(y.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},D.prototype._filterByAlg=function(L,O){var F=null;if(O.startsWith("RS"))F="RSA";else if(O.startsWith("PS"))F="PS";else{if(!O.startsWith("ES"))return y.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",O),[];F="EC"}return y.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",F),L=L.filter(function(x){return x.kty===F}),y.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",F,L.length),L},D.prototype._validateAccessToken=function(L){if(!L.profile)return y.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!L.profile.at_hash)return y.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!L.id_token)return y.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var O=this._joseUtil.parseJwt(L.id_token);if(!O||!O.header)return y.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",O),Promise.reject(new Error("Failed to parse id_token"));var F=O.header.alg;if(!F||5!==F.length)return y.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",F),Promise.reject(new Error("Unsupported alg: "+F));var x=F.substr(2,3);if(!x)return y.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",F,x),Promise.reject(new Error("Unsupported alg: "+F));if(256!==(x=parseInt(x))&&384!==x&&512!==x)return y.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",F,x),Promise.reject(new Error("Unsupported alg: "+F));var A="sha"+x,P=this._joseUtil.hashString(L.access_token,A);if(!P)return y.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",A),Promise.reject(new Error("Failed to validate at_hash"));var q=P.substr(0,P.length/2),se=this._joseUtil.hexToBase64Url(q);return se!==L.profile.at_hash?(y.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",se,L.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(y.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(L))},D}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.UserInfoService=void 0;var k=H(7),y=H(2),M=H(0),E=H(4);T.UserInfoService=function(){function g(v){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.JsonService,I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.MetadataService,D=arguments.length>3&&void 0!==arguments[3]?arguments[3]:E.JoseUtil;if(function(L,O){if(!(L instanceof O))throw new TypeError("Cannot call a class as a function")}(this,g),!v)throw M.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=v,this._jsonService=new _(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new I(this._settings),this._joseUtil=D}return g.prototype.getClaims=function(_){var I=this;return _?this._metadataService.getUserInfoEndpoint().then(function(D){return M.Log.debug("UserInfoService.getClaims: received userinfo url",D),I._jsonService.getJson(D,_).then(function(j){return M.Log.debug("UserInfoService.getClaims: claims received",j),j})}):(M.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},g.prototype._getClaimsFromJwt=function(_){var I=this;try{var D=this._joseUtil.parseJwt(_.responseText);if(!D||!D.header||!D.payload)return M.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",D),Promise.reject(new Error("Failed to parse id_token"));var j=D.header.kid,L=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":L=this._metadataService.getIssuer();break;case"ANY":L=Promise.resolve(D.payload.iss);break;default:L=Promise.resolve(this._settings.userInfoJwtIssuer)}return L.then(function(O){return M.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+O),I._metadataService.getSigningKeys().then(function(F){if(!F)return M.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));M.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var x=void 0;if(j)x=F.filter(function(q){return q.kid===j})[0];else{if((F=I._filterByAlg(F,D.header.alg)).length>1)return M.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));x=F[0]}if(!x)return M.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var A=I._settings.client_id,P=I._settings.clockSkew;return M.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",P),I._joseUtil.validateJwt(_.responseText,x,O,A,P,void 0,!0).then(function(){return M.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),D.payload})})})}catch(O){return M.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",O.message),void reject(O)}},g.prototype._filterByAlg=function(_,I){var D=null;if(I.startsWith("RS"))D="RSA";else if(I.startsWith("PS"))D="PS";else{if(!I.startsWith("ES"))return M.Log.debug("UserInfoService._filterByAlg: alg not supported: ",I),[];D="EC"}return M.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",D),_=_.filter(function(j){return j.kty===D}),M.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",D,_.length),_},g}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.AllowedSigningAlgs=T.b64tohex=T.hextob64u=T.crypto=T.X509=T.KeyUtil=T.jws=void 0;var k=H(26);T.jws=k.jws,T.KeyUtil=k.KEYUTIL,T.X509=k.X509,T.crypto=k.crypto,T.hextob64u=k.hextob64u,T.b64tohex=k.b64tohex,T.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(ye,T,H){"use strict";(function(k){Object.defineProperty(T,"__esModule",{value:!0});var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},M={userAgent:!1},E={};if(void 0===g)var g={};g.lang={extend:function(c,u,f){if(!u||!c)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var p=function(){};if(p.prototype=u.prototype,c.prototype=new p,c.prototype.constructor=c,c.superclass=u.prototype,u.prototype.constructor==Object.prototype.constructor&&(u.prototype.constructor=u),f){var w;for(w in f)c.prototype[w]=f[w];var N=function(){},U=["toString","valueOf"];try{/MSIE/.test(M.userAgent)&&(N=function(G,J){for(w=0;w<U.length;w+=1){var W=U[w],z=J[W];"function"==typeof z&&z!=Object.prototype[W]&&(G[W]=z)}})}catch{}N(c.prototype,f)}}};var v,_,I,D,j,L,O,F,x,A,P,c,u,f,p,q=q||(v=Math,I=(_={}).lib={},D=I.Base=function(){function l(){}return{extend:function(u){l.prototype=this;var f=new l;return u&&f.mixIn(u),f.hasOwnProperty("init")||(f.init=function(){f.$super.init.apply(this,arguments)}),f.init.prototype=f,f.$super=this,f},create:function(){var u=this.extend();return u.init.apply(u,arguments),u},init:function(){},mixIn:function(u){for(var f in u)u.hasOwnProperty(f)&&(this[f]=u[f]);u.hasOwnProperty("toString")&&(this.toString=u.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),j=I.WordArray=D.extend({init:function(c,u){c=this.words=c||[],this.sigBytes=u??4*c.length},toString:function(c){return(c||O).stringify(this)},concat:function(c){var u=this.words,f=c.words,p=this.sigBytes,w=c.sigBytes;if(this.clamp(),p%4)for(var N=0;N<w;N++)u[p+N>>>2]|=(f[N>>>2]>>>24-N%4*8&255)<<24-(p+N)%4*8;else for(N=0;N<w;N+=4)u[p+N>>>2]=f[N>>>2];return this.sigBytes+=w,this},clamp:function(){var c=this.words,u=this.sigBytes;c[u>>>2]&=4294967295<<32-u%4*8,c.length=v.ceil(u/4)},clone:function(){var c=D.clone.call(this);return c.words=this.words.slice(0),c},random:function(c){for(var u=[],f=0;f<c;f+=4)u.push(4294967296*v.random()|0);return new j.init(u,c)}}),L=_.enc={},O=L.Hex={stringify:function(c){for(var u=c.words,f=c.sigBytes,p=[],w=0;w<f;w++){var N=u[w>>>2]>>>24-w%4*8&255;p.push((N>>>4).toString(16)),p.push((15&N).toString(16))}return p.join("")},parse:function(c){for(var u=c.length,f=[],p=0;p<u;p+=2)f[p>>>3]|=parseInt(c.substr(p,2),16)<<24-p%8*4;return new j.init(f,u/2)}},F=L.Latin1={stringify:function(c){for(var u=c.words,f=c.sigBytes,p=[],w=0;w<f;w++)p.push(String.fromCharCode(u[w>>>2]>>>24-w%4*8&255));return p.join("")},parse:function(c){for(var u=c.length,f=[],p=0;p<u;p++)f[p>>>2]|=(255&c.charCodeAt(p))<<24-p%4*8;return new j.init(f,u)}},x=L.Utf8={stringify:function(c){try{return decodeURIComponent(escape(F.stringify(c)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(c){return F.parse(unescape(encodeURIComponent(c)))}},A=I.BufferedBlockAlgorithm=D.extend({reset:function(){this._data=new j.init,this._nDataBytes=0},_append:function(c){"string"==typeof c&&(c=x.parse(c)),this._data.concat(c),this._nDataBytes+=c.sigBytes},_process:function(c){var u=this._data,f=u.words,p=u.sigBytes,w=this.blockSize,N=p/(4*w),U=(N=c?v.ceil(N):v.max((0|N)-this._minBufferSize,0))*w,B=v.min(4*U,p);if(U){for(var G=0;G<U;G+=w)this._doProcessBlock(f,G);var J=f.splice(0,U);u.sigBytes-=B}return new j.init(J,B)},clone:function(){var c=D.clone.call(this);return c._data=this._data.clone(),c},_minBufferSize:0}),I.Hasher=A.extend({cfg:D.extend(),init:function(c){this.cfg=this.cfg.extend(c),this.reset()},reset:function(){A.reset.call(this),this._doReset()},update:function(c){return this._append(c),this._process(),this},finalize:function(c){return c&&this._append(c),this._doFinalize()},blockSize:16,_createHelper:function(c){return function(u,f){return new c.init(f).finalize(u)}},_createHmacHelper:function(c){return function(u,f){return new P.HMAC.init(c,f).finalize(u)}}}),P=_.algo={},_);u=(c=q).lib,f=u.Base,p=u.WordArray,(c=c.x64={}).Word=f.extend({init:function(N,U){this.high=N,this.low=U}}),c.WordArray=f.extend({init:function(N,U){N=this.words=N||[],this.sigBytes=U??8*N.length},toX32:function(){for(var N=this.words,U=N.length,B=[],G=0;G<U;G++){var J=N[G];B.push(J.high),B.push(J.low)}return p.create(B,this.sigBytes)},clone:function(){for(var N=f.clone.call(this),U=N.words=this.words.slice(0),B=U.length,G=0;G<B;G++)U[G]=U[G].clone();return N}}),function(){var c=q.lib.WordArray;q.enc.Base64={stringify:function(f){var p=f.words,w=f.sigBytes,N=this._map;f.clamp(),f=[];for(var U=0;U<w;U+=3)for(var B=(p[U>>>2]>>>24-U%4*8&255)<<16|(p[U+1>>>2]>>>24-(U+1)%4*8&255)<<8|p[U+2>>>2]>>>24-(U+2)%4*8&255,G=0;4>G&&U+.75*G<w;G++)f.push(N.charAt(B>>>6*(3-G)&63));if(p=N.charAt(64))for(;f.length%4;)f.push(p);return f.join("")},parse:function(f){var p=f.length,w=this._map;(N=w.charAt(64))&&-1!=(N=f.indexOf(N))&&(p=N);for(var N=[],U=0,B=0;B<p;B++)if(B%4){var G=w.indexOf(f.charAt(B-1))<<B%4*2,J=w.indexOf(f.charAt(B))>>>6-B%4*2;N[U>>>2]|=(G|J)<<24-U%4*8,U++}return c.create(N,U)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(l){for(var c=q,u=(p=c.lib).WordArray,f=p.Hasher,p=c.algo,w=[],N=[],U=function(ae){return 4294967296*(ae-(0|ae))|0},B=2,G=0;64>G;){var J;e:{for(var W=l.sqrt(J=B),z=2;z<=W;z++)if(!(J%z)){J=!1;break e}J=!0}J&&(8>G&&(w[G]=U(l.pow(B,.5))),N[G]=U(l.pow(B,1/3)),G++),B++}var X=[];p=p.SHA256=f.extend({_doReset:function(){this._hash=new u.init(w.slice(0))},_doProcessBlock:function(ae,ce){for(var we=this._hash.words,me=we[0],xe=we[1],Ae=we[2],Re=we[3],Be=we[4],Ot=we[5],wt=we[6],Vt=we[7],Ue=0;64>Ue;Ue++){if(16>Ue)X[Ue]=0|ae[ce+Ue];else{var it=X[Ue-15],Wt=X[Ue-2];X[Ue]=((it<<25|it>>>7)^(it<<14|it>>>18)^it>>>3)+X[Ue-7]+((Wt<<15|Wt>>>17)^(Wt<<13|Wt>>>19)^Wt>>>10)+X[Ue-16]}it=Vt+((Be<<26|Be>>>6)^(Be<<21|Be>>>11)^(Be<<7|Be>>>25))+(Be&Ot^~Be&wt)+N[Ue]+X[Ue],Wt=((me<<30|me>>>2)^(me<<19|me>>>13)^(me<<10|me>>>22))+(me&xe^me&Ae^xe&Ae),Vt=wt,wt=Ot,Ot=Be,Be=Re+it|0,Re=Ae,Ae=xe,xe=me,me=it+Wt|0}we[0]=we[0]+me|0,we[1]=we[1]+xe|0,we[2]=we[2]+Ae|0,we[3]=we[3]+Re|0,we[4]=we[4]+Be|0,we[5]=we[5]+Ot|0,we[6]=we[6]+wt|0,we[7]=we[7]+Vt|0},_doFinalize:function(){var ae=this._data,ce=ae.words,we=8*this._nDataBytes,me=8*ae.sigBytes;return ce[me>>>5]|=128<<24-me%32,ce[14+(me+64>>>9<<4)]=l.floor(we/4294967296),ce[15+(me+64>>>9<<4)]=we,ae.sigBytes=4*ce.length,this._process(),this._hash},clone:function(){var ae=f.clone.call(this);return ae._hash=this._hash.clone(),ae}}),c.SHA256=f._createHelper(p),c.HmacSHA256=f._createHmacHelper(p)}(Math),function(){function l(){return f.create.apply(f,arguments)}for(var c=q,u=c.lib.Hasher,f=(w=c.x64).Word,p=w.WordArray,w=c.algo,N=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],U=[],B=0;80>B;B++)U[B]=l();w=w.SHA512=u.extend({_doReset:function(){this._hash=new p.init([new f.init(1779033703,4089235720),new f.init(3144134277,2227873595),new f.init(1013904242,4271175723),new f.init(2773480762,1595750129),new f.init(1359893119,2917565137),new f.init(2600822924,725511199),new f.init(528734635,4215389547),new f.init(1541459225,327033209)])},_doProcessBlock:function(J,W){for(var z=(xe=this._hash.words)[0],X=xe[1],oe=xe[2],ae=xe[3],ce=xe[4],we=xe[5],me=xe[6],xe=xe[7],Ae=z.high,Re=z.low,Be=X.high,Ot=X.low,wt=oe.high,Vt=oe.low,Ue=ae.high,it=ae.low,Wt=ce.high,Nn=ce.low,zt=we.high,Io=we.low,Ne=me.high,Xi=me.low,ut=xe.high,eo=xe.low,pr=Ae,zn=Re,rs=Be,No=Ot,is=wt,gr=Vt,mr=Ue,ea=it,ri=Wt,an=Nn,Rr=zt,yt=Io,to=Ne,no=Xi,os=ut,xo=eo,wn=0;80>wn;wn++){var Or=U[wn];if(16>wn)var gi=Or.high=0|J[W+2*wn],Qe=Or.low=0|J[W+2*wn+1];else{gi=((Qe=(gi=U[wn-15]).high)>>>1|(mi=gi.low)<<31)^(Qe>>>8|mi<<24)^Qe>>>7;var mi=(mi>>>1|Qe<<31)^(mi>>>8|Qe<<24)^(mi>>>7|Qe<<25),ro=((Qe=(ro=U[wn-2]).high)>>>19|(mn=ro.low)<<13)^(Qe<<3|mn>>>29)^Qe>>>6,mn=(mn>>>19|Qe<<13)^(mn<<3|Qe>>>29)^(mn>>>6|Qe<<26),Mt=(Qe=U[wn-7]).high,io=(Bi=U[wn-16]).high,Bi=Bi.low;gi=(gi=(gi=gi+Mt+((Qe=mi+Qe.low)>>>0<mi>>>0?1:0))+ro+((Qe+=mn)>>>0<mn>>>0?1:0))+io+((Qe+=Bi)>>>0<Bi>>>0?1:0),Or.high=gi,Or.low=Qe}Or=pr&rs^pr&is^rs&is;var Oe=zn&No^zn&gr^No&gr,rr=(mi=(pr>>>28|zn<<4)^(pr<<30|zn>>>2)^(pr<<25|zn>>>7),ro=(zn>>>28|pr<<4)^(zn<<30|pr>>>2)^(zn<<25|pr>>>7),(mn=N[wn]).high),Ft=mn.low;io=(io=(io=(io=os+((ri>>>14|an<<18)^(ri>>>18|an<<14)^(ri<<23|an>>>9))+((mn=xo+((an>>>14|ri<<18)^(an>>>18|ri<<14)^(an<<23|ri>>>9)))>>>0<xo>>>0?1:0))+(Mt=ri&Rr^~ri&to)+((mn+=Bi=an&yt^~an&no)>>>0<Bi>>>0?1:0))+rr+((mn+=Ft)>>>0<Ft>>>0?1:0))+gi+((mn+=Qe)>>>0<Qe>>>0?1:0),os=to,xo=no,to=Rr,no=yt,Rr=ri,yt=an,ri=mr+io+((an=ea+mn|0)>>>0<ea>>>0?1:0)|0,mr=is,ea=gr,is=rs,gr=No,rs=pr,No=zn,pr=io+(Or=mi+Or+((Qe=ro+Oe)>>>0<ro>>>0?1:0))+((zn=mn+Qe|0)>>>0<mn>>>0?1:0)|0}Re=z.low=Re+zn,z.high=Ae+pr+(Re>>>0<zn>>>0?1:0),Ot=X.low=Ot+No,X.high=Be+rs+(Ot>>>0<No>>>0?1:0),Vt=oe.low=Vt+gr,oe.high=wt+is+(Vt>>>0<gr>>>0?1:0),it=ae.low=it+ea,ae.high=Ue+mr+(it>>>0<ea>>>0?1:0),Nn=ce.low=Nn+an,ce.high=Wt+ri+(Nn>>>0<an>>>0?1:0),Io=we.low=Io+yt,we.high=zt+Rr+(Io>>>0<yt>>>0?1:0),Xi=me.low=Xi+no,me.high=Ne+to+(Xi>>>0<no>>>0?1:0),eo=xe.low=eo+xo,xe.high=ut+os+(eo>>>0<xo>>>0?1:0)},_doFinalize:function(){var J=this._data,W=J.words,z=8*this._nDataBytes,X=8*J.sigBytes;return W[X>>>5]|=128<<24-X%32,W[30+(X+128>>>10<<5)]=Math.floor(z/4294967296),W[31+(X+128>>>10<<5)]=z,J.sigBytes=4*W.length,this._process(),this._hash.toX32()},clone:function(){var J=u.clone.call(this);return J._hash=this._hash.clone(),J},blockSize:32}),c.SHA512=u._createHelper(w),c.HmacSHA512=u._createHmacHelper(w)}(),function(){var l=q,c=(p=l.x64).Word,u=p.WordArray,f=(p=l.algo).SHA512,p=p.SHA384=f.extend({_doReset:function(){this._hash=new u.init([new c.init(3418070365,3238371032),new c.init(1654270250,914150663),new c.init(2438529370,812702999),new c.init(355462360,4144912697),new c.init(1731405415,4290775857),new c.init(2394180231,1750603025),new c.init(3675008525,1694076839),new c.init(1203062813,3204075428)])},_doFinalize:function(){var N=f._doFinalize.call(this);return N.sigBytes-=16,N}});l.SHA384=f._createHelper(p),l.HmacSHA384=f._createHmacHelper(p)}();var se,ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Se(l){var c,u,f="";for(c=0;c+3<=l.length;c+=3)u=parseInt(l.substring(c,c+3),16),f+=ie.charAt(u>>6)+ie.charAt(63&u);for(c+1==l.length?(u=parseInt(l.substring(c,c+1),16),f+=ie.charAt(u<<2)):c+2==l.length&&(u=parseInt(l.substring(c,c+2),16),f+=ie.charAt(u>>2)+ie.charAt((3&u)<<4)),"=";(3&f.length)>0;)f+="=";return f}function ze(l){var c,u,f,p="",w=0;for(c=0;c<l.length&&"="!=l.charAt(c);++c)(f=ie.indexOf(l.charAt(c)))<0||(0==w?(p+=Ce(f>>2),u=3&f,w=1):1==w?(p+=Ce(u<<2|f>>4),u=15&f,w=2):2==w?(p+=Ce(u),p+=Ce(f>>2),u=3&f,w=3):(p+=Ce(u<<2|f>>4),p+=Ce(15&f),w=0));return 1==w&&(p+=Ce(u<<2)),p}function vt(l){var c,u=ze(l),f=new Array;for(c=0;2*c<u.length;++c)f[c]=parseInt(u.substring(2*c,2*c+2),16);return f}function Z(l,c,u){null!=l&&("number"==typeof l?this.fromNumber(l,c,u):this.fromString(l,null==c&&"string"!=typeof l?256:c))}function Ze(){return new Z(null)}"Microsoft Internet Explorer"==M.appName?(Z.prototype.am=function(c,u,f,p,w,N){for(var U=32767&u,B=u>>15;--N>=0;){var G=32767&this[c],J=this[c++]>>15,W=B*G+J*U;w=((G=U*G+((32767&W)<<15)+f[p]+(1073741823&w))>>>30)+(W>>>15)+B*J+(w>>>30),f[p++]=1073741823&G}return w},se=30):"Netscape"!=M.appName?(Z.prototype.am=function(c,u,f,p,w,N){for(;--N>=0;){var U=u*this[c++]+f[p]+w;w=Math.floor(U/67108864),f[p++]=67108863&U}return w},se=26):(Z.prototype.am=function(c,u,f,p,w,N){for(var U=16383&u,B=u>>14;--N>=0;){var G=16383&this[c],J=this[c++]>>14,W=B*G+J*U;w=((G=U*G+((16383&W)<<14)+f[p]+w)>>28)+(W>>14)+B*J,f[p++]=268435455&G}return w},se=28),Z.prototype.DB=se,Z.prototype.DM=(1<<se)-1,Z.prototype.DV=1<<se,Z.prototype.FV=Math.pow(2,52),Z.prototype.F1=52-se,Z.prototype.F2=2*se-52;var nn,qe,jt=new Array;for(nn="0".charCodeAt(0),qe=0;qe<=9;++qe)jt[nn++]=qe;for(nn="a".charCodeAt(0),qe=10;qe<36;++qe)jt[nn++]=qe;for(nn="A".charCodeAt(0),qe=10;qe<36;++qe)jt[nn++]=qe;function Ce(l){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(l)}function Et(l,c){return jt[l.charCodeAt(c)]??-1}function At(l){var c=Ze();return c.fromInt(l),c}function Bt(l){var c,u=1;return 0!=(c=l>>>16)&&(l=c,u+=16),0!=(c=l>>8)&&(l=c,u+=8),0!=(c=l>>4)&&(l=c,u+=4),0!=(c=l>>2)&&(l=c,u+=2),0!=(c=l>>1)&&(l=c,u+=1),u}function Yt(l){this.m=l}function Ht(l){this.m=l,this.mp=l.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<l.DB-15)-1,this.mt2=2*l.t}function gn(l,c){return l&c}function Vr(l,c){return l|c}function Fr(l,c){return l^c}function Zn(l,c){return l&~c}function dr(l){if(0==l)return-1;var c=0;return 0==(65535&l)&&(l>>=16,c+=16),0==(255&l)&&(l>>=8,c+=8),0==(15&l)&&(l>>=4,c+=4),0==(3&l)&&(l>>=2,c+=2),0==(1&l)&&++c,c}function Ar(l){for(var c=0;0!=l;)l&=l-1,++c;return c}function Y(){}function C(l){return l}function S(l){this.r2=Ze(),this.q3=Ze(),Z.ONE.dlShiftTo(2*l.t,this.r2),this.mu=this.r2.divide(l),this.m=l}Yt.prototype.convert=function(c){return c.s<0||c.compareTo(this.m)>=0?c.mod(this.m):c},Yt.prototype.revert=function(c){return c},Yt.prototype.reduce=function(c){c.divRemTo(this.m,null,c)},Yt.prototype.mulTo=function(c,u,f){c.multiplyTo(u,f),this.reduce(f)},Yt.prototype.sqrTo=function(c,u){c.squareTo(u),this.reduce(u)},Ht.prototype.convert=function(c){var u=Ze();return c.abs().dlShiftTo(this.m.t,u),u.divRemTo(this.m,null,u),c.s<0&&u.compareTo(Z.ZERO)>0&&this.m.subTo(u,u),u},Ht.prototype.revert=function(c){var u=Ze();return c.copyTo(u),this.reduce(u),u},Ht.prototype.reduce=function(c){for(;c.t<=this.mt2;)c[c.t++]=0;for(var u=0;u<this.m.t;++u){var f=32767&c[u],p=f*this.mpl+((f*this.mph+(c[u]>>15)*this.mpl&this.um)<<15)&c.DM;for(c[f=u+this.m.t]+=this.m.am(0,p,c,u,0,this.m.t);c[f]>=c.DV;)c[f]-=c.DV,c[++f]++}c.clamp(),c.drShiftTo(this.m.t,c),c.compareTo(this.m)>=0&&c.subTo(this.m,c)},Ht.prototype.mulTo=function(c,u,f){c.multiplyTo(u,f),this.reduce(f)},Ht.prototype.sqrTo=function(c,u){c.squareTo(u),this.reduce(u)},Z.prototype.copyTo=function(c){for(var u=this.t-1;u>=0;--u)c[u]=this[u];c.t=this.t,c.s=this.s},Z.prototype.fromInt=function(c){this.t=1,this.s=c<0?-1:0,c>0?this[0]=c:c<-1?this[0]=c+this.DV:this.t=0},Z.prototype.fromString=function(c,u){var f;if(16==u)f=4;else if(8==u)f=3;else if(256==u)f=8;else if(2==u)f=1;else if(32==u)f=5;else{if(4!=u)return void this.fromRadix(c,u);f=2}this.t=0,this.s=0;for(var p=c.length,w=!1,N=0;--p>=0;){var U=8==f?255&c[p]:Et(c,p);U<0?"-"==c.charAt(p)&&(w=!0):(w=!1,0==N?this[this.t++]=U:N+f>this.DB?(this[this.t-1]|=(U&(1<<this.DB-N)-1)<<N,this[this.t++]=U>>this.DB-N):this[this.t-1]|=U<<N,(N+=f)>=this.DB&&(N-=this.DB))}8==f&&0!=(128&c[0])&&(this.s=-1,N>0&&(this[this.t-1]|=(1<<this.DB-N)-1<<N)),this.clamp(),w&&Z.ZERO.subTo(this,this)},Z.prototype.clamp=function(){for(var c=this.s&this.DM;this.t>0&&this[this.t-1]==c;)--this.t},Z.prototype.dlShiftTo=function(c,u){var f;for(f=this.t-1;f>=0;--f)u[f+c]=this[f];for(f=c-1;f>=0;--f)u[f]=0;u.t=this.t+c,u.s=this.s},Z.prototype.drShiftTo=function(c,u){for(var f=c;f<this.t;++f)u[f-c]=this[f];u.t=Math.max(this.t-c,0),u.s=this.s},Z.prototype.lShiftTo=function(c,u){var f,p=c%this.DB,w=this.DB-p,N=(1<<w)-1,U=Math.floor(c/this.DB),B=this.s<<p&this.DM;for(f=this.t-1;f>=0;--f)u[f+U+1]=this[f]>>w|B,B=(this[f]&N)<<p;for(f=U-1;f>=0;--f)u[f]=0;u[U]=B,u.t=this.t+U+1,u.s=this.s,u.clamp()},Z.prototype.rShiftTo=function(c,u){u.s=this.s;var f=Math.floor(c/this.DB);if(f>=this.t)u.t=0;else{var p=c%this.DB,w=this.DB-p,N=(1<<p)-1;u[0]=this[f]>>p;for(var U=f+1;U<this.t;++U)u[U-f-1]|=(this[U]&N)<<w,u[U-f]=this[U]>>p;p>0&&(u[this.t-f-1]|=(this.s&N)<<w),u.t=this.t-f,u.clamp()}},Z.prototype.subTo=function(c,u){for(var f=0,p=0,w=Math.min(c.t,this.t);f<w;)p+=this[f]-c[f],u[f++]=p&this.DM,p>>=this.DB;if(c.t<this.t){for(p-=c.s;f<this.t;)p+=this[f],u[f++]=p&this.DM,p>>=this.DB;p+=this.s}else{for(p+=this.s;f<c.t;)p-=c[f],u[f++]=p&this.DM,p>>=this.DB;p-=c.s}u.s=p<0?-1:0,p<-1?u[f++]=this.DV+p:p>0&&(u[f++]=p),u.t=f,u.clamp()},Z.prototype.multiplyTo=function(c,u){var f=this.abs(),p=c.abs(),w=f.t;for(u.t=w+p.t;--w>=0;)u[w]=0;for(w=0;w<p.t;++w)u[w+f.t]=f.am(0,p[w],u,w,0,f.t);u.s=0,u.clamp(),this.s!=c.s&&Z.ZERO.subTo(u,u)},Z.prototype.squareTo=function(c){for(var u=this.abs(),f=c.t=2*u.t;--f>=0;)c[f]=0;for(f=0;f<u.t-1;++f){var p=u.am(f,u[f],c,2*f,0,1);(c[f+u.t]+=u.am(f+1,2*u[f],c,2*f+1,p,u.t-f-1))>=u.DV&&(c[f+u.t]-=u.DV,c[f+u.t+1]=1)}c.t>0&&(c[c.t-1]+=u.am(f,u[f],c,2*f,0,1)),c.s=0,c.clamp()},Z.prototype.divRemTo=function(c,u,f){var p=c.abs();if(!(p.t<=0)){var w=this.abs();if(w.t<p.t)return u?.fromInt(0),void(null!=f&&this.copyTo(f));null==f&&(f=Ze());var N=Ze(),U=this.s,B=c.s,G=this.DB-Bt(p[p.t-1]);G>0?(p.lShiftTo(G,N),w.lShiftTo(G,f)):(p.copyTo(N),w.copyTo(f));var J=N.t,W=N[J-1];if(0!=W){var z=W*(1<<this.F1)+(J>1?N[J-2]>>this.F2:0),X=this.FV/z,oe=(1<<this.F1)/z,ae=1<<this.F2,ce=f.t,we=ce-J,me=u??Ze();for(N.dlShiftTo(we,me),f.compareTo(me)>=0&&(f[f.t++]=1,f.subTo(me,f)),Z.ONE.dlShiftTo(J,me),me.subTo(N,N);N.t<J;)N[N.t++]=0;for(;--we>=0;){var xe=f[--ce]==W?this.DM:Math.floor(f[ce]*X+(f[ce-1]+ae)*oe);if((f[ce]+=N.am(0,xe,f,we,0,J))<xe)for(N.dlShiftTo(we,me),f.subTo(me,f);f[ce]<--xe;)f.subTo(me,f)}null!=u&&(f.drShiftTo(J,u),U!=B&&Z.ZERO.subTo(u,u)),f.t=J,f.clamp(),G>0&&f.rShiftTo(G,f),U<0&&Z.ZERO.subTo(f,f)}}},Z.prototype.invDigit=function(){if(this.t<1)return 0;var c=this[0];if(0==(1&c))return 0;var u=3&c;return(u=(u=(u=(u=u*(2-(15&c)*u)&15)*(2-(255&c)*u)&255)*(2-((65535&c)*u&65535))&65535)*(2-c*u%this.DV)%this.DV)>0?this.DV-u:-u},Z.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},Z.prototype.exp=function(c,u){if(c>4294967295||c<1)return Z.ONE;var f=Ze(),p=Ze(),w=u.convert(this),N=Bt(c)-1;for(w.copyTo(f);--N>=0;)if(u.sqrTo(f,p),(c&1<<N)>0)u.mulTo(p,w,f);else{var U=f;f=p,p=U}return u.revert(f)},Z.prototype.toString=function(c){if(this.s<0)return"-"+this.negate().toString(c);var u;if(16==c)u=4;else if(8==c)u=3;else if(2==c)u=1;else if(32==c)u=5;else{if(4!=c)return this.toRadix(c);u=2}var f,p=(1<<u)-1,w=!1,N="",U=this.t,B=this.DB-U*this.DB%u;if(U-- >0)for(B<this.DB&&(f=this[U]>>B)>0&&(w=!0,N=Ce(f));U>=0;)B<u?(f=(this[U]&(1<<B)-1)<<u-B,f|=this[--U]>>(B+=this.DB-u)):(f=this[U]>>(B-=u)&p,B<=0&&(B+=this.DB,--U)),f>0&&(w=!0),w&&(N+=Ce(f));return w?N:"0"},Z.prototype.negate=function(){var c=Ze();return Z.ZERO.subTo(this,c),c},Z.prototype.abs=function(){return this.s<0?this.negate():this},Z.prototype.compareTo=function(c){var u=this.s-c.s;if(0!=u)return u;var f=this.t;if(0!=(u=f-c.t))return this.s<0?-u:u;for(;--f>=0;)if(0!=(u=this[f]-c[f]))return u;return 0},Z.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Bt(this[this.t-1]^this.s&this.DM)},Z.prototype.mod=function(c){var u=Ze();return this.abs().divRemTo(c,null,u),this.s<0&&u.compareTo(Z.ZERO)>0&&c.subTo(u,u),u},Z.prototype.modPowInt=function(c,u){var f;return f=c<256||u.isEven()?new Yt(u):new Ht(u),this.exp(c,f)},Z.ZERO=At(0),Z.ONE=At(1),Y.prototype.convert=C,Y.prototype.revert=C,Y.prototype.mulTo=function(c,u,f){c.multiplyTo(u,f)},Y.prototype.sqrTo=function(c,u){c.squareTo(u)},S.prototype.convert=function(c){if(c.s<0||c.t>2*this.m.t)return c.mod(this.m);if(c.compareTo(this.m)<0)return c;var u=Ze();return c.copyTo(u),this.reduce(u),u},S.prototype.revert=function(c){return c},S.prototype.reduce=function(c){for(c.drShiftTo(this.m.t-1,this.r2),c.t>this.m.t+1&&(c.t=this.m.t+1,c.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);c.compareTo(this.r2)<0;)c.dAddOffset(1,this.m.t+1);for(c.subTo(this.r2,c);c.compareTo(this.m)>=0;)c.subTo(this.m,c)},S.prototype.mulTo=function(c,u,f){c.multiplyTo(u,f),this.reduce(f)},S.prototype.sqrTo=function(c,u){c.squareTo(u),this.reduce(u)};var K=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],te=(1<<26)/K[K.length-1];function ee(){this.i=0,this.j=0,this.S=new Array}Z.prototype.chunkSize=function(c){return Math.floor(Math.LN2*this.DB/Math.log(c))},Z.prototype.toRadix=function(c){if(null==c&&(c=10),0==this.signum()||c<2||c>36)return"0";var u=this.chunkSize(c),f=Math.pow(c,u),p=At(f),w=Ze(),N=Ze(),U="";for(this.divRemTo(p,w,N);w.signum()>0;)U=(f+N.intValue()).toString(c).substr(1)+U,w.divRemTo(p,w,N);return N.intValue().toString(c)+U},Z.prototype.fromRadix=function(c,u){this.fromInt(0),null==u&&(u=10);for(var f=this.chunkSize(u),p=Math.pow(u,f),w=!1,N=0,U=0,B=0;B<c.length;++B){var G=Et(c,B);G<0?"-"==c.charAt(B)&&0==this.signum()&&(w=!0):(U=u*U+G,++N>=f&&(this.dMultiply(p),this.dAddOffset(U,0),N=0,U=0))}N>0&&(this.dMultiply(Math.pow(u,N)),this.dAddOffset(U,0)),w&&Z.ZERO.subTo(this,this)},Z.prototype.fromNumber=function(c,u,f){if("number"==typeof u)if(c<2)this.fromInt(1);else for(this.fromNumber(c,f),this.testBit(c-1)||this.bitwiseTo(Z.ONE.shiftLeft(c-1),Vr,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(u);)this.dAddOffset(2,0),this.bitLength()>c&&this.subTo(Z.ONE.shiftLeft(c-1),this);else{var p=new Array,w=7&c;p.length=1+(c>>3),u.nextBytes(p),w>0?p[0]&=(1<<w)-1:p[0]=0,this.fromString(p,256)}},Z.prototype.bitwiseTo=function(c,u,f){var p,w,N=Math.min(c.t,this.t);for(p=0;p<N;++p)f[p]=u(this[p],c[p]);if(c.t<this.t){for(w=c.s&this.DM,p=N;p<this.t;++p)f[p]=u(this[p],w);f.t=this.t}else{for(w=this.s&this.DM,p=N;p<c.t;++p)f[p]=u(w,c[p]);f.t=c.t}f.s=u(this.s,c.s),f.clamp()},Z.prototype.changeBit=function(c,u){var f=Z.ONE.shiftLeft(c);return this.bitwiseTo(f,u,f),f},Z.prototype.addTo=function(c,u){for(var f=0,p=0,w=Math.min(c.t,this.t);f<w;)p+=this[f]+c[f],u[f++]=p&this.DM,p>>=this.DB;if(c.t<this.t){for(p+=c.s;f<this.t;)p+=this[f],u[f++]=p&this.DM,p>>=this.DB;p+=this.s}else{for(p+=this.s;f<c.t;)p+=c[f],u[f++]=p&this.DM,p>>=this.DB;p+=c.s}u.s=p<0?-1:0,p>0?u[f++]=p:p<-1&&(u[f++]=this.DV+p),u.t=f,u.clamp()},Z.prototype.dMultiply=function(c){this[this.t]=this.am(0,c-1,this,0,0,this.t),++this.t,this.clamp()},Z.prototype.dAddOffset=function(c,u){if(0!=c){for(;this.t<=u;)this[this.t++]=0;for(this[u]+=c;this[u]>=this.DV;)this[u]-=this.DV,++u>=this.t&&(this[this.t++]=0),++this[u]}},Z.prototype.multiplyLowerTo=function(c,u,f){var p,w=Math.min(this.t+c.t,u);for(f.s=0,f.t=w;w>0;)f[--w]=0;for(p=f.t-this.t;w<p;++w)f[w+this.t]=this.am(0,c[w],f,w,0,this.t);for(p=Math.min(c.t,u);w<p;++w)this.am(0,c[w],f,w,0,u-w);f.clamp()},Z.prototype.multiplyUpperTo=function(c,u,f){--u;var p=f.t=this.t+c.t-u;for(f.s=0;--p>=0;)f[p]=0;for(p=Math.max(u-this.t,0);p<c.t;++p)f[this.t+p-u]=this.am(u-p,c[p],f,0,0,this.t+p-u);f.clamp(),f.drShiftTo(1,f)},Z.prototype.modInt=function(c){if(c<=0)return 0;var u=this.DV%c,f=this.s<0?c-1:0;if(this.t>0)if(0==u)f=this[0]%c;else for(var p=this.t-1;p>=0;--p)f=(u*f+this[p])%c;return f},Z.prototype.millerRabin=function(c){var u=this.subtract(Z.ONE),f=u.getLowestSetBit();if(f<=0)return!1;var p=u.shiftRight(f);(c=c+1>>1)>K.length&&(c=K.length);for(var w=Ze(),N=0;N<c;++N){w.fromInt(K[Math.floor(Math.random()*K.length)]);var U=w.modPow(p,this);if(0!=U.compareTo(Z.ONE)&&0!=U.compareTo(u)){for(var B=1;B++<f&&0!=U.compareTo(u);)if(0==(U=U.modPowInt(2,this)).compareTo(Z.ONE))return!1;if(0!=U.compareTo(u))return!1}}return!0},Z.prototype.clone=function(){var c=Ze();return this.copyTo(c),c},Z.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},Z.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},Z.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},Z.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},Z.prototype.toByteArray=function(){var c=this.t,u=new Array;u[0]=this.s;var f,p=this.DB-c*this.DB%8,w=0;if(c-- >0)for(p<this.DB&&(f=this[c]>>p)!=(this.s&this.DM)>>p&&(u[w++]=f|this.s<<this.DB-p);c>=0;)p<8?(f=(this[c]&(1<<p)-1)<<8-p,f|=this[--c]>>(p+=this.DB-8)):(f=this[c]>>(p-=8)&255,p<=0&&(p+=this.DB,--c)),0!=(128&f)&&(f|=-256),0==w&&(128&this.s)!=(128&f)&&++w,(w>0||f!=this.s)&&(u[w++]=f);return u},Z.prototype.equals=function(c){return 0==this.compareTo(c)},Z.prototype.min=function(c){return this.compareTo(c)<0?this:c},Z.prototype.max=function(c){return this.compareTo(c)>0?this:c},Z.prototype.and=function(c){var u=Ze();return this.bitwiseTo(c,gn,u),u},Z.prototype.or=function(c){var u=Ze();return this.bitwiseTo(c,Vr,u),u},Z.prototype.xor=function(c){var u=Ze();return this.bitwiseTo(c,Fr,u),u},Z.prototype.andNot=function(c){var u=Ze();return this.bitwiseTo(c,Zn,u),u},Z.prototype.not=function(){for(var c=Ze(),u=0;u<this.t;++u)c[u]=this.DM&~this[u];return c.t=this.t,c.s=~this.s,c},Z.prototype.shiftLeft=function(c){var u=Ze();return c<0?this.rShiftTo(-c,u):this.lShiftTo(c,u),u},Z.prototype.shiftRight=function(c){var u=Ze();return c<0?this.lShiftTo(-c,u):this.rShiftTo(c,u),u},Z.prototype.getLowestSetBit=function(){for(var c=0;c<this.t;++c)if(0!=this[c])return c*this.DB+dr(this[c]);return this.s<0?this.t*this.DB:-1},Z.prototype.bitCount=function(){for(var c=0,u=this.s&this.DM,f=0;f<this.t;++f)c+=Ar(this[f]^u);return c},Z.prototype.testBit=function(c){var u=Math.floor(c/this.DB);return u>=this.t?0!=this.s:0!=(this[u]&1<<c%this.DB)},Z.prototype.setBit=function(c){return this.changeBit(c,Vr)},Z.prototype.clearBit=function(c){return this.changeBit(c,Zn)},Z.prototype.flipBit=function(c){return this.changeBit(c,Fr)},Z.prototype.add=function(c){var u=Ze();return this.addTo(c,u),u},Z.prototype.subtract=function(c){var u=Ze();return this.subTo(c,u),u},Z.prototype.multiply=function(c){var u=Ze();return this.multiplyTo(c,u),u},Z.prototype.divide=function(c){var u=Ze();return this.divRemTo(c,u,null),u},Z.prototype.remainder=function(c){var u=Ze();return this.divRemTo(c,null,u),u},Z.prototype.divideAndRemainder=function(c){var u=Ze(),f=Ze();return this.divRemTo(c,u,f),new Array(u,f)},Z.prototype.modPow=function(c,u){var f,p,w=c.bitLength(),N=At(1);if(w<=0)return N;f=w<18?1:w<48?3:w<144?4:w<768?5:6,p=w<8?new Yt(u):u.isEven()?new S(u):new Ht(u);var U=new Array,B=3,G=f-1,J=(1<<f)-1;if(U[1]=p.convert(this),f>1){var W=Ze();for(p.sqrTo(U[1],W);B<=J;)U[B]=Ze(),p.mulTo(W,U[B-2],U[B]),B+=2}var z,X,oe=c.t-1,ae=!0,ce=Ze();for(w=Bt(c[oe])-1;oe>=0;){for(w>=G?z=c[oe]>>w-G&J:(z=(c[oe]&(1<<w+1)-1)<<G-w,oe>0&&(z|=c[oe-1]>>this.DB+w-G)),B=f;0==(1&z);)z>>=1,--B;if((w-=B)<0&&(w+=this.DB,--oe),ae)U[z].copyTo(N),ae=!1;else{for(;B>1;)p.sqrTo(N,ce),p.sqrTo(ce,N),B-=2;B>0?p.sqrTo(N,ce):(X=N,N=ce,ce=X),p.mulTo(ce,U[z],N)}for(;oe>=0&&0==(c[oe]&1<<w);)p.sqrTo(N,ce),X=N,N=ce,ce=X,--w<0&&(w=this.DB-1,--oe)}return p.revert(N)},Z.prototype.modInverse=function(c){var u=c.isEven();if(this.isEven()&&u||0==c.signum())return Z.ZERO;for(var f=c.clone(),p=this.clone(),w=At(1),N=At(0),U=At(0),B=At(1);0!=f.signum();){for(;f.isEven();)f.rShiftTo(1,f),u?(w.isEven()&&N.isEven()||(w.addTo(this,w),N.subTo(c,N)),w.rShiftTo(1,w)):N.isEven()||N.subTo(c,N),N.rShiftTo(1,N);for(;p.isEven();)p.rShiftTo(1,p),u?(U.isEven()&&B.isEven()||(U.addTo(this,U),B.subTo(c,B)),U.rShiftTo(1,U)):B.isEven()||B.subTo(c,B),B.rShiftTo(1,B);f.compareTo(p)>=0?(f.subTo(p,f),u&&w.subTo(U,w),N.subTo(B,N)):(p.subTo(f,p),u&&U.subTo(w,U),B.subTo(N,B))}return 0!=p.compareTo(Z.ONE)?Z.ZERO:B.compareTo(c)>=0?B.subtract(c):B.signum()<0?(B.addTo(c,B),B.signum()<0?B.add(c):B):B},Z.prototype.pow=function(c){return this.exp(c,new Y)},Z.prototype.gcd=function(c){var u=this.s<0?this.negate():this.clone(),f=c.s<0?c.negate():c.clone();if(u.compareTo(f)<0){var p=u;u=f,f=p}var w=u.getLowestSetBit(),N=f.getLowestSetBit();if(N<0)return u;for(w<N&&(N=w),N>0&&(u.rShiftTo(N,u),f.rShiftTo(N,f));u.signum()>0;)(w=u.getLowestSetBit())>0&&u.rShiftTo(w,u),(w=f.getLowestSetBit())>0&&f.rShiftTo(w,f),u.compareTo(f)>=0?(u.subTo(f,u),u.rShiftTo(1,u)):(f.subTo(u,f),f.rShiftTo(1,f));return N>0&&f.lShiftTo(N,f),f},Z.prototype.isProbablePrime=function(c){var u,f=this.abs();if(1==f.t&&f[0]<=K[K.length-1]){for(u=0;u<K.length;++u)if(f[0]==K[u])return!0;return!1}if(f.isEven())return!1;for(u=1;u<K.length;){for(var p=K[u],w=u+1;w<K.length&&p<te;)p*=K[w++];for(p=f.modInt(p);u<w;)if(p%K[u++]==0)return!1}return f.millerRabin(c)},Z.prototype.square=function(){var c=Ze();return this.squareTo(c),c},ee.prototype.init=function(c){var u,f,p;for(u=0;u<256;++u)this.S[u]=u;for(f=0,u=0;u<256;++u)p=this.S[u],this.S[u]=this.S[f=f+this.S[u]+c[u%c.length]&255],this.S[f]=p;this.i=0,this.j=0},ee.prototype.next=function(){var c;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,c=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=c,this.S[c+this.S[this.i]&255]};var fe,Fe,Ie;function Ct(){!function(c){Fe[Ie++]^=255&c,Fe[Ie++]^=c>>8&255,Fe[Ie++]^=c>>16&255,Fe[Ie++]^=c>>24&255,Ie>=256&&(Ie-=256)}((new Date).getTime())}if(null==Fe){var mt;if(Fe=new Array,Ie=0,void 0!==E&&(void 0!==E.crypto||void 0!==E.msCrypto)){var hi=E.crypto||E.msCrypto;if(hi.getRandomValues){var fr=new Uint8Array(32);for(hi.getRandomValues(fr),mt=0;mt<32;++mt)Fe[Ie++]=fr[mt]}else if("Netscape"==M.appName&&M.appVersion<"5"){var Gt=E.crypto.random(32);for(mt=0;mt<Gt.length;++mt)Fe[Ie++]=255&Gt.charCodeAt(mt)}}for(;Ie<256;)mt=Math.floor(65536*Math.random()),Fe[Ie++]=mt>>>8,Fe[Ie++]=255&mt;Ie=0,Ct()}function qs(){if(null==fe){for(Ct(),(fe=new ee).init(Fe),Ie=0;Ie<Fe.length;++Ie)Fe[Ie]=0;Ie=0}return fe.next()}function jr(){}function Ks(l,c){return new Z(l,c)}function Zi(l,c,u){for(var f="",p=0;f.length<c;)f+=u(String.fromCharCode.apply(String,l.concat([(4278190080&p)>>24,(16711680&p)>>16,(65280&p)>>8,255&p]))),p+=1;return f}function et(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Wn(l,c){this.x=c,this.q=l}function St(l,c,u,f){this.curve=l,this.x=c,this.y=u,this.z=f??Z.ONE,this.zinv=null}function Li(l,c,u){this.q=l,this.a=this.fromBigInteger(c),this.b=this.fromBigInteger(u),this.infinity=new St(this,null,null)}jr.prototype.nextBytes=function(c){var u;for(u=0;u<c.length;++u)c[u]=qs()},et.prototype.doPublic=function(c){return c.modPowInt(this.e,this.n)},et.prototype.setPublic=function(c,u){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof c)this.n=c,this.e=u;else{if(!(null!=c&&null!=u&&c.length>0&&u.length>0))throw"Invalid RSA public key";this.n=Ks(c,16),this.e=parseInt(u,16)}},et.prototype.encrypt=function(c){var u=function(N,U){if(U<N.length+11)throw"Message too long for RSA";for(var B=new Array,G=N.length-1;G>=0&&U>0;){var J=N.charCodeAt(G--);J<128?B[--U]=J:J>127&&J<2048?(B[--U]=63&J|128,B[--U]=J>>6|192):(B[--U]=63&J|128,B[--U]=J>>6&63|128,B[--U]=J>>12|224)}B[--U]=0;for(var W=new jr,z=new Array;U>2;){for(z[0]=0;0==z[0];)W.nextBytes(z);B[--U]=z[0]}return B[--U]=2,B[--U]=0,new Z(B)}(c,this.n.bitLength()+7>>3);if(null==u)return null;var f=this.doPublic(u);if(null==f)return null;var p=f.toString(16);return 0==(1&p.length)?p:"0"+p},et.prototype.encryptOAEP=function(c,u,f){var p=function(B,G,J,W){var z=$.crypto.MessageDigest,X=$.crypto.Util,oe=null;if(J||(J="sha1"),"string"==typeof J&&(oe=z.getCanonicalAlgName(J),W=z.getHashLength(oe),J=function(wt){return ht(X.hashHex(We(wt),oe))}),B.length+2*W+2>G)throw"Message too long for RSA";var ae,ce="";for(ae=0;ae<G-B.length-2*W-2;ae+=1)ce+="\0";var we=J("")+ce+"\x01"+B,me=new Array(W);(new jr).nextBytes(me);var xe=Zi(me,we.length,J),Ae=[];for(ae=0;ae<we.length;ae+=1)Ae[ae]=we.charCodeAt(ae)^xe.charCodeAt(ae);var Re=Zi(Ae,me.length,J),Be=[0];for(ae=0;ae<me.length;ae+=1)Be[ae+1]=me[ae]^Re.charCodeAt(ae);return new Z(Be.concat(Ae))}(c,this.n.bitLength()+7>>3,u,f);if(null==p)return null;var w=this.doPublic(p);if(null==w)return null;var N=w.toString(16);return 0==(1&N.length)?N:"0"+N},et.prototype.type="RSA",Wn.prototype.equals=function(c){return c==this||this.q.equals(c.q)&&this.x.equals(c.x)},Wn.prototype.toBigInteger=function(){return this.x},Wn.prototype.negate=function(){return new Wn(this.q,this.x.negate().mod(this.q))},Wn.prototype.add=function(c){return new Wn(this.q,this.x.add(c.toBigInteger()).mod(this.q))},Wn.prototype.subtract=function(c){return new Wn(this.q,this.x.subtract(c.toBigInteger()).mod(this.q))},Wn.prototype.multiply=function(c){return new Wn(this.q,this.x.multiply(c.toBigInteger()).mod(this.q))},Wn.prototype.square=function(){return new Wn(this.q,this.x.square().mod(this.q))},Wn.prototype.divide=function(c){return new Wn(this.q,this.x.multiply(c.toBigInteger().modInverse(this.q)).mod(this.q))},St.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},St.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},St.prototype.equals=function(c){return c==this||(this.isInfinity()?c.isInfinity():c.isInfinity()?this.isInfinity():!!c.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(c.z)).mod(this.curve.q).equals(Z.ZERO)&&c.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(c.z)).mod(this.curve.q).equals(Z.ZERO))},St.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(Z.ZERO)&&!this.y.toBigInteger().equals(Z.ZERO)},St.prototype.negate=function(){return new St(this.curve,this.x,this.y.negate(),this.z)},St.prototype.add=function(c){if(this.isInfinity())return c;if(c.isInfinity())return this;var u=c.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(c.z)).mod(this.curve.q),f=c.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(c.z)).mod(this.curve.q);if(Z.ZERO.equals(f))return Z.ZERO.equals(u)?this.twice():this.curve.getInfinity();var p=new Z("3"),w=this.x.toBigInteger(),N=this.y.toBigInteger(),U=(c.x.toBigInteger(),c.y.toBigInteger(),f.square()),B=U.multiply(f),G=w.multiply(U),J=u.square().multiply(this.z),W=J.subtract(G.shiftLeft(1)).multiply(c.z).subtract(B).multiply(f).mod(this.curve.q),z=G.multiply(p).multiply(u).subtract(N.multiply(B)).subtract(J.multiply(u)).multiply(c.z).add(u.multiply(B)).mod(this.curve.q),X=B.multiply(this.z).multiply(c.z).mod(this.curve.q);return new St(this.curve,this.curve.fromBigInteger(W),this.curve.fromBigInteger(z),X)},St.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var c=new Z("3"),u=this.x.toBigInteger(),f=this.y.toBigInteger(),p=f.multiply(this.z),w=p.multiply(f).mod(this.curve.q),N=this.curve.a.toBigInteger(),U=u.square().multiply(c);Z.ZERO.equals(N)||(U=U.add(this.z.square().multiply(N)));var B=(U=U.mod(this.curve.q)).square().subtract(u.shiftLeft(3).multiply(w)).shiftLeft(1).multiply(p).mod(this.curve.q),G=U.multiply(c).multiply(u).subtract(w.shiftLeft(1)).shiftLeft(2).multiply(w).subtract(U.square().multiply(U)).mod(this.curve.q),J=p.square().multiply(p).shiftLeft(3).mod(this.curve.q);return new St(this.curve,this.curve.fromBigInteger(B),this.curve.fromBigInteger(G),J)},St.prototype.multiply=function(c){if(this.isInfinity())return this;if(0==c.signum())return this.curve.getInfinity();var u,f=c,p=f.multiply(new Z("3")),w=this.negate(),N=this;for(u=p.bitLength()-2;u>0;--u){N=N.twice();var U=p.testBit(u);U!=f.testBit(u)&&(N=N.add(U?this:w))}return N},St.prototype.multiplyTwo=function(c,u,f){var p;p=c.bitLength()>f.bitLength()?c.bitLength()-1:f.bitLength()-1;for(var w=this.curve.getInfinity(),N=this.add(u);p>=0;)w=w.twice(),c.testBit(p)?w=f.testBit(p)?w.add(N):w.add(this):f.testBit(p)&&(w=w.add(u)),--p;return w},Li.prototype.getQ=function(){return this.q},Li.prototype.getA=function(){return this.a},Li.prototype.getB=function(){return this.b},Li.prototype.equals=function(c){return c==this||this.q.equals(c.q)&&this.a.equals(c.a)&&this.b.equals(c.b)},Li.prototype.getInfinity=function(){return this.infinity},Li.prototype.fromBigInteger=function(c){return new Wn(this.q,c)},Li.prototype.decodePointHex=function(c){switch(parseInt(c.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:default:return null;case 4:case 6:case 7:var u=(c.length-2)/2,f=c.substr(2,u),p=c.substr(u+2,u);return new St(this,this.fromBigInteger(new Z(f,16)),this.fromBigInteger(new Z(p,16)))}},Wn.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},St.prototype.getEncoded=function(l){var c=function(N,U){var B=N.toByteArrayUnsigned();if(U<B.length)B=B.slice(B.length-U);else for(;U>B.length;)B.unshift(0);return B},u=this.getX().toBigInteger(),f=this.getY().toBigInteger(),p=c(u,32);return l?f.isEven()?p.unshift(2):p.unshift(3):(p.unshift(4),p=p.concat(c(f,32))),p},St.decodeFrom=function(l,c){var u=c.length-1,f=c.slice(1,1+u/2),p=c.slice(1+u/2,1+u);f.unshift(0),p.unshift(0);var w=new Z(f),N=new Z(p);return new St(l,l.fromBigInteger(w),l.fromBigInteger(N))},St.decodeFromHex=function(l,c){c.substr(0,2);var u=c.length-2,f=c.substr(2,u/2),p=c.substr(2+u/2,u/2),w=new Z(f,16),N=new Z(p,16);return new St(l,l.fromBigInteger(w),l.fromBigInteger(N))},St.prototype.add2D=function(l){if(this.isInfinity())return l;if(l.isInfinity())return this;if(this.x.equals(l.x))return this.y.equals(l.y)?this.twice():this.curve.getInfinity();var c=l.x.subtract(this.x),u=l.y.subtract(this.y).divide(c),f=u.square().subtract(this.x).subtract(l.x),p=u.multiply(this.x.subtract(f)).subtract(this.y);return new St(this.curve,f,p)},St.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var l=this.curve.fromBigInteger(Z.valueOf(2)),c=this.curve.fromBigInteger(Z.valueOf(3)),u=this.x.square().multiply(c).add(this.curve.a).divide(this.y.multiply(l)),f=u.square().subtract(this.x.multiply(l)),p=u.multiply(this.x.subtract(f)).subtract(this.y);return new St(this.curve,f,p)},St.prototype.multiply2D=function(l){if(this.isInfinity())return this;if(0==l.signum())return this.curve.getInfinity();var c,u=l,f=u.multiply(new Z("3")),p=this.negate(),w=this;for(c=f.bitLength()-2;c>0;--c){w=w.twice();var N=f.testBit(c);N!=u.testBit(c)&&(w=w.add2D(N?this:p))}return w},St.prototype.isOnCurve=function(){var l=this.getX().toBigInteger(),c=this.getY().toBigInteger(),u=this.curve.getA().toBigInteger(),f=this.curve.getB().toBigInteger(),p=this.curve.getQ(),w=c.multiply(c).mod(p),N=l.multiply(l).multiply(l).add(u.multiply(l)).add(f).mod(p);return w.equals(N)},St.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},St.prototype.validate=function(){var l=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var c=this.getX().toBigInteger(),u=this.getY().toBigInteger();if(c.compareTo(Z.ONE)<0||c.compareTo(l.subtract(Z.ONE))>0)throw new Error("x coordinate out of bounds");if(u.compareTo(Z.ONE)<0||u.compareTo(l.subtract(Z.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(l).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var Jl=function(){var l=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),c=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),u={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function f(N,U,B){return U?u[U]:String.fromCharCode(parseInt(B,16))}var p=new String(""),w=Object.hasOwnProperty;return function(N,U){var B,G,J=N.match(l),W=J[0],z=!1;"{"===W?B={}:"["===W?B=[]:(B=[],z=!0);for(var X=[B],oe=1-z,ae=J.length;oe<ae;++oe){var ce;switch((W=J[oe]).charCodeAt(0)){default:(ce=X[0])[G||ce.length]=+W,G=void 0;break;case 34:if(-1!==(W=W.substring(1,W.length-1)).indexOf("\\")&&(W=W.replace(c,f)),ce=X[0],!G){if(!(ce instanceof Array)){G=W||p;break}G=ce.length}ce[G]=W,G=void 0;break;case 91:X.unshift((ce=X[0])[G||ce.length]=[]),G=void 0;break;case 93:case 125:X.shift();break;case 102:(ce=X[0])[G||ce.length]=!1,G=void 0;break;case 110:(ce=X[0])[G||ce.length]=null,G=void 0;break;case 116:(ce=X[0])[G||ce.length]=!0,G=void 0;break;case 123:X.unshift((ce=X[0])[G||ce.length]={}),G=void 0}}if(z){if(1!==X.length)throw new Error;B=B[0]}else if(X.length)throw new Error;return U&&(B=function we(me,xe){var Ae=me[xe];if(Ae&&"object"===(void 0===Ae?"undefined":y(Ae))){var Re=null;for(var Be in Ae)if(w.call(Ae,Be)&&Ae!==me){var Ot=we(Ae,Be);void 0!==Ot?Ae[Be]=Ot:(Re||(Re=[]),Re.push(Be))}if(Re)for(var wt=Re.length;--wt>=0;)delete Ae[Re[wt]]}return U.call(me,xe,Ae)}({"":B},"")),B}}();void 0!==$&&$||(T.KJUR=$={}),void 0!==$.asn1&&$.asn1||($.asn1={}),$.asn1.ASN1Util=new function(){this.integerToByteHex=function(l){var c=l.toString(16);return c.length%2==1&&(c="0"+c),c},this.bigIntToMinTwosComplementsHex=function(l){var c=l.toString(16);if("-"!=c.substr(0,1))c.length%2==1?c="0"+c:c.match(/^[0-7]/)||(c="00"+c);else{var u=c.substr(1).length;u%2==1?u+=1:c.match(/^[0-7]/)||(u+=2);for(var f="",p=0;p<u;p++)f+="f";c=new Z(f,16).xor(l).add(Z.ONE).toString(16).replace(/^-/,"")}return c},this.getPEMStringFromHex=function(l,c){return be(l,c)},this.newObject=function(l){var c=$.asn1,u=c.DERBoolean,f=c.DERInteger,p=c.DERBitString,w=c.DEROctetString,N=c.DERNull,U=c.DERObjectIdentifier,B=c.DEREnumerated,G=c.DERUTF8String,J=c.DERNumericString,W=c.DERPrintableString,z=c.DERTeletexString,X=c.DERIA5String,oe=c.DERUTCTime,ae=c.DERGeneralizedTime,ce=c.DERSequence,we=c.DERSet,me=c.DERTaggedObject,xe=c.ASN1Util.newObject,Ae=Object.keys(l);if(1!=Ae.length)throw"key of param shall be only one.";var Re=Ae[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+Re+":"))throw"undefined key: "+Re;if("bool"==Re)return new u(l[Re]);if("int"==Re)return new f(l[Re]);if("bitstr"==Re)return new p(l[Re]);if("octstr"==Re)return new w(l[Re]);if("null"==Re)return new N(l[Re]);if("oid"==Re)return new U(l[Re]);if("enum"==Re)return new B(l[Re]);if("utf8str"==Re)return new G(l[Re]);if("numstr"==Re)return new J(l[Re]);if("prnstr"==Re)return new W(l[Re]);if("telstr"==Re)return new z(l[Re]);if("ia5str"==Re)return new X(l[Re]);if("utctime"==Re)return new oe(l[Re]);if("gentime"==Re)return new ae(l[Re]);if("seq"==Re){for(var Be=l[Re],Ot=[],wt=0;wt<Be.length;wt++){var Vt=xe(Be[wt]);Ot.push(Vt)}return new ce({array:Ot})}if("set"==Re){for(Be=l[Re],Ot=[],wt=0;wt<Be.length;wt++)Vt=xe(Be[wt]),Ot.push(Vt);return new we({array:Ot})}if("tag"==Re){var Ue=l[Re];if("[object Array]"===Object.prototype.toString.call(Ue)&&3==Ue.length){var it=xe(Ue[2]);return new me({tag:Ue[0],explicit:Ue[1],obj:it})}var Wt={};if(void 0!==Ue.explicit&&(Wt.explicit=Ue.explicit),void 0!==Ue.tag&&(Wt.tag=Ue.tag),void 0===Ue.obj)throw"obj shall be specified for 'tag'.";return Wt.obj=xe(Ue.obj),new me(Wt)}},this.jsonToASN1HEX=function(l){return this.newObject(l).getEncodedHex()}},$.asn1.ASN1Util.oidHexToInt=function(l){for(var c="",u=parseInt(l.substr(0,2),16),f=(c=Math.floor(u/40)+"."+u%40,""),p=2;p<l.length;p+=2){var w=("00000000"+parseInt(l.substr(p,2),16).toString(2)).slice(-8);f+=w.substr(1,7),"0"==w.substr(0,1)&&(c=c+"."+new Z(f,2).toString(10),f="")}return c},$.asn1.ASN1Util.oidIntToHex=function(l){var c=function(B){var G=B.toString(16);return 1==G.length&&(G="0"+G),G},u=function(B){var G="",J=new Z(B,10).toString(2),W=7-J.length%7;7==W&&(W=0);for(var z="",X=0;X<W;X++)z+="0";for(J=z+J,X=0;X<J.length-1;X+=7){var oe=J.substr(X,7);X!=J.length-7&&(oe="1"+oe),G+=c(parseInt(oe,2))}return G};if(!l.match(/^[0-9.]+$/))throw"malformed oid string: "+l;var f="",p=l.split("."),w=40*parseInt(p[0])+parseInt(p[1]);f+=c(w),p.splice(0,2);for(var N=0;N<p.length;N++)f+=u(p[N]);return f},$.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n=0,v="+this.hV;var l=this.hV.length/2,c=l.toString(16);if(c.length%2==1&&(c="0"+c),l<128)return c;var u=c.length/2;if(u>15)throw"ASN.1 length too long to represent by 8x: n = "+l.toString(16);return(128+u).toString(16)+c},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},$.asn1.DERAbstractString=function(l){$.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(c){this.hTLV=null,this.isModified=!0,this.s=c,this.hV=ts(this.s).toLowerCase()},this.setStringHex=function(c){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=c},this.getFreshValueHex=function(){return this.hV},void 0!==l&&("string"==typeof l?this.setString(l):void 0!==l.str?this.setString(l.str):void 0!==l.hex&&this.setStringHex(l.hex))},g.lang.extend($.asn1.DERAbstractString,$.asn1.ASN1Object),$.asn1.DERAbstractTime=function(l){$.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(c){return utc=c.getTime()+6e4*c.getTimezoneOffset(),new Date(utc)},this.formatDate=function(c,u,f){var p=this.zeroPadding,w=this.localDateToUTC(c),N=String(w.getFullYear());"utc"==u&&(N=N.substr(2,2));var U=N+p(String(w.getMonth()+1),2)+p(String(w.getDate()),2)+p(String(w.getHours()),2)+p(String(w.getMinutes()),2)+p(String(w.getSeconds()),2);if(!0===f){var B=w.getMilliseconds();if(0!=B){var G=p(String(B),3);U=U+"."+(G=G.replace(/[0]+$/,""))}}return U+"Z"},this.zeroPadding=function(c,u){return c.length>=u?c:new Array(u-c.length+1).join("0")+c},this.getString=function(){return this.s},this.setString=function(c){this.hTLV=null,this.isModified=!0,this.s=c,this.hV=pi(c)},this.setByDateValue=function(c,u,f,p,w,N){var U=new Date(Date.UTC(c,u-1,f,p,w,N,0));this.setByDate(U)},this.getFreshValueHex=function(){return this.hV}},g.lang.extend($.asn1.DERAbstractTime,$.asn1.ASN1Object),$.asn1.DERAbstractStructured=function(l){$.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(c){this.hTLV=null,this.isModified=!0,this.asn1Array=c},this.appendASN1Object=function(c){this.hTLV=null,this.isModified=!0,this.asn1Array.push(c)},this.asn1Array=new Array,void 0!==l&&void 0!==l.array&&(this.asn1Array=l.array)},g.lang.extend($.asn1.DERAbstractStructured,$.asn1.ASN1Object),$.asn1.DERBoolean=function(){$.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},g.lang.extend($.asn1.DERBoolean,$.asn1.ASN1Object),$.asn1.DERInteger=function(l){$.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(c){this.hTLV=null,this.isModified=!0,this.hV=$.asn1.ASN1Util.bigIntToMinTwosComplementsHex(c)},this.setByInteger=function(c){var u=new Z(String(c),10);this.setByBigInteger(u)},this.setValueHex=function(c){this.hV=c},this.getFreshValueHex=function(){return this.hV},void 0!==l&&(void 0!==l.bigint?this.setByBigInteger(l.bigint):void 0!==l.int?this.setByInteger(l.int):"number"==typeof l?this.setByInteger(l):void 0!==l.hex&&this.setValueHex(l.hex))},g.lang.extend($.asn1.DERInteger,$.asn1.ASN1Object),$.asn1.DERBitString=function(l){if(void 0!==l&&void 0!==l.obj){var c=$.asn1.ASN1Util.newObject(l.obj);l.hex="00"+c.getEncodedHex()}$.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(u){this.hTLV=null,this.isModified=!0,this.hV=u},this.setUnusedBitsAndHexValue=function(u,f){if(u<0||7<u)throw"unused bits shall be from 0 to 7: u = "+u;var p="0"+u;this.hTLV=null,this.isModified=!0,this.hV=p+f},this.setByBinaryString=function(u){var f=8-(u=u.replace(/0+$/,"")).length%8;8==f&&(f=0);for(var p=0;p<=f;p++)u+="0";var w="";for(p=0;p<u.length-1;p+=8){var N=u.substr(p,8),U=parseInt(N,2).toString(16);1==U.length&&(U="0"+U),w+=U}this.hTLV=null,this.isModified=!0,this.hV="0"+f+w},this.setByBooleanArray=function(u){for(var f="",p=0;p<u.length;p++)f+=1==u[p]?"1":"0";this.setByBinaryString(f)},this.newFalseArray=function(u){for(var f=new Array(u),p=0;p<u;p++)f[p]=!1;return f},this.getFreshValueHex=function(){return this.hV},void 0!==l&&("string"==typeof l&&l.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(l):void 0!==l.hex?this.setHexValueIncludingUnusedBits(l.hex):void 0!==l.bin?this.setByBinaryString(l.bin):void 0!==l.array&&this.setByBooleanArray(l.array))},g.lang.extend($.asn1.DERBitString,$.asn1.ASN1Object),$.asn1.DEROctetString=function(l){if(void 0!==l&&void 0!==l.obj){var c=$.asn1.ASN1Util.newObject(l.obj);l.hex=c.getEncodedHex()}$.asn1.DEROctetString.superclass.constructor.call(this,l),this.hT="04"},g.lang.extend($.asn1.DEROctetString,$.asn1.DERAbstractString),$.asn1.DERNull=function(){$.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},g.lang.extend($.asn1.DERNull,$.asn1.ASN1Object),$.asn1.DERObjectIdentifier=function(l){var c=function(p){var w=p.toString(16);return 1==w.length&&(w="0"+w),w},u=function(p){var w="",N=new Z(p,10).toString(2),U=7-N.length%7;7==U&&(U=0);for(var B="",G=0;G<U;G++)B+="0";for(N=B+N,G=0;G<N.length-1;G+=7){var J=N.substr(G,7);G!=N.length-7&&(J="1"+J),w+=c(parseInt(J,2))}return w};$.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(f){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=f},this.setValueOidString=function(f){if(!f.match(/^[0-9.]+$/))throw"malformed oid string: "+f;var p="",w=f.split("."),N=40*parseInt(w[0])+parseInt(w[1]);p+=c(N),w.splice(0,2);for(var U=0;U<w.length;U++)p+=u(w[U]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=p},this.setValueName=function(f){var p=$.asn1.x509.OID.name2oid(f);if(""===p)throw"DERObjectIdentifier oidName undefined: "+f;this.setValueOidString(p)},this.getFreshValueHex=function(){return this.hV},void 0!==l&&("string"==typeof l?l.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(l):this.setValueName(l):void 0!==l.oid?this.setValueOidString(l.oid):void 0!==l.hex?this.setValueHex(l.hex):void 0!==l.name&&this.setValueName(l.name))},g.lang.extend($.asn1.DERObjectIdentifier,$.asn1.ASN1Object),$.asn1.DEREnumerated=function(l){$.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(c){this.hTLV=null,this.isModified=!0,this.hV=$.asn1.ASN1Util.bigIntToMinTwosComplementsHex(c)},this.setByInteger=function(c){var u=new Z(String(c),10);this.setByBigInteger(u)},this.setValueHex=function(c){this.hV=c},this.getFreshValueHex=function(){return this.hV},void 0!==l&&(void 0!==l.int?this.setByInteger(l.int):"number"==typeof l?this.setByInteger(l):void 0!==l.hex&&this.setValueHex(l.hex))},g.lang.extend($.asn1.DEREnumerated,$.asn1.ASN1Object),$.asn1.DERUTF8String=function(l){$.asn1.DERUTF8String.superclass.constructor.call(this,l),this.hT="0c"},g.lang.extend($.asn1.DERUTF8String,$.asn1.DERAbstractString),$.asn1.DERNumericString=function(l){$.asn1.DERNumericString.superclass.constructor.call(this,l),this.hT="12"},g.lang.extend($.asn1.DERNumericString,$.asn1.DERAbstractString),$.asn1.DERPrintableString=function(l){$.asn1.DERPrintableString.superclass.constructor.call(this,l),this.hT="13"},g.lang.extend($.asn1.DERPrintableString,$.asn1.DERAbstractString),$.asn1.DERTeletexString=function(l){$.asn1.DERTeletexString.superclass.constructor.call(this,l),this.hT="14"},g.lang.extend($.asn1.DERTeletexString,$.asn1.DERAbstractString),$.asn1.DERIA5String=function(l){$.asn1.DERIA5String.superclass.constructor.call(this,l),this.hT="16"},g.lang.extend($.asn1.DERIA5String,$.asn1.DERAbstractString),$.asn1.DERUTCTime=function(l){$.asn1.DERUTCTime.superclass.constructor.call(this,l),this.hT="17",this.setByDate=function(c){this.hTLV=null,this.isModified=!0,this.date=c,this.s=this.formatDate(this.date,"utc"),this.hV=pi(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=pi(this.s)),this.hV},void 0!==l&&(void 0!==l.str?this.setString(l.str):"string"==typeof l&&l.match(/^[0-9]{12}Z$/)?this.setString(l):void 0!==l.hex?this.setStringHex(l.hex):void 0!==l.date&&this.setByDate(l.date))},g.lang.extend($.asn1.DERUTCTime,$.asn1.DERAbstractTime),$.asn1.DERGeneralizedTime=function(l){$.asn1.DERGeneralizedTime.superclass.constructor.call(this,l),this.hT="18",this.withMillis=!1,this.setByDate=function(c){this.hTLV=null,this.isModified=!0,this.date=c,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=pi(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=pi(this.s)),this.hV},void 0!==l&&(void 0!==l.str?this.setString(l.str):"string"==typeof l&&l.match(/^[0-9]{14}Z$/)?this.setString(l):void 0!==l.hex?this.setStringHex(l.hex):void 0!==l.date&&this.setByDate(l.date),!0===l.millis&&(this.withMillis=!0))},g.lang.extend($.asn1.DERGeneralizedTime,$.asn1.DERAbstractTime),$.asn1.DERSequence=function(l){$.asn1.DERSequence.superclass.constructor.call(this,l),this.hT="30",this.getFreshValueHex=function(){for(var c="",u=0;u<this.asn1Array.length;u++)c+=this.asn1Array[u].getEncodedHex();return this.hV=c,this.hV}},g.lang.extend($.asn1.DERSequence,$.asn1.DERAbstractStructured),$.asn1.DERSet=function(l){$.asn1.DERSet.superclass.constructor.call(this,l),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var c=new Array,u=0;u<this.asn1Array.length;u++)c.push(this.asn1Array[u].getEncodedHex());return 1==this.sortFlag&&c.sort(),this.hV=c.join(""),this.hV},void 0!==l&&void 0!==l.sortflag&&0==l.sortflag&&(this.sortFlag=!1)},g.lang.extend($.asn1.DERSet,$.asn1.DERAbstractStructured),$.asn1.DERTaggedObject=function(l){$.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(c,u,f){this.hT=u,this.isExplicit=c,this.asn1Object=f,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=f.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,u),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==l&&(void 0!==l.tag&&(this.hT=l.tag),void 0!==l.explicit&&(this.isExplicit=l.explicit),void 0!==l.obj&&(this.asn1Object=l.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},g.lang.extend($.asn1.DERTaggedObject,$.asn1.ASN1Object);var $,es,Hr,Ye=new function(){};function Yl(l){for(var c=new Array,u=0;u<l.length;u++)c[u]=l.charCodeAt(u);return c}function Ql(l){for(var c="",u=0;u<l.length;u++)c+=String.fromCharCode(l[u]);return c}function Js(l){for(var c="",u=0;u<l.length;u++){var f=l[u].toString(16);1==f.length&&(f="0"+f),c+=f}return c}function pi(l){return Js(Yl(l))}function Ys(l){return(l=(l=l.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Nt(l){return l.length%4==2?l+="==":l.length%4==3&&(l+="="),(l=l.replace(/-/g,"+")).replace(/_/g,"/")}function sn(l){return l.length%2==1&&(l="0"+l),Ys(Se(l))}function Xe(l){return ze(Nt(l))}function ts(l){return Xs(pc(l))}function Pn(l){return decodeURIComponent(hc(l))}function ht(l){for(var c="",u=0;u<l.length-1;u+=2)c+=String.fromCharCode(parseInt(l.substr(u,2),16));return c}function We(l){for(var c="",u=0;u<l.length;u++)c+=("0"+l.charCodeAt(u).toString(16)).slice(-2);return c}function Qs(l){return Se(l)}function Zs(l){return Qs(l).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function Tf(l){return ze(l.replace(/[^0-9A-Za-z\/+=]*/g,""))}function be(l,c){return"-----BEGIN "+c+"-----\r\n"+Zs(l)+"\r\n-----END "+c+"-----\r\n"}function Ur(l,c){if(-1==l.indexOf("-----BEGIN "))throw"can't find PEM header: "+c;return Tf(l=void 0!==c?(l=l.replace("-----BEGIN "+c+"-----","")).replace("-----END "+c+"-----",""):(l=l.replace(/-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----/,""))}function rt(l){var c,u,f,p,w,N,U,B,G,J,W;if(W=l.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return B=W[1],c=parseInt(B),2===B.length&&(50<=c&&c<100?c=1900+c:0<=c&&c<50&&(c=2e3+c)),u=parseInt(W[2])-1,f=parseInt(W[3]),p=parseInt(W[4]),w=parseInt(W[5]),N=parseInt(W[6]),U=0,""!==(G=W[7])&&(J=(G.substr(1)+"00").substr(0,3),U=parseInt(J)),Date.UTC(c,u,f,p,w,N,U);throw"unsupported zulu format: "+l}function xt(l){return~~(rt(l)/1e3)}function Xs(l){return l.replace(/%/g,"")}function hc(l){return l.replace(/(..)/g,"%$1")}function Zl(l){var c="malformed IPv6 address";if(!l.match(/^[0-9A-Fa-f:]+$/))throw c;var u=(l=l.toLowerCase()).split(":").length-1;if(u<2)throw c;var f=":".repeat(7-u+2),p=(l=l.replace("::",f)).split(":");if(8!=p.length)throw c;for(var w=0;w<8;w++)p[w]=("0000"+p[w]).slice(-4);return p.join("")}function ns(l){if(!l.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var c=(l=l.toLowerCase()).match(/.{1,4}/g),u=0;u<8;u++)c[u]=c[u].replace(/^0+/,""),""==c[u]&&(c[u]="0");var f=(l=":"+c.join(":")+":").match(/:(0:){2,}/g);if(null===f)return l.slice(1,-1);var p="";for(u=0;u<f.length;u++)f[u].length>p.length&&(p=f[u]);return(l=l.replace(p,"::")).slice(1,-1)}function nr(l){var c="malformed hex value";if(!l.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw c;if(8!=l.length)return 32==l.length?ns(l):l;try{return parseInt(l.substr(0,2),16)+"."+parseInt(l.substr(2,2),16)+"."+parseInt(l.substr(4,2),16)+"."+parseInt(l.substr(6,2),16)}catch{throw c}}function pc(l){for(var c=encodeURIComponent(l),u="",f=0;f<c.length;f++)"%"==c[f]?(u+=c.substr(f,3),f+=2):u=u+"%"+pi(c[f]);return u}function gc(l){return l.length%2==1?"0"+l:l.substr(0,1)>"7"?"00"+l:l}Ye.getLblen=function(l,c){if("8"!=l.substr(c+2,1))return 1;var u=parseInt(l.substr(c+3,1));return 0==u?-1:0<u&&u<10?u+1:-2},Ye.getL=function(l,c){var u=Ye.getLblen(l,c);return u<1?"":l.substr(c+2,2*u)},Ye.getVblen=function(l,c){var u;return""==(u=Ye.getL(l,c))?-1:("8"===u.substr(0,1)?new Z(u.substr(2),16):new Z(u,16)).intValue()},Ye.getVidx=function(l,c){var u=Ye.getLblen(l,c);return u<0?u:c+2*(u+1)},Ye.getV=function(l,c){var u=Ye.getVidx(l,c),f=Ye.getVblen(l,c);return l.substr(u,2*f)},Ye.getTLV=function(l,c){return l.substr(c,2)+Ye.getL(l,c)+Ye.getV(l,c)},Ye.getNextSiblingIdx=function(l,c){return Ye.getVidx(l,c)+2*Ye.getVblen(l,c)},Ye.getChildIdx=function(l,c){var u=Ye,f=new Array,p=u.getVidx(l,c);"03"==l.substr(c,2)?f.push(p+2):f.push(p);for(var w=u.getVblen(l,c),N=p,U=0;;){var B=u.getNextSiblingIdx(l,N);if(null==B||B-p>=2*w||U>=200)break;f.push(B),N=B,U++}return f},Ye.getNthChildIdx=function(l,c,u){return Ye.getChildIdx(l,c)[u]},Ye.getIdxbyList=function(l,c,u,f){var p,w,N=Ye;if(0==u.length){if(void 0!==f&&l.substr(c,2)!==f)throw"checking tag doesn't match: "+l.substr(c,2)+"!="+f;return c}return p=u.shift(),w=N.getChildIdx(l,c),N.getIdxbyList(l,w[p],u,f)},Ye.getTLVbyList=function(l,c,u,f){var p=Ye,w=p.getIdxbyList(l,c,u);if(void 0===w)throw"can't find nthList object";if(void 0!==f&&l.substr(w,2)!=f)throw"checking tag doesn't match: "+l.substr(w,2)+"!="+f;return p.getTLV(l,w)},Ye.getVbyList=function(l,c,u,f,p){var w,N,U=Ye;if(void 0===(w=U.getIdxbyList(l,c,u,f)))throw"can't find nthList object";return N=U.getV(l,w),!0===p&&(N=N.substr(2)),N},Ye.hextooidstr=function(l){var c=function(z,X){return z.length>=X?z:new Array(X-z.length+1).join("0")+z},u=[],f=l.substr(0,2),p=parseInt(f,16);u[0]=new String(Math.floor(p/40)),u[1]=new String(p%40);for(var w=l.substr(2),N=[],U=0;U<w.length/2;U++)N.push(parseInt(w.substr(2*U,2),16));var B=[],G="";for(U=0;U<N.length;U++)128&N[U]?G+=c((127&N[U]).toString(2),7):(G+=c((127&N[U]).toString(2),7),B.push(new String(parseInt(G,2))),G="");var J=u.join(".");return B.length>0&&(J=J+"."+B.join(".")),J},Ye.dump=function(l,c,u,f){var p=Ye,w=p.getV,N=p.dump,U=p.getChildIdx,B=l;l instanceof $.asn1.ASN1Object&&(B=l.getEncodedHex());var G=function(wt,Vt){return wt.length<=2*Vt?wt:wt.substr(0,Vt)+"..(total "+wt.length/2+"bytes).."+wt.substr(wt.length-Vt,Vt)};void 0===c&&(c={ommit_long_octet:32}),void 0===u&&(u=0),void 0===f&&(f="");var J=c.ommit_long_octet;if("01"==B.substr(u,2))return"00"==(W=w(B,u))?f+"BOOLEAN FALSE\n":f+"BOOLEAN TRUE\n";if("02"==B.substr(u,2))return f+"INTEGER "+G(W=w(B,u),J)+"\n";if("03"==B.substr(u,2))return f+"BITSTRING "+G(W=w(B,u),J)+"\n";if("04"==B.substr(u,2)){var W=w(B,u);return p.isASN1HEX(W)?(z=f+"OCTETSTRING, encapsulates\n")+N(W,c,0,f+"  "):f+"OCTETSTRING "+G(W,J)+"\n"}if("05"==B.substr(u,2))return f+"NULL\n";if("06"==B.substr(u,2)){var X=w(B,u),oe=$.asn1.ASN1Util.oidHexToInt(X),ae=$.asn1.x509.OID.oid2name(oe),ce=oe.replace(/\./g," ");return""!=ae?f+"ObjectIdentifier "+ae+" ("+ce+")\n":f+"ObjectIdentifier ("+ce+")\n"}if("0c"==B.substr(u,2))return f+"UTF8String '"+Pn(w(B,u))+"'\n";if("13"==B.substr(u,2))return f+"PrintableString '"+Pn(w(B,u))+"'\n";if("14"==B.substr(u,2))return f+"TeletexString '"+Pn(w(B,u))+"'\n";if("16"==B.substr(u,2))return f+"IA5String '"+Pn(w(B,u))+"'\n";if("17"==B.substr(u,2))return f+"UTCTime "+Pn(w(B,u))+"\n";if("18"==B.substr(u,2))return f+"GeneralizedTime "+Pn(w(B,u))+"\n";if("30"==B.substr(u,2)){if("3000"==B.substr(u,4))return f+"SEQUENCE {}\n";z=f+"SEQUENCE\n";var we=c;if((2==(Ae=U(B,u)).length||3==Ae.length)&&"06"==B.substr(Ae[0],2)&&"04"==B.substr(Ae[Ae.length-1],2)){ae=p.oidname(w(B,Ae[0]));var me=JSON.parse(JSON.stringify(c));me.x509ExtName=ae,we=me}for(var xe=0;xe<Ae.length;xe++)z+=N(B,we,Ae[xe],f+"  ");return z}if("31"==B.substr(u,2)){z=f+"SET\n";var Ae=U(B,u);for(xe=0;xe<Ae.length;xe++)z+=N(B,c,Ae[xe],f+"  ");return z}var Re=parseInt(B.substr(u,2),16);if(0!=(128&Re)){var Be=31&Re;if(0!=(32&Re)){var z=f+"["+Be+"]\n";for(Ae=U(B,u),xe=0;xe<Ae.length;xe++)z+=N(B,c,Ae[xe],f+"  ");return z}return"68747470"==(W=w(B,u)).substr(0,8)&&(W=Pn(W)),"subjectAltName"===c.x509ExtName&&2==Be&&(W=Pn(W)),f+"["+Be+"] "+W+"\n"}return f+"UNKNOWN("+B.substr(u,2)+") "+w(B,u)+"\n"},Ye.isASN1HEX=function(l){var c=Ye;if(l.length%2==1)return!1;var u=c.getVblen(l,0),f=l.substr(0,2),p=c.getL(l,0);return l.length-f.length-p.length==2*u},Ye.oidname=function(l){var c=$.asn1;$.lang.String.isHex(l)&&(l=c.ASN1Util.oidHexToInt(l));var u=c.x509.OID.oid2name(l);return""===u&&(u=l),u},void 0!==$&&$||(T.KJUR=$={}),void 0!==$.lang&&$.lang||($.lang={}),$.lang.String=function(){},"function"==typeof k?(T.utf8tob64u=es=function(c){return Ys(new k(c,"utf8").toString("base64"))},T.b64utoutf8=Hr=function(c){return new k(Nt(c),"base64").toString("utf8")}):(T.utf8tob64u=es=function(c){return sn(Xs(pc(c)))},T.b64utoutf8=Hr=function(c){return decodeURIComponent(hc(Xe(c)))}),$.lang.String.isInteger=function(l){return!!l.match(/^[0-9]+$/)||!!l.match(/^-[0-9]+$/)},$.lang.String.isHex=function(l){return!(l.length%2!=0||!l.match(/^[0-9a-f]+$/)&&!l.match(/^[0-9A-F]+$/))},$.lang.String.isBase64=function(l){return!(!(l=l.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||l.length%4!=0)},$.lang.String.isBase64URL=function(l){return!l.match(/[+/=]/)&&(l=Nt(l),$.lang.String.isBase64(l))},$.lang.String.isIntegerArray=function(l){return!!(l=l.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},void 0!==$&&$||(T.KJUR=$={}),void 0!==$.crypto&&$.crypto||($.crypto={}),$.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:q.algo.MD5,sha1:q.algo.SHA1,sha224:q.algo.SHA224,sha256:q.algo.SHA256,sha384:q.algo.SHA384,sha512:q.algo.SHA512,ripemd160:q.algo.RIPEMD160},this.getDigestInfoHex=function(l,c){if(void 0===this.DIGESTINFOHEAD[c])throw"alg not supported in Util.DIGESTINFOHEAD: "+c;return this.DIGESTINFOHEAD[c]+l},this.getPaddedDigestInfoHex=function(l,c,u){var f=this.getDigestInfoHex(l,c),p=u/4;if(f.length+22>p)throw"key is too short for SigAlg: keylen="+u+","+c;for(var w="0001",N="00"+f,U="",B=p-w.length-N.length,G=0;G<B;G+=2)U+="ff";return w+U+N},this.hashString=function(l,c){return new $.crypto.MessageDigest({alg:c}).digestString(l)},this.hashHex=function(l,c){return new $.crypto.MessageDigest({alg:c}).digestHex(l)},this.sha1=function(l){return new $.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(l)},this.sha256=function(l){return new $.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(l)},this.sha256Hex=function(l){return new $.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(l)},this.sha512=function(l){return new $.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(l)},this.sha512Hex=function(l){return new $.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(l)}},$.crypto.Util.md5=function(l){return new $.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(l)},$.crypto.Util.ripemd160=function(l){return new $.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(l)},$.crypto.Util.SECURERANDOMGEN=new jr,$.crypto.Util.getRandomHexOfNbytes=function(l){var c=new Array(l);return $.crypto.Util.SECURERANDOMGEN.nextBytes(c),Js(c)},$.crypto.Util.getRandomBigIntegerOfNbytes=function(l){return new Z($.crypto.Util.getRandomHexOfNbytes(l),16)},$.crypto.Util.getRandomHexOfNbits=function(l){var c=l%8,u=new Array((l-c)/8+1);return $.crypto.Util.SECURERANDOMGEN.nextBytes(u),u[0]=(255<<c&255^255)&u[0],Js(u)},$.crypto.Util.getRandomBigIntegerOfNbits=function(l){return new Z($.crypto.Util.getRandomHexOfNbits(l),16)},$.crypto.Util.getRandomBigIntegerZeroToMax=function(l){for(var c=l.bitLength();;){var u=$.crypto.Util.getRandomBigIntegerOfNbits(c);if(-1!=l.compareTo(u))return u}},$.crypto.Util.getRandomBigIntegerMinToMax=function(l,c){var u=l.compareTo(c);if(1==u)throw"biMin is greater than biMax";if(0==u)return l;var f=c.subtract(l);return $.crypto.Util.getRandomBigIntegerZeroToMax(f).add(l)},$.crypto.MessageDigest=function(l){this.setAlgAndProvider=function(c,u){if(null!==(c=$.crypto.MessageDigest.getCanonicalAlgName(c))&&void 0===u&&(u=$.crypto.Util.DEFAULTPROVIDER[c]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(c)&&"cryptojs"==u){try{this.md=$.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[c].create()}catch(f){throw"setAlgAndProvider hash alg set fail alg="+c+"/"+f}this.updateString=function(f){this.md.update(f)},this.updateHex=function(f){var p=q.enc.Hex.parse(f);this.md.update(p)},this.digest=function(){return this.md.finalize().toString(q.enc.Hex)},this.digestString=function(f){return this.updateString(f),this.digest()},this.digestHex=function(f){return this.updateHex(f),this.digest()}}if(-1!=":sha256:".indexOf(c)&&"sjcl"==u){try{this.md=new sjcl.hash.sha256}catch(f){throw"setAlgAndProvider hash alg set fail alg="+c+"/"+f}this.updateString=function(f){this.md.update(f)},this.updateHex=function(f){var p=sjcl.codec.hex.toBits(f);this.md.update(p)},this.digest=function(){var f=this.md.finalize();return sjcl.codec.hex.fromBits(f)},this.digestString=function(f){return this.updateString(f),this.digest()},this.digestHex=function(f){return this.updateHex(f),this.digest()}}},this.updateString=function(c){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(c){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(c){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(c){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==l&&void 0!==l.alg&&(this.algName=l.alg,void 0===l.prov&&(this.provName=$.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},$.crypto.MessageDigest.getCanonicalAlgName=function(l){return"string"==typeof l&&(l=(l=l.toLowerCase()).replace(/-/,"")),l},$.crypto.MessageDigest.getHashLength=function(l){var c=$.crypto.MessageDigest,u=c.getCanonicalAlgName(l);if(void 0===c.HASHLENGTH[u])throw"not supported algorithm: "+l;return c.HASHLENGTH[u]},$.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},$.crypto.Mac=function(l){this.setAlgAndProvider=function(c,u){if(null==(c=c.toLowerCase())&&(c="hmacsha1"),"hmac"!=(c=c.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+c;void 0===u&&(u=$.crypto.Util.DEFAULTPROVIDER[c]),this.algProv=c+"/"+u;var f=c.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(f)&&"cryptojs"==u){try{this.mac=q.algo.HMAC.create($.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[f],this.pass)}catch(w){throw"setAlgAndProvider hash alg set fail hashAlg="+f+"/"+w}this.updateString=function(w){this.mac.update(w)},this.updateHex=function(w){var N=q.enc.Hex.parse(w);this.mac.update(N)},this.doFinal=function(){return this.mac.finalize().toString(q.enc.Hex)},this.doFinalString=function(w){return this.updateString(w),this.doFinal()},this.doFinalHex=function(w){return this.updateHex(w),this.doFinal()}}},this.updateString=function(c){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(c){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(c){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(c){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(c){if("string"==typeof c){var u=c;return c.length%2!=1&&c.match(/^[0-9A-Fa-f]+$/)||(u=We(c)),void(this.pass=q.enc.Hex.parse(u))}if("object"!=(void 0===c?"undefined":y(c)))throw"KJUR.crypto.Mac unsupported password type: "+c;if(u=null,void 0!==c.hex){if(c.hex.length%2!=0||!c.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+c.hex;u=c.hex}if(void 0!==c.utf8&&(u=ts(c.utf8)),void 0!==c.rstr&&(u=We(c.rstr)),void 0!==c.b64&&(u=ze(c.b64)),void 0!==c.b64u&&(u=Xe(c.b64u)),null==u)throw"KJUR.crypto.Mac unsupported password type: "+c;this.pass=q.enc.Hex.parse(u)},void 0!==l&&(void 0!==l.pass&&this.setPassword(l.pass),void 0!==l.alg&&(this.algName=l.alg,void 0===l.prov&&(this.provName=$.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},$.crypto.Signature=function(l){var c=null;if(this._setAlgNames=function(){var u=this.algName.match(/^(.+)with(.+)$/);u&&(this.mdAlgName=u[1].toLowerCase(),this.pubkeyAlgName=u[2].toLowerCase())},this._zeroPaddingOfSignature=function(u,f){for(var p="",w=f/4-u.length,N=0;N<w;N++)p+="0";return p+u},this.setAlgAndProvider=function(u,f){if(this._setAlgNames(),"cryptojs/jsrsa"!=f)throw"provider not supported: "+f;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new $.crypto.MessageDigest({alg:this.mdAlgName})}catch(p){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+p}this.init=function(p,w){var N=null;try{N=void 0===w?Ln.getKey(p):Ln.getKey(p,w)}catch(U){throw"init failed:"+U}if(!0===N.isPrivate)this.prvKey=N,this.state="SIGN";else{if(!0!==N.isPublic)throw"init failed.:"+N;this.pubKey=N,this.state="VERIFY"}},this.updateString=function(p){this.md.updateString(p)},this.updateHex=function(p){this.md.updateHex(p)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0!==this.ecprvhex&&void 0!==this.eccurvename){var p=new $.crypto.ECDSA({curve:this.eccurvename});this.hSign=p.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof et&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof et&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof $.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof $.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(p){return this.updateString(p),this.sign()},this.signHex=function(p){return this.updateHex(p),this.sign()},this.verify=function(p){if(this.sHashHex=this.md.digest(),void 0!==this.ecpubhex&&void 0!==this.eccurvename)return new $.crypto.ECDSA({curve:this.eccurvename}).verifyHex(this.sHashHex,p,this.ecpubhex);if(this.pubKey instanceof et&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,p,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof et&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,p);if(void 0!==$.crypto.ECDSA&&this.pubKey instanceof $.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,p);if(void 0!==$.crypto.DSA&&this.pubKey instanceof $.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,p);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(u,f){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(u){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(u){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(u){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(u){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(u){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=l,void 0!==l&&(void 0!==l.alg&&(this.algName=l.alg,this.provName=void 0===l.prov?$.crypto.Util.DEFAULTPROVIDER[this.algName]:l.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==l.psssaltlen&&(this.pssSaltLen=l.psssaltlen),void 0!==l.prvkeypem)){if(void 0!==l.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{c=Ln.getKey(l.prvkeypem),this.init(c)}catch(u){throw"fatal error to load pem private key: "+u}}},$.crypto.Cipher=function(l){},$.crypto.Cipher.encrypt=function(l,c,u){if(c instanceof et&&c.isPublic){var f=$.crypto.Cipher.getAlgByKeyAndName(c,u);if("RSA"===f)return c.encrypt(l);if("RSAOAEP"===f)return c.encryptOAEP(l,"sha1");var p=f.match(/^RSAOAEP(\d+)$/);if(null!==p)return c.encryptOAEP(l,"sha"+p[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+u}throw"Cipher.encrypt: unsupported key or algorithm"},$.crypto.Cipher.decrypt=function(l,c,u){if(c instanceof et&&c.isPrivate){var f=$.crypto.Cipher.getAlgByKeyAndName(c,u);if("RSA"===f)return c.decrypt(l);if("RSAOAEP"===f)return c.decryptOAEP(l,"sha1");var p=f.match(/^RSAOAEP(\d+)$/);if(null!==p)return c.decryptOAEP(l,"sha"+p[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+u}throw"Cipher.decrypt: unsupported key or algorithm"},$.crypto.Cipher.getAlgByKeyAndName=function(l,c){if(l instanceof et){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(c))return c;if(null==c)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+c}throw"getAlgByKeyAndName: not supported algorithm name: "+c},$.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==$&&$||(T.KJUR=$={}),void 0!==$.crypto&&$.crypto||($.crypto={}),$.crypto.ECDSA=function(l){var c=new jr;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(u){return new Z(u.bitLength(),c).mod(u.subtract(Z.ONE)).add(Z.ONE)},this.setNamedCurve=function(u){this.ecparams=$.crypto.ECParameterDB.getByName(u),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=u},this.setPrivateKeyHex=function(u){this.isPrivate=!0,this.prvKeyHex=u},this.setPublicKeyHex=function(u){this.isPublic=!0,this.pubKeyHex=u},this.getPublicKeyXYHex=function(){var u=this.pubKeyHex;if("04"!==u.substr(0,2))throw"this method supports uncompressed format(04) only";var f=this.ecparams.keylen/4;if(u.length!==2+2*f)throw"malformed public key hex length";var p={};return p.x=u.substr(2,f),p.y=u.substr(2+f),p},this.getShortNISTPCurveName=function(){var u=this.curveName;return"secp256r1"===u||"NIST P-256"===u||"P-256"===u||"prime256v1"===u?"P-256":"secp384r1"===u||"NIST P-384"===u||"P-384"===u?"P-384":null},this.generateKeyPairHex=function(){var f=this.getBigRandom(this.ecparams.n),p=this.ecparams.G.multiply(f),w=p.getX().toBigInteger(),N=p.getY().toBigInteger(),U=this.ecparams.keylen/4,B=("0000000000"+f.toString(16)).slice(-U),G="04"+("0000000000"+w.toString(16)).slice(-U)+("0000000000"+N.toString(16)).slice(-U);return this.setPrivateKeyHex(B),this.setPublicKeyHex(G),{ecprvhex:B,ecpubhex:G}},this.signWithMessageHash=function(u){return this.signHex(u,this.prvKeyHex)},this.signHex=function(u,f){var p=new Z(f,16),w=this.ecparams.n,N=new Z(u,16);do{var U=this.getBigRandom(w),B=this.ecparams.G.multiply(U).getX().toBigInteger().mod(w)}while(B.compareTo(Z.ZERO)<=0);var G=U.modInverse(w).multiply(N.add(p.multiply(B))).mod(w);return $.crypto.ECDSA.biRSSigToASN1Sig(B,G)},this.sign=function(u,f){var p=f,w=this.ecparams.n,N=Z.fromByteArrayUnsigned(u);do{var U=this.getBigRandom(w),B=this.ecparams.G.multiply(U).getX().toBigInteger().mod(w)}while(B.compareTo(Z.ZERO)<=0);var G=U.modInverse(w).multiply(N.add(p.multiply(B))).mod(w);return this.serializeSig(B,G)},this.verifyWithMessageHash=function(u,f){return this.verifyHex(u,f,this.pubKeyHex)},this.verifyHex=function(u,f,p){var w,N,U,B=$.crypto.ECDSA.parseSigHex(f);w=B.r,N=B.s,U=St.decodeFromHex(this.ecparams.curve,p);var G=new Z(u,16);return this.verifyRaw(G,w,N,U)},this.verify=function(u,f,p){var w,N,U;if(Bitcoin.Util.isArray(f)){var B=this.parseSig(f);w=B.r,N=B.s}else{if("object"!==(void 0===f?"undefined":y(f))||!f.r||!f.s)throw"Invalid value for signature";w=f.r,N=f.s}if(p instanceof St)U=p;else{if(!Bitcoin.Util.isArray(p))throw"Invalid format for pubkey value, must be byte array or ECPointFp";U=St.decodeFrom(this.ecparams.curve,p)}var G=Z.fromByteArrayUnsigned(u);return this.verifyRaw(G,w,N,U)},this.verifyRaw=function(u,f,p,w){var N=this.ecparams.n,U=this.ecparams.G;if(f.compareTo(Z.ONE)<0||f.compareTo(N)>=0||p.compareTo(Z.ONE)<0||p.compareTo(N)>=0)return!1;var B=p.modInverse(N),G=u.multiply(B).mod(N),J=f.multiply(B).mod(N);return U.multiply(G).add(w.multiply(J)).getX().toBigInteger().mod(N).equals(f)},this.serializeSig=function(u,f){var p=u.toByteArraySigned(),w=f.toByteArraySigned(),N=[];return N.push(2),N.push(p.length),(N=N.concat(p)).push(2),N.push(w.length),(N=N.concat(w)).unshift(N.length),N.unshift(48),N},this.parseSig=function(u){var f;if(48!=u[0])throw new Error("Signature not a valid DERSequence");if(2!=u[f=2])throw new Error("First element in signature must be a DERInteger");var p=u.slice(f+2,f+2+u[f+1]);if(2!=u[f+=2+u[f+1]])throw new Error("Second element in signature must be a DERInteger");var w=u.slice(f+2,f+2+u[f+1]);return f+=2+u[f+1],{r:Z.fromByteArrayUnsigned(p),s:Z.fromByteArrayUnsigned(w)}},this.parseSigCompact=function(u){if(65!==u.length)throw"Signature has the wrong length";var f=u[0]-27;if(f<0||f>7)throw"Invalid signature type";var p=this.ecparams.n;return{r:Z.fromByteArrayUnsigned(u.slice(1,33)).mod(p),s:Z.fromByteArrayUnsigned(u.slice(33,65)).mod(p),i:f}},this.readPKCS5PrvKeyHex=function(u){var f,p,w,U=$.crypto.ECDSA.getName,B=Ye.getVbyList;if(!1===Ye.isASN1HEX(u))throw"not ASN.1 hex string";try{f=B(u,0,[2,0],"06"),p=B(u,0,[1],"04");try{w=B(u,0,[3,0],"03").substr(2)}catch{}}catch{throw"malformed PKCS#1/5 plain ECC private key"}if(this.curveName=U(f),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(w),this.setPrivateKeyHex(p),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(u){var f,p,w,U=$.crypto.ECDSA.getName,B=Ye.getVbyList;if(!1===Ye.isASN1HEX(u))throw"not ASN.1 hex string";try{B(u,0,[1,0],"06"),f=B(u,0,[1,1],"06"),p=B(u,0,[2,0,1],"04");try{w=B(u,0,[2,0,2,0],"03").substr(2)}catch{}}catch{throw"malformed PKCS#8 plain ECC private key"}if(this.curveName=U(f),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(w),this.setPrivateKeyHex(p),this.isPublic=!1},this.readPKCS8PubKeyHex=function(u){var f,p,N=$.crypto.ECDSA.getName,U=Ye.getVbyList;if(!1===Ye.isASN1HEX(u))throw"not ASN.1 hex string";try{U(u,0,[0,0],"06"),f=U(u,0,[0,1],"06"),p=U(u,0,[1],"03").substr(2)}catch{throw"malformed PKCS#8 ECC public key"}if(this.curveName=N(f),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(p)},this.readCertPubKeyHex=function(u,f){5!==f&&(f=6);var p,w,U=$.crypto.ECDSA.getName,B=Ye.getVbyList;if(!1===Ye.isASN1HEX(u))throw"not ASN.1 hex string";try{p=B(u,0,[0,f,0,1],"06"),w=B(u,0,[0,f,1],"03").substr(2)}catch{throw"malformed X.509 certificate ECC public key"}if(this.curveName=U(p),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(w)},void 0!==l&&void 0!==l.curve&&(this.curveName=l.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==l&&(void 0!==l.prv&&this.setPrivateKeyHex(l.prv),void 0!==l.pub&&this.setPublicKeyHex(l.pub))},$.crypto.ECDSA.parseSigHex=function(l){var c=$.crypto.ECDSA.parseSigHexInHexRS(l);return{r:new Z(c.r,16),s:new Z(c.s,16)}},$.crypto.ECDSA.parseSigHexInHexRS=function(l){var u=Ye.getChildIdx,f=Ye.getV;if("30"!=l.substr(0,2))throw"signature is not a ASN.1 sequence";var p=u(l,0);if(2!=p.length)throw"number of signature ASN.1 sequence elements seem wrong";var w=p[0],N=p[1];if("02"!=l.substr(w,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=l.substr(N,2))throw"2nd item of sequene of signature is not ASN.1 integer";return{r:f(l,w),s:f(l,N)}},$.crypto.ECDSA.asn1SigToConcatSig=function(l){var c=$.crypto.ECDSA.parseSigHexInHexRS(l),u=c.r,f=c.s;if("00"==u.substr(0,2)&&u.length%32==2&&(u=u.substr(2)),"00"==f.substr(0,2)&&f.length%32==2&&(f=f.substr(2)),u.length%32==30&&(u="00"+u),f.length%32==30&&(f="00"+f),u.length%32!=0)throw"unknown ECDSA sig r length error";if(f.length%32!=0)throw"unknown ECDSA sig s length error";return u+f},$.crypto.ECDSA.concatSigToASN1Sig=function(l){if(l.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var c=l.substr(0,l.length/2),u=l.substr(l.length/2);return $.crypto.ECDSA.hexRSSigToASN1Sig(c,u)},$.crypto.ECDSA.hexRSSigToASN1Sig=function(l,c){var u=new Z(l,16),f=new Z(c,16);return $.crypto.ECDSA.biRSSigToASN1Sig(u,f)},$.crypto.ECDSA.biRSSigToASN1Sig=function(l,c){var u=$.asn1,f=new u.DERInteger({bigint:l}),p=new u.DERInteger({bigint:c});return new u.DERSequence({array:[f,p]}).getEncodedHex()},$.crypto.ECDSA.getName=function(l){return"2a8648ce3d030107"===l?"secp256r1":"2b8104000a"===l?"secp256k1":"2b81040022"===l?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(l)?"secp256r1":-1!=="|secp256k1|".indexOf(l)?"secp256k1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(l)?"secp384r1":null},void 0!==$&&$||(T.KJUR=$={}),void 0!==$.crypto&&$.crypto||($.crypto={}),$.crypto.ECParameterDB=new function(){var l={},c={};function u(f){return new Z(f,16)}this.getByName=function(f){var p=f;if(void 0!==c[p]&&(p=c[f]),void 0!==l[p])return l[p];throw"unregistered EC curve name: "+p},this.regist=function(f,p,w,N,U,B,G,J,W,z,X,oe){l[f]={};var ae=u(w),ce=u(N),we=u(U),me=u(B),xe=u(G),Ae=new Li(ae,ce,we),Re=Ae.decodePointHex("04"+J+W);l[f].name=f,l[f].keylen=p,l[f].curve=Ae,l[f].G=Re,l[f].n=me,l[f].h=xe,l[f].oid=X,l[f].info=oe;for(var Be=0;Be<z.length;Be++)c[z[Be]]=f}},$.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),$.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),$.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),$.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),$.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),$.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),$.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),$.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),$.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),$.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var Ln=function(){var l=function(G,J,W){return c(q.AES,G,J,W)},c=function(G,J,W,z){var X=q.enc.Hex.parse(J),oe=q.enc.Hex.parse(W),ae=q.enc.Hex.parse(z),ce={};ce.key=oe,ce.iv=ae,ce.ciphertext=X;var we=G.decrypt(ce,oe,{iv:ae});return q.enc.Hex.stringify(we)},u=function(G,J,W){return f(q.AES,G,J,W)},f=function(G,J,W,z){var X=q.enc.Hex.parse(J),oe=q.enc.Hex.parse(W),ae=q.enc.Hex.parse(z),ce=G.encrypt(X,oe,{iv:ae}),we=q.enc.Hex.parse(ce.toString());return q.enc.Base64.stringify(we)},p={"AES-256-CBC":{proc:l,eproc:u,keylen:32,ivlen:16},"AES-192-CBC":{proc:l,eproc:u,keylen:24,ivlen:16},"AES-128-CBC":{proc:l,eproc:u,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(G,J,W){return c(q.TripleDES,G,J,W)},eproc:function(G,J,W){return f(q.TripleDES,G,J,W)},keylen:24,ivlen:8},"DES-CBC":{proc:function(G,J,W){return c(q.DES,G,J,W)},eproc:function(G,J,W){return f(q.DES,G,J,W)},keylen:8,ivlen:8}},w=function(G){var J={},W=G.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));W&&(J.cipher=W[1],J.ivsalt=W[2]);var z=G.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));z&&(J.type=z[1]);var X=-1,oe=0;-1!=G.indexOf("\r\n\r\n")&&(X=G.indexOf("\r\n\r\n"),oe=2),-1!=G.indexOf("\n\n")&&(X=G.indexOf("\n\n"),oe=1);var ae=G.indexOf("-----END");if(-1!=X&&-1!=ae){var ce=G.substring(X+2*oe,ae-oe);ce=ce.replace(/\s+/g,""),J.data=ce}return J},N=function(G,J,W){for(var z=W.substring(0,16),X=q.enc.Hex.parse(z),oe=q.enc.Utf8.parse(J),ae=p[G].keylen+p[G].ivlen,ce="",we=null;;){var me=q.algo.MD5.create();if(null!=we&&me.update(we),me.update(oe),me.update(X),we=me.finalize(),(ce+=q.enc.Hex.stringify(we)).length>=2*ae)break}var xe={};return xe.keyhex=ce.substr(0,2*p[G].keylen),xe.ivhex=ce.substr(2*p[G].keylen,2*p[G].ivlen),xe},U=function(G,J,W,z){var X=q.enc.Base64.parse(G),oe=q.enc.Hex.stringify(X);return(0,p[J].proc)(oe,W,z)};return{version:"1.0.0",parsePKCS5PEM:function(G){return w(G)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(G,J,W){return N(G,J,W)},decryptKeyB64:function(G,J,W,z){return U(G,J,W,z)},getDecryptedKeyHex:function(G,J){var W=w(G),z=W.cipher,X=W.ivsalt,oe=W.data,ae=N(z,J,X).keyhex;return U(oe,z,ae,X)},getEncryptedPKCS5PEMFromPrvKeyHex:function(G,J,W,z,X){var we,me,oe="";if(void 0!==z&&null!=z||(z="AES-256-CBC"),void 0===p[z])throw"KEYUTIL unsupported algorithm: "+z;void 0!==X&&null!=X||(X=(we=p[z].ivlen,me=q.lib.WordArray.random(we),q.enc.Hex.stringify(me)).toUpperCase());var ae=function(we,me,xe,Ae){return(0,p[me].eproc)(we,xe,Ae)}(J,z,N(z,W,X).keyhex,X);return oe="-----BEGIN "+G+" PRIVATE KEY-----\r\n",oe+="Proc-Type: 4,ENCRYPTED\r\n",oe+="DEK-Info: "+z+","+X+"\r\n",oe+="\r\n",(oe+=ae.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+G+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(G){var W=Ye.getChildIdx,z=Ye.getV,X={},oe=W(G,0);if(2!=oe.length)throw"malformed format: SEQUENCE(0).items != 2: "+oe.length;X.ciphertext=z(G,oe[1]);var ae=W(G,oe[0]);if(2!=ae.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+ae.length;if("2a864886f70d01050d"!=z(G,ae[0]))throw"this only supports pkcs5PBES2";var ce=W(G,ae[1]);if(2!=ae.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+ce.length;var we=W(G,ce[1]);if(2!=we.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+we.length;if("2a864886f70d0307"!=z(G,we[0]))throw"this only supports TripleDES";X.encryptionSchemeAlg="TripleDES",X.encryptionSchemeIV=z(G,we[1]);var me=W(G,ce[0]);if(2!=me.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+me.length;if("2a864886f70d01050c"!=z(G,me[0]))throw"this only supports pkcs5PBKDF2";var xe=W(G,me[1]);if(xe.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+xe.length;X.pbkdf2Salt=z(G,xe[0]);var Ae=z(G,xe[1]);try{X.pbkdf2Iter=parseInt(Ae,16)}catch{throw"malformed format pbkdf2Iter: "+Ae}return X},getPBKDF2KeyHexFromParam:function(G,J){var W=q.enc.Hex.parse(G.pbkdf2Salt),X=q.PBKDF2(J,W,{keySize:6,iterations:G.pbkdf2Iter});return q.enc.Hex.stringify(X)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(G,J){var W=Ur(G,"ENCRYPTED PRIVATE KEY"),z=this.parseHexOfEncryptedPKCS8(W),X=Ln.getPBKDF2KeyHexFromParam(z,J),oe={};oe.ciphertext=q.enc.Hex.parse(z.ciphertext);var ae=q.enc.Hex.parse(X),ce=q.enc.Hex.parse(z.encryptionSchemeIV),we=q.TripleDES.decrypt(oe,ae,{iv:ce});return q.enc.Hex.stringify(we)},getKeyFromEncryptedPKCS8PEM:function(G,J){var W=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(G,J);return this.getKeyFromPlainPrivatePKCS8Hex(W)},parsePlainPrivatePKCS8Hex:function(G){var J=Ye,W=J.getChildIdx,z=J.getV,X={algparam:null};if("30"!=G.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var oe=W(G,0);if(3!=oe.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=G.substr(oe[1],2))throw"malformed PKCS8 private key(code:003)";var ae=W(G,oe[1]);if(2!=ae.length)throw"malformed PKCS8 private key(code:004)";if("06"!=G.substr(ae[0],2))throw"malformed PKCS8 private key(code:005)";if(X.algoid=z(G,ae[0]),"06"==G.substr(ae[1],2)&&(X.algparam=z(G,ae[1])),"04"!=G.substr(oe[2],2))throw"malformed PKCS8 private key(code:006)";return X.keyidx=J.getVidx(G,oe[2]),X},getKeyFromPlainPrivatePKCS8PEM:function(G){var J=Ur(G,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(J)},getKeyFromPlainPrivatePKCS8Hex:function(G){var J,W=this.parsePlainPrivatePKCS8Hex(G);if("2a864886f70d010101"==W.algoid)J=new et;else if("2a8648ce380401"==W.algoid)J=new $.crypto.DSA;else{if("2a8648ce3d0201"!=W.algoid)throw"unsupported private key algorithm";J=new $.crypto.ECDSA}return J.readPKCS8PrvKeyHex(G),J},_getKeyFromPublicPKCS8Hex:function(G){var J,W=Ye.getVbyList(G,0,[0,0],"06");if("2a864886f70d010101"===W)J=new et;else if("2a8648ce380401"===W)J=new $.crypto.DSA;else{if("2a8648ce3d0201"!==W)throw"unsupported PKCS#8 public key hex";J=new $.crypto.ECDSA}return J.readPKCS8PubKeyHex(G),J},parsePublicRawRSAKeyHex:function(G){var W=Ye.getChildIdx,z=Ye.getV,X={};if("30"!=G.substr(0,2))throw"malformed RSA key(code:001)";var oe=W(G,0);if(2!=oe.length)throw"malformed RSA key(code:002)";if("02"!=G.substr(oe[0],2))throw"malformed RSA key(code:003)";if(X.n=z(G,oe[0]),"02"!=G.substr(oe[1],2))throw"malformed RSA key(code:004)";return X.e=z(G,oe[1]),X},parsePublicPKCS8Hex:function(G){var J=Ye,W=J.getChildIdx,z=J.getV,X={algparam:null},oe=W(G,0);if(2!=oe.length)throw"outer DERSequence shall have 2 elements: "+oe.length;var ae=oe[0];if("30"!=G.substr(ae,2))throw"malformed PKCS8 public key(code:001)";var ce=W(G,ae);if(2!=ce.length)throw"malformed PKCS8 public key(code:002)";if("06"!=G.substr(ce[0],2))throw"malformed PKCS8 public key(code:003)";if(X.algoid=z(G,ce[0]),"06"==G.substr(ce[1],2)?X.algparam=z(G,ce[1]):"30"==G.substr(ce[1],2)&&(X.algparam={},X.algparam.p=J.getVbyList(G,ce[1],[0],"02"),X.algparam.q=J.getVbyList(G,ce[1],[1],"02"),X.algparam.g=J.getVbyList(G,ce[1],[2],"02")),"03"!=G.substr(oe[1],2))throw"malformed PKCS8 public key(code:004)";return X.key=z(G,oe[1]).substr(2),X}}}();Ln.getKey=function(l,c,u){var zt,f=(ce=Ye).getChildIdx,p=ce.getVbyList,w=$.crypto,N=w.ECDSA,U=w.DSA,B=et,G=Ur,J=Ln;if(void 0!==B&&l instanceof B||void 0!==N&&l instanceof N||void 0!==U&&l instanceof U)return l;if(void 0!==l.curve&&void 0!==l.xy&&void 0===l.d)return new N({pub:l.xy,curve:l.curve});if(void 0!==l.curve&&void 0!==l.d)return new N({prv:l.d,curve:l.curve});if(void 0===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0===l.d)return(it=new B).setPublic(l.n,l.e),it;if(void 0===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0!==l.d&&void 0!==l.p&&void 0!==l.q&&void 0!==l.dp&&void 0!==l.dq&&void 0!==l.co&&void 0===l.qi)return(it=new B).setPrivateEx(l.n,l.e,l.d,l.p,l.q,l.dp,l.dq,l.co),it;if(void 0===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0!==l.d&&void 0===l.p)return(it=new B).setPrivate(l.n,l.e,l.d),it;if(void 0!==l.p&&void 0!==l.q&&void 0!==l.g&&void 0!==l.y&&void 0===l.x)return(it=new U).setPublic(l.p,l.q,l.g,l.y),it;if(void 0!==l.p&&void 0!==l.q&&void 0!==l.g&&void 0!==l.y&&void 0!==l.x)return(it=new U).setPrivate(l.p,l.q,l.g,l.y,l.x),it;if("RSA"===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0===l.d)return(it=new B).setPublic(Xe(l.n),Xe(l.e)),it;if("RSA"===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0!==l.d&&void 0!==l.p&&void 0!==l.q&&void 0!==l.dp&&void 0!==l.dq&&void 0!==l.qi)return(it=new B).setPrivateEx(Xe(l.n),Xe(l.e),Xe(l.d),Xe(l.p),Xe(l.q),Xe(l.dp),Xe(l.dq),Xe(l.qi)),it;if("RSA"===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0!==l.d)return(it=new B).setPrivate(Xe(l.n),Xe(l.e),Xe(l.d)),it;if("EC"===l.kty&&void 0!==l.crv&&void 0!==l.x&&void 0!==l.y&&void 0===l.d){var W=(Ue=new N({curve:l.crv})).ecparams.keylen/4,z="04"+("0000000000"+Xe(l.x)).slice(-W)+("0000000000"+Xe(l.y)).slice(-W);return Ue.setPublicKeyHex(z),Ue}if("EC"===l.kty&&void 0!==l.crv&&void 0!==l.x&&void 0!==l.y&&void 0!==l.d){W=(Ue=new N({curve:l.crv})).ecparams.keylen/4,z="04"+("0000000000"+Xe(l.x)).slice(-W)+("0000000000"+Xe(l.y)).slice(-W);var X=("0000000000"+Xe(l.d)).slice(-W);return Ue.setPublicKeyHex(z),Ue.setPrivateKeyHex(X),Ue}if("pkcs5prv"===u){var oe,ae=l,ce=Ye;if(9===(oe=f(ae,0)).length)(it=new B).readPKCS5PrvKeyHex(ae);else if(6===oe.length)(it=new U).readPKCS5PrvKeyHex(ae);else{if(!(oe.length>2&&"04"===ae.substr(oe[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(it=new N).readPKCS5PrvKeyHex(ae)}return it}if("pkcs8prv"===u)return J.getKeyFromPlainPrivatePKCS8Hex(l);if("pkcs8pub"===u)return J._getKeyFromPublicPKCS8Hex(l);if("x509pub"===u)return In.getPublicKeyFromCertHex(l);if(-1!=l.indexOf("-END CERTIFICATE-",0)||-1!=l.indexOf("-END X509 CERTIFICATE-",0)||-1!=l.indexOf("-END TRUSTED CERTIFICATE-",0))return In.getPublicKeyFromCertPEM(l);if(-1!=l.indexOf("-END PUBLIC KEY-")){var we=Ur(l,"PUBLIC KEY");return J._getKeyFromPublicPKCS8Hex(we)}if(-1!=l.indexOf("-END RSA PRIVATE KEY-")&&-1==l.indexOf("4,ENCRYPTED")){var me=G(l,"RSA PRIVATE KEY");return J.getKey(me,null,"pkcs5prv")}if(-1!=l.indexOf("-END DSA PRIVATE KEY-")&&-1==l.indexOf("4,ENCRYPTED")){var xe=p(zt=G(l,"DSA PRIVATE KEY"),0,[1],"02"),Ae=p(zt,0,[2],"02"),Re=p(zt,0,[3],"02"),Be=p(zt,0,[4],"02"),Ot=p(zt,0,[5],"02");return(it=new U).setPrivate(new Z(xe,16),new Z(Ae,16),new Z(Re,16),new Z(Be,16),new Z(Ot,16)),it}if(-1!=l.indexOf("-END PRIVATE KEY-"))return J.getKeyFromPlainPrivatePKCS8PEM(l);if(-1!=l.indexOf("-END RSA PRIVATE KEY-")&&-1!=l.indexOf("4,ENCRYPTED")){var wt=J.getDecryptedKeyHex(l,c),Vt=new et;return Vt.readPKCS5PrvKeyHex(wt),Vt}if(-1!=l.indexOf("-END EC PRIVATE KEY-")&&-1!=l.indexOf("4,ENCRYPTED")){var Ue,it=p(zt=J.getDecryptedKeyHex(l,c),0,[1],"04"),Wt=p(zt,0,[2,0],"06"),Nn=p(zt,0,[3,0],"03").substr(2);if(void 0===$.crypto.OID.oidhex2name[Wt])throw"undefined OID(hex) in KJUR.crypto.OID: "+Wt;return(Ue=new N({curve:$.crypto.OID.oidhex2name[Wt]})).setPublicKeyHex(Nn),Ue.setPrivateKeyHex(it),Ue.isPublic=!1,Ue}if(-1!=l.indexOf("-END DSA PRIVATE KEY-")&&-1!=l.indexOf("4,ENCRYPTED"))return xe=p(zt=J.getDecryptedKeyHex(l,c),0,[1],"02"),Ae=p(zt,0,[2],"02"),Re=p(zt,0,[3],"02"),Be=p(zt,0,[4],"02"),Ot=p(zt,0,[5],"02"),(it=new U).setPrivate(new Z(xe,16),new Z(Ae,16),new Z(Re,16),new Z(Be,16),new Z(Ot,16)),it;if(-1!=l.indexOf("-END ENCRYPTED PRIVATE KEY-"))return J.getKeyFromEncryptedPKCS8PEM(l,c);throw"not supported argument"},Ln.generateKeypair=function(l,c){if("RSA"==l){var u=c;(N=new et).generate(u,"10001"),N.isPrivate=!0,N.isPublic=!0;var f=new et,p=N.n.toString(16),w=N.e.toString(16);return f.setPublic(p,w),f.isPrivate=!1,f.isPublic=!0,(U={}).prvKeyObj=N,U.pubKeyObj=f,U}if("EC"==l){var N,U,B=c,G=new $.crypto.ECDSA({curve:B}).generateKeyPairHex();return(N=new $.crypto.ECDSA({curve:B})).setPublicKeyHex(G.ecpubhex),N.setPrivateKeyHex(G.ecprvhex),N.isPrivate=!0,N.isPublic=!1,(f=new $.crypto.ECDSA({curve:B})).setPublicKeyHex(G.ecpubhex),f.isPrivate=!1,f.isPublic=!0,(U={}).prvKeyObj=N,U.pubKeyObj=f,U}throw"unknown algorithm: "+l},Ln.getPEM=function(l,c,u,f,p,w){var U=$.asn1,B=U.DERObjectIdentifier,G=U.DERInteger,J=U.ASN1Util.newObject,z=$.crypto,X=z.DSA,oe=z.ECDSA,ae=et;function ce(Ue){return J({seq:[{int:0},{int:{bigint:Ue.n}},{int:Ue.e},{int:{bigint:Ue.d}},{int:{bigint:Ue.p}},{int:{bigint:Ue.q}},{int:{bigint:Ue.dmp1}},{int:{bigint:Ue.dmq1}},{int:{bigint:Ue.coeff}}]})}function we(Ue){return J({seq:[{int:1},{octstr:{hex:Ue.prvKeyHex}},{tag:["a0",!0,{oid:{name:Ue.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+Ue.pubKeyHex}}]}]})}function me(Ue){return J({seq:[{int:0},{int:{bigint:Ue.p}},{int:{bigint:Ue.q}},{int:{bigint:Ue.g}},{int:{bigint:Ue.y}},{int:{bigint:Ue.x}}]})}if((void 0!==ae&&l instanceof ae||void 0!==X&&l instanceof X||void 0!==oe&&l instanceof oe)&&1==l.isPublic&&(void 0===c||"PKCS8PUB"==c))return be(Be=new(0,U.x509.SubjectPublicKeyInfo)(l).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==c&&void 0!==ae&&l instanceof ae&&(void 0===u||null==u)&&1==l.isPrivate)return be(Be=ce(l).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==c&&void 0!==oe&&l instanceof oe&&(void 0===u||null==u)&&1==l.isPrivate){var xe=new B({name:l.curveName}).getEncodedHex(),Ae=we(l).getEncodedHex(),Re="";return(Re+=be(xe,"EC PARAMETERS"))+be(Ae,"EC PRIVATE KEY")}if("PKCS1PRV"==c&&void 0!==X&&l instanceof X&&(void 0===u||null==u)&&1==l.isPrivate)return be(Be=me(l).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==c&&void 0!==ae&&l instanceof ae&&void 0!==u&&null!=u&&1==l.isPrivate){var Be=ce(l).getEncodedHex();return void 0===f&&(f="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Be,u,f,w)}if("PKCS5PRV"==c&&void 0!==oe&&l instanceof oe&&void 0!==u&&null!=u&&1==l.isPrivate)return Be=we(l).getEncodedHex(),void 0===f&&(f="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Be,u,f,w);if("PKCS5PRV"==c&&void 0!==X&&l instanceof X&&void 0!==u&&null!=u&&1==l.isPrivate)return Be=me(l).getEncodedHex(),void 0===f&&(f="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Be,u,f,w);var Ot=function(it,Wt){var Nn=wt(it,Wt);return new J({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Nn.pbkdf2Salt}},{int:Nn.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Nn.encryptionSchemeIV}}]}]}]},{octstr:{hex:Nn.ciphertext}}]}).getEncodedHex()},wt=function(it,Wt){var Nn=q.lib.WordArray.random(8),zt=q.lib.WordArray.random(8),Io=q.PBKDF2(Wt,Nn,{keySize:6,iterations:100}),Ne=q.enc.Hex.parse(it),Xi=q.TripleDES.encrypt(Ne,Io,{iv:zt})+"",ut={};return ut.ciphertext=Xi,ut.pbkdf2Salt=q.enc.Hex.stringify(Nn),ut.pbkdf2Iter=100,ut.encryptionSchemeAlg="DES-EDE3-CBC",ut.encryptionSchemeIV=q.enc.Hex.stringify(zt),ut};if("PKCS8PRV"==c&&null!=ae&&l instanceof ae&&1==l.isPrivate){var Vt=ce(l).getEncodedHex();return Be=J({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Vt}}]}).getEncodedHex(),void 0===u||null==u?be(Be,"PRIVATE KEY"):be(Ae=Ot(Be,u),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==c&&void 0!==oe&&l instanceof oe&&1==l.isPrivate)return Vt=new J({seq:[{int:1},{octstr:{hex:l.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+l.pubKeyHex}}]}]}).getEncodedHex(),Be=J({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:l.curveName}}]},{octstr:{hex:Vt}}]}).getEncodedHex(),void 0===u||null==u?be(Be,"PRIVATE KEY"):be(Ae=Ot(Be,u),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==c&&void 0!==X&&l instanceof X&&1==l.isPrivate)return Vt=new G({bigint:l.x}).getEncodedHex(),Be=J({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:l.p}},{int:{bigint:l.q}},{int:{bigint:l.g}}]}]},{octstr:{hex:Vt}}]}).getEncodedHex(),void 0===u||null==u?be(Be,"PRIVATE KEY"):be(Ae=Ot(Be,u),"ENCRYPTED PRIVATE KEY");throw"unsupported object nor format"},Ln.getKeyFromCSRPEM=function(l){var c=Ur(l,"CERTIFICATE REQUEST");return Ln.getKeyFromCSRHex(c)},Ln.getKeyFromCSRHex=function(l){var c=Ln.parseCSRHex(l);return Ln.getKey(c.p8pubkeyhex,null,"pkcs8pub")},Ln.parseCSRHex=function(l){var u=Ye.getChildIdx,f=Ye.getTLV,p={},w=l;if("30"!=w.substr(0,2))throw"malformed CSR(code:001)";var N=u(w,0);if(N.length<1)throw"malformed CSR(code:002)";if("30"!=w.substr(N[0],2))throw"malformed CSR(code:003)";var U=u(w,N[0]);if(U.length<3)throw"malformed CSR(code:004)";return p.p8pubkeyhex=f(w,U[2]),p},Ln.getJWKFromKey=function(l){var c={};if(l instanceof et&&l.isPrivate)return c.kty="RSA",c.n=sn(l.n.toString(16)),c.e=sn(l.e.toString(16)),c.d=sn(l.d.toString(16)),c.p=sn(l.p.toString(16)),c.q=sn(l.q.toString(16)),c.dp=sn(l.dmp1.toString(16)),c.dq=sn(l.dmq1.toString(16)),c.qi=sn(l.coeff.toString(16)),c;if(l instanceof et&&l.isPublic)return c.kty="RSA",c.n=sn(l.n.toString(16)),c.e=sn(l.e.toString(16)),c;if(l instanceof $.crypto.ECDSA&&l.isPrivate){if("P-256"!==(f=l.getShortNISTPCurveName())&&"P-384"!==f)throw"unsupported curve name for JWT: "+f;var u=l.getPublicKeyXYHex();return c.kty="EC",c.crv=f,c.x=sn(u.x),c.y=sn(u.y),c.d=sn(l.prvKeyHex),c}if(l instanceof $.crypto.ECDSA&&l.isPublic){var f;if("P-256"!==(f=l.getShortNISTPCurveName())&&"P-384"!==f)throw"unsupported curve name for JWT: "+f;return u=l.getPublicKeyXYHex(),c.kty="EC",c.crv=f,c.x=sn(u.x),c.y=sn(u.y),c}throw"not supported key object"},et.getPosArrayOfChildrenFromHex=function(l){return Ye.getChildIdx(l,0)},et.getHexValueArrayOfChildrenFromHex=function(l){var c,u=Ye.getV,f=u(l,(c=et.getPosArrayOfChildrenFromHex(l))[0]),p=u(l,c[1]),w=u(l,c[2]),N=u(l,c[3]),U=u(l,c[4]),B=u(l,c[5]),G=u(l,c[6]),J=u(l,c[7]),W=u(l,c[8]);return(c=new Array).push(f,p,w,N,U,B,G,J,W),c},et.prototype.readPrivateKeyFromPEMString=function(l){var c=Ur(l),u=et.getHexValueArrayOfChildrenFromHex(c);this.setPrivateEx(u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8])},et.prototype.readPKCS5PrvKeyHex=function(l){var c=et.getHexValueArrayOfChildrenFromHex(l);this.setPrivateEx(c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8])},et.prototype.readPKCS8PrvKeyHex=function(l){var c,u,f,p,w,N,U,B,J=Ye.getVbyList;if(!1===Ye.isASN1HEX(l))throw"not ASN.1 hex string";try{c=J(l,0,[2,0,1],"02"),u=J(l,0,[2,0,2],"02"),f=J(l,0,[2,0,3],"02"),p=J(l,0,[2,0,4],"02"),w=J(l,0,[2,0,5],"02"),N=J(l,0,[2,0,6],"02"),U=J(l,0,[2,0,7],"02"),B=J(l,0,[2,0,8],"02")}catch{throw"malformed PKCS#8 plain RSA private key"}this.setPrivateEx(c,u,f,p,w,N,U,B)},et.prototype.readPKCS5PubKeyHex=function(l){var c=Ye,u=c.getV;if(!1===c.isASN1HEX(l))throw"keyHex is not ASN.1 hex string";var f=c.getChildIdx(l,0);if(2!==f.length||"02"!==l.substr(f[0],2)||"02"!==l.substr(f[1],2))throw"wrong hex for PKCS#5 public key";var p=u(l,f[0]),w=u(l,f[1]);this.setPublic(p,w)},et.prototype.readPKCS8PubKeyHex=function(l){var c=Ye;if(!1===c.isASN1HEX(l))throw"not ASN.1 hex string";if("06092a864886f70d010101"!==c.getTLVbyList(l,0,[0,0]))throw"not PKCS8 RSA public key";var u=c.getTLVbyList(l,0,[1,0]);this.readPKCS5PubKeyHex(u)},et.prototype.readCertPubKeyHex=function(l,c){var u,f;(u=new In).readCertHex(l),f=u.getPublicKeyHex(),this.readPKCS8PubKeyHex(f)};var $r=new RegExp("");function If(l,c){for(var u="",f=c/4-l.length,p=0;p<f;p++)u+="0";return u+l}function Nf(l,c,u){for(var f="",p=0;f.length<c;)f+=ht(u(We(l+String.fromCharCode.apply(String,[(4278190080&p)>>24,(16711680&p)>>16,(65280&p)>>8,255&p])))),p+=1;return f}function xf(l){for(var c in $.crypto.Util.DIGESTINFOHEAD){var u=$.crypto.Util.DIGESTINFOHEAD[c],f=u.length;if(l.substring(0,f)==u)return[c,l.substring(f)]}return[]}function In(){var l=Ye,c=l.getChildIdx,u=l.getV,f=l.getTLV,p=l.getVbyList,w=l.getTLVbyList,N=l.getIdxbyList,U=l.getVidx,B=l.oidname,G=In,J=Ur;this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==w(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return p(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){return B(p(this.hex,0,[0,2+this.foffset,0],"06"))},this.getIssuerHex=function(){return w(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return G.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return w(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return G.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var W=p(this.hex,0,[0,4+this.foffset,0]);return W=W.replace(/(..)/g,"%$1"),decodeURIComponent(W)},this.getNotAfter=function(){var W=p(this.hex,0,[0,4+this.foffset,1]);return W=W.replace(/(..)/g,"%$1"),decodeURIComponent(W)},this.getPublicKeyHex=function(){return l.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return N(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var W=this.getPublicKeyIdx();return N(this.hex,W,[1,0],"30")},this.getPublicKey=function(){return Ln.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return B(p(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return p(this.hex,0,[2],"03",!0)},this.verifySignature=function(W){var z=this.getSignatureAlgorithmName(),X=this.getSignatureValueHex(),oe=w(this.hex,0,[0],"30"),ae=new $.crypto.Signature({alg:z});return ae.init(W),ae.updateHex(oe),ae.verify(X)},this.parseExt=function(){if(3!==this.version)return-1;var W=N(this.hex,0,[0,7,0],"30"),z=c(this.hex,W);this.aExtInfo=new Array;for(var X=0;X<z.length;X++){var oe={critical:!1},ae=0;3===c(this.hex,z[X]).length&&(oe.critical=!0,ae=1),oe.oid=l.hextooidstr(p(this.hex,z[X],[0],"06"));var ce=N(this.hex,z[X],[1+ae]);oe.vidx=U(this.hex,ce),this.aExtInfo.push(oe)}},this.getExtInfo=function(W){var z=this.aExtInfo,X=W;if(W.match(/^[0-9.]+$/)||(X=$.asn1.x509.OID.name2oid(W)),""!==X)for(var oe=0;oe<z.length;oe++)if(z[oe].oid===X)return z[oe]},this.getExtBasicConstraints=function(){var W=this.getExtInfo("basicConstraints");if(void 0===W)return W;var z=u(this.hex,W.vidx);if(""===z)return{};if("0101ff"===z)return{cA:!0};if("0101ff02"===z.substr(0,8)){var X=u(z,6);return{cA:!0,pathLen:parseInt(X,16)}}throw"basicConstraints parse error"},this.getExtKeyUsageBin=function(){var W=this.getExtInfo("keyUsage");if(void 0===W)return"";var z=u(this.hex,W.vidx);if(z.length%2!=0||z.length<=2)throw"malformed key usage value";var X=parseInt(z.substr(0,2)),oe=parseInt(z.substr(2),16).toString(2);return oe.substr(0,oe.length-X)},this.getExtKeyUsageString=function(){for(var W=this.getExtKeyUsageBin(),z=new Array,X=0;X<W.length;X++)"1"==W.substr(X,1)&&z.push(In.KEYUSAGE_NAME[X]);return z.join(",")},this.getExtSubjectKeyIdentifier=function(){var W=this.getExtInfo("subjectKeyIdentifier");return void 0===W?W:u(this.hex,W.vidx)},this.getExtAuthorityKeyIdentifier=function(){var W=this.getExtInfo("authorityKeyIdentifier");if(void 0===W)return W;for(var z={},X=f(this.hex,W.vidx),oe=c(X,0),ae=0;ae<oe.length;ae++)"80"===X.substr(oe[ae],2)&&(z.kid=u(X,oe[ae]));return z},this.getExtExtKeyUsageName=function(){var W=this.getExtInfo("extKeyUsage");if(void 0===W)return W;var z=new Array,X=f(this.hex,W.vidx);if(""===X)return z;for(var oe=c(X,0),ae=0;ae<oe.length;ae++)z.push(B(u(X,oe[ae])));return z},this.getExtSubjectAltName=function(){for(var W=this.getExtSubjectAltName2(),z=new Array,X=0;X<W.length;X++)"DNS"===W[X][0]&&z.push(W[X][1]);return z},this.getExtSubjectAltName2=function(){var W,z,X,oe=this.getExtInfo("subjectAltName");if(void 0===oe)return oe;for(var ae=new Array,ce=f(this.hex,oe.vidx),we=c(ce,0),me=0;me<we.length;me++)X=ce.substr(we[me],2),W=u(ce,we[me]),"81"===X&&(z=Pn(W),ae.push(["MAIL",z])),"82"===X&&(z=Pn(W),ae.push(["DNS",z])),"84"===X&&(z=In.hex2dn(W,0),ae.push(["DN",z])),"86"===X&&(z=Pn(W),ae.push(["URI",z])),"87"===X&&(z=nr(W),ae.push(["IP",z]));return ae},this.getExtCRLDistributionPointsURI=function(){var W=this.getExtInfo("cRLDistributionPoints");if(void 0===W)return W;for(var z=new Array,X=c(this.hex,W.vidx),oe=0;oe<X.length;oe++)try{var ae=Pn(p(this.hex,X[oe],[0,0,0],"86"));z.push(ae)}catch{}return z},this.getExtAIAInfo=function(){var W=this.getExtInfo("authorityInfoAccess");if(void 0===W)return W;for(var z={ocsp:[],caissuer:[]},X=c(this.hex,W.vidx),oe=0;oe<X.length;oe++){var ae=p(this.hex,X[oe],[0],"06"),ce=p(this.hex,X[oe],[1],"86");"2b06010505073001"===ae&&z.ocsp.push(Pn(ce)),"2b06010505073002"===ae&&z.caissuer.push(Pn(ce))}return z},this.getExtCertificatePolicies=function(){var W=this.getExtInfo("certificatePolicies");if(void 0===W)return W;for(var z=f(this.hex,W.vidx),X=[],oe=c(z,0),ae=0;ae<oe.length;ae++){var ce={},we=c(z,oe[ae]);if(ce.id=B(u(z,we[0])),2===we.length)for(var me=c(z,we[1]),xe=0;xe<me.length;xe++){var Ae=p(z,me[xe],[0],"06");"2b06010505070201"===Ae?ce.cps=Pn(p(z,me[xe],[1])):"2b06010505070202"===Ae&&(ce.unotice=Pn(p(z,me[xe],[1,0])))}X.push(ce)}return X},this.readCertPEM=function(W){this.readCertHex(J(W))},this.readCertHex=function(W){this.hex=W,this.getVersion();try{N(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getInfo=function(){var W,z,X;if(W="Basic Fields\n",W+="  serial number: "+this.getSerialNumberHex()+"\n",W+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",W+="  issuer: "+this.getIssuerString()+"\n",W+="  notBefore: "+this.getNotBefore()+"\n",W+="  notAfter: "+this.getNotAfter()+"\n",W+="  subject: "+this.getSubjectString()+"\n",W+="  subject public key info: \n",W+="    key algorithm: "+(z=this.getPublicKey()).type+"\n","RSA"===z.type&&(W+="    n="+gc(z.n.toString(16)).substr(0,16)+"...\n",W+="    e="+gc(z.e.toString(16))+"\n"),void 0!==(X=this.aExtInfo)&&null!==X){W+="X509v3 Extensions:\n";for(var oe=0;oe<X.length;oe++){var ae=X[oe],ce=$.asn1.x509.OID.oid2name(ae.oid);""===ce&&(ce=ae.oid);var we="";if(!0===ae.critical&&(we="CRITICAL"),W+="  "+ce+" "+we+":\n","basicConstraints"===ce){var me=this.getExtBasicConstraints();void 0===me.cA?W+="    {}\n":(W+="    cA=true",void 0!==me.pathLen&&(W+=", pathLen="+me.pathLen),W+="\n")}else if("keyUsage"===ce)W+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===ce)W+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===ce){var xe=this.getExtAuthorityKeyIdentifier();void 0!==xe.kid&&(W+="    kid="+xe.kid+"\n")}else if("extKeyUsage"===ce)W+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===ce)W+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===ce)W+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===ce){var Ae=this.getExtAIAInfo();void 0!==Ae.ocsp&&(W+="    ocsp: "+Ae.ocsp.join(",")+"\n"),void 0!==Ae.caissuer&&(W+="    caissuer: "+Ae.caissuer.join(",")+"\n")}else if("certificatePolicies"===ce)for(var Re=this.getExtCertificatePolicies(),Be=0;Be<Re.length;Be++)void 0!==Re[Be].id&&(W+="    policy oid: "+Re[Be].id+"\n"),void 0!==Re[Be].cps&&(W+="    cps: "+Re[Be].cps+"\n")}}return(W+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}$r.compile("[^0-9a-f]","gi"),et.prototype.sign=function(l,c){var u=function(p){return $.crypto.Util.hashString(p,c)}(l);return this.signWithMessageHash(u,c)},et.prototype.signWithMessageHash=function(l,c){var u=Ks($.crypto.Util.getPaddedDigestInfoHex(l,c,this.n.bitLength()),16);return If(this.doPrivate(u).toString(16),this.n.bitLength())},et.prototype.signPSS=function(l,c,u){var w,f=(w=We(l),$.crypto.Util.hashHex(w,c));return void 0===u&&(u=-1),this.signWithMessageHashPSS(f,c,u)},et.prototype.signWithMessageHashPSS=function(l,c,u){var f,p=ht(l),w=p.length,N=this.n.bitLength()-1,U=Math.ceil(N/8),B=function(we){return $.crypto.Util.hashHex(we,c)};if(-1===u||void 0===u)u=w;else if(-2===u)u=U-w-2;else if(u<-2)throw"invalid salt length";if(U<w+u+2)throw"data too long";var G="";u>0&&(G=new Array(u),(new jr).nextBytes(G),G=String.fromCharCode.apply(String,G));var J=ht(B(We("\0\0\0\0\0\0\0\0"+p+G))),W=[];for(f=0;f<U-u-w-2;f+=1)W[f]=0;var z=String.fromCharCode.apply(String,W)+"\x01"+G,X=Nf(J,z.length,B),oe=[];for(f=0;f<z.length;f+=1)oe[f]=z.charCodeAt(f)^X.charCodeAt(f);for(oe[0]&=~(65280>>8*U-N&255),f=0;f<w;f++)oe.push(J.charCodeAt(f));return oe.push(188),If(this.doPrivate(new Z(oe)).toString(16),this.n.bitLength())},et.prototype.verify=function(l,c){var u=Ks(c=(c=c.replace($r,"")).replace(/[ \n]+/g,""),16);if(u.bitLength()>this.n.bitLength())return 0;var f=xf(this.doPublic(u).toString(16).replace(/^1f+00/,""));return 0!=f.length&&f[1]==$.crypto.Util.hashString(l,f[0])},et.prototype.verifyWithMessageHash=function(l,c){var u=Ks(c=(c=c.replace($r,"")).replace(/[ \n]+/g,""),16);if(u.bitLength()>this.n.bitLength())return 0;var f=xf(this.doPublic(u).toString(16).replace(/^1f+00/,""));return 0!=f.length&&f[1]==l},et.prototype.verifyPSS=function(l,c,u,f){var N,p=(N=We(l),$.crypto.Util.hashHex(N,u));return void 0===f&&(f=-1),this.verifyWithMessageHashPSS(p,c,u,f)},et.prototype.verifyWithMessageHashPSS=function(l,c,u,f){var p=new Z(c,16);if(p.bitLength()>this.n.bitLength())return!1;var w,N=function(xe){return $.crypto.Util.hashHex(xe,u)},U=ht(l),B=U.length,G=this.n.bitLength()-1,J=Math.ceil(G/8);if(-1===f||void 0===f)f=B;else if(-2===f)f=J-B-2;else if(f<-2)throw"invalid salt length";if(J<B+f+2)throw"data too long";var W=this.doPublic(p).toByteArray();for(w=0;w<W.length;w+=1)W[w]&=255;for(;W.length<J;)W.unshift(0);if(188!==W[J-1])throw"encoded message does not end in 0xbc";var z=(W=String.fromCharCode.apply(String,W)).substr(0,J-B-1),X=W.substr(z.length,B),oe=65280>>8*J-G&255;if(0!=(z.charCodeAt(0)&oe))throw"bits beyond keysize not zero";var ae=Nf(X,z.length,N),ce=[];for(w=0;w<z.length;w+=1)ce[w]=z.charCodeAt(w)^ae.charCodeAt(w);ce[0]&=~oe;var we=J-B-f-2;for(w=0;w<we;w+=1)if(0!==ce[w])throw"leftmost octets not zero";if(1!==ce[we])throw"0x01 marker not found";return X===ht(N(We("\0\0\0\0\0\0\0\0"+U+String.fromCharCode.apply(String,ce.slice(-f)))))},et.SALT_LEN_HLEN=-1,et.SALT_LEN_MAX=-2,et.SALT_LEN_RECOVER=-2,In.hex2dn=function(l,c){if(void 0===c&&(c=0),"30"!==l.substr(c,2))throw"malformed DN";for(var u=new Array,f=Ye.getChildIdx(l,c),p=0;p<f.length;p++)u.push(In.hex2rdn(l,f[p]));return"/"+(u=u.map(function(w){return w.replace("/","\\/")})).join("/")},In.hex2rdn=function(l,c){if(void 0===c&&(c=0),"31"!==l.substr(c,2))throw"malformed RDN";for(var u=new Array,f=Ye.getChildIdx(l,c),p=0;p<f.length;p++)u.push(In.hex2attrTypeValue(l,f[p]));return(u=u.map(function(w){return w.replace("+","\\+")})).join("+")},In.hex2attrTypeValue=function(l,c){var u=Ye,f=u.getV;if(void 0===c&&(c=0),"30"!==l.substr(c,2))throw"malformed attribute type and value";var p=u.getChildIdx(l,c);2!==p.length||l.substr(p[0],2);var w=f(l,p[0]),N=$.asn1.ASN1Util.oidHexToInt(w);return $.asn1.x509.OID.oid2atype(N)+"="+ht(f(l,p[1]))},In.getPublicKeyFromCertHex=function(l){var c=new In;return c.readCertHex(l),c.getPublicKey()},In.getPublicKeyFromCertPEM=function(l){var c=new In;return c.readCertPEM(l),c.getPublicKey()},In.getPublicKeyInfoPropOfCertPEM=function(l){var c,u,f=Ye.getVbyList,p={algparam:null};return(c=new In).readCertPEM(l),u=c.getPublicKeyHex(),p.keyhex=f(u,0,[1],"03").substr(2),p.algoid=f(u,0,[0,0],"06"),"2a8648ce3d0201"===p.algoid&&(p.algparam=f(u,0,[0,1],"06")),p},In.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==$&&$||(T.KJUR=$={}),void 0!==$.jws&&$.jws||($.jws={}),$.jws.JWS=function(){var l=$.jws.JWS.isSafeJSONString;this.parseJWS=function(c,u){if(void 0===this.parsedJWS||!u&&void 0===this.parsedJWS.sigvalH){var f=c.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==f)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var p=f[1],w=f[2],N=f[3],U=p+"."+w;if(this.parsedJWS={},this.parsedJWS.headB64U=p,this.parsedJWS.payloadB64U=w,this.parsedJWS.sigvalB64U=N,this.parsedJWS.si=U,!u){var B=Xe(N),G=Ks(B,16);this.parsedJWS.sigvalH=B,this.parsedJWS.sigvalBI=G}var J=Hr(p),W=Hr(w);if(this.parsedJWS.headS=J,this.parsedJWS.payloadS=W,!l(J,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+J}}},$.jws.JWS.sign=function(l,c,u,f,p){var w,N,U,G=$.jws.JWS,J=G.readSafeJSONString,W=G.isSafeJSONString,z=$.crypto,X=z.Mac,oe=z.Signature,ae=JSON;if("string"!=typeof c&&"object"!=(void 0===c?"undefined":y(c)))throw"spHeader must be JSON string or object: "+c;if("object"==(void 0===c?"undefined":y(c))&&(w=ae.stringify(N=c)),"string"==typeof c){if(!W(w=c))throw"JWS Head is not safe JSON string: "+w;N=J(w)}if(U=u,"object"==(void 0===u?"undefined":y(u))&&(U=ae.stringify(u)),""!=l&&null!=l||void 0===N.alg||(l=N.alg),""!=l&&null!=l&&void 0===N.alg&&(N.alg=l,w=ae.stringify(N)),l!==N.alg)throw"alg and sHeader.alg doesn't match: "+l+"!="+N.alg;var ce=null;if(void 0===G.jwsalg2sigalg[l])throw"unsupported alg name: "+l;ce=G.jwsalg2sigalg[l];var we=es(w)+"."+es(U),me="";if("Hmac"==ce.substr(0,4)){if(void 0===f)throw"mac key shall be specified for HS* alg";var xe=new X({alg:ce,prov:"cryptojs",pass:f});xe.updateString(we),me=xe.doFinal()}else{var Ae;-1!=ce.indexOf("withECDSA")?((Ae=new oe({alg:ce})).init(f,p),Ae.updateString(we),hASN1Sig=Ae.sign(),me=$.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)):"none"!=ce&&((Ae=new oe({alg:ce})).init(f,p),Ae.updateString(we),me=Ae.sign())}return we+"."+sn(me)},$.jws.JWS.verify=function(l,c,u){var f,w=$.jws.JWS,N=w.readSafeJSONString,U=$.crypto,B=U.ECDSA,G=U.Mac,J=U.Signature;void 0!==y(et)&&(f=et);var W=l.split(".");if(3!==W.length)return!1;var ce,z=W[0]+"."+W[1],X=Xe(W[2]),oe=N(Hr(W[0])),ae=null;if(void 0===oe.alg)throw"algorithm not specified in header";if(ce=(ae=oe.alg).substr(0,2),null!=u&&"[object Array]"===Object.prototype.toString.call(u)&&u.length>0&&-1==(":"+u.join(":")+":").indexOf(":"+ae+":"))throw"algorithm '"+ae+"' not accepted in the list";if("none"!=ae&&null===c)throw"key shall be specified to verify.";if("string"==typeof c&&-1!=c.indexOf("-----BEGIN ")&&(c=Ln.getKey(c)),!("RS"!=ce&&"PS"!=ce||c instanceof f))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==ce&&!(c instanceof B))throw"key shall be a ECDSA obj for ES* algs";var we=null;if(void 0===w.jwsalg2sigalg[oe.alg])throw"unsupported alg name: "+ae;if("none"==(we=w.jwsalg2sigalg[ae]))throw"not supported";if("Hmac"==we.substr(0,4)){if(void 0===c)throw"hexadecimal key shall be specified for HMAC";var me=new G({alg:we,pass:c});return me.updateString(z),X==me.doFinal()}if(-1!=we.indexOf("withECDSA")){var xe,Ae=null;try{Ae=B.concatSigToASN1Sig(X)}catch{return!1}return(xe=new J({alg:we})).init(c),xe.updateString(z),xe.verify(Ae)}return(xe=new J({alg:we})).init(c),xe.updateString(z),xe.verify(X)},$.jws.JWS.parse=function(l){var u,f,p=l.split("."),w={};if(2!=p.length&&3!=p.length)throw"malformed sJWS: wrong number of '.' splitted elements";return u=p[1],3==p.length&&(f=p[2]),w.headerObj=$.jws.JWS.readSafeJSONString(Hr(p[0])),w.payloadObj=$.jws.JWS.readSafeJSONString(Hr(u)),w.headerPP=JSON.stringify(w.headerObj,null,"  "),w.payloadPP=null==w.payloadObj?Hr(u):JSON.stringify(w.payloadObj,null,"  "),void 0!==f&&(w.sigHex=Xe(f)),w},$.jws.JWS.verifyJWT=function(l,c,u){var f=$.jws,p=f.JWS,w=p.readSafeJSONString,N=p.inArray,U=p.includedArray,B=l.split("."),G=B[0],J=B[1],W=(Xe(B[2]),w(Hr(G))),z=w(Hr(J));if(void 0===W.alg)return!1;if(void 0===u.alg)throw"acceptField.alg shall be specified";if(!N(W.alg,u.alg)||void 0!==z.iss&&"object"===y(u.iss)&&!N(z.iss,u.iss)||void 0!==z.sub&&"object"===y(u.sub)&&!N(z.sub,u.sub))return!1;if(void 0!==z.aud&&"object"===y(u.aud))if("string"==typeof z.aud){if(!N(z.aud,u.aud))return!1}else if("object"==y(z.aud)&&!U(z.aud,u.aud))return!1;var X=f.IntDate.getNow();return void 0!==u.verifyAt&&"number"==typeof u.verifyAt&&(X=u.verifyAt),void 0!==u.gracePeriod&&"number"==typeof u.gracePeriod||(u.gracePeriod=0),!(void 0!==z.exp&&"number"==typeof z.exp&&z.exp+u.gracePeriod<X||void 0!==z.nbf&&"number"==typeof z.nbf&&X<z.nbf-u.gracePeriod||void 0!==z.iat&&"number"==typeof z.iat&&X<z.iat-u.gracePeriod||void 0!==z.jti&&void 0!==u.jti&&z.jti!==u.jti||!p.verify(l,c,u.alg))},$.jws.JWS.includedArray=function(l,c){var u=$.jws.JWS.inArray;if(null===l||"object"!==(void 0===l?"undefined":y(l))||"number"!=typeof l.length)return!1;for(var f=0;f<l.length;f++)if(!u(l[f],c))return!1;return!0},$.jws.JWS.inArray=function(l,c){if(null===c||"object"!==(void 0===c?"undefined":y(c))||"number"!=typeof c.length)return!1;for(var u=0;u<c.length;u++)if(c[u]==l)return!0;return!1},$.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},$.jws.JWS.isSafeJSONString=function(l,c,u){var f=null;try{return"object"!=(void 0===(f=Jl(l))?"undefined":y(f))||f.constructor===Array?0:(c&&(c[u]=f),1)}catch{return 0}},$.jws.JWS.readSafeJSONString=function(l){var c=null;try{return"object"!=(void 0===(c=Jl(l))?"undefined":y(c))||c.constructor===Array?null:c}catch{return null}},$.jws.JWS.getEncodedSignatureValueFromJWS=function(l){var c=l.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==c)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return c[1]},$.jws.JWS.getJWKthumbprint=function(l){if("RSA"!==l.kty&&"EC"!==l.kty&&"oct"!==l.kty)throw"unsupported algorithm for JWK Thumprint";var c="{";if("RSA"===l.kty){if("string"!=typeof l.n||"string"!=typeof l.e)throw"wrong n and e value for RSA key";c+='"e":"'+l.e+'",',c+='"kty":"'+l.kty+'",',c+='"n":"'+l.n+'"}'}else if("EC"===l.kty){if("string"!=typeof l.crv||"string"!=typeof l.x||"string"!=typeof l.y)throw"wrong crv, x and y value for EC key";c+='"crv":"'+l.crv+'",',c+='"kty":"'+l.kty+'",',c+='"x":"'+l.x+'",',c+='"y":"'+l.y+'"}'}else if("oct"===l.kty){if("string"!=typeof l.k)throw"wrong k value for oct(symmetric) key";c+='"kty":"'+l.kty+'",',c+='"k":"'+l.k+'"}'}var u=We(c);return sn($.crypto.Util.hashHex(u,"sha256"))},$.jws.IntDate={},$.jws.IntDate.get=function(l){var c=$.jws.IntDate,u=c.getNow,f=c.getZulu;if("now"==l)return u();if("now + 1hour"==l)return u()+3600;if("now + 1day"==l)return u()+86400;if("now + 1month"==l)return u()+2592e3;if("now + 1year"==l)return u()+31536e3;if(l.match(/Z$/))return f(l);if(l.match(/^[0-9]+$/))return parseInt(l);throw"unsupported format: "+l},$.jws.IntDate.getZulu=function(l){return xt(l)},$.jws.IntDate.getNow=function(){return~~(new Date/1e3)},$.jws.IntDate.intDate2UTCString=function(l){return new Date(1e3*l).toUTCString()},$.jws.IntDate.intDate2Zulu=function(l){var c=new Date(1e3*l);return("0000"+c.getUTCFullYear()).slice(-4)+("00"+(c.getUTCMonth()+1)).slice(-2)+("00"+c.getUTCDate()).slice(-2)+("00"+c.getUTCHours()).slice(-2)+("00"+c.getUTCMinutes()).slice(-2)+("00"+c.getUTCSeconds()).slice(-2)+"Z"},T.SecureRandom=jr,T.rng_seed_time=Ct,T.BigInteger=Z,T.RSAKey=et,T.EDSA=$.crypto.EDSA,T.DSA=$.crypto.DSA,T.Signature=$.crypto.Signature,T.MessageDigest=$.crypto.MessageDigest,T.Mac=$.crypto.Mac,T.Cipher=$.crypto.Cipher,T.KEYUTIL=Ln,T.ASN1HEX=Ye,T.X509=In,T.CryptoJS=q,T.b64tohex=ze,T.b64toBA=vt,T.stoBA=Yl,T.BAtos=Ql,T.BAtohex=Js,T.stohex=pi,T.stob64=function(c){return Se(pi(c))},T.stob64u=function(c){return Ys(Se(pi(c)))},T.b64utos=function(c){return Ql(vt(Nt(c)))},T.b64tob64u=Ys,T.b64utob64=Nt,T.hex2b64=Se,T.hextob64u=sn,T.b64utohex=Xe,T.utf8tob64u=es,T.b64utoutf8=Hr,T.utf8tob64=function(c){return Se(Xs(pc(c)))},T.b64toutf8=function(c){return decodeURIComponent(hc(ze(c)))},T.utf8tohex=ts,T.hextoutf8=Pn,T.hextorstr=ht,T.rstrtohex=We,T.hextob64=Qs,T.hextob64nl=Zs,T.b64nltohex=Tf,T.hextopem=be,T.pemtohex=Ur,T.hextoArrayBuffer=function(c){if(c.length%2!=0)throw"input is not even length";if(null==c.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var u=new ArrayBuffer(c.length/2),f=new DataView(u),p=0;p<c.length/2;p++)f.setUint8(p,parseInt(c.substr(2*p,2),16));return u},T.ArrayBuffertohex=function(c){for(var u="",f=new DataView(c),p=0;p<c.byteLength;p++)u+=("00"+f.getUint8(p).toString(16)).slice(-2);return u},T.zulutomsec=rt,T.zulutosec=xt,T.zulutodate=function(c){return new Date(rt(c))},T.datetozulu=function(c,u,f){var p,w=c.getUTCFullYear();if(u){if(w<1950||2049<w)throw"not proper year for UTCTime: "+w;p=(""+w).slice(-2)}else p=("000"+w).slice(-4);if(p+=("0"+(c.getUTCMonth()+1)).slice(-2),p+=("0"+c.getUTCDate()).slice(-2),p+=("0"+c.getUTCHours()).slice(-2),p+=("0"+c.getUTCMinutes()).slice(-2),p+=("0"+c.getUTCSeconds()).slice(-2),f){var N=c.getUTCMilliseconds();0!==N&&(p+="."+(N=(N=("00"+N).slice(-3)).replace(/0+$/g,"")))}return p+"Z"},T.uricmptohex=Xs,T.hextouricmp=hc,T.ipv6tohex=Zl,T.hextoipv6=ns,T.hextoip=nr,T.iptohex=function(c){var u="malformed IP address";if(!(c=c.toLowerCase(c)).match(/^[0-9.]+$/)){if(c.match(/^[0-9a-f:]+$/)&&-1!==c.indexOf(":"))return Zl(c);throw u}var f=c.split(".");if(4!==f.length)throw u;var p="";try{for(var w=0;w<4;w++)p+=("0"+parseInt(f[w]).toString(16)).slice(-2);return p}catch{throw u}},T.encodeURIComponentAll=pc,T.newline_toUnix=function(c){return c.replace(/\r\n/gm,"\n")},T.newline_toDos=function(c){return(c=c.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},T.hextoposhex=gc,T.intarystrtohex=function(c){c=(c=(c=c.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return c.split(/,/).map(function(u,f,p){var w=parseInt(u);if(w<0||255<w)throw"integer not in range 0-255";return("00"+w.toString(16)).slice(-2)}).join("")}catch(u){throw"malformed integer array string: "+u}},T.strdiffidx=function(c,u){var f=c.length;c.length>u.length&&(f=u.length);for(var p=0;p<f;p++)if(c.charCodeAt(p)!=u.charCodeAt(p))return p;return c.length!=u.length?f:-1},T.KJUR=$,T.crypto=$.crypto,T.asn1=$.asn1,T.jws=$.jws,T.lang=$.lang}).call(this,H(27).Buffer)},function(ye,T,H){"use strict";(function(k){var y=H(29),M=H(30),E=H(31);function g(){return _.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function v(Y,C){if(g()<C)throw new RangeError("Invalid typed array length");return _.TYPED_ARRAY_SUPPORT?(Y=new Uint8Array(C)).__proto__=_.prototype:(null===Y&&(Y=new _(C)),Y.length=C),Y}function _(Y,C,S){if(!(_.TYPED_ARRAY_SUPPORT||this instanceof _))return new _(Y,C,S);if("number"==typeof Y){if("string"==typeof C)throw new Error("If encoding is specified then the first argument must be a string");return j(this,Y)}return I(this,Y,C,S)}function I(Y,C,S,K){if("number"==typeof C)throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&C instanceof ArrayBuffer?function(ee,fe,Fe,Ie){if(Fe<0||fe.byteLength<Fe)throw new RangeError("'offset' is out of bounds");if(fe.byteLength<Fe+(Ie||0))throw new RangeError("'length' is out of bounds");return fe=void 0===Fe&&void 0===Ie?new Uint8Array(fe):void 0===Ie?new Uint8Array(fe,Fe):new Uint8Array(fe,Fe,Ie),_.TYPED_ARRAY_SUPPORT?(ee=fe).__proto__=_.prototype:ee=L(ee,fe),ee}(Y,C,S,K):"string"==typeof C?function(ee,fe,Fe){if("string"==typeof Fe&&""!==Fe||(Fe="utf8"),!_.isEncoding(Fe))throw new TypeError('"encoding" must be a valid string encoding');var Ie=0|F(fe,Fe),pt=(ee=v(ee,Ie)).write(fe,Fe);return pt!==Ie&&(ee=ee.slice(0,pt)),ee}(Y,C,S):function(ee,fe){if(_.isBuffer(fe)){var Fe=0|O(fe.length);return 0===(ee=v(ee,Fe)).length||fe.copy(ee,0,0,Fe),ee}if(fe){if(typeof ArrayBuffer<"u"&&fe.buffer instanceof ArrayBuffer||"length"in fe)return"number"!=typeof fe.length||(pt=fe.length)!=pt?v(ee,0):L(ee,fe);if("Buffer"===fe.type&&E(fe.data))return L(ee,fe.data)}var pt;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(Y,C)}function D(Y){if("number"!=typeof Y)throw new TypeError('"size" argument must be a number');if(Y<0)throw new RangeError('"size" argument must not be negative')}function j(Y,C){if(D(C),Y=v(Y,C<0?0:0|O(C)),!_.TYPED_ARRAY_SUPPORT)for(var S=0;S<C;++S)Y[S]=0;return Y}function L(Y,C){var S=C.length<0?0:0|O(C.length);Y=v(Y,S);for(var K=0;K<S;K+=1)Y[K]=255&C[K];return Y}function O(Y){if(Y>=g())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g().toString(16)+" bytes");return 0|Y}function F(Y,C){if(_.isBuffer(Y))return Y.length;if(typeof ArrayBuffer<"u"&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(Y)||Y instanceof ArrayBuffer))return Y.byteLength;"string"!=typeof Y&&(Y=""+Y);var S=Y.length;if(0===S)return 0;for(var K=!1;;)switch(C){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":case void 0:return Zn(Y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*S;case"hex":return S>>>1;case"base64":return dr(Y).length;default:if(K)return Zn(Y).length;C=(""+C).toLowerCase(),K=!0}}function x(Y,C,S){var K=Y[C];Y[C]=Y[S],Y[S]=K}function A(Y,C,S,K,te){if(0===Y.length)return-1;if("string"==typeof S?(K=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),S=+S,isNaN(S)&&(S=te?0:Y.length-1),S<0&&(S=Y.length+S),S>=Y.length){if(te)return-1;S=Y.length-1}else if(S<0){if(!te)return-1;S=0}if("string"==typeof C&&(C=_.from(C,K)),_.isBuffer(C))return 0===C.length?-1:P(Y,C,S,K,te);if("number"==typeof C)return C&=255,_.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?te?Uint8Array.prototype.indexOf.call(Y,C,S):Uint8Array.prototype.lastIndexOf.call(Y,C,S):P(Y,[C],S,K,te);throw new TypeError("val must be string, number or Buffer")}function P(Y,C,S,K,te){var ee,fe=1,Fe=Y.length,Ie=C.length;if(void 0!==K&&("ucs2"===(K=String(K).toLowerCase())||"ucs-2"===K||"utf16le"===K||"utf-16le"===K)){if(Y.length<2||C.length<2)return-1;fe=2,Fe/=2,Ie/=2,S/=2}function pt(fr,Gt){return 1===fe?fr[Gt]:fr.readUInt16BE(Gt*fe)}if(te){var Ct=-1;for(ee=S;ee<Fe;ee++)if(pt(Y,ee)===pt(C,-1===Ct?0:ee-Ct)){if(-1===Ct&&(Ct=ee),ee-Ct+1===Ie)return Ct*fe}else-1!==Ct&&(ee-=ee-Ct),Ct=-1}else for(S+Ie>Fe&&(S=Fe-Ie),ee=S;ee>=0;ee--){for(var mt=!0,hi=0;hi<Ie;hi++)if(pt(Y,ee+hi)!==pt(C,hi)){mt=!1;break}if(mt)return ee}return-1}function q(Y,C,S,K){S=Number(S)||0;var te=Y.length-S;K?(K=Number(K))>te&&(K=te):K=te;var ee=C.length;if(ee%2!=0)throw new TypeError("Invalid hex string");K>ee/2&&(K=ee/2);for(var fe=0;fe<K;++fe){var Fe=parseInt(C.substr(2*fe,2),16);if(isNaN(Fe))return fe;Y[S+fe]=Fe}return fe}function se(Y,C,S,K){return Ar(Zn(C,Y.length-S),Y,S,K)}function ie(Y,C,S,K){return Ar(function(ee){for(var fe=[],Fe=0;Fe<ee.length;++Fe)fe.push(255&ee.charCodeAt(Fe));return fe}(C),Y,S,K)}function Ee(Y,C,S,K){return ie(Y,C,S,K)}function Se(Y,C,S,K){return Ar(dr(C),Y,S,K)}function ze(Y,C,S,K){return Ar(function(ee,fe){for(var Fe,Ie,Ct=[],mt=0;mt<ee.length&&!((fe-=2)<0);++mt)Ie=(Fe=ee.charCodeAt(mt))>>8,Ct.push(Fe%256),Ct.push(Ie);return Ct}(C,Y.length-S),Y,S,K)}function vt(Y,C,S){return y.fromByteArray(0===C&&S===Y.length?Y:Y.slice(C,S))}function Z(Y,C,S){S=Math.min(Y.length,S);for(var K=[],te=C;te<S;){var ee,fe,Fe,Ie,pt=Y[te],Ct=null,mt=pt>239?4:pt>223?3:pt>191?2:1;if(te+mt<=S)switch(mt){case 1:pt<128&&(Ct=pt);break;case 2:128==(192&(ee=Y[te+1]))&&(Ie=(31&pt)<<6|63&ee)>127&&(Ct=Ie);break;case 3:fe=Y[te+2],128==(192&(ee=Y[te+1]))&&128==(192&fe)&&(Ie=(15&pt)<<12|(63&ee)<<6|63&fe)>2047&&(Ie<55296||Ie>57343)&&(Ct=Ie);break;case 4:fe=Y[te+2],Fe=Y[te+3],128==(192&(ee=Y[te+1]))&&128==(192&fe)&&128==(192&Fe)&&(Ie=(15&pt)<<18|(63&ee)<<12|(63&fe)<<6|63&Fe)>65535&&Ie<1114112&&(Ct=Ie)}null===Ct?(Ct=65533,mt=1):Ct>65535&&(K.push((Ct-=65536)>>>10&1023|55296),Ct=56320|1023&Ct),K.push(Ct),te+=mt}return function(fr){var Gt=fr.length;if(Gt<=Ze)return String.fromCharCode.apply(String,fr);for(var qs="",jr=0;jr<Gt;)qs+=String.fromCharCode.apply(String,fr.slice(jr,jr+=Ze));return qs}(K)}T.Buffer=_,T.SlowBuffer=function(C){return+C!=C&&(C=0),_.alloc(+C)},T.INSPECT_MAX_BYTES=50,_.TYPED_ARRAY_SUPPORT=void 0!==k.TYPED_ARRAY_SUPPORT?k.TYPED_ARRAY_SUPPORT:function(){try{var C=new Uint8Array(1);return C.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===C.foo()&&"function"==typeof C.subarray&&0===C.subarray(1,1).byteLength}catch{return!1}}(),T.kMaxLength=g(),_.poolSize=8192,_._augment=function(Y){return Y.__proto__=_.prototype,Y},_.from=function(Y,C,S){return I(null,Y,C,S)},_.TYPED_ARRAY_SUPPORT&&(_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0})),_.alloc=function(Y,C,S){return null,fe=C,Fe=S,D(ee=Y),ee<=0?v(null,ee):void 0!==fe?"string"==typeof Fe?v(null,ee).fill(fe,Fe):v(null,ee).fill(fe):v(null,ee);var ee,fe,Fe},_.allocUnsafe=function(Y){return j(null,Y)},_.allocUnsafeSlow=function(Y){return j(null,Y)},_.isBuffer=function(C){return!(null==C||!C._isBuffer)},_.compare=function(C,S){if(!_.isBuffer(C)||!_.isBuffer(S))throw new TypeError("Arguments must be Buffers");if(C===S)return 0;for(var K=C.length,te=S.length,ee=0,fe=Math.min(K,te);ee<fe;++ee)if(C[ee]!==S[ee]){K=C[ee],te=S[ee];break}return K<te?-1:te<K?1:0},_.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(C,S){if(!E(C))throw new TypeError('"list" argument must be an Array of Buffers');if(0===C.length)return _.alloc(0);var K;if(void 0===S)for(S=0,K=0;K<C.length;++K)S+=C[K].length;var te=_.allocUnsafe(S),ee=0;for(K=0;K<C.length;++K){var fe=C[K];if(!_.isBuffer(fe))throw new TypeError('"list" argument must be an Array of Buffers');fe.copy(te,ee),ee+=fe.length}return te},_.byteLength=F,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var C=this.length;if(C%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var S=0;S<C;S+=2)x(this,S,S+1);return this},_.prototype.swap32=function(){var C=this.length;if(C%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var S=0;S<C;S+=4)x(this,S,S+3),x(this,S+1,S+2);return this},_.prototype.swap64=function(){var C=this.length;if(C%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var S=0;S<C;S+=8)x(this,S,S+7),x(this,S+1,S+6),x(this,S+2,S+5),x(this,S+3,S+4);return this},_.prototype.toString=function(){var C=0|this.length;return 0===C?"":0===arguments.length?Z(this,0,C):function(K,te,ee){var fe=!1;if((void 0===te||te<0)&&(te=0),te>this.length||((void 0===ee||ee>this.length)&&(ee=this.length),ee<=0)||(ee>>>=0)<=(te>>>=0))return"";for(K||(K="utf8");;)switch(K){case"hex":return pn(this,te,ee);case"utf8":case"utf-8":return Z(this,te,ee);case"ascii":return nn(this,te,ee);case"latin1":case"binary":return qe(this,te,ee);case"base64":return vt(this,te,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return jt(this,te,ee);default:if(fe)throw new TypeError("Unknown encoding: "+K);K=(K+"").toLowerCase(),fe=!0}}.apply(this,arguments)},_.prototype.equals=function(C){if(!_.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C||0===_.compare(this,C)},_.prototype.inspect=function(){var C="",S=T.INSPECT_MAX_BYTES;return this.length>0&&(C=this.toString("hex",0,S).match(/.{2}/g).join(" "),this.length>S&&(C+=" ... ")),"<Buffer "+C+">"},_.prototype.compare=function(C,S,K,te,ee){if(!_.isBuffer(C))throw new TypeError("Argument must be a Buffer");if(void 0===S&&(S=0),void 0===K&&(K=C?C.length:0),void 0===te&&(te=0),void 0===ee&&(ee=this.length),S<0||K>C.length||te<0||ee>this.length)throw new RangeError("out of range index");if(te>=ee&&S>=K)return 0;if(te>=ee)return-1;if(S>=K)return 1;if(this===C)return 0;for(var fe=(ee>>>=0)-(te>>>=0),Fe=(K>>>=0)-(S>>>=0),Ie=Math.min(fe,Fe),pt=this.slice(te,ee),Ct=C.slice(S,K),mt=0;mt<Ie;++mt)if(pt[mt]!==Ct[mt]){fe=pt[mt],Fe=Ct[mt];break}return fe<Fe?-1:Fe<fe?1:0},_.prototype.includes=function(C,S,K){return-1!==this.indexOf(C,S,K)},_.prototype.indexOf=function(C,S,K){return A(this,C,S,K,!0)},_.prototype.lastIndexOf=function(C,S,K){return A(this,C,S,K,!1)},_.prototype.write=function(C,S,K,te){if(void 0===S)te="utf8",K=this.length,S=0;else if(void 0===K&&"string"==typeof S)te=S,K=this.length,S=0;else{if(!isFinite(S))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");S|=0,isFinite(K)?(K|=0,void 0===te&&(te="utf8")):(te=K,K=void 0)}var ee=this.length-S;if((void 0===K||K>ee)&&(K=ee),C.length>0&&(K<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");for(var fe=!1;;)switch(te){case"hex":return q(this,C,S,K);case"utf8":case"utf-8":return se(this,C,S,K);case"ascii":return ie(this,C,S,K);case"latin1":case"binary":return Ee(this,C,S,K);case"base64":return Se(this,C,S,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ze(this,C,S,K);default:if(fe)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),fe=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ze=4096;function nn(Y,C,S){var K="";S=Math.min(Y.length,S);for(var te=C;te<S;++te)K+=String.fromCharCode(127&Y[te]);return K}function qe(Y,C,S){var K="";S=Math.min(Y.length,S);for(var te=C;te<S;++te)K+=String.fromCharCode(Y[te]);return K}function pn(Y,C,S){var K=Y.length;(!C||C<0)&&(C=0),(!S||S<0||S>K)&&(S=K);for(var te="",ee=C;ee<S;++ee)te+=Fr(Y[ee]);return te}function jt(Y,C,S){for(var K=Y.slice(C,S),te="",ee=0;ee<K.length;ee+=2)te+=String.fromCharCode(K[ee]+256*K[ee+1]);return te}function Ce(Y,C,S){if(Y%1!=0||Y<0)throw new RangeError("offset is not uint");if(Y+C>S)throw new RangeError("Trying to access beyond buffer length")}function Et(Y,C,S,K,te,ee){if(!_.isBuffer(Y))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>te||C<ee)throw new RangeError('"value" argument is out of bounds');if(S+K>Y.length)throw new RangeError("Index out of range")}function At(Y,C,S,K){C<0&&(C=65535+C+1);for(var te=0,ee=Math.min(Y.length-S,2);te<ee;++te)Y[S+te]=(C&255<<8*(K?te:1-te))>>>8*(K?te:1-te)}function Bt(Y,C,S,K){C<0&&(C=4294967295+C+1);for(var te=0,ee=Math.min(Y.length-S,4);te<ee;++te)Y[S+te]=C>>>8*(K?te:3-te)&255}function Yt(Y,C,S,K,te,ee){if(S+K>Y.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function Ht(Y,C,S,K,te){return te||Yt(Y,0,S,4),M.write(Y,C,S,K,23,4),S+4}function gn(Y,C,S,K,te){return te||Yt(Y,0,S,8),M.write(Y,C,S,K,52,8),S+8}_.prototype.slice=function(C,S){var K,te=this.length;if((C=~~C)<0?(C+=te)<0&&(C=0):C>te&&(C=te),(S=void 0===S?te:~~S)<0?(S+=te)<0&&(S=0):S>te&&(S=te),S<C&&(S=C),_.TYPED_ARRAY_SUPPORT)(K=this.subarray(C,S)).__proto__=_.prototype;else{var ee=S-C;K=new _(ee,void 0);for(var fe=0;fe<ee;++fe)K[fe]=this[fe+C]}return K},_.prototype.readUIntLE=function(C,S,K){C|=0,S|=0,K||Ce(C,S,this.length);for(var te=this[C],ee=1,fe=0;++fe<S&&(ee*=256);)te+=this[C+fe]*ee;return te},_.prototype.readUIntBE=function(C,S,K){C|=0,S|=0,K||Ce(C,S,this.length);for(var te=this[C+--S],ee=1;S>0&&(ee*=256);)te+=this[C+--S]*ee;return te},_.prototype.readUInt8=function(C,S){return S||Ce(C,1,this.length),this[C]},_.prototype.readUInt16LE=function(C,S){return S||Ce(C,2,this.length),this[C]|this[C+1]<<8},_.prototype.readUInt16BE=function(C,S){return S||Ce(C,2,this.length),this[C]<<8|this[C+1]},_.prototype.readUInt32LE=function(C,S){return S||Ce(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+16777216*this[C+3]},_.prototype.readUInt32BE=function(C,S){return S||Ce(C,4,this.length),16777216*this[C]+(this[C+1]<<16|this[C+2]<<8|this[C+3])},_.prototype.readIntLE=function(C,S,K){C|=0,S|=0,K||Ce(C,S,this.length);for(var te=this[C],ee=1,fe=0;++fe<S&&(ee*=256);)te+=this[C+fe]*ee;return te>=(ee*=128)&&(te-=Math.pow(2,8*S)),te},_.prototype.readIntBE=function(C,S,K){C|=0,S|=0,K||Ce(C,S,this.length);for(var te=S,ee=1,fe=this[C+--te];te>0&&(ee*=256);)fe+=this[C+--te]*ee;return fe>=(ee*=128)&&(fe-=Math.pow(2,8*S)),fe},_.prototype.readInt8=function(C,S){return S||Ce(C,1,this.length),128&this[C]?-1*(255-this[C]+1):this[C]},_.prototype.readInt16LE=function(C,S){S||Ce(C,2,this.length);var K=this[C]|this[C+1]<<8;return 32768&K?4294901760|K:K},_.prototype.readInt16BE=function(C,S){S||Ce(C,2,this.length);var K=this[C+1]|this[C]<<8;return 32768&K?4294901760|K:K},_.prototype.readInt32LE=function(C,S){return S||Ce(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},_.prototype.readInt32BE=function(C,S){return S||Ce(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},_.prototype.readFloatLE=function(C,S){return S||Ce(C,4,this.length),M.read(this,C,!0,23,4)},_.prototype.readFloatBE=function(C,S){return S||Ce(C,4,this.length),M.read(this,C,!1,23,4)},_.prototype.readDoubleLE=function(C,S){return S||Ce(C,8,this.length),M.read(this,C,!0,52,8)},_.prototype.readDoubleBE=function(C,S){return S||Ce(C,8,this.length),M.read(this,C,!1,52,8)},_.prototype.writeUIntLE=function(C,S,K,te){C=+C,S|=0,K|=0,te||Et(this,C,S,K,Math.pow(2,8*K)-1,0);var ee=1,fe=0;for(this[S]=255&C;++fe<K&&(ee*=256);)this[S+fe]=C/ee&255;return S+K},_.prototype.writeUIntBE=function(C,S,K,te){C=+C,S|=0,K|=0,te||Et(this,C,S,K,Math.pow(2,8*K)-1,0);var ee=K-1,fe=1;for(this[S+ee]=255&C;--ee>=0&&(fe*=256);)this[S+ee]=C/fe&255;return S+K},_.prototype.writeUInt8=function(C,S,K){return C=+C,S|=0,K||Et(this,C,S,1,255,0),_.TYPED_ARRAY_SUPPORT||(C=Math.floor(C)),this[S]=255&C,S+1},_.prototype.writeUInt16LE=function(C,S,K){return C=+C,S|=0,K||Et(this,C,S,2,65535,0),_.TYPED_ARRAY_SUPPORT?(this[S]=255&C,this[S+1]=C>>>8):At(this,C,S,!0),S+2},_.prototype.writeUInt16BE=function(C,S,K){return C=+C,S|=0,K||Et(this,C,S,2,65535,0),_.TYPED_ARRAY_SUPPORT?(this[S]=C>>>8,this[S+1]=255&C):At(this,C,S,!1),S+2},_.prototype.writeUInt32LE=function(C,S,K){return C=+C,S|=0,K||Et(this,C,S,4,4294967295,0),_.TYPED_ARRAY_SUPPORT?(this[S+3]=C>>>24,this[S+2]=C>>>16,this[S+1]=C>>>8,this[S]=255&C):Bt(this,C,S,!0),S+4},_.prototype.writeUInt32BE=function(C,S,K){return C=+C,S|=0,K||Et(this,C,S,4,4294967295,0),_.TYPED_ARRAY_SUPPORT?(this[S]=C>>>24,this[S+1]=C>>>16,this[S+2]=C>>>8,this[S+3]=255&C):Bt(this,C,S,!1),S+4},_.prototype.writeIntLE=function(C,S,K,te){if(C=+C,S|=0,!te){var ee=Math.pow(2,8*K-1);Et(this,C,S,K,ee-1,-ee)}var fe=0,Fe=1,Ie=0;for(this[S]=255&C;++fe<K&&(Fe*=256);)C<0&&0===Ie&&0!==this[S+fe-1]&&(Ie=1),this[S+fe]=(C/Fe>>0)-Ie&255;return S+K},_.prototype.writeIntBE=function(C,S,K,te){if(C=+C,S|=0,!te){var ee=Math.pow(2,8*K-1);Et(this,C,S,K,ee-1,-ee)}var fe=K-1,Fe=1,Ie=0;for(this[S+fe]=255&C;--fe>=0&&(Fe*=256);)C<0&&0===Ie&&0!==this[S+fe+1]&&(Ie=1),this[S+fe]=(C/Fe>>0)-Ie&255;return S+K},_.prototype.writeInt8=function(C,S,K){return C=+C,S|=0,K||Et(this,C,S,1,127,-128),_.TYPED_ARRAY_SUPPORT||(C=Math.floor(C)),C<0&&(C=255+C+1),this[S]=255&C,S+1},_.prototype.writeInt16LE=function(C,S,K){return C=+C,S|=0,K||Et(this,C,S,2,32767,-32768),_.TYPED_ARRAY_SUPPORT?(this[S]=255&C,this[S+1]=C>>>8):At(this,C,S,!0),S+2},_.prototype.writeInt16BE=function(C,S,K){return C=+C,S|=0,K||Et(this,C,S,2,32767,-32768),_.TYPED_ARRAY_SUPPORT?(this[S]=C>>>8,this[S+1]=255&C):At(this,C,S,!1),S+2},_.prototype.writeInt32LE=function(C,S,K){return C=+C,S|=0,K||Et(this,C,S,4,2147483647,-2147483648),_.TYPED_ARRAY_SUPPORT?(this[S]=255&C,this[S+1]=C>>>8,this[S+2]=C>>>16,this[S+3]=C>>>24):Bt(this,C,S,!0),S+4},_.prototype.writeInt32BE=function(C,S,K){return C=+C,S|=0,K||Et(this,C,S,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),_.TYPED_ARRAY_SUPPORT?(this[S]=C>>>24,this[S+1]=C>>>16,this[S+2]=C>>>8,this[S+3]=255&C):Bt(this,C,S,!1),S+4},_.prototype.writeFloatLE=function(C,S,K){return Ht(this,C,S,!0,K)},_.prototype.writeFloatBE=function(C,S,K){return Ht(this,C,S,!1,K)},_.prototype.writeDoubleLE=function(C,S,K){return gn(this,C,S,!0,K)},_.prototype.writeDoubleBE=function(C,S,K){return gn(this,C,S,!1,K)},_.prototype.copy=function(C,S,K,te){if(K||(K=0),te||0===te||(te=this.length),S>=C.length&&(S=C.length),S||(S=0),te>0&&te<K&&(te=K),te===K||0===C.length||0===this.length)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("sourceStart out of bounds");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),C.length-S<te-K&&(te=C.length-S+K);var ee,fe=te-K;if(this===C&&K<S&&S<te)for(ee=fe-1;ee>=0;--ee)C[ee+S]=this[ee+K];else if(fe<1e3||!_.TYPED_ARRAY_SUPPORT)for(ee=0;ee<fe;++ee)C[ee+S]=this[ee+K];else Uint8Array.prototype.set.call(C,this.subarray(K,K+fe),S);return fe},_.prototype.fill=function(C,S,K,te){if("string"==typeof C){if("string"==typeof S?(te=S,S=0,K=this.length):"string"==typeof K&&(te=K,K=this.length),1===C.length){var ee=C.charCodeAt(0);ee<256&&(C=ee)}if(void 0!==te&&"string"!=typeof te)throw new TypeError("encoding must be a string");if("string"==typeof te&&!_.isEncoding(te))throw new TypeError("Unknown encoding: "+te)}else"number"==typeof C&&(C&=255);if(S<0||this.length<S||this.length<K)throw new RangeError("Out of range index");if(K<=S)return this;var fe;if(S>>>=0,K=void 0===K?this.length:K>>>0,C||(C=0),"number"==typeof C)for(fe=S;fe<K;++fe)this[fe]=C;else{var Fe=_.isBuffer(C)?C:Zn(new _(C,te).toString()),Ie=Fe.length;for(fe=0;fe<K-S;++fe)this[fe+S]=Fe[fe%Ie]}return this};var Vr=/[^+\/0-9A-Za-z-_]/g;function Fr(Y){return Y<16?"0"+Y.toString(16):Y.toString(16)}function Zn(Y,C){var S;C=C||1/0;for(var K=Y.length,te=null,ee=[],fe=0;fe<K;++fe){if((S=Y.charCodeAt(fe))>55295&&S<57344){if(!te){if(S>56319){(C-=3)>-1&&ee.push(239,191,189);continue}if(fe+1===K){(C-=3)>-1&&ee.push(239,191,189);continue}te=S;continue}if(S<56320){(C-=3)>-1&&ee.push(239,191,189),te=S;continue}S=65536+(te-55296<<10|S-56320)}else te&&(C-=3)>-1&&ee.push(239,191,189);if(te=null,S<128){if((C-=1)<0)break;ee.push(S)}else if(S<2048){if((C-=2)<0)break;ee.push(S>>6|192,63&S|128)}else if(S<65536){if((C-=3)<0)break;ee.push(S>>12|224,S>>6&63|128,63&S|128)}else{if(!(S<1114112))throw new Error("Invalid code point");if((C-=4)<0)break;ee.push(S>>18|240,S>>12&63|128,S>>6&63|128,63&S|128)}}return ee}function dr(Y){return y.toByteArray(function(S){if((S=(te=S,te.trim?te.trim():te.replace(/^\s+|\s+$/g,"")).replace(Vr,"")).length<2)return"";for(var te;S.length%4!=0;)S+="=";return S}(Y))}function Ar(Y,C,S,K){for(var te=0;te<K&&!(te+S>=C.length||te>=Y.length);++te)C[te+S]=Y[te];return te}}).call(this,H(28))},function(ye,T){var H;H=function(){return this}();try{H=H||new Function("return this")()}catch{"object"==typeof window&&(H=window)}ye.exports=H},function(ye,T,H){"use strict";T.byteLength=function(j){var L=_(j),F=L[1];return 3*(L[0]+F)/4-F},T.toByteArray=function(j){for(var L,O=_(j),F=O[0],x=O[1],A=new M(3*(F+(ze=x))/4-ze),P=0,q=x>0?F-4:F,se=0;se<q;se+=4)L=y[j.charCodeAt(se)]<<18|y[j.charCodeAt(se+1)]<<12|y[j.charCodeAt(se+2)]<<6|y[j.charCodeAt(se+3)],A[P++]=L>>16&255,A[P++]=L>>8&255,A[P++]=255&L;var ze;return 2===x&&(L=y[j.charCodeAt(se)]<<2|y[j.charCodeAt(se+1)]>>4,A[P++]=255&L),1===x&&(L=y[j.charCodeAt(se)]<<10|y[j.charCodeAt(se+1)]<<4|y[j.charCodeAt(se+2)]>>2,A[P++]=L>>8&255,A[P++]=255&L),A},T.fromByteArray=function(j){for(var L,O=j.length,F=O%3,x=[],A=0,P=O-F;A<P;A+=16383)x.push(I(j,A,A+16383>P?P:A+16383));return 1===F?x.push(k[(L=j[O-1])>>2]+k[L<<4&63]+"=="):2===F&&x.push(k[(L=(j[O-2]<<8)+j[O-1])>>10]+k[L>>4&63]+k[L<<2&63]+"="),x.join("")};for(var k=[],y=[],M=typeof Uint8Array<"u"?Uint8Array:Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,v=E.length;g<v;++g)k[g]=E[g],y[E.charCodeAt(g)]=g;function _(D){var j=D.length;if(j%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var L=D.indexOf("=");return-1===L&&(L=j),[L,L===j?0:4-L%4]}function I(D,j,L){for(var F,x=[],A=j;A<L;A+=3)x.push(k[(F=(D[A]<<16&16711680)+(D[A+1]<<8&65280)+(255&D[A+2]))>>18&63]+k[F>>12&63]+k[F>>6&63]+k[63&F]);return x.join("")}y["-".charCodeAt(0)]=62,y["_".charCodeAt(0)]=63},function(ye,T){T.read=function(H,k,y,M,E){var g,v,_=8*E-M-1,I=(1<<_)-1,D=I>>1,j=-7,L=y?E-1:0,O=y?-1:1,F=H[k+L];for(L+=O,g=F&(1<<-j)-1,F>>=-j,j+=_;j>0;g=256*g+H[k+L],L+=O,j-=8);for(v=g&(1<<-j)-1,g>>=-j,j+=M;j>0;v=256*v+H[k+L],L+=O,j-=8);if(0===g)g=1-D;else{if(g===I)return v?NaN:1/0*(F?-1:1);v+=Math.pow(2,M),g-=D}return(F?-1:1)*v*Math.pow(2,g-M)},T.write=function(H,k,y,M,E,g){var v,_,I,D=8*g-E-1,j=(1<<D)-1,L=j>>1,O=23===E?Math.pow(2,-24)-Math.pow(2,-77):0,F=M?0:g-1,x=M?1:-1,A=k<0||0===k&&1/k<0?1:0;for(k=Math.abs(k),isNaN(k)||k===1/0?(_=isNaN(k)?1:0,v=j):(v=Math.floor(Math.log(k)/Math.LN2),k*(I=Math.pow(2,-v))<1&&(v--,I*=2),(k+=v+L>=1?O/I:O*Math.pow(2,1-L))*I>=2&&(v++,I/=2),v+L>=j?(_=0,v=j):v+L>=1?(_=(k*I-1)*Math.pow(2,E),v+=L):(_=k*Math.pow(2,L-1)*Math.pow(2,E),v=0));E>=8;H[y+F]=255&_,F+=x,_/=256,E-=8);for(v=v<<E|_,D+=E;D>0;H[y+F]=255&v,F+=x,v/=256,D-=8);H[y+F-x]|=128*A}},function(ye,T){var H={}.toString;ye.exports=Array.isArray||function(k){return"[object Array]"==H.call(k)}},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(M){var E=M.jws,g=M.KeyUtil,v=M.X509,_=M.crypto,I=M.hextob64u,D=M.b64tohex,j=M.AllowedSigningAlgs;return function(){function L(){!function(F,x){if(!(F instanceof x))throw new TypeError("Cannot call a class as a function")}(this,L)}return L.parseJwt=function(F){k.Log.debug("JoseUtil.parseJwt");try{var x=E.JWS.parse(F);return{header:x.headerObj,payload:x.payloadObj}}catch(A){k.Log.error(A)}},L.validateJwt=function(F,x,A,P,q,se,ie){k.Log.debug("JoseUtil.validateJwt");try{if("RSA"===x.kty)if(x.e&&x.n)x=g.getKey(x);else{if(!x.x5c||!x.x5c.length)return k.Log.error("JoseUtil.validateJwt: RSA key missing key material",x),Promise.reject(new Error("RSA key missing key material"));var Ee=D(x.x5c[0]);x=v.getPublicKeyFromCertHex(Ee)}else{if("EC"!==x.kty)return k.Log.error("JoseUtil.validateJwt: Unsupported key type",x&&x.kty),Promise.reject(new Error(x.kty));if(!(x.crv&&x.x&&x.y))return k.Log.error("JoseUtil.validateJwt: EC key missing key material",x),Promise.reject(new Error("EC key missing key material"));x=g.getKey(x)}return L._validateJwt(F,x,A,P,q,se,ie)}catch(Se){return k.Log.error(Se&&Se.message||Se),Promise.reject("JWT validation failed")}},L.validateJwtAttributes=function(F,x,A,P,q,se){P||(P=0),q||(q=parseInt(Date.now()/1e3));var ie=L.parseJwt(F).payload;if(!ie.iss)return k.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(ie.iss!==x)return k.Log.error("JoseUtil._validateJwt: Invalid issuer in token",ie.iss),Promise.reject(new Error("Invalid issuer in token: "+ie.iss));if(!ie.aud)return k.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(ie.aud===A||Array.isArray(ie.aud)&&ie.aud.indexOf(A)>=0))return k.Log.error("JoseUtil._validateJwt: Invalid audience in token",ie.aud),Promise.reject(new Error("Invalid audience in token: "+ie.aud));if(ie.azp&&ie.azp!==A)return k.Log.error("JoseUtil._validateJwt: Invalid azp in token",ie.azp),Promise.reject(new Error("Invalid azp in token: "+ie.azp));if(!se){var Se=q+P,ze=q-P;if(!ie.iat)return k.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(Se<ie.iat)return k.Log.error("JoseUtil._validateJwt: iat is in the future",ie.iat),Promise.reject(new Error("iat is in the future: "+ie.iat));if(ie.nbf&&Se<ie.nbf)return k.Log.error("JoseUtil._validateJwt: nbf is in the future",ie.nbf),Promise.reject(new Error("nbf is in the future: "+ie.nbf));if(!ie.exp)return k.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(ie.exp<ze)return k.Log.error("JoseUtil._validateJwt: exp is in the past",ie.exp),Promise.reject(new Error("exp is in the past:"+ie.exp))}return Promise.resolve(ie)},L._validateJwt=function(F,x,A,P,q,se,ie){return L.validateJwtAttributes(F,A,P,q,se,ie).then(function(Ee){try{return E.JWS.verify(F,x,j)?Ee:(k.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(Se){return k.Log.error(Se&&Se.message||Se),Promise.reject(new Error("signature validation failed"))}})},L.hashString=function(F,x){try{return _.Util.hashString(F,x)}catch(A){k.Log.error(A)}},L.hexToBase64Url=function(F){try{return I(F)}catch(x){k.Log.error(x)}},L}()};var k=H(0);ye.exports=T.default},function(ye,T,H){var k=H(34),y=H(35);ye.exports=function(E,g,v){var _=g&&v||0;"string"==typeof E&&(g="binary"===E?new Array(16):null,E=null);var I=(E=E||{}).random||(E.rng||k)();if(I[6]=15&I[6]|64,I[8]=63&I[8]|128,g)for(var D=0;D<16;++D)g[_+D]=I[D];return g||y(I)}},function(ye,T){var H=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(H){var k=new Uint8Array(16);ye.exports=function(){return H(k),k}}else{var y=new Array(16);ye.exports=function(){for(var E,g=0;g<16;g++)0==(3&g)&&(E=4294967296*Math.random()),y[g]=E>>>((3&g)<<3)&255;return y}}},function(ye,T){for(var H=[],k=0;k<256;++k)H[k]=(k+256).toString(16).substr(1);ye.exports=function(M,E){var g=E||0;return[H[M[g++]],H[M[g++]],H[M[g++]],H[M[g++]],"-",H[M[g++]],H[M[g++]],"-",H[M[g++]],H[M[g++]],"-",H[M[g++]],H[M[g++]],"-",H[M[g++]],H[M[g++]],H[M[g++]],H[M[g++]],H[M[g++]],H[M[g++]]].join("")}},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SigninResponse=void 0;var k=function(){function M(E,g){for(var v=0;v<g.length;v++){var _=g[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(E,_.key,_)}}return function(E,g,v){return g&&M(E.prototype,g),v&&M(E,v),E}}(),y=H(3);T.SigninResponse=function(){function M(E){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";!function(I,D){if(!(I instanceof D))throw new TypeError("Cannot call a class as a function")}(this,M);var v=y.UrlUtility.parseUrlFragment(E,g);this.error=v.error,this.error_description=v.error_description,this.error_uri=v.error_uri,this.code=v.code,this.state=v.state,this.id_token=v.id_token,this.session_state=v.session_state,this.access_token=v.access_token,this.token_type=v.token_type,this.scope=v.scope,this.profile=void 0,this.expires_in=v.expires_in}return k(M,[{key:"expires_in",get:function(){if(this.expires_at){var g=parseInt(Date.now()/1e3);return this.expires_at-g}},set:function(g){var v=parseInt(g);if("number"==typeof v&&v>0){var _=parseInt(Date.now()/1e3);this.expires_at=_+v}}},{key:"expired",get:function(){var g=this.expires_in;if(void 0!==g)return g<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),M}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SignoutRequest=void 0;var k=H(0),y=H(3),M=H(8);T.SignoutRequest=function E(g){var v=g.url,_=g.id_token_hint,I=g.post_logout_redirect_uri,D=g.data,j=g.extraQueryParams,L=g.request_type;if(function(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")}(this,E),!v)throw k.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var O in _&&(v=y.UrlUtility.addQueryParam(v,"id_token_hint",_)),I&&(v=y.UrlUtility.addQueryParam(v,"post_logout_redirect_uri",I),D&&(this.state=new M.State({data:D,request_type:L}),v=y.UrlUtility.addQueryParam(v,"state",this.state.id))),j)v=y.UrlUtility.addQueryParam(v,O,j[O]);this.url=v}},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SignoutResponse=void 0;var k=H(3);T.SignoutResponse=function y(M){!function(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}(this,y);var E=k.UrlUtility.parseUrlFragment(M,"?");this.error=E.error,this.error_description=E.error_description,this.error_uri=E.error_uri,this.state=E.state}},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.InMemoryWebStorage=void 0;var k=function(){function M(E,g){for(var v=0;v<g.length;v++){var _=g[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(E,_.key,_)}}return function(E,g,v){return g&&M(E.prototype,g),v&&M(E,v),E}}(),y=H(0);T.InMemoryWebStorage=function(){function M(){(function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")})(this,M),this._data={}}return M.prototype.getItem=function(g){return y.Log.debug("InMemoryWebStorage.getItem",g),this._data[g]},M.prototype.setItem=function(g,v){y.Log.debug("InMemoryWebStorage.setItem",g),this._data[g]=v},M.prototype.removeItem=function(g){y.Log.debug("InMemoryWebStorage.removeItem",g),delete this._data[g]},M.prototype.key=function(g){return Object.getOwnPropertyNames(this._data)[g]},k(M,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),M}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.UserManager=void 0;var k=function(){function O(F,x){for(var A=0;A<x.length;A++){var P=x[A];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(F,P.key,P)}}return function(F,x,A){return x&&O(F.prototype,x),A&&O(F,A),F}}(),y=H(0),M=H(9),E=H(41),g=H(15),v=H(47),_=H(49),I=H(18),D=H(20),j=H(10),L=H(4);T.UserManager=function(O){function F(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.SilentRenewService,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I.SessionMonitor,q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:D.TokenRevocationClient,se=arguments.length>4&&void 0!==arguments[4]?arguments[4]:j.TokenClient,ie=arguments.length>5&&void 0!==arguments[5]?arguments[5]:L.JoseUtil;(function(ze,vt){if(!(ze instanceof vt))throw new TypeError("Cannot call a class as a function")})(this,F),x instanceof E.UserManagerSettings||(x=new E.UserManagerSettings(x));var Ee=function(ze,vt){if(!ze)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!vt||"object"!=typeof vt&&"function"!=typeof vt?ze:vt}(this,O.call(this,x));return Ee._events=new v.UserManagerEvents(x),Ee._silentRenewService=new A(Ee),Ee.settings.automaticSilentRenew&&(y.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),Ee.startSilentRenew()),Ee.settings.monitorSession&&(y.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),Ee._sessionMonitor=new P(Ee)),Ee._tokenRevocationClient=new q(Ee._settings),Ee._tokenClient=new se(Ee._settings),Ee._joseUtil=ie,Ee}return function(A,P){if("function"!=typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function, not "+typeof P);A.prototype=Object.create(P&&P.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(A,P):A.__proto__=P)}(F,O),F.prototype.getUser=function(){var A=this;return this._loadUser().then(function(P){return P?(y.Log.info("UserManager.getUser: user loaded"),A._events.load(P,!1),P):(y.Log.info("UserManager.getUser: user not found in storage"),null)})},F.prototype.removeUser=function(){var A=this;return this.storeUser(null).then(function(){y.Log.info("UserManager.removeUser: user removed from storage"),A._events.unload()})},F.prototype.signinRedirect=function(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(A=Object.assign({},A)).request_type="si:r",this._signinStart(A,this._redirectNavigator,{useReplaceToNavigate:A.useReplaceToNavigate}).then(function(){y.Log.info("UserManager.signinRedirect: successful")})},F.prototype.signinRedirectCallback=function(A){return this._signinEnd(A||this._redirectNavigator.url).then(function(P){return P.profile&&P.profile.sub?y.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",P.profile.sub):y.Log.info("UserManager.signinRedirectCallback: no sub"),P})},F.prototype.signinPopup=function(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(A=Object.assign({},A)).request_type="si:p";var P=A.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return P?(A.redirect_uri=P,A.display="popup",this._signin(A,this._popupNavigator,{startUrl:P,popupWindowFeatures:A.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:A.popupWindowTarget||this.settings.popupWindowTarget}).then(function(q){return q&&(q.profile&&q.profile.sub?y.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",q.profile.sub):y.Log.info("UserManager.signinPopup: no sub")),q})):(y.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},F.prototype.signinPopupCallback=function(A){return this._signinCallback(A,this._popupNavigator).then(function(P){return P&&(P.profile&&P.profile.sub?y.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",P.profile.sub):y.Log.info("UserManager.signinPopupCallback: no sub")),P}).catch(function(P){y.Log.error(P.message)})},F.prototype.signinSilent=function(){var A=this,P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(P=Object.assign({},P)).request_type="si:s",this._loadUser().then(function(q){return q&&q.refresh_token?(P.refresh_token=q.refresh_token,A._useRefreshToken(P)):(P.id_token_hint=P.id_token_hint||A.settings.includeIdTokenInSilentRenew&&q&&q.id_token,q&&A._settings.validateSubOnSilentRenew&&(y.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",q.profile.sub),P.current_sub=q.profile.sub),A._signinSilentIframe(P))})},F.prototype._useRefreshToken=function(){var A=this;return this._tokenClient.exchangeRefreshToken(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).then(function(q){return q?q.access_token?A._loadUser().then(function(se){if(se){var ie=Promise.resolve();return q.id_token&&(ie=A._validateIdTokenFromTokenRefreshToken(se.profile,q.id_token)),ie.then(function(){return y.Log.debug("UserManager._useRefreshToken: refresh token response success"),se.id_token=q.id_token,se.access_token=q.access_token,se.refresh_token=q.refresh_token||se.refresh_token,se.expires_in=q.expires_in,A.storeUser(se).then(function(){return A._events.load(se),se})})}return null}):(y.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(y.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},F.prototype._validateIdTokenFromTokenRefreshToken=function(A,P){var q=this;return this._metadataService.getIssuer().then(function(se){return q._joseUtil.validateJwtAttributes(P,se,q._settings.client_id,q._settings.clockSkew).then(function(ie){return ie?ie.sub!==A.sub?(y.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):ie.auth_time&&ie.auth_time!==A.auth_time?(y.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):ie.azp&&ie.azp!==A.azp?(y.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!ie.azp&&A.azp?(y.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(y.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})},F.prototype._signinSilentIframe=function(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},P=A.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return P?(A.redirect_uri=P,A.prompt=A.prompt||"none",this._signin(A,this._iframeNavigator,{startUrl:P,silentRequestTimeout:A.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(q){return q&&(q.profile&&q.profile.sub?y.Log.info("UserManager.signinSilent: successful, signed in sub: ",q.profile.sub):y.Log.info("UserManager.signinSilent: no sub")),q})):(y.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},F.prototype.signinSilentCallback=function(A){return this._signinCallback(A,this._iframeNavigator).then(function(P){return P&&(P.profile&&P.profile.sub?y.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",P.profile.sub):y.Log.info("UserManager.signinSilentCallback: no sub")),P})},F.prototype.signinCallback=function(A){var P=this;return this.readSigninResponseState(A).then(function(q){var se=q.state;return"si:r"===se.request_type?P.signinRedirectCallback(A):"si:p"===se.request_type?P.signinPopupCallback(A):"si:s"===se.request_type?P.signinSilentCallback(A):Promise.reject(new Error("invalid response_type in state"))})},F.prototype.signoutCallback=function(A,P){var q=this;return this.readSignoutResponseState(A).then(function(se){var ie=se.state,Ee=se.response;return ie?"so:r"===ie.request_type?q.signoutRedirectCallback(A):"so:p"===ie.request_type?q.signoutPopupCallback(A,P):Promise.reject(new Error("invalid response_type in state")):Ee})},F.prototype.querySessionStatus=function(){var A=this,P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(P=Object.assign({},P)).request_type="si:s";var q=P.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return q?(P.redirect_uri=q,P.prompt="none",P.response_type=P.response_type||this.settings.query_status_response_type,P.scope=P.scope||"openid",P.skipUserInfo=!0,this._signinStart(P,this._iframeNavigator,{startUrl:q,silentRequestTimeout:P.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(se){return A.processSigninResponse(se.url).then(function(ie){if(y.Log.debug("UserManager.querySessionStatus: got signin response"),ie.session_state&&ie.profile.sub)return y.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",ie.profile.sub),{session_state:ie.session_state,sub:ie.profile.sub,sid:ie.profile.sid};y.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(ie){if(ie.session_state&&A.settings.monitorAnonymousSession&&("login_required"==ie.message||"consent_required"==ie.message||"interaction_required"==ie.message||"account_selection_required"==ie.message))return y.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:ie.session_state};throw ie})})):(y.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},F.prototype._signin=function(A,P){var q=this;return this._signinStart(A,P,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(ie){return q._signinEnd(ie.url,A)})},F.prototype._signinStart=function(A,P){var q=this,se=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return P.prepare(se).then(function(ie){return y.Log.debug("UserManager._signinStart: got navigator window handle"),q.createSigninRequest(A).then(function(Ee){return y.Log.debug("UserManager._signinStart: got signin request"),se.url=Ee.url,se.id=Ee.state.id,ie.navigate(se)}).catch(function(Ee){throw ie.close&&(y.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),ie.close()),Ee})})},F.prototype._signinEnd=function(A){var P=this,q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(A).then(function(se){y.Log.debug("UserManager._signinEnd: got signin response");var ie=new g.User(se);if(q.current_sub){if(q.current_sub!==ie.profile.sub)return y.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",ie.profile.sub),Promise.reject(new Error("login_required"));y.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return P.storeUser(ie).then(function(){return y.Log.debug("UserManager._signinEnd: user stored"),P._events.load(ie),ie})})},F.prototype._signinCallback=function(A,P){return y.Log.debug("UserManager._signinCallback"),P.callback(A)},F.prototype.signoutRedirect=function(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(A=Object.assign({},A)).request_type="so:r";var P=A.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return P&&(A.post_logout_redirect_uri=P),this._signoutStart(A,this._redirectNavigator,{useReplaceToNavigate:A.useReplaceToNavigate}).then(function(){y.Log.info("UserManager.signoutRedirect: successful")})},F.prototype.signoutRedirectCallback=function(A){return this._signoutEnd(A||this._redirectNavigator.url).then(function(P){return y.Log.info("UserManager.signoutRedirectCallback: successful"),P})},F.prototype.signoutPopup=function(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(A=Object.assign({},A)).request_type="so:p";var P=A.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return A.post_logout_redirect_uri=P,A.display="popup",A.post_logout_redirect_uri&&(A.state=A.state||{}),this._signout(A,this._popupNavigator,{startUrl:P,popupWindowFeatures:A.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:A.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){y.Log.info("UserManager.signoutPopup: successful")})},F.prototype.signoutPopupCallback=function(A,P){return void 0===P&&"boolean"==typeof A&&(P=A,A=null),this._popupNavigator.callback(A,P,"?").then(function(){y.Log.info("UserManager.signoutPopupCallback: successful")})},F.prototype._signout=function(A,P){var q=this;return this._signoutStart(A,P,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(ie){return q._signoutEnd(ie.url)})},F.prototype._signoutStart=function(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},P=this,se=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return arguments[1].prepare(se).then(function(ie){return y.Log.debug("UserManager._signoutStart: got navigator window handle"),P._loadUser().then(function(Ee){return y.Log.debug("UserManager._signoutStart: loaded current user from storage"),(P._settings.revokeAccessTokenOnSignout?P._revokeInternal(Ee):Promise.resolve()).then(function(){var Se=A.id_token_hint||Ee&&Ee.id_token;return Se&&(y.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),A.id_token_hint=Se),P.removeUser().then(function(){return y.Log.debug("UserManager._signoutStart: user removed, creating signout request"),P.createSignoutRequest(A).then(function(ze){return y.Log.debug("UserManager._signoutStart: got signout request"),se.url=ze.url,ze.state&&(se.id=ze.state.id),ie.navigate(se)})})})}).catch(function(Ee){throw ie.close&&(y.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),ie.close()),Ee})})},F.prototype._signoutEnd=function(A){return this.processSignoutResponse(A).then(function(P){return y.Log.debug("UserManager._signoutEnd: got signout response"),P})},F.prototype.revokeAccessToken=function(){var A=this;return this._loadUser().then(function(P){return A._revokeInternal(P,!0).then(function(q){if(q)return y.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),P.access_token=null,P.refresh_token=null,P.expires_at=null,P.token_type=null,A.storeUser(P).then(function(){y.Log.debug("UserManager.revokeAccessToken: user stored"),A._events.load(P)})})}).then(function(){y.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},F.prototype._revokeInternal=function(A,P){var q=this;if(A){var ie=A.refresh_token;return this._revokeAccessTokenInternal(A.access_token,P).then(function(Ee){return q._revokeRefreshTokenInternal(ie,P).then(function(Se){return Ee||Se||y.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),Ee||Se})})}return Promise.resolve(!1)},F.prototype._revokeAccessTokenInternal=function(A,P){return!A||A.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(A,P).then(function(){return!0})},F.prototype._revokeRefreshTokenInternal=function(A,P){return A?this._tokenRevocationClient.revoke(A,P,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},F.prototype.startSilentRenew=function(){this._silentRenewService.start()},F.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},F.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(A){return A?(y.Log.debug("UserManager._loadUser: user storageString loaded"),g.User.fromStorageString(A)):(y.Log.debug("UserManager._loadUser: no user storageString"),null)})},F.prototype.storeUser=function(A){if(A){y.Log.debug("UserManager.storeUser: storing user");var P=A.toStorageString();return this._userStore.set(this._userStoreKey,P)}return y.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},k(F,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),F}(M.OidcClient)},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.UserManagerSettings=void 0;var k=function(){function L(O,F){for(var x=0;x<F.length;x++){var A=F[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(O,A.key,A)}}return function(O,F,x){return F&&L(O.prototype,F),x&&L(O,x),O}}(),y=(H(0),H(5)),M=H(42),E=H(43),g=H(45),v=H(6),_=H(1),I=H(12);T.UserManagerSettings=function(L){function O(){var F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},x=F.popup_redirect_uri,A=F.popup_post_logout_redirect_uri,P=F.popupWindowFeatures,q=F.popupWindowTarget,se=F.silent_redirect_uri,ie=F.silentRequestTimeout,Ee=F.automaticSilentRenew,Se=void 0!==Ee&&Ee,ze=F.validateSubOnSilentRenew,vt=void 0!==ze&&ze,Z=F.includeIdTokenInSilentRenew,Ze=void 0===Z||Z,nn=F.monitorSession,qe=void 0===nn||nn,pn=F.monitorAnonymousSession,jt=void 0!==pn&&pn,Ce=F.checkSessionInterval,Et=void 0===Ce?2e3:Ce,At=F.stopCheckSessionOnError,Bt=void 0===At||At,Yt=F.query_status_response_type,Ht=F.revokeAccessTokenOnSignout,gn=void 0!==Ht&&Ht,Vr=F.accessTokenExpiringNotificationTime,Fr=void 0===Vr?60:Vr,Zn=F.redirectNavigator,dr=void 0===Zn?new M.RedirectNavigator:Zn,Ar=F.popupNavigator,Y=void 0===Ar?new E.PopupNavigator:Ar,C=F.iframeNavigator,S=void 0===C?new g.IFrameNavigator:C,K=F.userStore,te=void 0===K?new v.WebStorageStateStore({store:_.Global.sessionStorage}):K;!function(Fe,Ie){if(!(Fe instanceof Ie))throw new TypeError("Cannot call a class as a function")}(this,O);var ee=function(Fe,Ie){if(!Fe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Ie||"object"!=typeof Ie&&"function"!=typeof Ie?Fe:Ie}(this,L.call(this,arguments[0]));return ee._popup_redirect_uri=x,ee._popup_post_logout_redirect_uri=A,ee._popupWindowFeatures=P,ee._popupWindowTarget=q,ee._silent_redirect_uri=se,ee._silentRequestTimeout=ie,ee._automaticSilentRenew=Se,ee._validateSubOnSilentRenew=vt,ee._includeIdTokenInSilentRenew=Ze,ee._accessTokenExpiringNotificationTime=Fr,ee._monitorSession=qe,ee._monitorAnonymousSession=jt,ee._checkSessionInterval=Et,ee._stopCheckSessionOnError=Bt,ee._query_status_response_type=Yt||(arguments[0]&&arguments[0].response_type?I.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":"id_token"),ee._revokeAccessTokenOnSignout=gn,ee._redirectNavigator=dr,ee._popupNavigator=Y,ee._iframeNavigator=S,ee._userStore=te,ee}return function(x,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);x.prototype=Object.create(A&&A.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(x,A):x.__proto__=A)}(O,L),k(O,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),O}(y.OidcClientSettings)},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.RedirectNavigator=void 0;var k=function(){function M(E,g){for(var v=0;v<g.length;v++){var _=g[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(E,_.key,_)}}return function(E,g,v){return g&&M(E.prototype,g),v&&M(E,v),E}}(),y=H(0);T.RedirectNavigator=function(){function M(){!function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}(this,M)}return M.prototype.prepare=function(){return Promise.resolve(this)},M.prototype.navigate=function(g){return g&&g.url?(g.useReplaceToNavigate?window.location.replace(g.url):window.location=g.url,Promise.resolve()):(y.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},k(M,[{key:"url",get:function(){return window.location.href}}]),M}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.PopupNavigator=void 0;var k=H(0),y=H(44);T.PopupNavigator=function(){function M(){!function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}(this,M)}return M.prototype.prepare=function(g){var v=new y.PopupWindow(g);return Promise.resolve(v)},M.prototype.callback=function(g,v,_){k.Log.debug("PopupNavigator.callback");try{return y.PopupWindow.notifyOpener(g,v,_),Promise.resolve()}catch(I){return Promise.reject(I)}},M}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.PopupWindow=void 0;var k=function(){function _(I,D){for(var j=0;j<D.length;j++){var L=D[j];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(I,L.key,L)}}return function(I,D,j){return D&&_(I.prototype,D),j&&_(I,j),I}}(),y=H(0),M=H(3);T.PopupWindow=function(){function _(I){var D=this;(function(F,x){if(!(F instanceof x))throw new TypeError("Cannot call a class as a function")})(this,_),this._promise=new Promise(function(O,F){D._resolve=O,D._reject=F}),this._popup=window.open("",I.popupWindowTarget||"_blank",I.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;"),this._popup&&(y.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return _.prototype.navigate=function(D){return this._popup?D&&D.url?(y.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=D.id,this._id&&(window["popupCallback_"+D.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=D.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},_.prototype._success=function(D){y.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(D)},_.prototype._error=function(D){y.Log.error("PopupWindow.error: ",D),this._cleanup(),this._reject(new Error(D))},_.prototype.close=function(){this._cleanup(!1)},_.prototype._cleanup=function(D){y.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!D&&this._popup.close(),this._popup=null},_.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},_.prototype._callback=function(D,j){this._cleanup(j),D?(y.Log.debug("PopupWindow.callback success"),this._success({url:D})):(y.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},_.notifyOpener=function(D,j,L){if(window.opener){if(D=D||window.location.href){var O=M.UrlUtility.parseUrlFragment(D,L);if(O.state){var x=window.opener["popupCallback_"+O.state];x?(y.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),x(D,j)):y.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else y.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else y.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},k(_,[{key:"promise",get:function(){return this._promise}}]),_}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.IFrameNavigator=void 0;var k=H(0),y=H(46);T.IFrameNavigator=function(){function M(){!function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}(this,M)}return M.prototype.prepare=function(g){var v=new y.IFrameWindow(g);return Promise.resolve(v)},M.prototype.callback=function(g){k.Log.debug("IFrameNavigator.callback");try{return y.IFrameWindow.notifyParent(g),Promise.resolve()}catch(v){return Promise.reject(v)}},M}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.IFrameWindow=void 0;var k=function(){function M(E,g){for(var v=0;v<g.length;v++){var _=g[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(E,_.key,_)}}return function(E,g,v){return g&&M(E.prototype,g),v&&M(E,v),E}}(),y=H(0);T.IFrameWindow=function(){function M(E){var g=this;(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,M),this._promise=new Promise(function(v,_){g._resolve=v,g._reject=_}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.style.width=0,this._frame.style.height=0,window.document.body.appendChild(this._frame)}return M.prototype.navigate=function(g){if(g&&g.url){var v=g.silentRequestTimeout||1e4;y.Log.debug("IFrameWindow.navigate: Using timeout of:",v),this._timer=window.setTimeout(this._timeout.bind(this),v),this._frame.src=g.url}else this._error("No url provided");return this.promise},M.prototype._success=function(g){this._cleanup(),y.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(g)},M.prototype._error=function(g){this._cleanup(),y.Log.error(g),this._reject(new Error(g))},M.prototype.close=function(){this._cleanup()},M.prototype._cleanup=function(){this._frame&&(y.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},M.prototype._timeout=function(){y.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},M.prototype._message=function(g){if(y.Log.debug("IFrameWindow.message"),this._timer&&g.origin===this._origin&&g.source===this._frame.contentWindow){var v=g.data;v?this._success({url:v}):this._error("Invalid response from frame")}},M.notifyParent=function(g){y.Log.debug("IFrameWindow.notifyParent"),window.frameElement&&(g=g||window.location.href)&&(y.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(g,location.protocol+"//"+location.host))},k(M,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),M}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.UserManagerEvents=void 0;var k=H(0),y=H(16),M=H(17);T.UserManagerEvents=function(E){function g(v){!function(D,j){if(!(D instanceof j))throw new TypeError("Cannot call a class as a function")}(this,g);var _=function(D,j){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!j||"object"!=typeof j&&"function"!=typeof j?D:j}(this,E.call(this,v));return _._userLoaded=new M.Event("User loaded"),_._userUnloaded=new M.Event("User unloaded"),_._silentRenewError=new M.Event("Silent renew error"),_._userSignedIn=new M.Event("User signed in"),_._userSignedOut=new M.Event("User signed out"),_._userSessionChanged=new M.Event("User session changed"),_}return function(_,I){if("function"!=typeof I&&null!==I)throw new TypeError("Super expression must either be null or a function, not "+typeof I);_.prototype=Object.create(I&&I.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(_,I):_.__proto__=I)}(g,E),g.prototype.load=function(_){var I=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];k.Log.debug("UserManagerEvents.load"),E.prototype.load.call(this,_),I&&this._userLoaded.raise(_)},g.prototype.unload=function(){k.Log.debug("UserManagerEvents.unload"),E.prototype.unload.call(this),this._userUnloaded.raise()},g.prototype.addUserLoaded=function(_){this._userLoaded.addHandler(_)},g.prototype.removeUserLoaded=function(_){this._userLoaded.removeHandler(_)},g.prototype.addUserUnloaded=function(_){this._userUnloaded.addHandler(_)},g.prototype.removeUserUnloaded=function(_){this._userUnloaded.removeHandler(_)},g.prototype.addSilentRenewError=function(_){this._silentRenewError.addHandler(_)},g.prototype.removeSilentRenewError=function(_){this._silentRenewError.removeHandler(_)},g.prototype._raiseSilentRenewError=function(_){k.Log.debug("UserManagerEvents._raiseSilentRenewError",_.message),this._silentRenewError.raise(_)},g.prototype.addUserSignedIn=function(_){this._userSignedIn.addHandler(_)},g.prototype.removeUserSignedIn=function(_){this._userSignedIn.removeHandler(_)},g.prototype._raiseUserSignedIn=function(){k.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},g.prototype.addUserSignedOut=function(_){this._userSignedOut.addHandler(_)},g.prototype.removeUserSignedOut=function(_){this._userSignedOut.removeHandler(_)},g.prototype._raiseUserSignedOut=function(){k.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},g.prototype.addUserSessionChanged=function(_){this._userSessionChanged.addHandler(_)},g.prototype.removeUserSessionChanged=function(_){this._userSessionChanged.removeHandler(_)},g.prototype._raiseUserSessionChanged=function(){k.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},g}(y.AccessTokenEvents)},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Timer=void 0;var k=function(){function g(v,_){for(var I=0;I<_.length;I++){var D=_[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(v,D.key,D)}}return function(v,_,I){return _&&g(v.prototype,_),I&&g(v,I),v}}(),y=H(0),M=H(1),E=H(17);T.Timer=function(g){function v(_){var I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.Global.timer,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;!function(O,F){if(!(O instanceof F))throw new TypeError("Cannot call a class as a function")}(this,v);var j=function(O,F){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!F||"object"!=typeof F&&"function"!=typeof F?O:F}(this,g.call(this,_));return j._timer=I,j._nowFunc=D||function(){return Date.now()/1e3},j}return function(I,D){if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function, not "+typeof D);I.prototype=Object.create(D&&D.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(I,D):I.__proto__=D)}(v,g),v.prototype.init=function(I){I<=0&&(I=1),I=parseInt(I);var D=this.now+I;if(this.expiration===D&&this._timerHandle)y.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),y.Log.debug("Timer.init timer "+this._name+" for duration:",I),this._expiration=D;var j=5;I<j&&(j=I),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*j)}},v.prototype.cancel=function(){this._timerHandle&&(y.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},v.prototype._callback=function(){y.Log.debug("Timer.callback; "+this._name+" timer expires in:",this._expiration-this.now),this._expiration<=this.now&&(this.cancel(),g.prototype.raise.call(this))},k(v,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),v}(E.Event)},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SilentRenewService=void 0;var k=H(0);T.SilentRenewService=function(){function y(M){(function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")})(this,y),this._userManager=M}return y.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(E){}).catch(function(E){k.Log.error("SilentRenewService.start: Error from getUser:",E.message)}))},y.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},y.prototype._tokenExpiring=function(){var E=this;this._userManager.signinSilent().then(function(g){k.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(g){k.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",g.message),E._userManager.events._raiseSilentRenewError(g)})},y}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.CordovaPopupNavigator=void 0;var k=H(21);T.CordovaPopupNavigator=function(){function y(){!function(E,g){if(!(E instanceof g))throw new TypeError("Cannot call a class as a function")}(this,y)}return y.prototype.prepare=function(E){var g=new k.CordovaPopupWindow(E);return Promise.resolve(g)},y}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.CordovaIFrameNavigator=void 0;var k=H(21);T.CordovaIFrameNavigator=function(){function y(){!function(E,g){if(!(E instanceof g))throw new TypeError("Cannot call a class as a function")}(this,y)}return y.prototype.prepare=function(E){E.popupWindowFeatures="hidden=yes";var g=new k.CordovaPopupWindow(E);return Promise.resolve(g)},y}()},function(ye,T,H){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Version="1.10.1"}])},504:(Ge,ye,T)=>{const H=T(779),k={isNumericId:D=>/^[1-9][0-9]*$/.test(D),isEntityId:D=>/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)$/.test(D),isEntitySchemaId:D=>/^E[1-9][0-9]*$/.test(D),isItemId:D=>/^Q[1-9][0-9]*$/.test(D),isPropertyId:D=>/^P[1-9][0-9]*$/.test(D),isLexemeId:D=>/^L[1-9][0-9]*$/.test(D),isFormId:D=>/^L[1-9][0-9]*-F[1-9][0-9]*$/.test(D),isSenseId:D=>/^L[1-9][0-9]*-S[1-9][0-9]*$/.test(D),isGuid:D=>/^((Q|P|L)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)\$[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(D),isHash:D=>/^[0-9a-f]{40}$/.test(D),isPropertyClaimsId:D=>{const[j,L]=D.split("#");return k.isEntityId(j)&&k.isPropertyId(L)},isRevisionId:D=>/^\d+$/.test(D),isEntityPageTitle:D=>{if("string"!=typeof D)return!1;let[j,L]=D.split(":");return j&&L?M(j)&&k[`is${j}Id`](L):(L=j,k.isItemId(L))}},y=["Item","Property","Lexeme"],M=D=>y.includes(D);k.getNumericId=D=>{if(!(D=>/^(Q|P|L)[1-9][0-9]*$/.test(D))(D))throw new Error(`invalid entity id: ${D}`);return D.replace(/^(Q|P|L)/,"")},k.wikibaseTimeToDateObject=H;const g=D=>j=>{try{return D(j)}catch{const O=(j=j.time||j)[0];let[F,x]=j.slice(1).split("T");return F=F.replace(/-00/g,"-01"),`${O}${F}T${x}`}};k.wikibaseTimeToEpochTime=g(D=>H(D).getTime()),k.wikibaseTimeToISOString=g(D=>H(D).toISOString()),k.wikibaseTimeToSimpleDay=g(D=>{if("object"==typeof D){const{time:j,precision:L}=D;D=9===L?j.replace("-01-01T","-00-00T"):10===L?j.replace("-01T","-00T"):j}return D.split("T")[0].replace(/^\+/,"").replace(/^(-?)0+/,"$1").replace(/-00$/,"").replace(/-00$/,"")}),k.getImageUrl=(D,j)=>{let L=`https://commons.wikimedia.org/wiki/Special:FilePath/${D}`;return"number"==typeof j&&(L+=`?width=${j}`),L},k.getEntityIdFromGuid=D=>{const j=D.split(/[$-]/);if(6===j.length)return j[0].toUpperCase();if(7===j.length)return j.slice(0,2).join("-").toUpperCase();throw new Error(`invalid guid: ${D}`)},Ge.exports=k},802:(Ge,ye,T)=>{const{wikibaseTimeToISOString:H,wikibaseTimeToEpochTime:k,wikibaseTimeToSimpleDay:y}=T(504),M=x=>x.value,g=(x,A)=>_(x,A.entityPrefix),v={item:"Q",lexeme:"L",property:"P"},_=(x,A)=>{const{value:P}=x,q=P.id||v[P["entity-type"]]+P["numeric-id"];return"string"==typeof A?`${A}:${q}`:q},O={iso:H,epoch:k,"simple-day":y,none:x=>x.time||x},F={commonsMedia:M,"external-id":M,"geo-shape":M,"globe-coordinate":(x,A)=>A.keepRichValues?x.value:[x.value.latitude,x.value.longitude],math:M,monolingualtext:(x,A)=>A.keepRichValues?x.value:x.value.text,"musical-notation":M,quantity:(x,A)=>{const{value:P}=x,q=parseFloat(P.amount);if(A.keepRichValues){const se={amount:parseFloat(P.amount),unit:P.unit.replace(/^https?:\/\/.*\/entity\//,"")};return null!=P.upperBound&&(se.upperBound=parseFloat(P.upperBound)),null!=P.lowerBound&&(se.lowerBound=parseFloat(P.lowerBound)),se}return q},string:M,"tabular-data":M,time:(x,A)=>{let P;if(P="function"==typeof A.timeConverter?A.timeConverter(x.value):((x="iso")=>{const A=O[x];if(!A)throw new Error(`invalid converter key: ${JSON.stringify(x).substring(0,100)}`);return A})(A.timeConverter)(x.value),A.keepRichValues){const{timezone:q,before:se,after:ie,precision:Ee,calendarmodel:Se}=x.value;return{time:P,timezone:q,before:se,after:ie,precision:Ee,calendarmodel:Se}}return P},url:M,"wikibase-entityid":g,"wikibase-form":g,"wikibase-item":g,"wikibase-lexeme":g,"wikibase-property":g,"wikibase-sense":g};Ge.exports={parsers:F,parse:(x,A,P,q)=>{x=(x=x||A.type).replace(" ","-");try{return F[x](A,P)}catch(se){throw"parsers[datatype] is not a function"===se.message&&(se.message=`${x} claim parser isn't implemented\n        Claim id: ${q}\n        Please report to https://github.com/maxlath/wikibase-sdk/issues`),se}}}},254:(Ge,ye,T)=>{const{simplifyEntity:H}=T(464),k={entities:y=>{y=y.body||y;const{entities:M}=y;return Object.keys(M).forEach(E=>{M[E]=H(M[E])}),M},pagesTitles:y=>(y=y.body||y).query.search.map(M=>M.title)};Ge.exports={wb:k,wd:k}},513:Ge=>{const ye=y=>{const M=y.reduce(H,{});return M.preferred||M.normal||[]},H=(y,M)=>{const{rank:E}=M;return y[E]||(y[E]=[]),y[E].push(M),y};Ge.exports={truthyClaims:y=>{const M={};return Object.keys(y).forEach(E=>{M[E]=ye(y[E])}),M},truthyPropertyClaims:ye,nonDeprecatedPropertyClaims:y=>y.filter(M=>"deprecated"!==M.rank)}},245:(Ge,ye,T)=>{const{labels:H,descriptions:k,aliases:y,lemmas:M,glosses:E}=T(366),{simplifyClaim:g,simplifyPropertyClaims:v,simplifyClaims:_,simplifyQualifier:I,simplifyPropertyQualifiers:D,simplifyQualifiers:j,simplifyReferences:L}=T(896),{simplifyForm:O,simplifyForms:F}=T(46),{simplifySense:x,simplifySenses:A}=T(55),P=T(889),q=T(424);Ge.exports={labels:H,descriptions:k,aliases:y,claim:g,propertyClaims:v,claims:_,qualifier:I,propertyQualifiers:D,qualifiers:j,references:L,sitelinks:P,snak:g,propertySnaks:v,snaks:_,lemmas:M,glosses:E,form:O,forms:F,sense:x,senses:A,sparqlResults:q}},896:(Ge,ye,T)=>{const{parse:H}=T(802),{uniq:k}=T(787),{truthyPropertyClaims:y,nonDeprecatedPropertyClaims:M}=T(513),E=(P,...q)=>{const{propertyPrefix:se}=I(q),ie={};for(let Ee in P){const Se=P[Ee];se&&(Ee=se+":"+Ee),ie[Ee]=g(Se,...q)}return ie},g=(P,...q)=>{if(null==P||0===P.length)return[];const{keepNonTruthy:se,keepNonDeprecated:ie,areSubSnaks:Ee}=I(q);return ie?P=M(P):se||Ee||(P=y(P)),(P=P.map(Se=>_(Se,...q)).filter(v))[0]&&"object"!=typeof P[0]?k(P):P},v=P=>void 0!==P,_=(P,...q)=>{q=I(q);const{keepQualifiers:se,keepReferences:ie,keepIds:Ee,keepHashes:Se,keepTypes:ze,keepSnaktypes:vt,keepRanks:Z}=A(q),{mainsnak:Ze,rank:nn}=P;let qe,pn,jt,Ce,Et,At;if(Ze?(pn=Ze.datatype,jt=Ze.datavalue,Ce=Ze.snaktype):(jt=P.datavalue,pn=P.datatype,Ce=P.snaktype,P.hash?Et=!0:At=!0),jt)qe=H(pn,jt,q,P.id);else if("somevalue"===Ce)qe=q.somevalueValue;else{if("novalue"!==Ce)throw new Error("no datavalue or special snaktype found");qe=q.novalueValue}if(Et){if(!(Se||ze||vt))return qe;const Ht={value:qe};return Se&&(Ht.hash=P.hash),ze&&(Ht.type=pn),vt&&(Ht.snaktype=Ce),Ht}if(At)return ze?{type:pn,value:qe}:qe;if(!(se||ie||Ee||ze||vt||Z))return qe;const Bt={value:qe};ze&&(Bt.type=pn),vt&&(Bt.snaktype=Ce),Z&&(Bt.rank=nn);const Yt=F(q);return Yt.keepHashes=Se,se&&(Bt.qualifiers=D(P.qualifiers,Yt)),ie&&(P.references=P.references||[],Bt.references=L(P.references,Yt)),Ee&&(Bt.id=P.id),Bt},I=P=>{if(null==P)return{};if(P[0]&&"object"==typeof P[0])return P[0];const[q,se,ie]=P;return{entityPrefix:q,propertyPrefix:se,keepQualifiers:ie}},D=(P,q)=>E(P,F(q)),L=(P,q)=>P.map(se=>O(se,q)),O=(P,q)=>{const se=F(q),ie=E(P.snaks,se);return se.keepHashes?{snaks:ie,hash:P.hash}:ie},F=(P={})=>P.areSubSnaks?P:Object.assign({},P,{areSubSnaks:!0}),x=["keepQualifiers","keepReferences","keepIds","keepHashes","keepTypes","keepSnaktypes","keepRanks","keepRichValues"],A=P=>(P.keepAll&&x.forEach(q=>{null==P[q]&&(P[q]=!0)}),P);Ge.exports={simplifyClaims:E,simplifyPropertyClaims:g,simplifyClaim:_,simplifyQualifiers:D,simplifyPropertyQualifiers:(P,q)=>g(P,F(q)),simplifyQualifier:_,simplifyReferences:L}},464:(Ge,ye,T)=>{const H=T(245),k=(E,g)=>{const{type:v}=E,_={id:E.id,type:v,modified:E.modified};return E.datatype&&(_.datatype=E.datatype),"item"===v?(y(E,_,"labels"),y(E,_,"descriptions"),y(E,_,"aliases"),y(E,_,"claims",g),y(E,_,"sitelinks",g)):"property"===v?(_.datatype=E.datatype,y(E,_,"labels"),y(E,_,"descriptions"),y(E,_,"aliases"),y(E,_,"claims",g)):"lexeme"===v&&(y(E,_,"lemmas"),_.lexicalCategory=E.lexicalCategory,_.language=E.language,y(E,_,"claims",g),y(E,_,"forms",g),y(E,_,"senses",g)),_},y=(E,g,v,_)=>{null!=E[v]&&(g[v]=H[v](E[v],_))},M=(E,g={})=>{E.entities&&(E=E.entities);const{entityPrefix:v}=g;return Object.keys(E).reduce((_,I)=>{const D=E[I];return v&&(I=`${v}:${I}`),_[I]=k(D,g),_},{})};H.entity=k,H.entities=M,Ge.exports={simplifyEntity:k,simplifyEntities:M}},46:(Ge,ye,T)=>{const{isFormId:H}=T(504),{representations:k}=T(366),{simplifyClaims:y}=T(896),M=(g,v)=>{const{id:_,representations:I,grammaticalFeatures:D,claims:j}=g;if(!H(_))throw new Error("invalid form object");return{id:_,representations:k(I),grammaticalFeatures:D,claims:y(j,v)}};Ge.exports={simplifyForm:M,simplifyForms:(g,v)=>g.map(_=>M(_,v))}},55:(Ge,ye,T)=>{const{isSenseId:H}=T(504),{glosses:k}=T(366),{simplifyClaims:y}=T(896),M=(g,v)=>{const{id:_,glosses:I,claims:D}=g;if(!H(_))throw new Error("invalid sense object");return{id:_,glosses:k(I),claims:y(D,v)}};Ge.exports={simplifySense:M,simplifySenses:(g,v)=>g.map(_=>M(_,v))}},889:(Ge,ye,T)=>{const{getSitelinkUrl:H}=T(493);Ge.exports=(y,M={})=>{let{addUrl:E,keepBadges:g,keepAll:v}=M;return g=g||v,Object.keys(y).reduce(k({sitelinks:y,addUrl:E,keepBadges:g}),{})};const k=({sitelinks:y,addUrl:M,keepBadges:E})=>(g,v)=>{if(null==y[v])return g[v]=y[v],g;const{title:_,badges:I}=y[v];return M||E?(g[v]={title:_},M&&(g[v].url=H(v,_)),E&&(g[v].badges=I)):g[v]=_,g}},424:Ge=>{Ge.exports=(L,O={})=>{"string"==typeof L&&(L=JSON.parse(L));const{vars:F}=L.head,x=L.results.bindings;if(1===F.length&&!0===O.minimize){const se=F[0];return x.map(ie=>ye(ie[se])).filter(ie=>null!=ie)}const{richVars:A,associatedVars:P,standaloneVars:q}=v(F);return x.map(I(A,P,q))};const ye=L=>{if(!L)return;let{datatype:O}=L;return O=O&&O.replace("http://www.w3.org/2001/XMLSchema#",""),(T[L.type]||k(O))(L)},T={uri:L=>E(L.value),bnode:()=>null},H=L=>parseFloat(L.value),k=L=>(L=L&&L.replace("http://www.w3.org/2001/XMLSchema#",""),y[L]||M),y={decimal:H,integer:H,float:H,double:H,boolean:L=>"true"===L.value},M=L=>L.value,E=L=>L.match(/http.*\/entity\/statement\//)?g(L):L.replace(/^https?:\/\/.*\/entity\//,"").replace(/^https?:\/\/.*\/prop\/direct\//,""),g=L=>{const O=(L=L.replace(/^https?:\/\/.*\/entity\/statement\//,"")).split("-");return O[0]+"$"+O.slice(1).join("-")},v=L=>{let O=L.filter(P=>L.some(_(P)));O=O.filter(P=>!O.some(q=>P!==q&&P.startsWith(q)));const F=new RegExp(`^(${O.join("|")})[A-Z]`),x=L.filter(P=>F.test(P)),A=L.filter(P=>!O.includes(P)&&!F.test(P));return{richVars:O,associatedVars:x,standaloneVars:A}},_=L=>{const O=new RegExp(`^${L}[A-Z]\\w+`);return O.test.bind(O)},I=(L,O,F)=>x=>{const A={};for(const P of L){const q={},se=ye(x[P]);null!=se&&(q.value=se);for(const ie of O)ie.startsWith(P)&&D(x,P,ie,q);Object.keys(q).length>0&&(A[P]=q)}for(const P of F)A[P]=ye(x[P]);return A},D=(L,O,F,x)=>{let A=F.split(O)[1];A=A[0].toLowerCase()+A.slice(1),A=j[A]||A;const P=L[F];null!=P&&(x[A]=P.value)},j={altLabel:"aliases"}},366:Ge=>{const ye=k=>y=>{const M={};return Object.keys(y).forEach(E=>{const g=y[E];M[E]=null!=g?k?g.map(T):g.value:k?[]:null}),M},T=k=>k.value,H=ye(!1);Ge.exports={labels:H,descriptions:H,aliases:ye(!0),lemmas:H,representations:H,glosses:H}},493:(Ge,ye,T)=>{const{fixedEncodeURIComponent:H,replaceSpaceByUnderscores:k,isPlainObject:y}=T(787),{isPropertyId:M}=T(504),E="https://www.wikidata.org/wiki/",g=T(538),_=x=>A=>`https://${x}.wikimedia.org/wiki/${A}`,I={commons:_("commons"),mediawiki:x=>`https://www.mediawiki.org/wiki/${x}`,meta:_("meta"),species:_("species"),wikidata:x=>M(x)?`${E}Property:${x}`:`${E}${x}`,wikimania:_("wikimania")},D=/^https?:\/\/([\w-]{2,10})\.(\w+)\.org\/\w+\/(.*)/,j=x=>{if(x.startsWith("http")){const A=x,P=A.match(D);if(!P)throw new Error(`invalid sitelink url: ${A}`);let Ee,[q,se,ie]=P.slice(1);return ie=decodeURIComponent(ie),"www"===q?(q="en",Ee=se):"commons"===q?(q="en",se=Ee="commons"):(q=q.replace(/-/g,"_"),Ee=`${q}${se}`.replace("wikipedia","wiki")),{lang:q,project:se,key:Ee,title:ie,url:A}}{const A=x,P=L[A];if(P)return{lang:"en",project:P,key:A};let[q,se,ie]=A.split("wik");if(null!=ie)throw new Error(`invalid sitelink key: ${A}`);if(-1===g.indexOf(q))throw new Error(`sitelink lang not found: ${q}. Updating wikibase-sdk to a more recent version might fix the issue.`);q=q.replace(/_/g,"-");const Ee=F[se];if(!Ee)throw new Error(`sitelink project not found: ${Ee}`);return{lang:q,project:Ee,key:A}}},L={commonswiki:"commons",mediawikiwiki:"mediawiki",metawiki:"meta",specieswiki:"specieswiki",wikidatawiki:"wikidata",wikimaniawiki:"wikimania"},F={i:"wikipedia",isource:"wikisource",iquote:"wikiquote",tionary:"wiktionary",ibooks:"wikibooks",iversity:"wikiversity",ivoyage:"wikivoyage",inews:"wikinews"};Ge.exports={getSitelinkUrl:(x,A)=>{if(y(x)&&(A=x.title,x=x.site),!x)throw new Error("missing a site");if(!A)throw new Error("missing a title");const P=x.replace(/wiki$/,""),q=I[P]||I[x];if(q)return q(A);const{lang:se,project:ie}=j(x);return`https://${se}.${ie}.org/wiki/${A=H(k(A))}`},getSitelinkData:j,isSitelinkKey:x=>{try{return j(x),!0}catch{return!1}}}},538:Ge=>{Ge.exports=["aa","ab","ace","ady","af","ak","als","alt","ami","am","ang","an","arc","ar","ary","arz","ast","as","atj","avk","av","awa","ay","azb","az","ban","bar","bat_smg","ba","bcl","be_x_old","be","bg","bh","bi","bjn","bm","bn","bo","bpy","br","bs","bug","bxr","ca","cbk_zam","cdo","ceb","ce","cho","chr","ch","chy","ckb","co","crh","cr","csb","cs","cu","cv","cy","dag","da","de","din","diq","dsb","dty","dv","dz","ee","el","eml","en","eo","es","et","eu","ext","fa","ff","fiu_vro","fi","fj","fo","frp","frr","fr","fur","fy","gag","gan","ga","gcr","gd","glk","gl","gn","gom","gor","got","gu","guw","gv","hak","ha","haw","he","hif","hi","ho","hr","hsb","ht","hu","hy","hyw","hz","ia","id","ie","ig","ii","ik","ilo","inh","io","is","it","iu","jam","ja","jbo","jv","kaa","kab","ka","kbd","kbp","kcg","kg","ki","kj","kk","kl","km","kn","koi","ko","krc","kr","ksh","ks","ku","kv","kw","ky","lad","la","lbe","lb","lez","lfn","lg","lij","li","lld","lmo","ln","lo","lrc","ltg","lt","lv","mad","mai","map_bms","mdf","mg","mhr","mh","min","mi","mk","ml","mni","mn","mnw","mo","mrj","mr","ms","mt","mus","mwl","myv","my","mzn","nah","nap","na","nds_nl","nds","ne","new","ng","nia","nl","nn","nov","no","nqo","nrm","nso","nv","ny","oc","olo","om","or","os","pag","pam","pap","pa","pcd","pdc","pfl","pih","pi","pl","pms","pnb","pnt","ps","pt","pwn","qu","rm","rmy","rn","roa_rup","roa_tara","ro","rue","ru","rw","sah","sat","sa","scn","sco","sc","sd","se","sg","shi","shn","sh","shy","simple","si","skr","sk","sl","smn","sm","sn","sources","so","sq","srn","sr","ss","stq","st","su","sv","sw","szl","szy","ta","tay","tcy","tet","te","tg","th","ti","tk","tl","tn","to","tpi","trv","tr","ts","tt","tum","tw","tyv","ty","udm","ug","uk","ur","uz","vec","vep","ve","vi","vls","vo","war","wa","wo","wuu","xal","xh","xmf","yi","yo","yue","za","zea","zh_classical","zh_min_nan","zh_yue","zh","zu"]},694:(Ge,ye,T)=>{const H=T(504),k=(y,M)=>E=>{if(!H[M](E))throw new Error(`invalid ${y}: ${E}`)};Ge.exports={entityId:k("entity id","isEntityId"),propertyId:k("property id","isPropertyId"),entityPageTitle:k("entity page title","isEntityPageTitle"),revisionId:k("revision id","isRevisionId")}},779:Ge=>{Ge.exports=H=>{"object"==typeof H&&(H=H.time);const k=H[0];let[y,M]=H.slice(1).split("T");return y=y.replace(/-00/g,"-01"),ye(k,`${y}T${M}`)};const ye=(H,k)=>{const y=k.split("-")[0];return"-"===H||y.length>4?T(H,k,y):new Date(k)},T=(H,k,y)=>{let M;return M=4===y.length?`${H}00${k}`:5===y.length?`${H}0${k}`:H+k,new Date(M)}},256:(Ge,ye,T)=>{const{isPlainObject:H}=T(787),k=/^\d+[|\d]*$/;Ge.exports=y=>M=>{if(!H(M))throw new Error(`expected parameters to be passed as an object, got ${M} (${typeof M})`);for(const x in M)if(x.startsWith("sr")){const A=x.replace(/^sr/,"");if(null!=M[A])throw new Error(`${A} and ${x} are the same`);M[A]=M[x]}const{search:E,haswbstatement:g,format:v="json",limit:_,offset:I,profile:D,sort:j}=M;let{namespace:L,prop:O}=M;if(!E&&!g)throw new Error('missing "search" or "haswbstatement" parameter');let F="";if(E&&(F+=E),g){const x=g instanceof Array?g:[g];for(const A of x)F+="-"===A[0]?` -haswbstatement:${A.slice(1)}`:` haswbstatement:${A}`}if(null!=_&&("number"!=typeof _||_<1))throw new Error(`invalid limit: ${_}`);if(null!=I&&("number"!=typeof I||I<0))throw new Error(`invalid offset: ${I}`);if(L instanceof Array?L=L.join("|"):"number"==typeof L&&(L=L.toString()),L&&!k.test(L))throw new Error(`invalid namespace: ${L}`);if(null!=D&&"string"!=typeof D)throw new Error(`invalid profile: ${D} (${typeof D}, expected string)`);if(null!=j&&"string"!=typeof j)throw new Error(`invalid sort: ${j} (${typeof j}, expected string)`);if(null!=O&&(L instanceof Array&&(O=O.join("|")),"string"!=typeof O))throw new Error(`invalid prop: ${O} (${typeof O}, expected string)`);return y({action:"query",list:"search",srsearch:F.trim(),format:v,srnamespace:L,srlimit:_,sroffset:I,srqiprofile:D,srsort:j,srprop:O})}},968:(Ge,ye,T)=>{const{isPlainObject:H,forceArray:k,shortLang:y}=T(787),M=T(694);Ge.exports=E=>(g,v,_,I,D)=>{if(H(g)&&({ids:g,languages:v,props:_,format:I,redirects:D}=g),I=I||"json",!(g&&g.length>0))throw new Error("no id provided");(g=k(g)).forEach(M.entityId),g.length>50&&console.warn("getEntities accepts 50 ids max to match Wikidata API limitations:\n      this request won't get all the desired entities.\n      You can use getManyEntities instead to generate several request urls\n      to work around this limitation");const j={action:"wbgetentities",ids:g.join("|"),format:I};return!1===D&&(j.redirects="no"),v&&(v=k(v).map(y),j.languages=v.join("|")),_&&_.length>0&&(j.props=k(_).join("|")),E(j)}},901:(Ge,ye,T)=>{const{isPlainObject:H,forceArray:k,shortLang:y}=T(787);Ge.exports=E=>(g,v,_,I,D,j)=>{if(H(g)){const O=g;g=O.titles,v=O.sites,_=O.languages,I=O.props,D=O.format,j=O.redirects}if(D=D||"json",!(g&&g.length>0))throw new Error("no titles provided");v&&v.length>0||(v=["enwiki"]),g=k(g),v=k(v).map(M),I=k(I);const L={action:"wbgetentities",titles:g.join("|"),sites:v.join("|"),format:D};return 1===v.length&&1===g.length&&(L.normalize=!0),_&&(_=k(_).map(y),L.languages=_.join("|")),I&&I.length>0&&(L.props=I.join("|")),!1===j&&(L.redirects="no"),E(L)};const M=E=>2===E.length?`${E}wiki`:E},533:(Ge,ye,T)=>{const H=T(694),{isPlainObject:k}=T(787);Ge.exports=(y,M)=>(E,g)=>(k(E)&&(g=E.revision,E=E.id),H.entityId(E),H.revisionId(g),`${y}/${M}/index.php?title=Special:EntityData/${E}.json&revision=${g}`)},234:(Ge,ye,T)=>{const{isPlainObject:H}=T(787);Ge.exports=y=>{const M=T(968)(y);return(E,g,v,_,I)=>{if(H(E)&&({ids:E,languages:g,props:v,format:_,redirects:I}=E),!(E instanceof Array))throw new Error("getManyEntities expects an array of ids");return k(E).map(D=>M(D,g,v,_,I))}};const k=y=>{const M=[];for(;y.length>0;){const E=y.slice(0,50);y=y.slice(50),M.push(E)}return M}},140:(Ge,ye,T)=>{const{forceArray:H}=T(787),{isItemId:k}=T(504),y=T(694);Ge.exports=D=>{const j=T(447)(D);return(L,O,F={})=>{const{limit:x,caseInsensitive:A,keepProperties:P}=F,q=A?_:v,se=P?"":"FILTER NOT EXISTS { ?subject rdf:type wikibase:Property . } ";let ie=H(L);ie.forEach(y.propertyId),ie=ie.map(I).join("|");let Se=`SELECT DISTINCT ?subject WHERE { ${E(O,q,ie,se)} }`;return x&&(Se+=` LIMIT ${x}`),j(Se)}};const E=(D,j,L,O)=>D instanceof Array?"{ "+D.map(g).map(x=>j(L,x,O)).join("} UNION {")+" }":j(L,g(D),O),g=D=>(k(D)?D=`wd:${D}`:"string"==typeof D&&(D=`'${D}'`),D),v=(D,j,L,O)=>`?subject ${D} ${j} .\n    ${L}`,_=(D,j,L,O)=>`?subject ${D} ?value .\n    FILTER (lcase(?value) = ${j.toLowerCase()})\n    ${L}`,I=D=>"wdt:"+D},308:(Ge,ye,T)=>{const{forceArray:H}=T(787),k=T(694);Ge.exports=E=>(g,v={})=>{(g=H(g)).forEach(k.entityPageTitle);const _=1===g.length,I={action:"query",prop:"revisions"};I.titles=g.join("|"),I.format=v.format||"json",_&&(I.rvlimit=v.limit||"max"),_&&v.start&&(I.rvstart=y(v.start)),_&&v.end&&(I.rvend=y(v.end));const{prop:D,user:j,excludeuser:L,tag:O}=v;return I.rvprop=D?H(D).join("|"):"ids|flags|timestamp|user|userid|size|slotsize|sha1|slotsha1|contentmodel|comment|parsedcomment|content|tags|roles|oresscores",I.rvslots="*",j&&(I.rvuser=j),L&&(I.rvexcludeuser=L),O&&(I.rvtag=O),E(I)};const y=E=>"number"==typeof E&&E<M?E:Math.trunc(new Date(E).getTime()/1e3),M=new Date("2000-01-01").getTime()},317:(Ge,ye,T)=>{const{isPlainObject:H}=T(787),k=["item","property","lexeme","form","sense"];Ge.exports=y=>(M,E,g,v,_)=>{let I,D;if(H(M)){const j=M;M=j.search,E=j.language,g=j.limit,D=j.continue,v=j.format,_=j.uselang,I=j.type}if(!(M&&M.length>0))throw new Error("search can't be empty");if(E=E||"en",_=_||E,g=g||"20",v=v||"json",I=I||"item",D=D||"0",!k.includes(I))throw new Error(`invalid type: ${I}`);return y({action:"wbsearchentities",search:M,language:E,limit:g,continue:D,format:v,uselang:_,type:I})}},447:(Ge,ye,T)=>{const{fixedEncodeURIComponent:H}=T(787);Ge.exports=k=>y=>{const M=H(y);return`${k}?format=json&query=${M}`}},880:Ge=>{const ye=typeof location<"u"&&typeof document<"u";Ge.exports=H=>k=>(ye&&(k.origin="*"),Object.keys(k).forEach(y=>{null==k[y]&&delete k[y]}),H+"?"+(H=>new URLSearchParams(H).toString())(k))},787:Ge=>{Ge.exports={shortLang:T=>T.toLowerCase().split("_")[0],forceArray:T=>("string"==typeof T&&(T=[T]),T||[]),isPlainObject:T=>!(!T||"object"!=typeof T||T instanceof Array),fixedEncodeURIComponent:T=>encodeURIComponent(T).replace(/[!'()*]/g,ye),replaceSpaceByUnderscores:T=>T.replace(/\s/g,"_"),uniq:T=>Array.from(new Set(T))};const ye=T=>"%"+T.charCodeAt(0).toString(16)},166:(Ge,ye,T)=>{const{isPlainObject:H}=T(787),k=T(245),y=T(254),M=T(504),E=T(493),g=T(513),_=Object.assign({simplify:k,parse:y},M,E,g),I=F=>{if(!H(F))throw new Error("invalid config");const{instance:x,sparqlEndpoint:A}=F;let q,se,ie,Ee,{wgScriptPath:P="w"}=F;if(P=P.replace(/^\//,""),!x&&!A)throw new Error("one of instance or sparqlEndpoint should be set at initialization.\nTip: if you just want to access functions that don't need an instance or a sparqlEndpoint,\nthose are also exposed directly on the module object. Exemple:\nconst { isItemId, simplify } = require('wikibase-sdk')");if(x){D("instance",x),se=x.replace(/\/$/,"").replace(`/${P}/api.php`,""),ie=`${se}/${P}/api.php`;const ze=T(880)(ie);q={searchEntities:T(317)(ze),cirrusSearchPages:T(256)(ze),getEntities:T(968)(ze),getManyEntities:T(234)(ze),getRevisions:T(308)(ze),getEntityRevision:T(533)(x,P),getEntitiesFromSitelinks:T(901)(ze)}}else q={searchEntities:O("searchEntities"),cirrusSearchPages:O("cirrusSearchPages"),getEntities:O("getEntities"),getManyEntities:O("getManyEntities"),getRevisions:O("getRevisions"),getEntityRevision:O("getEntityRevision"),getEntitiesFromSitelinks:O("getEntitiesFromSitelinks")};return A?(D("sparqlEndpoint",A),Ee={sparqlQuery:T(447)(A),getReverseClaims:T(140)(A)}):Ee={sparqlQuery:L("sparqlQuery"),getReverseClaims:L("getReverseClaims")},Object.assign({instance:{root:se,apiEndpoint:ie}},_,q,Ee)};Object.assign(I,_);const D=(F,x)=>{if("string"!=typeof x||!x.startsWith("http"))throw new Error(`invalid ${F}: ${x}`)},j=F=>x=>()=>{throw new Error(`${x} requires ${F} to be set at initialization`)},L=j("a sparqlEndpoint"),O=j("an instance");Ge.exports=I}},Ge=>{Ge(Ge.s=721)}]);