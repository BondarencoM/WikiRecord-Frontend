(self.webpackChunkComendie_Frontend=self.webpackChunkComendie_Frontend||[]).push([[179],{449:(We,be,N)=>{"use strict";function H(e){return"function"==typeof e}let k=!1;const y={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const n=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+n.stack)}else k&&console.log("RxJS: Back to a better error behavior. Thank you. <3");k=e},get useDeprecatedSynchronousErrorHandling(){return k}};function M(e){setTimeout(()=>{throw e},0)}const S={closed:!0,next(e){},error(e){if(y.useDeprecatedSynchronousErrorHandling)throw e;M(e)},complete(){}},g=Array.isArray||(e=>e&&"number"==typeof e.length);function v(e){return null!==e&&"object"==typeof e}const T=(()=>{function e(n){return Error.call(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((t,r)=>`${r+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n,this}return e.prototype=Object.create(Error.prototype),e})();class D{constructor(n){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,n&&(this._ctorUnsubscribe=!0,this._unsubscribe=n)}unsubscribe(){let n;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof D)t.remove(this);else if(null!==t)for(let s=0;s<t.length;++s)t[s].remove(this);if(H(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(s){n=s instanceof T?j(s.errors):[s]}}if(g(o)){let s=-1,a=o.length;for(;++s<a;){const d=o[s];if(v(d))try{d.unsubscribe()}catch(h){n=n||[],h instanceof T?n=n.concat(j(h.errors)):n.push(h)}}}if(n)throw new T(n)}add(n){let t=n;if(!n)return D.EMPTY;switch(typeof n){case"function":t=new D(n);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof D)){const o=t;t=new D,t._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}let{_parentOrParents:r}=t;if(null===r)t._parentOrParents=this;else if(r instanceof D){if(r===this)return t;t._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return t;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[t]:i.push(t),t}remove(n){const t=this._subscriptions;if(t){const r=t.indexOf(n);-1!==r&&t.splice(r,1)}}}var e;function j(e){return e.reduce((n,t)=>n.concat(t instanceof T?t.errors:t),[])}D.EMPTY=((e=new D).closed=!0,e);const L="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class x extends D{constructor(n,t,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=S;break;case 1:if(!n){this.destination=S;break}if("object"==typeof n){n instanceof x?(this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,n.add(this)):(this.syncErrorThrowable=!0,this.destination=new R(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new R(this,n,t,r)}}[L](){return this}static create(n,t,r){const i=new x(n,t,r);return i.syncErrorThrowable=!1,i}next(n){this.isStopped||this._next(n)}error(n){this.isStopped||(this.isStopped=!0,this._error(n))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(n){this.destination.next(n)}_error(n){this.destination.error(n),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:n}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=n,this}}class R extends x{constructor(n,t,r,i){super(),this._parentSubscriber=n;let o,s=this;H(t)?o=t:t&&(o=t.next,r=t.error,i=t.complete,t!==S&&(s=Object.create(t),H(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=r,this._complete=i}next(n){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;y.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,n)&&this.unsubscribe():this.__tryOrUnsub(this._next,n)}}error(n){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:r}=y;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,n),this.unsubscribe()):(this.__tryOrUnsub(this._error,n),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=n,t.syncErrorThrown=!0):M(n),this.unsubscribe();else{if(this.unsubscribe(),r)throw n;M(n)}}}complete(){if(!this.isStopped){const{_parentSubscriber:n}=this;if(this._complete){const t=()=>this._complete.call(this._context);y.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(n,t){try{n.call(this._context,t)}catch(r){if(this.unsubscribe(),y.useDeprecatedSynchronousErrorHandling)throw r;M(r)}}__tryOrSetError(n,t,r){if(!y.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(i){return y.useDeprecatedSynchronousErrorHandling?(n.syncErrorValue=i,n.syncErrorThrown=!0,!0):(M(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:n}=this;this._context=null,this._parentSubscriber=null,n.unsubscribe()}}const z="function"==typeof Symbol&&Symbol.observable||"@@observable";function se(e){return e}function Se(e){return 0===e.length?se:1===e.length?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}let Ee=(()=>{class e{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){const{operator:o}=this,s=function P(e,n,t){if(e){if(e instanceof x)return e;if(e[L])return e[L]()}return e||n||t?new x(e,n,t):new x(S)}(t,r,i);if(s.add(o?o.call(s,this.source):this.source||y.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),y.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){y.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),function F(e){for(;e;){const{closed:n,destination:t,isStopped:r}=e;if(n||r)return!1;e=t&&t instanceof x?t:null}return!0}(t)?t.error(r):console.warn(r)}}forEach(t,r){return new(r=Ke(r))((i,o)=>{let s;s=this.subscribe(a=>{try{t(a)}catch(d){o(d),s&&s.unsubscribe()}},o,i)})}_subscribe(t){const{source:r}=this;return r&&r.subscribe(t)}[z](){return this}pipe(...t){return 0===t.length?this:Se(t)(this)}toPromise(t){return new(t=Ke(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=n=>new e(n),e})();function Ke(e){if(e||(e=y.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const Z=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class Ze extends D{constructor(n,t){super(),this.subject=n,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const n=this.subject,t=n.observers;if(this.subject=null,!t||0===t.length||n.isStopped||n.closed)return;const r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}class on extends x{constructor(n){super(n),this.destination=n}}let ze=(()=>{class e extends Ee{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[L](){return new on(this)}lift(t){const r=new gn(this,this);return r.operator=t,r}next(t){if(this.closed)throw new Z;if(!this.isStopped){const{observers:r}=this,i=r.length,o=r.slice();for(let s=0;s<i;s++)o[s].next(t)}}error(t){if(this.closed)throw new Z;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:r}=this,i=r.length,o=r.slice();for(let s=0;s<i;s++)o[s].error(t);this.observers.length=0}complete(){if(this.closed)throw new Z;this.isStopped=!0;const{observers:t}=this,r=t.length,i=t.slice();for(let o=0;o<r;o++)i[o].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new Z;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new Z;return this.hasError?(t.error(this.thrownError),D.EMPTY):this.isStopped?(t.complete(),D.EMPTY):(this.observers.push(t),new Ze(this,t))}asObservable(){const t=new Ee;return t.source=this,t}}return e.create=(n,t)=>new gn(n,t),e})();class gn extends ze{constructor(n,t){super(),this.destination=n,this.source=t}next(n){const{destination:t}=this;t&&t.next&&t.next(n)}error(n){const{destination:t}=this;t&&t.error&&this.destination.error(n)}complete(){const{destination:n}=this;n&&n.complete&&this.destination.complete()}_subscribe(n){const{source:t}=this;return t?this.source.subscribe(n):D.EMPTY}}function Ht(e){return e&&"function"==typeof e.schedule}function Ce(e,n){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new St(e,n))}}class St{constructor(n,t){this.project=n,this.thisArg=t}call(n,t){return t.subscribe(new Ft(n,this.project,this.thisArg))}}class Ft extends x{constructor(n,t,r){super(n),this.project=t,this.count=0,this.thisArg=r||this}_next(n){let t;try{t=this.project.call(this.thisArg,n,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Bt=e=>n=>{for(let t=0,r=e.length;t<r&&!n.closed;t++)n.next(e[t]);n.complete()},mn=function Ut(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),fr=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Or(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const Y=e=>{if(e&&"function"==typeof e[z])return(e=>n=>{const t=e[z]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(n)})(e);if(fr(e))return Bt(e);if(Or(e))return(e=>n=>(e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,M),n))(e);if(e&&"function"==typeof e[mn])return(e=>n=>{const t=e[mn]();for(;;){let r;try{r=t.next()}catch(i){return n.error(i),n}if(r.done){n.complete();break}if(n.next(r.value),n.closed)break}return"function"==typeof t.return&&n.add(()=>{t.return&&t.return()}),n})(e);{const t=`You provided ${v(e)?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function q(e,n){return new Ee(t=>{const r=new D;let i=0;return r.add(n.schedule(function(){i!==e.length?(t.next(e[i++]),t.closed||r.add(this.schedule())):t.complete()})),r})}function Ie(e,n){return n?function xe(e,n){if(null!=e){if(function ee(e){return e&&"function"==typeof e[z]}(e))return function C(e,n){return new Ee(t=>{const r=new D;return r.add(n.schedule(()=>{const i=e[z]();r.add(i.subscribe({next(o){r.add(n.schedule(()=>t.next(o)))},error(o){r.add(n.schedule(()=>t.error(o)))},complete(){r.add(n.schedule(()=>t.complete()))}}))})),r})}(e,n);if(Or(e))return function E(e,n){return new Ee(t=>{const r=new D;return r.add(n.schedule(()=>e.then(i=>{r.add(n.schedule(()=>{t.next(i),r.add(n.schedule(()=>t.complete()))}))},i=>{r.add(n.schedule(()=>t.error(i)))}))),r})}(e,n);if(fr(e))return q(e,n);if(function pe(e){return e&&"function"==typeof e[mn]}(e)||"string"==typeof e)return function te(e,n){if(!e)throw new Error("Iterable cannot be null");return new Ee(t=>{const r=new D;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(n.schedule(()=>{i=e[mn](),r.add(n.schedule(function(){if(t.closed)return;let o,s;try{const a=i.next();o=a.value,s=a.done}catch(a){return void t.error(a)}s?t.complete():(t.next(o),this.schedule())}))})),r})}(e,n)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,n):e instanceof Ee?e:new Ee(Y(e))}class pt extends x{constructor(n){super(),this.parent=n}_next(n){this.parent.notifyNext(n)}_error(n){this.parent.notifyError(n),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class mt extends x{notifyNext(n){this.destination.next(n)}notifyError(n){this.destination.error(n)}notifyComplete(){this.destination.complete()}}function hr(e,n){if(n.closed)return;if(e instanceof Ee)return e.subscribe(n);let t;try{t=Y(e)(n)}catch(r){n.error(r)}return t}function Gt(e,n,t=Number.POSITIVE_INFINITY){return"function"==typeof n?r=>r.pipe(Gt((i,o)=>Ie(e(i,o)).pipe(Ce((s,a)=>n(i,s,o,a))),t)):("number"==typeof n&&(t=n),r=>r.lift(new qs(e,t)))}class qs{constructor(n,t=Number.POSITIVE_INFINITY){this.project=n,this.concurrent=t}call(n,t){return t.subscribe(new Ur(n,this.project,this.concurrent))}}class Ur extends mt{constructor(n,t,r=Number.POSITIVE_INFINITY){super(n),this.project=t,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(n){this.active<this.concurrent?this._tryNext(n):this.buffer.push(n)}_tryNext(n){let t;const r=this.index++;try{t=this.project(n,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t)}_innerSub(n){const t=new pt(this),r=this.destination;r.add(t);const i=hr(n,t);i!==t&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(n){this.destination.next(n)}notifyComplete(){const n=this.buffer;this.active--,n.length>0?this._next(n.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function eo(e=Number.POSITIVE_INFINITY){return Gt(se,e)}function et(e,n){return n?q(e,n):new Ee(Bt(e))}function Et(){return function(n){return n.lift(new Li(n))}}class Li{constructor(n){this.connectable=n}call(n,t){const{connectable:r}=this;r._refCount++;const i=new Yl(n,r),o=t.subscribe(i);return i.closed||(i.connection=r.connect()),o}}class Yl extends x{constructor(n,t){super(n),this.connectable=t}_unsubscribe(){const{connectable:n}=this;if(!n)return void(this.connection=null);this.connectable=null;const t=n._refCount;if(t<=0)return void(this.connection=null);if(n._refCount=t-1,t>1)return void(this.connection=null);const{connection:r}=this,i=n._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class $ extends Ee{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let n=this._connection;return n||(this._isComplete=!1,n=this._connection=new D,n.add(this.source.subscribe(new $r(this.getSubject(),this))),n.closed&&(this._connection=null,n=D.EMPTY)),n}refCount(){return Et()(this)}}const is=(()=>{const e=$.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class $r extends on{constructor(n,t){super(n),this.connectable=t}_error(n){this._unsubscribe(),super._error(n)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const n=this.connectable;if(n){this.connectable=null;const t=n._connection;n._refCount=0,n._subject=null,n._connection=null,t&&t.unsubscribe()}}}class Ys{constructor(n,t){this.subjectFactory=n,this.selector=t}call(n,t){const{selector:r}=this,i=this.subjectFactory(),o=r(i).subscribe(n);return o.add(t.subscribe(i)),o}}function gi(){return new ze}function It(e){for(let n in e)if(e[n]===It)return n;throw Error("Could not find renamed property on target object.")}function cn(e,n){for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Xe(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Xe).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function os(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const Pn=It({__forward_ref__:It});function ht(e){return e.__forward_ref__=ht,e.toString=function(){return Xe(this())},e}function Ge(e){return Zs(e)?e():e}function Zs(e){return"function"==typeof e&&e.hasOwnProperty(Pn)&&e.__forward_ref__===ht}function Xs(e){return e&&!!e.\u0275providers}class we extends Error{constructor(n,t){super(function Wr(e,n){return`NG0${Math.abs(e)}${n?": "+n.trim():""}`}(n,t)),this.code=n}}function it(e){return"string"==typeof e?e:null==e?"":String(e)}function ss(e,n){throw new we(-201,!1)}function pr(e,n){null==e&&function Ot(e,n,t,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${t} ${r} ${n} <=Actual]`))}(n,e,null,"!=")}function He(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function c(e){return{providers:e.providers||[],imports:e.imports||[]}}function u(e){return p(e,B)||p(e,J)}function p(e,n){return e.hasOwnProperty(n)?e[n]:null}function U(e){return e&&(e.hasOwnProperty(W)||e.hasOwnProperty(G))?e[W]:null}const B=It({\u0275prov:It}),W=It({\u0275inj:It}),J=It({ngInjectableDef:It}),G=It({ngInjectorDef:It});var K=(()=>((K=K||{})[K.Default=0]="Default",K[K.Host=1]="Host",K[K.Self=2]="Self",K[K.SkipSelf=4]="SkipSelf",K[K.Optional=8]="Optional",K))();let X;function ae(e){const n=X;return X=e,n}function le(e,n,t){const r=u(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&K.Optional?null:void 0!==n?n:void ss(Xe(e))}const _e=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),je={},At="__NG_DI_FLAG__",Dt="ngTempTokenPath",Ue=/\n/gm,Kt="__source";let Rn;function zt(e){const n=Rn;return Rn=e,n}function xo(e,n=K.Default){if(void 0===Rn)throw new we(-203,!1);return null===Rn?le(e,void 0,n):Rn.get(e,n&K.Optional?null:void 0,n)}function Re(e,n=K.Default){return(function oe(){return X}()||xo)(Ge(e),n)}function ut(e,n=K.Default){return Re(e,no(n))}function no(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function gr(e){const n=[];for(let t=0;t<e.length;t++){const r=Ge(e[t]);if(Array.isArray(r)){if(0===r.length)throw new we(900,!1);let i,o=K.Default;for(let s=0;s<r.length;s++){const a=r[s],d=as(a);"number"==typeof d?-1===d?i=a.token:o|=d:i=a}n.push(Re(i,o))}else n.push(Re(r))}return n}function Kn(e,n){return e[At]=n,e.prototype[At]=n,e}function as(e){return e[At]}function mr(e){return{toString:e}.toString()}var _r=(()=>((_r=_r||{})[_r.OnPush=0]="OnPush",_r[_r.Default=1]="Default",_r))(),ln=(()=>(function(e){e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom"}(ln||(ln={})),ln))();const Ar={},bt=[],ro=It({\u0275cmp:It}),io=It({\u0275dir:It}),ls=It({\u0275pipe:It}),Oo=It({\u0275mod:It}),Dn=It({\u0275fac:It}),kr=It({__NG_ELEMENT_ID__:It});let mi=0;function Qe(e){return mr(()=>{const t=!0===e.standalone,r={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===_r.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||bt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||ln.Emulated,id:"c"+mi++,styles:e.styles||bt,_:null,setInput:null,schemas:e.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},o=e.dependencies,s=e.features;return i.inputs=Bi(e.inputs,r),i.outputs=Bi(e.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(oo).filter(_n):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(vr).filter(_n):null,i})}function oo(e){return xt(e)||or(e)}function _n(e){return null!==e}function Mt(e){return mr(()=>({type:e.type,bootstrap:e.bootstrap||bt,declarations:e.declarations||bt,imports:e.imports||bt,exports:e.exports||bt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Bi(e,n){if(null==e)return Ar;const t={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,n&&(n[i]=o)}return t}const ke=Qe;function ir(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function xt(e){return e[ro]||null}function or(e){return e[io]||null}function vr(e){return e[ls]||null}function Kr(e,n){const t=e[Oo]||null;if(!t&&!0===n)throw new Error(`Type ${Xe(e)} does not have '\u0275mod' property.`);return t}function Pr(e){return Array.isArray(e)&&"object"==typeof e[1]}function yi(e){return Array.isArray(e)&&!0===e[1]}function kf(e){return 0!=(4&e.flags)}function ru(e){return e.componentOffset>-1}function iu(e){return 1==(1&e.flags)}function bi(e){return null!==e.template}function _N(e){return 0!=(256&e[2])}function ps(e,n){return e.hasOwnProperty(Dn)?e[Dn]:null}class bN{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function yr(){return E_}function E_(e){return e.type.prototype.ngOnChanges&&(e.setInput=DN),wN}function wN(){const e=N_(this),n=e?.current;if(n){const t=e.previous;if(t===Ar)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function DN(e,n,t,r){const i=this.declaredInputs[t],o=N_(e)||function CN(e,n){return e[S_]=n}(e,{previous:Ar,current:null}),s=o.current||(o.current={}),a=o.previous,d=a[i];s[i]=new bN(d&&d.currentValue,n,a===Ar),e[r]=n}yr.ngInherit=!0;const S_="__ngSimpleChanges__";function N_(e){return e[S_]||null}function Mn(e){for(;Array.isArray(e);)e=e[0];return e}function ou(e,n){return Mn(n[e])}function qr(e,n){return Mn(n[e.index])}function jf(e,n){return e.data[n]}function sa(e,n){return e[n]}function Jr(e,n){const t=n[e];return Pr(t)?t:t[0]}function su(e){return 64==(64&e[2])}function Ao(e,n){return null==n?null:e[n]}function T_(e){e[18]=0}function Hf(e,n){e[5]+=n;let t=e,r=e[3];for(;null!==r&&(1===n&&1===t[5]||-1===n&&0===t[5]);)r[5]+=n,t=r,r=r[3]}const st={lFrame:L_(null),bindingsEnabled:!0};function R_(){return st.bindingsEnabled}function ye(){return st.lFrame.lView}function Nt(){return st.lFrame.tView}function Jt(e){return st.lFrame.contextLView=e,e[8]}function Yt(e){return st.lFrame.contextLView=null,e}function er(){let e=M_();for(;null!==e&&64===e.type;)e=e.parent;return e}function M_(){return st.lFrame.currentTNode}function Vi(e,n){const t=st.lFrame;t.currentTNode=e,t.isParent=n}function Uf(){return st.lFrame.isParent}function $f(){st.lFrame.isParent=!1}function br(){const e=st.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function aa(){return st.lFrame.bindingIndex++}function co(e){const n=st.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function BN(e,n){const t=st.lFrame;t.bindingIndex=t.bindingRootIndex=e,Wf(n)}function Wf(e){st.lFrame.currentDirectiveIndex=e}function A_(){return st.lFrame.currentQueryIndex}function Kf(e){st.lFrame.currentQueryIndex=e}function jN(e){const n=e[1];return 2===n.type?n.declTNode:1===n.type?e[6]:null}function k_(e,n,t){if(t&K.SkipSelf){let i=n,o=e;for(;!(i=i.parent,null!==i||t&K.Host||(i=jN(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;n=i,e=o}const r=st.lFrame=P_();return r.currentTNode=n,r.lView=e,!0}function zf(e){const n=P_(),t=e[1];st.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function P_(){const e=st.lFrame,n=null===e?null:e.child;return null===n?L_(e):n}function L_(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function B_(){const e=st.lFrame;return st.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const V_=B_;function qf(){const e=B_();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function wr(){return st.lFrame.selectedIndex}function gs(e){st.lFrame.selectedIndex=e}function un(){const e=st.lFrame;return jf(e.tView,e.selectedIndex)}function au(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const o=e.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:d,ngAfterViewChecked:h,ngOnDestroy:m}=o;s&&(e.contentHooks||(e.contentHooks=[])).push(-t,s),a&&((e.contentHooks||(e.contentHooks=[])).push(t,a),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(t,a)),d&&(e.viewHooks||(e.viewHooks=[])).push(-t,d),h&&((e.viewHooks||(e.viewHooks=[])).push(t,h),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(t,h)),null!=m&&(e.destroyHooks||(e.destroyHooks=[])).push(t,m)}}function cu(e,n,t){j_(e,n,3,t)}function lu(e,n,t,r){(3&e[2])===t&&j_(e,n,t,r)}function Jf(e,n){let t=e[2];(3&t)===n&&(t&=2047,t+=1,e[2]=t)}function j_(e,n,t,r){const o=r??-1,s=n.length-1;let a=0;for(let d=void 0!==r?65535&e[18]:0;d<s;d++)if("number"==typeof n[d+1]){if(a=n[d],null!=r&&a>=r)break}else n[d]<0&&(e[18]+=65536),(a<o||-1==o)&&(JN(e,t,n,d),e[18]=(4294901760&e[18])+d+2),d++}function JN(e,n,t,r){const i=t[r]<0,o=t[r+1],a=e[i?-t[r]:t[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===n){e[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class Dc{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Qf(e,n,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];e.setAttribute(n,s,a,o)}else{const o=i,s=t[++r];U_(o)?e.setProperty(n,o,s):e.setAttribute(n,o,s),r++}}return r}function H_(e){return 3===e||4===e||6===e}function U_(e){return 64===e.charCodeAt(0)}function Ec(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const i=n[r];"number"==typeof i?t=i:0===t||$_(e,t,i,null,-1===t||2===t?n[++r]:null)}}return e}function $_(e,n,t,r,i){let o=0,s=e.length;if(-1===n)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===n){s=-1;break}if(a>n){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,n),o=s+1),e.splice(o++,0,t),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function W_(e){return-1!==e}function ca(e){return 32767&e}function la(e,n){let t=function eT(e){return e>>16}(e),r=n;for(;t>0;)r=r[15],t--;return r}let Zf=!0;function uu(e){const n=Zf;return Zf=e,n}let tT=0;const ji={};function du(e,n){const t=eh(e,n);if(-1!==t)return t;const r=n[1];r.firstCreatePass&&(e.injectorIndex=n.length,Xf(r.data,e),Xf(n,null),Xf(r.blueprint,null));const i=fu(e,n),o=e.injectorIndex;if(W_(i)){const s=ca(i),a=la(i,n),d=a[1].data;for(let h=0;h<8;h++)n[o+h]=a[s+h]|d[s+h]}return n[o+8]=i,o}function Xf(e,n){e.push(0,0,0,0,0,0,0,0,n)}function eh(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function fu(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;null!==i;){if(r=X_(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function th(e,n,t){!function nT(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(kr)&&(r=t[kr]),null==r&&(r=t[kr]=tT++);const i=255&r;n.data[e+(i>>5)]|=1<<i}(e,n,t)}function z_(e,n,t){if(t&K.Optional||void 0!==e)return e;ss()}function q_(e,n,t,r){if(t&K.Optional&&void 0===r&&(r=null),0==(t&(K.Self|K.Host))){const i=e[9],o=ae(void 0);try{return i?i.get(n,r,t&K.Optional):le(n,r,t&K.Optional)}finally{ae(o)}}return z_(r,0,t)}function J_(e,n,t,r=K.Default,i){if(null!==e){if(1024&n[2]){const s=function aT(e,n,t,r,i){let o=e,s=n;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=Y_(o,s,t,r|K.Self,ji);if(a!==ji)return a;let d=o.parent;if(!d){const h=s[21];if(h){const m=h.get(t,ji,r);if(m!==ji)return m}d=X_(s),s=s[15]}o=d}return i}(e,n,t,r,ji);if(s!==ji)return s}const o=Y_(e,n,t,r,ji);if(o!==ji)return o}return q_(n,t,r,i)}function Y_(e,n,t,r,i){const o=function oT(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(kr)?e[kr]:void 0;return"number"==typeof n?n>=0?255&n:sT:n}(t);if("function"==typeof o){if(!k_(n,e,r))return r&K.Host?z_(i,0,r):q_(n,t,r,i);try{const s=o(r);if(null!=s||r&K.Optional)return s;ss()}finally{V_()}}else if("number"==typeof o){let s=null,a=eh(e,n),d=-1,h=r&K.Host?n[16][6]:null;for((-1===a||r&K.SkipSelf)&&(d=-1===a?fu(e,n):n[a+8],-1!==d&&Z_(r,!1)?(s=n[1],a=ca(d),n=la(d,n)):a=-1);-1!==a;){const m=n[1];if(Q_(o,a,m.data)){const b=iT(a,n,t,s,r,h);if(b!==ji)return b}d=n[a+8],-1!==d&&Z_(r,n[1].data[a+8]===h)&&Q_(o,a,n)?(s=m,a=ca(d),n=la(d,n)):a=-1}}return i}function iT(e,n,t,r,i,o){const s=n[1],a=s.data[e+8],m=hu(a,s,t,null==r?ru(a)&&Zf:r!=s&&0!=(3&a.type),i&K.Host&&o===a);return null!==m?ua(n,s,m,a):ji}function hu(e,n,t,r,i){const o=e.providerIndexes,s=n.data,a=1048575&o,d=e.directiveStart,m=o>>20,O=i?a+m:e.directiveEnd;for(let V=r?a:a+m;V<O;V++){const Q=s[V];if(V<d&&t===Q||V>=d&&Q.type===t)return V}if(i){const V=s[d];if(V&&bi(V)&&V.type===t)return d}return null}function ua(e,n,t,r){let i=e[t];const o=n.data;if(function YN(e){return e instanceof Dc}(i)){const s=i;s.resolving&&function ea(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new we(-200,`Circular dependency in DI detected for ${e}${t}`)}(function Rt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():it(e)}(o[t]));const a=uu(s.canSeeViewProviders);s.resolving=!0;const d=s.injectImpl?ae(s.injectImpl):null;k_(e,r,K.Default);try{i=e[t]=s.factory(void 0,o,e,r),n.firstCreatePass&&t>=r.directiveStart&&function qN(e,n,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){const s=E_(n);(t.preOrderHooks||(t.preOrderHooks=[])).push(e,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,s)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-e,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,o))}(t,o[t],n)}finally{null!==d&&ae(d),uu(a),s.resolving=!1,V_()}}return i}function Q_(e,n,t){return!!(t[n+(e>>5)]&1<<e)}function Z_(e,n){return!(e&K.Self||e&K.Host&&n)}class da{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return J_(this._tNode,this._lView,n,no(r),t)}}function sT(){return new da(er(),ye())}function cr(e){return mr(()=>{const n=e.prototype.constructor,t=n[Dn]||nh(n),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const o=i[Dn]||nh(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function nh(e){return Zs(e)?()=>{const n=nh(Ge(e));return n&&n()}:ps(e)}function X_(e){const n=e[1],t=n.type;return 2===t?n.declTNode:1===t?e[6]:null}const pa="__parameters__";function ma(e,n,t){return mr(()=>{const r=function rh(e){return function(...t){if(e){const r=e(...t);for(const i in r)this[i]=r[i]}}}(n);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(d,h,m){const b=d.hasOwnProperty(pa)?d[pa]:Object.defineProperty(d,pa,{value:[]})[pa];for(;b.length<=m;)b.push(null);return(b[m]=b[m]||[]).push(s),d}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class $e{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=He({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Yr(e,n){void 0===n&&(n=e);for(let t=0;t<e.length;t++){let r=e[t];Array.isArray(r)?(n===e&&(n=e.slice(0,t)),Yr(r,n)):n!==e&&n.push(r)}return n}function ms(e,n){e.forEach(t=>Array.isArray(t)?ms(t,n):n(t))}function tv(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function pu(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Tc(e,n){const t=[];for(let r=0;r<e;r++)t.push(n);return t}function Qr(e,n,t){let r=_a(e,n);return r>=0?e[1|r]=t:(r=~r,function dT(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(1===i)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;)e[i]=e[i-2],i--;e[n]=t,e[n+1]=r}}(e,r,n,t)),r}function oh(e,n){const t=_a(e,n);if(t>=0)return e[1|t]}function _a(e,n){return function iv(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=e[o<<t];if(n===s)return o<<t;s>n?i=o:r=o+1}return~(i<<t)}(e,n,1)}const Ic=Kn(ma("Optional"),8),Rc=Kn(ma("SkipSelf"),4);var Lr=(()=>((Lr=Lr||{})[Lr.Important=1]="Important",Lr[Lr.DashCase=2]="DashCase",Lr))();const dh=new Map;let OT=0;const hh="__ngContext__";function lr(e,n){Pr(n)?(e[hh]=n[20],function kT(e){dh.set(e[20],e)}(n)):e[hh]=n}function gh(e,n){return undefined(e,n)}function Oc(e){const n=e[3];return yi(n)?n[3]:n}function mh(e){return Sv(e[13])}function _h(e){return Sv(e[4])}function Sv(e){for(;null!==e&&!yi(e);)e=e[4];return e}function ya(e,n,t,r,i){if(null!=r){let o,s=!1;yi(r)?o=r:Pr(r)&&(s=!0,r=r[0]);const a=Mn(r);0===e&&null!==t?null==i?xv(n,t,a):_s(n,t,a,i||null,!0):1===e&&null!==t?_s(n,t,a,i||null,!0):2===e?function Eh(e,n,t){const r=vu(e,n);r&&function nI(e,n,t,r){e.removeChild(n,t,r)}(e,r,n,t)}(n,a,s):3===e&&n.destroyNode(a),null!=o&&function oI(e,n,t,r,i){const o=t[7];o!==Mn(t)&&ya(n,e,r,o,i);for(let a=10;a<t.length;a++){const d=t[a];Ac(d[1],d,e,n,r,o)}}(n,e,o,t,i)}}function yh(e,n,t){return e.createElement(n,t)}function Tv(e,n){const t=e[9],r=t.indexOf(n),i=n[3];512&n[2]&&(n[2]&=-513,Hf(i,-1)),t.splice(r,1)}function bh(e,n){if(e.length<=10)return;const t=10+n,r=e[t];if(r){const i=r[17];null!==i&&i!==e&&Tv(i,r),n>0&&(e[t-1][4]=r[4]);const o=pu(e,10+n);!function qT(e,n){Ac(e,n,n[11],2,null,null),n[0]=null,n[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Iv(e,n){if(!(128&n[2])){const t=n[11];t.destroyNode&&Ac(e,n,t,3,null,null),function QT(e){let n=e[13];if(!n)return wh(e[1],e);for(;n;){let t=null;if(Pr(n))t=n[13];else{const r=n[10];r&&(t=r)}if(!t){for(;n&&!n[4]&&n!==e;)Pr(n)&&wh(n[1],n),n=n[3];null===n&&(n=e),Pr(n)&&wh(n[1],n),t=n&&n[4]}n=t}}(n)}}function wh(e,n){if(!(128&n[2])){n[2]&=-65,n[2]|=128,function tI(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const i=n[t[r]];if(!(i instanceof Dc)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],d=o[s+1];try{d.call(a)}finally{}}else try{o.call(i)}finally{}}}}(e,n),function eI(e,n){const t=e.cleanup,r=n[7];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+1],a="function"==typeof s?s(n):Mn(n[s]),d=r[i=t[o+2]],h=t[o+3];"boolean"==typeof h?a.removeEventListener(t[o],d,h):h>=0?r[i=h]():r[i=-h].unsubscribe(),o+=2}else{const s=r[i=t[o+1]];t[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();n[7]=null}}(e,n),1===n[1].type&&n[11].destroy();const t=n[17];if(null!==t&&yi(n[3])){t!==n[3]&&Tv(t,n);const r=n[19];null!==r&&r.detachView(e)}!function PT(e){dh.delete(e[20])}(n)}}function Rv(e,n,t){return function Mv(e,n,t){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return t[0];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=e.data[r.directiveStart+i];if(o===ln.None||o===ln.Emulated)return null}return qr(r,t)}}(e,n.parent,t)}function _s(e,n,t,r,i){e.insertBefore(n,t,r,i)}function xv(e,n,t){e.appendChild(n,t)}function Fv(e,n,t,r,i){null!==r?_s(e,n,t,r,i):xv(e,n,t)}function vu(e,n){return e.parentNode(n)}function Ov(e,n,t){return kv(e,n,t)}let Th,Du,kv=function Av(e,n,t){return 40&e.type?qr(e,t):null};function yu(e,n,t,r){const i=Rv(e,r,n),o=n[11],a=Ov(r.parent||n[6],r,n);if(null!=i)if(Array.isArray(t))for(let d=0;d<t.length;d++)Fv(o,i,t[d],a,!1);else Fv(o,i,t,a,!1)}function bu(e,n){if(null!==n){const t=n.type;if(3&t)return qr(n,e);if(4&t)return Ch(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return bu(e,r);{const i=e[n.index];return yi(i)?Ch(-1,i):Mn(i)}}if(32&t)return gh(n,e)()||Mn(e[n.index]);{const r=Lv(e,n);return null!==r?Array.isArray(r)?r[0]:bu(Oc(e[16]),r):bu(e,n.next)}}return null}function Lv(e,n){return null!==n?e[16][6].projection[n.projection]:null}function Ch(e,n){const t=10+e+1;if(t<n.length){const r=n[t],i=r[1].firstChild;if(null!==i)return bu(r,i)}return n[7]}function Sh(e,n,t,r,i,o,s){for(;null!=t;){const a=r[t.index],d=t.type;if(s&&0===n&&(a&&lr(Mn(a),r),t.flags|=2),32!=(32&t.flags))if(8&d)Sh(e,n,t.child,r,i,o,!1),ya(n,e,i,a,o);else if(32&d){const h=gh(t,r);let m;for(;m=h();)ya(n,e,i,m,o);ya(n,e,i,a,o)}else 16&d?Bv(e,n,r,t,i,o):ya(n,e,i,a,o);t=s?t.projectionNext:t.next}}function Ac(e,n,t,r,i,o){Sh(t,r,e.firstChild,n,i,o,!1)}function Bv(e,n,t,r,i,o){const s=t[16],d=s[6].projection[r.projection];if(Array.isArray(d))for(let h=0;h<d.length;h++)ya(n,e,i,d[h],o);else Sh(e,n,d,s[3],i,o,!0)}function Vv(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function jv(e,n,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&Qf(e,n,r),null!==i&&Vv(e,n,i),null!==o&&function aI(e,n,t){e.setAttribute(n,"style",t)}(e,n,o)}function Wv(e){return function Ih(){if(void 0===Du&&(Du=null,_e.trustedTypes))try{Du=_e.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Du}()?.createScriptURL(e)||e}class Gv{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Po(e){return e instanceof Gv?e.changingThisBreaksApplicationSecurity:e}function kc(e,n){const t=function _I(e){return e instanceof Gv&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===n}const wI=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var xn=(()=>((xn=xn||{})[xn.NONE=0]="NONE",xn[xn.HTML=1]="HTML",xn[xn.STYLE=2]="STYLE",xn[xn.SCRIPT=3]="SCRIPT",xn[xn.URL=4]="URL",xn[xn.RESOURCE_URL=5]="RESOURCE_URL",xn))();function qn(e){const n=Lc();return n?n.sanitize(xn.URL,e)||"":kc(e,"URL")?Po(e):function Rh(e){return(e=String(e)).match(wI)?e:"unsafe:"+e}(it(e))}function Zv(e){const n=Lc();if(n)return Wv(n.sanitize(xn.RESOURCE_URL,e)||"");if(kc(e,"ResourceURL"))return Wv(Po(e));throw new we(904,!1)}function Lc(){const e=ye();return e&&e[12]}const Eu=new $e("ENVIRONMENT_INITIALIZER"),e0=new $e("INJECTOR",-1),t0=new $e("INJECTOR_DEF_TYPES");class n0{get(n,t=je){if(t===je){const r=new Error(`NullInjectorError: No provider for ${Xe(n)}!`);throw r.name="NullInjectorError",r}return t}}function kI(...e){return{\u0275providers:r0(0,e),\u0275fromNgModule:!0}}function r0(e,...n){const t=[],r=new Set;let i;return ms(n,o=>{const s=o;Oh(s,t,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&o0(i,t),t}function o0(e,n){for(let t=0;t<e.length;t++){const{providers:i}=e[t];Ah(i,o=>{n.push(o)})}}function Oh(e,n,t,r){if(!(e=Ge(e)))return!1;let i=null,o=U(e);const s=!o&&xt(e);if(o||s){if(s&&!s.standalone)return!1;i=e}else{const d=e.ngModule;if(o=U(d),!o)return!1;i=d}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const d="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const h of d)Oh(h,n,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let h;r.add(i);try{ms(o.imports,m=>{Oh(m,n,t,r)&&(h||(h=[]),h.push(m))})}finally{}void 0!==h&&o0(h,n)}if(!a){const h=ps(i)||(()=>new i);n.push({provide:i,useFactory:h,deps:bt},{provide:t0,useValue:i,multi:!0},{provide:Eu,useValue:()=>Re(i),multi:!0})}const d=o.providers;null==d||a||Ah(d,m=>{n.push(m)})}}return i!==e&&void 0!==e.providers}function Ah(e,n){for(let t of e)Xs(t)&&(t=t.\u0275providers),Array.isArray(t)?Ah(t,n):n(t)}const PI=It({provide:String,useValue:It});function kh(e){return null!==e&&"object"==typeof e&&PI in e}function ys(e){return"function"==typeof e}const Ph=new $e("Set Injector scope."),Su={},BI={};let Lh;function Nu(){return void 0===Lh&&(Lh=new n0),Lh}class uo{}class c0 extends uo{constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vh(n,s=>this.processProvider(s)),this.records.set(e0,ba(void 0,this)),i.has("environment")&&this.records.set(uo,ba(void 0,this));const o=this.records.get(Ph);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(t0.multi,bt,K.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const t=zt(this),r=ae(void 0);try{return n()}finally{zt(t),ae(r)}}get(n,t=je,r=K.Default){this.assertNotDestroyed(),r=no(r);const i=zt(this),o=ae(void 0);try{if(!(r&K.SkipSelf)){let a=this.records.get(n);if(void 0===a){const d=function $I(e){return"function"==typeof e||"object"==typeof e&&e instanceof $e}(n)&&u(n);a=d&&this.injectableDefInScope(d)?ba(Bh(n),Su):null,this.records.set(n,a)}if(null!=a)return this.hydrate(n,a)}return(r&K.Self?Nu():this.parent).get(n,t=r&K.Optional&&t===je?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[Dt]=s[Dt]||[]).unshift(Xe(n)),i)throw s;return function Fo(e,n,t,r){const i=e[Dt];throw n[Kt]&&i.unshift(n[Kt]),e.message=function cs(e,n,t,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=Xe(n);if(Array.isArray(n))i=n.map(Xe).join(" -> ");else if("object"==typeof n){let o=[];for(let s in n)if(n.hasOwnProperty(s)){let a=n[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Xe(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(Ue,"\n  ")}`}("\n"+e.message,i,t,r),e.ngTokenPath=i,e[Dt]=null,e}(s,n,"R3InjectorError",this.source)}throw s}finally{ae(o),zt(i)}}resolveInjectorInitializers(){const n=zt(this),t=ae(void 0);try{const r=this.get(Eu.multi,bt,K.Self);for(const i of r)i()}finally{zt(n),ae(t)}}toString(){const n=[],t=this.records;for(const r of t.keys())n.push(Xe(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(n){let t=ys(n=Ge(n))?n:Ge(n&&n.provide);const r=function jI(e){return kh(e)?ba(void 0,e.useValue):ba(l0(e),Su)}(n);if(ys(n)||!0!==n.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=ba(void 0,Su,!0),i.factory=()=>gr(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t){return t.value===Su&&(t.value=BI,t.value=t.factory()),"object"==typeof t.value&&t.value&&function UI(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=Ge(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Bh(e){const n=u(e),t=null!==n?n.factory:ps(e);if(null!==t)return t;if(e instanceof $e)throw new we(204,!1);if(e instanceof Function)return function VI(e){const n=e.length;if(n>0)throw Tc(n,"?"),new we(204,!1);const t=function w(e){const n=e&&(e[B]||e[J]);if(n){const t=function I(e){if(e.hasOwnProperty("name"))return e.name;const n=(""+e).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),n}return null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new we(204,!1)}function l0(e,n,t){let r;if(ys(e)){const i=Ge(e);return ps(i)||Bh(i)}if(kh(e))r=()=>Ge(e.useValue);else if(function a0(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...gr(e.deps||[]));else if(function s0(e){return!(!e||!e.useExisting)}(e))r=()=>Re(Ge(e.useExisting));else{const i=Ge(e&&(e.useClass||e.provide));if(!function HI(e){return!!e.deps}(e))return ps(i)||Bh(i);r=()=>new i(...gr(e.deps))}return r}function ba(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function Vh(e,n){for(const t of e)Array.isArray(t)?Vh(t,n):t&&Xs(t)?Vh(t.\u0275providers,n):n(t)}class WI{}class u0{}class KI{resolveComponentFactory(n){throw function GI(e){const n=Error(`No component factory found for ${Xe(e)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=e,n}(n)}}let Bc=(()=>{class e{}return e.NULL=new KI,e})();function zI(){return wa(er(),ye())}function wa(e,n){return new Xt(qr(e,n))}let Xt=(()=>{class e{constructor(t){this.nativeElement=t}}return e.__NG_ELEMENT_ID__=zI,e})();function qI(e){return e instanceof Xt?e.nativeElement:e}class jh{}let wi=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function JI(){const e=ye(),t=Jr(er().index,e);return(Pr(t)?t:e)[11]}(),e})(),YI=(()=>{class e{}return e.\u0275prov=He({token:e,providedIn:"root",factory:()=>null}),e})();class Vc{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const QI=new Vc("15.0.0"),Hh={};function $h(e){return e.ngOriginalError}class Da{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&$h(n);for(;t&&$h(t);)t=$h(t);return t||null}}function fo(e){return e instanceof Function?e():e}function h0(e,n,t){let r=e.length;for(;;){const i=e.indexOf(n,t);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=n.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}t=i+1}}const p0="ng-template";function cR(e,n,t){let r=0;for(;r<e.length;){let i=e[r++];if(t&&"class"===i){if(i=e[r],-1!==h0(i.toLowerCase(),n,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===n)return!0;return!1}}return!1}function g0(e){return 4===e.type&&e.value!==p0}function lR(e,n,t){return n===(4!==e.type||t?e.value:p0)}function uR(e,n,t){let r=4;const i=e.attrs||[],o=function hR(e){for(let n=0;n<e.length;n++)if(H_(e[n]))return n;return e.length}(i);let s=!1;for(let a=0;a<n.length;a++){const d=n[a];if("number"!=typeof d){if(!s)if(4&r){if(r=2|1&r,""!==d&&!lR(e,d,t)||""===d&&1===n.length){if(Di(r))return!1;s=!0}}else{const h=8&r?d:n[++a];if(8&r&&null!==e.attrs){if(!cR(e.attrs,h,t)){if(Di(r))return!1;s=!0}continue}const b=dR(8&r?"class":d,i,g0(e),t);if(-1===b){if(Di(r))return!1;s=!0;continue}if(""!==h){let O;O=b>o?"":i[b+1].toLowerCase();const V=8&r?O:null;if(V&&-1!==h0(V,h,0)||2&r&&h!==O){if(Di(r))return!1;s=!0}}}}else{if(!s&&!Di(r)&&!Di(d))return!1;if(s&&Di(d))continue;s=!1,r=d|1&r}}return Di(r)||s}function Di(e){return 0==(1&e)}function dR(e,n,t,r){if(null===n)return-1;let i=0;if(r||!t){let o=!1;for(;i<n.length;){const s=n[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=n[++i];for(;"string"==typeof a;)a=n[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function pR(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function m0(e,n,t=!1){for(let r=0;r<n.length;r++)if(uR(e,n[r],t))return!0;return!1}function gR(e,n){e:for(let t=0;t<n.length;t++){const r=n[t];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function _0(e,n){return e?":not("+n.trim()+")":n}function mR(e){let n=e[0],t=1,r=2,i="",o=!1;for(;t<e.length;){let s=e[t];if("string"==typeof s)if(2&r){const a=e[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Di(s)&&(n+=_0(o,i),i=""),r=s,o=o||!Di(r);t++}return""!==i&&(n+=_0(o,i)),n}const at={};function fe(e){v0(Nt(),ye(),wr()+e,!1)}function v0(e,n,t,r){if(!r)if(3==(3&n[2])){const o=e.preOrderCheckHooks;null!==o&&cu(n,o,t)}else{const o=e.preOrderHooks;null!==o&&lu(n,o,0,t)}gs(t)}function D0(e,n=null,t=null,r){const i=C0(e,n,t,r);return i.resolveInjectorInitializers(),i}function C0(e,n=null,t=null,r,i=new Set){const o=[t||bt,kI(e)];return r=r||("object"==typeof e?void 0:Xe(e)),new c0(o,n||Nu(),r||null,i)}let Cr=(()=>{class e{static create(t,r){if(Array.isArray(t))return D0({name:""},r,t,"");{const i=t.name??"";return D0({name:i},t.parent,t.providers,i)}}}return e.THROW_IF_NOT_FOUND=je,e.NULL=new n0,e.\u0275prov=He({token:e,providedIn:"any",factory:()=>Re(e0)}),e.__NG_ELEMENT_ID__=-1,e})();function ne(e,n=K.Default){const t=ye();return null===t?Re(e,n):J_(er(),t,Ge(e),n)}function qh(){throw new Error("invalid")}function Iu(e,n){return e<<17|n<<2}function Ci(e){return e>>17&32767}function Jh(e){return 2|e}function ho(e){return(131068&e)>>2}function Yh(e,n){return-131069&e|n<<2}function Qh(e){return 1|e}function j0(e,n){const t=e.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],o=t[r+1];if(-1!==o){const s=e.data[o];Kf(i),s.contentQueries(2,n[o],o)}}}function xu(e,n,t,r,i,o,s,a,d,h,m){const b=n.blueprint.slice();return b[0]=i,b[2]=76|r,(null!==m||e&&1024&e[2])&&(b[2]|=1024),T_(b),b[3]=b[15]=e,b[8]=t,b[10]=s||e&&e[10],b[11]=a||e&&e[11],b[12]=d||e&&e[12]||null,b[9]=h||e&&e[9]||null,b[6]=o,b[20]=function AT(){return OT++}(),b[21]=m,b[16]=2==n.type?e[16]:b,b}function Sa(e,n,t,r,i){let o=e.data[n];if(null===o)o=function op(e,n,t,r,i){const o=M_(),s=Uf(),d=e.data[n]=function ZR(e,n,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,n,r,i);return null===e.firstChild&&(e.firstChild=d),null!==o&&(s?null==o.child&&null!==d.parent&&(o.child=d):null===o.next&&(o.next=d)),d}(e,n,t,r,i),function LN(){return st.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function wc(){const e=st.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Vi(o,!0),o}function jc(e,n,t,r){if(0===t)return-1;const i=n.length;for(let o=0;o<t;o++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function sp(e,n,t){zf(n);try{const r=e.viewQuery;null!==r&&mp(1,r,t);const i=e.template;null!==i&&H0(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&j0(e,n),e.staticViewQueries&&mp(2,e.viewQuery,t);const o=e.components;null!==o&&function JR(e,n){for(let t=0;t<n.length;t++)_M(e,n[t])}(n,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[2]&=-5,qf()}}function Fu(e,n,t,r){const i=n[2];if(128!=(128&i)){zf(n);try{T_(n),function F_(e){return st.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&H0(e,n,t,2,r);const s=3==(3&i);if(s){const h=e.preOrderCheckHooks;null!==h&&cu(n,h,null)}else{const h=e.preOrderHooks;null!==h&&lu(n,h,0,null),Jf(n,0)}if(function gM(e){for(let n=mh(e);null!==n;n=_h(n)){if(!n[2])continue;const t=n[9];for(let r=0;r<t.length;r++){const i=t[r],o=i[3];0==(512&i[2])&&Hf(o,1),i[2]|=512}}}(n),function pM(e){for(let n=mh(e);null!==n;n=_h(n))for(let t=10;t<n.length;t++){const r=n[t],i=r[1];su(r)&&Fu(i,r,i.template,r[8])}}(n),null!==e.contentQueries&&j0(e,n),s){const h=e.contentCheckHooks;null!==h&&cu(n,h)}else{const h=e.contentHooks;null!==h&&lu(n,h,1),Jf(n,1)}!function zR(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)gs(~i);else{const o=i,s=t[++r],a=t[++r];BN(s,o),a(2,n[o])}}}finally{gs(-1)}}(e,n);const a=e.components;null!==a&&function qR(e,n){for(let t=0;t<n.length;t++)mM(e,n[t])}(n,a);const d=e.viewQuery;if(null!==d&&mp(2,d,r),s){const h=e.viewCheckHooks;null!==h&&cu(n,h)}else{const h=e.viewHooks;null!==h&&lu(n,h,2),Jf(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[2]&=-41,512&n[2]&&(n[2]&=-513,Hf(n[3],-1))}finally{qf()}}}function H0(e,n,t,r,i){const o=wr(),s=2&r;try{gs(-1),s&&n.length>22&&v0(e,n,22,!1),t(r,i)}finally{gs(o)}}function ap(e,n,t){if(kf(n)){const i=n.directiveEnd;for(let o=n.directiveStart;o<i;o++){const s=e.data[o];s.contentQueries&&s.contentQueries(1,t[o],o)}}}function cp(e,n,t){!R_()||(function iM(e,n,t,r){const i=t.directiveStart,o=t.directiveEnd;e.firstCreatePass||du(t,n),lr(r,n);const s=t.initialInputs;for(let a=i;a<o;a++){const d=e.data[a],h=bi(d);h&&dM(n,t,d);const m=ua(n,e,a,t);lr(m,n),null!==s&&fM(0,a-i,m,d,0,s),h&&(Jr(t.index,n)[8]=m)}}(e,n,t,qr(t,n)),64==(64&t.flags)&&q0(e,n,t))}function lp(e,n,t=qr){const r=n.localNames;if(null!==r){let i=n.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(n,e):e[s];e[i++]=a}}}function U0(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=up(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):n}function up(e,n,t,r,i,o,s,a,d,h){const m=22+r,b=m+i,O=function YR(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:at);return t}(m,b),V="function"==typeof h?h():h;return O[1]={type:e,blueprint:O,template:t,queries:null,viewQuery:a,declTNode:n,data:O.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:d,consts:V,incompleteFirstPass:!1}}function $0(e,n,t,r){const i=Y0(n);null===t?i.push(r):(i.push(t),e.firstCreatePass&&Q0(e).push(r,i.length-1))}function W0(e,n,t,r){for(let i in e)if(e.hasOwnProperty(i)){t=null===t?{}:t;const o=e[i];null===r?G0(t,n,i,o):r.hasOwnProperty(i)&&G0(t,n,r[i],o)}return t}function G0(e,n,t,r){e.hasOwnProperty(t)?e[t].push(n,r):e[t]=[n,r]}function Zr(e,n,t,r,i,o,s,a){const d=qr(n,t);let m,h=n.inputs;!a&&null!=h&&(m=h[r])?(_p(e,t,m,r,i),ru(n)&&K0(t,n.index)):3&n.type&&(r=function eM(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=s?s(i,n.value||"",r):i,o.setProperty(d,r,i))}function K0(e,n){const t=Jr(n,e);16&t[2]||(t[2]|=32)}function dp(e,n,t,r){let i=!1;if(R_()){const o=null===r?null:{"":-1},s=function sM(e,n){const t=e.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(m0(n,s.selectors,!1))if(r||(r=[]),bi(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),fp(e,n,a.length)}else r.unshift(s),fp(e,n,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(e,t);let a,d;null===s?a=d=null:[a,d]=s,null!==a&&(i=!0,z0(e,n,t,a,o,d)),o&&function aM(e,n,t){if(n){const r=e.localNames=[];for(let i=0;i<n.length;i+=2){const o=t[n[i+1]];if(null==o)throw new we(-301,!1);r.push(n[i],o)}}}(t,r,o)}return t.mergedAttrs=Ec(t.mergedAttrs,t.attrs),i}function z0(e,n,t,r,i,o){for(let h=0;h<r.length;h++)th(du(t,n),e,r[h].type);!function lM(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}(t,e.data.length,r.length);for(let h=0;h<r.length;h++){const m=r[h];m.providersResolver&&m.providersResolver(m)}let s=!1,a=!1,d=jc(e,n,r.length,null);for(let h=0;h<r.length;h++){const m=r[h];t.mergedAttrs=Ec(t.mergedAttrs,m.hostAttrs),uM(e,t,n,d,m),cM(d,m,i),null!==m.contentQueries&&(t.flags|=4),(null!==m.hostBindings||null!==m.hostAttrs||0!==m.hostVars)&&(t.flags|=64);const b=m.type.prototype;!s&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t.index),s=!0),!a&&(b.ngOnChanges||b.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t.index),a=!0),d++}!function XR(e,n,t){const i=n.directiveEnd,o=e.data,s=n.attrs,a=[];let d=null,h=null;for(let m=n.directiveStart;m<i;m++){const b=o[m],O=t?t.get(b):null,Q=O?O.outputs:null;d=W0(b.inputs,m,d,O?O.inputs:null),h=W0(b.outputs,m,h,Q);const re=null===d||null===s||g0(n)?null:hM(d,m,s);a.push(re)}null!==d&&(d.hasOwnProperty("class")&&(n.flags|=8),d.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=a,n.inputs=d,n.outputs=h}(e,t,o)}function q0(e,n,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function VN(){return st.lFrame.currentDirectiveIndex}();try{gs(o);for(let a=r;a<i;a++){const d=e.data[a],h=n[a];Wf(a),(null!==d.hostBindings||0!==d.hostVars||null!==d.hostAttrs)&&oM(d,h)}}finally{gs(-1),Wf(s)}}function oM(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function fp(e,n,t){n.componentOffset=t,(e.components||(e.components=[])).push(n.index)}function cM(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;bi(n)&&(t[""]=e)}}function uM(e,n,t,r,i){e.data[r]=i;const o=i.factory||(i.factory=ps(i.type)),s=new Dc(o,bi(i),ne);e.blueprint[r]=s,t[r]=s,function nM(e,n,t,r,i){const o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const a=~n.index;(function rM(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(e,n,r,jc(e,t,i.hostVars,at),i)}function dM(e,n,t){const r=qr(n,e),i=U0(t),o=e[10],s=Ou(e,xu(e,i,null,t.onPush?32:16,r,n,o,o.createRenderer(r,t),null,null,null));e[n.index]=s}function Hi(e,n,t,r,i,o){const s=qr(e,n);!function hp(e,n,t,r,i,o,s){if(null==o)e.removeAttribute(n,i,t);else{const a=null==s?it(o):s(o,r||"",i);e.setAttribute(n,i,a,t)}}(n[11],s,o,e.value,t,r,i)}function fM(e,n,t,r,i,o){const s=o[n];if(null!==s){const a=r.setInput;for(let d=0;d<s.length;){const h=s[d++],m=s[d++],b=s[d++];null!==a?r.setInput(t,b,h,m):t[m]=b}}}function hM(e,n,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(e.hasOwnProperty(o)){null===r&&(r=[]);const s=e[o];for(let a=0;a<s.length;a+=2)if(s[a]===n){r.push(o,s[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function J0(e,n,t,r){return new Array(e,!0,!1,n,null,0,r,t,null,null)}function mM(e,n){const t=Jr(n,e);if(su(t)){const r=t[1];48&t[2]?Fu(r,t,r.template,t[8]):t[5]>0&&pp(t)}}function pp(e){for(let r=mh(e);null!==r;r=_h(r))for(let i=10;i<r.length;i++){const o=r[i];if(su(o))if(512&o[2]){const s=o[1];Fu(s,o,s.template,o[8])}else o[5]>0&&pp(o)}const t=e[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Jr(t[r],e);su(i)&&i[5]>0&&pp(i)}}function _M(e,n){const t=Jr(n,e),r=t[1];(function vM(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])})(r,t),sp(r,t,t[8])}function Ou(e,n){return e[13]?e[14][4]=n:e[13]=n,e[14]=n,n}function gp(e){for(;e;){e[2]|=32;const n=Oc(e);if(_N(e)&&!n)return e;e=n}return null}function Au(e,n,t,r=!0){const i=n[10];i.begin&&i.begin();try{Fu(e,n,e.template,t)}catch(s){throw r&&X0(n,s),s}finally{i.end&&i.end()}}function mp(e,n,t){Kf(0),n(e,t)}function Y0(e){return e[7]||(e[7]=[])}function Q0(e){return e.cleanup||(e.cleanup=[])}function X0(e,n){const t=e[9],r=t?t.get(Da,null):null;r&&r.handleError(n)}function _p(e,n,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],d=n[s],h=e.data[s];null!==h.setInput?h.setInput(d,i,r,a):d[a]=i}}function ku(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,o=0;if(null!==n)for(let s=0;s<n.length;s++){const a=n[s];"number"==typeof a?o=a:1==o?i=os(i,a):2==o&&(r=os(r,a+": "+n[++s]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}function Pu(e,n,t,r,i=!1){for(;null!==t;){const o=n[t.index];if(null!==o&&r.push(Mn(o)),yi(o))for(let a=10;a<o.length;a++){const d=o[a],h=d[1].firstChild;null!==h&&Pu(d[1],d,h,r)}const s=t.type;if(8&s)Pu(e,n,t.child,r);else if(32&s){const a=gh(t,n);let d;for(;d=a();)r.push(d)}else if(16&s){const a=Lv(n,t);if(Array.isArray(a))r.push(...a);else{const d=Oc(n[16]);Pu(d[1],d,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class Hc{constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,t=n[1];return Pu(t,n,t.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(yi(n)){const t=n[8],r=t?t.indexOf(this):-1;r>-1&&(bh(n,r),pu(t,r))}this._attachedToViewContainer=!1}Iv(this._lView[1],this._lView)}onDestroy(n){$0(this._lView[1],this._lView,null,n)}markForCheck(){gp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Au(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function YT(e,n){Ac(e,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=n}}class yM extends Hc{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Au(n[1],n,n[8],!1)}checkNoChanges(){}get context(){return null}}class vp extends Bc{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=xt(n);return new Uc(t,this.ngModule)}}function ey(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class wM{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){r=no(r);const i=this.injector.get(n,Hh,r);return i!==Hh||t===Hh?i:this.parentInjector.get(n,t,r)}}class Uc extends u0{constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function _R(e){return e.map(mR).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return ey(this.componentDef.inputs)}get outputs(){return ey(this.componentDef.outputs)}create(n,t,r,i){let o=(i=i||this.ngModule)instanceof uo?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new wM(n,o):n,a=s.get(jh,null);if(null===a)throw new we(407,!1);const d=s.get(YI,null),h=a.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",b=r?function QR(e,n,t){return e.selectRootElement(n,t===ln.ShadowDom)}(h,r,this.componentDef.encapsulation):yh(h,m,function bM(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(m)),O=this.componentDef.onPush?288:272,V=up(0,null,null,1,0,null,null,null,null,null),Q=xu(null,V,null,O,null,null,a,h,d,s,null);let re,ue;zf(Q);try{const ge=this.componentDef;let ve,he=null;ge.findHostDirectiveDefs?(ve=[],he=new Map,ge.findHostDirectiveDefs(ge,ve,he),ve.push(ge)):ve=[ge];const Te=function EM(e,n){const t=e[1];return e[22]=n,Sa(t,22,2,"#host",null)}(Q,b),Ve=function SM(e,n,t,r,i,o,s,a){const d=i[1];!function NM(e,n,t,r){for(const i of e)n.mergedAttrs=Ec(n.mergedAttrs,i.hostAttrs);null!==n.mergedAttrs&&(ku(n,n.mergedAttrs,!0),null!==t&&jv(r,t,n))}(r,e,n,s);const h=o.createRenderer(n,t),m=xu(i,U0(t),null,t.onPush?32:16,i[e.index],e,o,h,a||null,null,null);return d.firstCreatePass&&fp(d,e,r.length-1),Ou(i,m),i[e.index]=m}(Te,b,ge,ve,Q,a,h);ue=jf(V,22),b&&function IM(e,n,t,r){if(r)Qf(e,t,["ng-version",QI.full]);else{const{attrs:i,classes:o}=function vR(e){const n=[],t=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&n.push(o,e[++r]):8===i&&t.push(o);else{if(!Di(i))break;i=o}r++}return{attrs:n,classes:t}}(n.selectors[0]);i&&Qf(e,t,i),o&&o.length>0&&Vv(e,t,o.join(" "))}}(h,ge,b,r),void 0!==t&&function RM(e,n,t){const r=e.projection=[];for(let i=0;i<n.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(ue,this.ngContentSelectors,t),re=function TM(e,n,t,r,i,o){const s=er(),a=i[1],d=qr(s,i);z0(a,i,s,t,null,r);for(let m=0;m<t.length;m++)lr(ua(i,a,s.directiveStart+m,s),i);q0(a,i,s),d&&lr(d,i);const h=ua(i,a,s.directiveStart+s.componentOffset,s);if(e[8]=i[8]=h,null!==o)for(const m of o)m(h,n);return ap(a,s,e),h}(Ve,ge,ve,he,Q,[MM]),sp(V,Q,null)}finally{qf()}return new CM(this.componentType,re,wa(ue,Q),Q,ue)}}class CM extends WI{constructor(n,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new yM(i),this.componentType=n}setInput(n,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[n])){const o=this._rootLView;_p(o[1],o,i,n,t),K0(o,this._tNode.index)}}get injector(){return new da(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function MM(){const e=er();au(ye()[1],e)}function Pt(e){let n=function ty(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const r=[e];for(;n;){let i;if(bi(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new we(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);const s=e;s.inputs=yp(e.inputs),s.declaredInputs=yp(e.declaredInputs),s.outputs=yp(e.outputs);const a=i.hostBindings;a&&AM(e,a);const d=i.viewQuery,h=i.contentQueries;if(d&&FM(e,d),h&&OM(e,h),cn(e.inputs,i.inputs),cn(e.declaredInputs,i.declaredInputs),cn(e.outputs,i.outputs),bi(i)&&i.data.animation){const m=e.data;m.animation=(m.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(e),a===Pt&&(t=!1)}}n=Object.getPrototypeOf(n)}!function xM(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=Ec(i.hostAttrs,t=Ec(t,i.hostAttrs))}}(r)}function yp(e){return e===Ar?{}:e===bt?[]:e}function FM(e,n){const t=e.viewQuery;e.viewQuery=t?(r,i)=>{n(r,i),t(r,i)}:n}function OM(e,n){const t=e.contentQueries;e.contentQueries=t?(r,i,o)=>{n(r,i,o),t(r,i,o)}:n}function AM(e,n){const t=e.hostBindings;e.hostBindings=t?(r,i)=>{n(r,i),t(r,i)}:n}let Lu=null;function bs(){if(!Lu){const e=_e.Symbol;if(e&&e.iterator)Lu=e.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<n.length;++t){const r=n[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Lu=r)}}}return Lu}function $c(e){return!!bp(e)&&(Array.isArray(e)||!(e instanceof Map)&&bs()in e)}function bp(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Ui(e,n,t){return e[n]=t}function ur(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function ws(e,n,t,r){const i=ur(e,n,t);return ur(e,n+1,r)||i}function $t(e,n,t,r){const i=ye();return ur(i,aa(),n)&&(Nt(),Hi(un(),i,e,n,t,r)),$t}function Ta(e,n,t,r){return ur(e,aa(),t)?n+it(t)+r:at}function Ia(e,n,t,r,i,o){const a=ws(e,function ao(){return st.lFrame.bindingIndex}(),t,i);return co(2),a?n+it(t)+r+it(i)+o:at}function Ne(e,n,t,r,i,o,s,a){const d=ye(),h=Nt(),m=e+22,b=h.firstCreatePass?function WM(e,n,t,r,i,o,s,a,d){const h=n.consts,m=Sa(n,e,4,s||null,Ao(h,a));dp(n,t,m,Ao(h,d)),au(n,m);const b=m.tViews=up(2,m,r,i,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,h);return null!==n.queries&&(n.queries.template(n,m),b.queries=n.queries.embeddedTView(m)),m}(m,h,d,n,t,r,i,o,s):h.data[m];Vi(b,!1);const O=d[11].createComment("");yu(h,d,O,b),lr(O,d),Ou(d,d[m]=J0(O,d,O,b)),iu(b)&&cp(h,d,b),null!=s&&lp(d,b,a)}function Ei(e){return sa(function PN(){return st.lFrame.contextLView}(),22+e)}function me(e,n,t){const r=ye();return ur(r,aa(),n)&&Zr(Nt(),un(),r,e,n,r[11],t,!1),me}function wp(e,n,t,r,i){const s=i?"class":"style";_p(e,t,n.inputs[s],s,r)}function ce(e,n,t,r){const i=ye(),o=Nt(),s=22+e,a=i[11],d=i[s]=yh(a,n,function zN(){return st.lFrame.currentNamespace}()),h=o.firstCreatePass?function KM(e,n,t,r,i,o,s){const a=n.consts,h=Sa(n,e,2,i,Ao(a,o));return dp(n,t,h,Ao(a,s)),null!==h.attrs&&ku(h,h.attrs,!1),null!==h.mergedAttrs&&ku(h,h.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,h),h}(s,o,i,0,n,t,r):o.data[s];return Vi(h,!0),jv(a,d,h),32!=(32&h.flags)&&yu(o,i,d,h),0===function xN(){return st.lFrame.elementDepthCount}()&&lr(d,i),function FN(){st.lFrame.elementDepthCount++}(),iu(h)&&(cp(o,i,h),ap(o,h,i)),null!==r&&lp(i,h),ce}function de(){let e=er();Uf()?$f():(e=e.parent,Vi(e,!1));const n=e;!function ON(){st.lFrame.elementDepthCount--}();const t=Nt();return t.firstCreatePass&&(au(t,e),kf(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function ZN(e){return 0!=(8&e.flags)}(n)&&wp(t,n,ye(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function XN(e){return 0!=(16&e.flags)}(n)&&wp(t,n,ye(),n.stylesWithoutHost,!1),de}function _t(e,n,t,r){return ce(e,n,t,r),de(),_t}function dn(){return ye()}function Gc(e){return!!e&&"function"==typeof e.then}const Ep=function gy(e){return!!e&&"function"==typeof e.subscribe};function nt(e,n,t,r){const i=ye(),o=Nt(),s=er();return function _y(e,n,t,r,i,o,s,a){const d=iu(r),m=e.firstCreatePass&&Q0(e),b=n[8],O=Y0(n);let V=!0;if(3&r.type||a){const ue=qr(r,n),ge=a?a(ue):ue,ve=O.length,he=a?Ve=>a(Mn(Ve[r.index])):r.index;let Te=null;if(!a&&d&&(Te=function qM(e,n,t,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=n[7],d=i[o+2];return a.length>d?a[d]:null}"string"==typeof s&&(o+=2)}return null}(e,n,i,r.index)),null!==Te)(Te.__ngLastListenerFn__||Te).__ngNextListenerFn__=o,Te.__ngLastListenerFn__=o,V=!1;else{o=yy(r,n,b,o,!1);const Ve=t.listen(ge,i,o);O.push(o,Ve),m&&m.push(i,he,ve,ve+1)}}else o=yy(r,n,b,o,!1);const Q=r.outputs;let re;if(V&&null!==Q&&(re=Q[i])){const ue=re.length;if(ue)for(let ge=0;ge<ue;ge+=2){const Je=n[re[ge]][re[ge+1]].subscribe(o),Tt=O.length;O.push(o,Je),m&&m.push(i,r.index,Tt,-(Tt+1))}}}(o,i,i[11],s,e,n,0,r),nt}function vy(e,n,t,r){try{return!1!==t(r)}catch(i){return X0(e,i),!1}}function yy(e,n,t,r,i){return function o(s){if(s===Function)return r;gp(e.componentOffset>-1?Jr(e.index,n):n);let d=vy(n,0,r,s),h=o.__ngNextListenerFn__;for(;h;)d=vy(n,0,h,s)&&d,h=h.__ngNextListenerFn__;return i&&!1===d&&(s.preventDefault(),s.returnValue=!1),d}}function Pe(e=1){return function HN(e){return(st.lFrame.contextLView=function UN(e,n){for(;e>0;)n=n[15],e--;return n}(e,st.lFrame.contextLView))[8]}(e)}function JM(e,n){let t=null;const r=function fR(e){const n=e.attrs;if(null!=n){const t=n.indexOf(5);if(0==(1&t))return n[t+1]}return null}(e);for(let i=0;i<n.length;i++){const o=n[i];if("*"!==o){if(null===r?m0(e,o,!0):gR(r,o))return i}else t=i}return t}function Er(e,n,t){return Jn(e,"",n,"",t),Er}function Jn(e,n,t,r,i){const o=ye(),s=Ta(o,n,t,r);return s!==at&&Zr(Nt(),un(),o,e,s,o[11],i,!1),Jn}function Vu(e,n,t,r,i,o,s){const a=ye(),d=Ia(a,n,t,r,i,o);return d!==at&&Zr(Nt(),un(),a,e,d,a[11],s,!1),Vu}function Ry(e,n,t,r,i){const o=e[t+1],s=null===n;let a=r?Ci(o):ho(o),d=!1;for(;0!==a&&(!1===d||s);){const m=e[a+1];ZM(e[a],n)&&(d=!0,e[a+1]=r?Qh(m):Jh(m)),a=r?Ci(m):ho(m)}d&&(e[t+1]=r?Jh(o):Qh(o))}function ZM(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&_a(e,n)>=0}const Vn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function My(e){return e.substring(Vn.key,Vn.keyEnd)}function xy(e,n){const t=Vn.textEnd;return t===n?-1:(n=Vn.keyEnd=function nx(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}(e,Vn.key=n,t),ka(e,n,t))}function ka(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function yn(e,n){return function Si(e,n,t,r){const i=ye(),o=Nt(),s=co(2);o.firstUpdatePass&&Ly(o,e,s,r),n!==at&&ur(i,s,n)&&Vy(o,o.data[wr()],i,i[11],e,i[s+1]=function fx(e,n){return null==e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Xe(Po(e)))),e}(n,t),r,s)}(e,n,null,!0),yn}function Ds(e){!function Ni(e,n,t,r){const i=Nt(),o=co(2);i.firstUpdatePass&&Ly(i,null,o,r);const s=ye();if(t!==at&&ur(s,o,t)){const a=i.data[wr()];if(Hy(a,r)&&!Py(i,o)){let d=r?a.classesWithoutHost:a.stylesWithoutHost;null!==d&&(t=os(d,t||"")),wp(i,a,s,t,r)}else!function dx(e,n,t,r,i,o,s,a){i===at&&(i=bt);let d=0,h=0,m=0<i.length?i[0]:null,b=0<o.length?o[0]:null;for(;null!==m||null!==b;){const O=d<i.length?i[d+1]:void 0,V=h<o.length?o[h+1]:void 0;let re,Q=null;m===b?(d+=2,h+=2,O!==V&&(Q=b,re=V)):null===b||null!==m&&m<b?(d+=2,Q=m):(h+=2,Q=b,re=V),null!==Q&&Vy(e,n,t,r,Q,re,s,a),m=d<i.length?i[d]:null,b=h<o.length?o[h]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function ux(e,n,t){if(null==t||""===t)return bt;const r=[],i=Po(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else"string"==typeof i&&n(r,i);return r}(e,n,t),r,o)}}(Qr,Wi,e,!0)}function Wi(e,n){for(let t=function ex(e){return function Oy(e){Vn.key=0,Vn.keyEnd=0,Vn.value=0,Vn.valueEnd=0,Vn.textEnd=e.length}(e),xy(e,ka(e,0,Vn.textEnd))}(n);t>=0;t=xy(n,t))Qr(e,My(n),!0)}function Py(e,n){return n>=e.expandoStartIndex}function Ly(e,n,t,r){const i=e.data;if(null===i[t+1]){const o=i[wr()],s=Py(e,t);Hy(o,r)&&null===n&&!s&&(n=!1),n=function sx(e,n,t,r){const i=function Gf(e){const n=st.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let o=r?n.residualClasses:n.residualStyles;if(null===i)0===(r?n.classBindings:n.styleBindings)&&(t=Kc(t=Np(null,e,n,t,r),n.attrs,r),o=null);else{const s=n.directiveStylingLast;if(-1===s||e[s]!==i)if(t=Np(i,e,n,t,r),null===o){let d=function ax(e,n,t){const r=t?n.classBindings:n.styleBindings;if(0!==ho(r))return e[Ci(r)]}(e,n,r);void 0!==d&&Array.isArray(d)&&(d=Np(null,e,n,d[1],r),d=Kc(d,n.attrs,r),function cx(e,n,t,r){e[Ci(t?n.classBindings:n.styleBindings)]=r}(e,n,r,d))}else o=function lx(e,n,t){let r;const i=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<i;o++)r=Kc(r,e[o].hostAttrs,t);return Kc(r,n.attrs,t)}(e,n,r)}return void 0!==o&&(r?n.residualClasses=o:n.residualStyles=o),t}(i,o,n,r),function YM(e,n,t,r,i,o){let s=o?n.classBindings:n.styleBindings,a=Ci(s),d=ho(s);e[r]=t;let m,h=!1;if(Array.isArray(t)){const b=t;m=b[1],(null===m||_a(b,m)>0)&&(h=!0)}else m=t;if(i)if(0!==d){const O=Ci(e[a+1]);e[r+1]=Iu(O,a),0!==O&&(e[O+1]=Yh(e[O+1],r)),e[a+1]=function LR(e,n){return 131071&e|n<<17}(e[a+1],r)}else e[r+1]=Iu(a,0),0!==a&&(e[a+1]=Yh(e[a+1],r)),a=r;else e[r+1]=Iu(d,0),0===a?a=r:e[d+1]=Yh(e[d+1],r),d=r;h&&(e[r+1]=Jh(e[r+1])),Ry(e,m,r,!0),Ry(e,m,r,!1),function QM(e,n,t,r,i){const o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof n&&_a(o,n)>=0&&(t[r+1]=Qh(t[r+1]))}(n,m,e,r,o),s=Iu(a,d),o?n.classBindings=s:n.styleBindings=s}(i,o,n,t,s,r)}}function Np(e,n,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=n[a],r=Kc(r,o.hostAttrs,i),o!==e);)a++;return null!==e&&(t.directiveStylingLast=a),r}function Kc(e,n,t){const r=t?1:2;let i=-1;if(null!==n)for(let o=0;o<n.length;o++){const s=n[o];"number"==typeof s?i=s:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Qr(e,s,!!t||n[++o]))}return void 0===e?null:e}function Vy(e,n,t,r,i,o,s,a){if(!(3&n.type))return;const d=e.data,h=d[a+1];ju(function F0(e){return 1==(1&e)}(h)?jy(d,n,t,i,ho(h),s):void 0)||(ju(o)||function x0(e){return 2==(2&e)}(h)&&(o=jy(d,null,t,i,a,s)),function sI(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:Lr.DashCase;null==i?e.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Lr.Important),e.setStyle(t,r,i,o))}}(r,s,ou(wr(),t),i,o))}function jy(e,n,t,r,i,o){const s=null===n;let a;for(;i>0;){const d=e[i],h=Array.isArray(d),m=h?d[1]:d,b=null===m;let O=t[i+1];O===at&&(O=b?bt:void 0);let V=b?oh(O,r):m===r?O:void 0;if(h&&!ju(V)&&(V=oh(d,r)),ju(V)&&(a=V,s))return a;const Q=e[i+1];i=s?Ci(Q):ho(Q)}if(null!==n){let d=o?n.residualClasses:n.residualStyles;null!=d&&(a=oh(d,r))}return a}function ju(e){return void 0!==e}function Hy(e,n){return 0!=(e.flags&(n?8:16))}function Fe(e,n=""){const t=ye(),r=Nt(),i=e+22,o=r.firstCreatePass?Sa(r,i,1,n,null):r.data[i],s=t[i]=function vh(e,n){return e.createText(n)}(t[11],n);yu(r,t,s,o),Vi(o,!1)}function go(e){return jt("",e,""),go}function jt(e,n,t){const r=ye(),i=Ta(r,e,n,t);return i!==at&&function po(e,n,t){const r=ou(n,e);!function Nv(e,n,t){e.setValue(n,t)}(e[11],r,t)}(r,wr(),i),jt}function Pa(e,n,t){const r=ye();return ur(r,aa(),n)&&Zr(Nt(),un(),r,e,n,r[11],t,!0),Pa}const Cs=void 0;var Fx=["en",[["a","p"],["AM","PM"],Cs],[["AM","PM"],Cs,Cs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cs,"{1} 'at' {0}",Cs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function xx(e){const t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let La={};function Sr(e){const n=function Ox(e){return e.toLowerCase().replace(/_/g,"-")}(e);let t=ab(n);if(t)return t;const r=n.split("-")[0];if(t=ab(r),t)return t;if("en"===r)return Fx;throw new we(701,!1)}function ab(e){return e in La||(La[e]=_e.ng&&_e.ng.common&&_e.ng.common.locales&&_e.ng.common.locales[e]),La[e]}var Be=(()=>((Be=Be||{})[Be.LocaleId=0]="LocaleId",Be[Be.DayPeriodsFormat=1]="DayPeriodsFormat",Be[Be.DayPeriodsStandalone=2]="DayPeriodsStandalone",Be[Be.DaysFormat=3]="DaysFormat",Be[Be.DaysStandalone=4]="DaysStandalone",Be[Be.MonthsFormat=5]="MonthsFormat",Be[Be.MonthsStandalone=6]="MonthsStandalone",Be[Be.Eras=7]="Eras",Be[Be.FirstDayOfWeek=8]="FirstDayOfWeek",Be[Be.WeekendRange=9]="WeekendRange",Be[Be.DateFormat=10]="DateFormat",Be[Be.TimeFormat=11]="TimeFormat",Be[Be.DateTimeFormat=12]="DateTimeFormat",Be[Be.NumberSymbols=13]="NumberSymbols",Be[Be.NumberFormats=14]="NumberFormats",Be[Be.CurrencyCode=15]="CurrencyCode",Be[Be.CurrencySymbol=16]="CurrencySymbol",Be[Be.CurrencyName=17]="CurrencyName",Be[Be.Currencies=18]="Currencies",Be[Be.Directionality=19]="Directionality",Be[Be.PluralCase=20]="PluralCase",Be[Be.ExtraData=21]="ExtraData",Be))();const Ba="en-US";let cb=Ba;function Mp(e,n,t,r,i){if(e=Ge(e),Array.isArray(e))for(let o=0;o<e.length;o++)Mp(e[o],n,t,r,i);else{const o=Nt(),s=ye();let a=ys(e)?e:Ge(e.provide),d=l0(e);const h=er(),m=1048575&h.providerIndexes,b=h.directiveStart,O=h.providerIndexes>>20;if(ys(e)||!e.multi){const V=new Dc(d,i,ne),Q=Fp(a,n,i?m:m+O,b);-1===Q?(th(du(h,s),o,a),xp(o,e,n.length),n.push(a),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),t.push(V),s.push(V)):(t[Q]=V,s[Q]=V)}else{const V=Fp(a,n,m+O,b),Q=Fp(a,n,m,m+O),re=V>=0&&t[V],ue=Q>=0&&t[Q];if(i&&!ue||!i&&!re){th(du(h,s),o,a);const ge=function IF(e,n,t,r,i){const o=new Dc(e,t,ne);return o.multi=[],o.index=n,o.componentProviders=0,Ob(o,i,r&&!t),o}(i?TF:NF,t.length,i,r,d);!i&&ue&&(t[Q].providerFactory=ge),xp(o,e,n.length,0),n.push(a),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),t.push(ge),s.push(ge)}else xp(o,e,V>-1?V:Q,Ob(t[i?Q:V],d,!i&&r));!i&&r&&ue&&t[Q].componentProviders++}}}function xp(e,n,t,r){const i=ys(n),o=function LI(e){return!!e.useClass}(n);if(i||o){const d=(o?Ge(n.useClass):n).prototype.ngOnDestroy;if(d){const h=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){const m=h.indexOf(t);-1===m?h.push(t,[r,d]):h[m+1].push(r,d)}else h.push(t,d)}}}function Ob(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function Fp(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function NF(e,n,t,r){return Op(this.multi,[])}function TF(e,n,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=ua(t,t[1],this.providerFactory.index,r);o=a.slice(0,s),Op(i,o);for(let d=s;d<a.length;d++)o.push(a[d])}else o=[],Op(i,o);return o}function Op(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function en(e,n=[]){return t=>{t.providersResolver=(r,i)=>function SF(e,n,t){const r=Nt();if(r.firstCreatePass){const i=bi(e);Mp(t,r.data,r.blueprint,i,!0),Mp(n,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,n)}}class Es{}class Ab{}class kb extends Es{constructor(n,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vp(this);const r=Kr(n);this._bootstrapComponents=fo(r.bootstrap),this._r3Injector=C0(n,t,[{provide:Es,useValue:this},{provide:Bc,useValue:this.componentFactoryResolver}],Xe(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Ap extends Ab{constructor(n){super(),this.moduleType=n}create(n){return new kb(this.moduleType,n)}}class MF extends Es{constructor(n,t,r){super(),this.componentFactoryResolver=new vp(this),this.instance=null;const i=new c0([...n,{provide:Es,useValue:this},{provide:Bc,useValue:this.componentFactoryResolver}],t||Nu(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Gu(e,n,t=null){return new MF(e,n,t).injector}let xF=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=r0(0,t.type),i=r.length>0?Gu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=He({token:e,providedIn:"environment",factory:()=>new e(Re(uo))}),e})();function Pb(e){e.getStandaloneInjector=n=>n.get(xF).getOrCreateStandaloneInjector(e)}function Ku(e,n,t){const r=br()+e,i=ye();return i[r]===at?Ui(i,r,t?n.call(t):n()):function Wc(e,n){return e[n]}(i,r)}function Zc(e,n){const t=e[n];return t===at?void 0:t}function Wb(e,n,t,r,i,o,s){const a=n+t;return ws(e,a,i,o)?Ui(e,a+2,s?r.call(s,i,o):r(i,o)):Zc(e,a+2)}function Lp(e,n){const t=Nt();let r;const i=e+22;t.firstCreatePass?(r=function KF(e,n){if(n)for(let t=n.length-1;t>=0;t--){const r=n[t];if(e===r.name)return r}}(n,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(i,r.onDestroy)):r=t.data[i];const o=r.factory||(r.factory=ps(r.type)),s=ae(ne);try{const a=uu(!1),d=o();return uu(a),function GM(e,n,t,r){t>=e.data.length&&(e.data[t]=null,e.blueprint[t]=null),n[t]=r}(t,ye(),i,d),d}finally{ae(s)}}function qb(e,n,t){const r=e+22,i=ye(),o=sa(i,r);return Xc(i,r)?function $b(e,n,t,r,i,o){const s=n+t;return ur(e,s,i)?Ui(e,s+1,o?r.call(o,i):r(i)):Zc(e,s+1)}(i,br(),n,o.transform,t,o):o.transform(t)}function Xc(e,n){return e[1].data[n].pure}function Bp(e){return n=>{setTimeout(e,void 0,n)}}const ct=class YF extends ze{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,r){let i=n,o=t||(()=>null),s=r;if(n&&"object"==typeof n){const d=n;i=d.next?.bind(d),o=d.error?.bind(d),s=d.complete?.bind(d)}this.__isAsync&&(o=Bp(o),i&&(i=Bp(i)),s&&(s=Bp(s)));const a=super.subscribe({next:i,error:o,complete:s});return n instanceof D&&n.add(a),a}};function QF(){return this._results[bs()]()}class Vp{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=bs(),r=Vp.prototype;r[t]||(r[t]=QF)}get changes(){return this._changes||(this._changes=new ct)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){const r=this;r.dirty=!1;const i=Yr(n);(this._changesDetected=!function lT(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let wn=(()=>{class e{}return e.__NG_ELEMENT_ID__=eO,e})();const ZF=wn,XF=class extends ZF{constructor(n,t,r){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(n,t){const r=this._declarationTContainer.tViews,i=xu(this._declarationLView,r,n,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(r)),sp(r,i,n),new Hc(i)}};function eO(){return qu(er(),ye())}function qu(e,n){return 4&e.type?new XF(n,e,wa(e,n)):null}let Ti=(()=>{class e{}return e.__NG_ELEMENT_ID__=tO,e})();function tO(){return Zb(er(),ye())}const nO=Ti,Yb=class extends nO{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return wa(this._hostTNode,this._hostLView)}get injector(){return new da(this._hostTNode,this._hostLView)}get parentInjector(){const n=fu(this._hostTNode,this._hostLView);if(W_(n)){const t=la(n,this._hostLView),r=ca(n);return new da(t[1].data[r+8],t)}return new da(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=Qb(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=n.createEmbeddedView(t||{},o);return this.insert(s,i),s}createComponent(n,t,r,i,o){const s=n&&!function Nc(e){return"function"==typeof e}(n);let a;if(s)a=t;else{const b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}const d=s?n:new Uc(xt(n)),h=r||this.parentInjector;if(!o&&null==d.ngModule){const O=(s?h:this.parentInjector).get(uo,null);O&&(o=O)}const m=d.create(h,i,void 0,o);return this.insert(m.hostView,a),m}insert(n,t){const r=n._lView,i=r[1];if(function MN(e){return yi(e[3])}(r)){const m=this.indexOf(n);if(-1!==m)this.detach(m);else{const b=r[3],O=new Yb(b,b[6],b[3]);O.detach(O.indexOf(n))}}const o=this._adjustIndex(t),s=this._lContainer;!function ZT(e,n,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=n),r<o-10?(n[4]=t[i],tv(t,10+r,n)):(t.push(n),n[4]=null),n[3]=t;const s=n[17];null!==s&&t!==s&&function XT(e,n){const t=e[9];n[16]!==n[3][3][16]&&(e[2]=!0),null===t?e[9]=[n]:t.push(n)}(s,n);const a=n[19];null!==a&&a.insertView(e),n[2]|=64}(i,r,s,o);const a=Ch(o,s),d=r[11],h=vu(d,s[7]);return null!==h&&function JT(e,n,t,r,i,o){r[0]=i,r[6]=n,Ac(e,r,t,1,i,o)}(i,s[6],d,r,h,a),n.attachToViewContainerRef(),tv(jp(s),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=Qb(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=bh(this._lContainer,t);r&&(pu(jp(this._lContainer),t),Iv(r[1],r))}detach(n){const t=this._adjustIndex(n,-1),r=bh(this._lContainer,t);return r&&null!=pu(jp(this._lContainer),t)?new Hc(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function Qb(e){return e[8]}function jp(e){return e[8]||(e[8]=[])}function Zb(e,n){let t;const r=n[e.index];if(yi(r))t=r;else{let i;if(8&e.type)i=Mn(r);else{const o=n[11];i=o.createComment("");const s=qr(e,n);_s(o,vu(o,s),i,function rI(e,n){return e.nextSibling(n)}(o,s),!1)}n[e.index]=t=J0(r,n,i,e),Ou(n,t)}return new Yb(t,e,n)}class Hp{constructor(n){this.queryList=n,this.matches=null}clone(){return new Hp(this.queryList)}setDirty(){this.queryList.setDirty()}}class Up{constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const r=null!==n.contentQueries?n.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const s=t.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new Up(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==r1(n,t).matches&&this.queries[t].setDirty()}}class Xb{constructor(n,t,r=null){this.predicate=n,this.flags=t,this.read=r}}class $p{constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(n,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new $p(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Wp{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new Wp(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(n,t,oO(t,o)),this.matchTNodeWithReadOption(n,t,hu(t,n,o,!1,!1))}else r===wn?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,hu(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Xt||i===Ti||i===wn&&4&t.type)this.addMatch(t.index,-2);else{const o=hu(t,n,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function oO(e,n){const t=e.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1];return null}function aO(e,n,t,r){return-1===t?function sO(e,n){return 11&e.type?wa(e,n):4&e.type?qu(e,n):null}(n,e):-2===t?function cO(e,n,t){return t===Xt?wa(n,e):t===wn?qu(n,e):t===Ti?Zb(n,e):void 0}(e,n,r):ua(e,e[1],t,n)}function e1(e,n,t,r){const i=n[19].queries[r];if(null===i.matches){const o=e.data,s=t.matches,a=[];for(let d=0;d<s.length;d+=2){const h=s[d];a.push(h<0?null:aO(n,o[h],s[d+1],t.metadata.read))}i.matches=a}return i.matches}function Gp(e,n,t,r){const i=e.queries.getByIndex(t),o=i.matches;if(null!==o){const s=e1(e,n,i,t);for(let a=0;a<o.length;a+=2){const d=o[a];if(d>0)r.push(s[a/2]);else{const h=o[a+1],m=n[-d];for(let b=10;b<m.length;b++){const O=m[b];O[17]===O[3]&&Gp(O[1],O,h,r)}if(null!==m[9]){const b=m[9];for(let O=0;O<b.length;O++){const V=b[O];Gp(V[1],V,h,r)}}}}}return r}function tn(e){const n=ye(),t=Nt(),r=A_();Kf(r+1);const i=r1(t,r);if(e.dirty&&function RN(e){return 4==(4&e[2])}(n)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const o=i.crossesNgTemplate?Gp(t,n,r,[]):e1(t,n,i,r);e.reset(o,qI),e.notifyOnChanges()}return!0}return!1}function ja(e,n,t){const r=Nt();r.firstCreatePass&&(n1(r,new Xb(e,n,t),-1),2==(2&n)&&(r.staticViewQueries=!0)),t1(r,ye(),n)}function Fn(e,n,t,r){const i=Nt();if(i.firstCreatePass){const o=er();n1(i,new Xb(n,t,r),o.index),function uO(e,n){const t=e.contentQueries||(e.contentQueries=[]);n!==(t.length?t[t.length-1]:-1)&&t.push(e.queries.length-1,n)}(i,e),2==(2&t)&&(i.staticContentQueries=!0)}t1(i,ye(),t)}function nn(){return function lO(e,n){return e[19].queries[n].queryList}(ye(),A_())}function t1(e,n,t){const r=new Vp(4==(4&t));$0(e,n,r,r.destroy),null===n[19]&&(n[19]=new Up),n[19].queries.push(new Hp(r))}function n1(e,n,t){null===e.queries&&(e.queries=new $p),e.queries.track(new Wp(n,t))}function r1(e,n){return e.queries.getByIndex(n)}function Gi(e,n){return qu(e,n)}function Yu(...e){}const Qu=new $e("Application Initializer");let Zu=(()=>{class e{constructor(t){this.appInits=t,this.resolve=Yu,this.reject=Yu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Gc(o))t.push(o);else if(Ep(o)){const s=new Promise((a,d)=>{o.subscribe({complete:a,error:d})});t.push(s)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Re(Qu,8))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const tl=new $e("AppId",{providedIn:"root",factory:function D1(){return`${Yp()}${Yp()}${Yp()}`}});function Yp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const C1=new $e("Platform Initializer"),Xu=new $e("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),E1=new $e("appBootstrapListener");let MO=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const mo=new $e("LocaleId",{providedIn:"root",factory:()=>ut(mo,K.Optional|K.SkipSelf)||function xO(){return typeof $localize<"u"&&$localize.locale||Ba}()});class OO{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let Qp=(()=>{class e{compileModuleSync(t){return new Ap(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=fo(Kr(t).declarations).reduce((s,a)=>{const d=xt(a);return d&&s.push(new Uc(d)),s},[]);return new OO(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const PO=(()=>Promise.resolve(0))();function Zp(e){typeof Zone>"u"?PO.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Wt{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ct(!1),this.onMicrotaskEmpty=new ct(!1),this.onStable=new ct(!1),this.onError=new ct(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function LO(){let e=_e.requestAnimationFrame,n=_e.cancelAnimationFrame;if(typeof Zone<"u"&&e&&n){const t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function jO(e){const n=()=>{!function VO(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(_e,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,eg(e),e.isCheckStableRunning=!0,Xp(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),eg(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{try{return T1(e),t.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&n(),I1(e)}},onInvoke:(t,r,i,o,s,a,d)=>{try{return T1(e),t.invoke(i,o,s,a,d)}finally{e.shouldCoalesceRunChangeDetection&&n(),I1(e)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,eg(e),Xp(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wt.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(Wt.isInAngularZone())throw new we(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,n,BO,Yu,Yu);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const BO={};function Xp(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function eg(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function T1(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function I1(e){e._nesting--,Xp(e)}class HO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ct,this.onMicrotaskEmpty=new ct,this.onStable=new ct,this.onError=new ct}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}}const R1=new $e(""),ed=new $e("");let rg,tg=(()=>{class e{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,rg||(function UO(e){rg=e}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wt.assertNotInAngularZone(),Zp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Zp(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return e.\u0275fac=function(t){return new(t||e)(Re(Wt),Re(ng),Re(ed))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})(),ng=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return rg?.findTestabilityInTree(this,t,r)??null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),jo=null;const M1=new $e("AllowMultipleToken"),ig=new $e("PlatformDestroyListeners");class x1{constructor(n,t){this.name=n,this.token=t}}function O1(e,n,t=[]){const r=`Platform: ${n}`,i=new $e(r);return(o=[])=>{let s=og();if(!s||s.injector.get(M1,!1)){const a=[...t,...o,{provide:i,useValue:!0}];e?e(a):function GO(e){if(jo&&!jo.get(M1,!1))throw new we(400,!1);jo=e;const n=e.get(k1);(function F1(e){const n=e.get(C1,null);n&&n.forEach(t=>t())})(e)}(function A1(e=[],n){return Cr.create({name:n,providers:[{provide:Ph,useValue:"platform"},{provide:ig,useValue:new Set([()=>jo=null])},...e]})}(a,r))}return function zO(e){const n=og();if(!n)throw new we(401,!1);return n}()}}function og(){return jo?.get(k1)??null}let k1=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function L1(e,n){let t;return t="noop"===e?new HO:("zone.js"===e?void 0:e)||new Wt(n),t}(r?.ngZone,function P1(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:Wt,useValue:i}];return i.run(()=>{const s=Cr.create({providers:o,parent:this.injector,name:t.moduleType.name}),a=t.create(s),d=a.injector.get(Da,null);if(!d)throw new we(402,!1);return i.runOutsideAngular(()=>{const h=i.onError.subscribe({next:m=>{d.handleError(m)}});a.onDestroy(()=>{td(this._modules,a),h.unsubscribe()})}),function B1(e,n,t){try{const r=t();return Gc(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}(d,i,()=>{const h=a.injector.get(Zu);return h.runInitializers(),h.donePromise.then(()=>(function lb(e){pr(e,"Expected localeId to be defined"),"string"==typeof e&&(cb=e.toLowerCase().replace(/_/g,"-"))}(a.injector.get(mo,Ba)||Ba),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=V1({},r);return function $O(e,n,t){const r=new Ap(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(nl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new we(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(ig,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Re(Cr))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function V1(e,n){return Array.isArray(n)?n.reduce(V1,e):{...e,...n}}let nl=(()=>{class e{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Ee(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new Ee(a=>{let d;this._zone.runOutsideAngular(()=>{d=this._zone.onStable.subscribe(()=>{Wt.assertNotInAngularZone(),Zp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const h=this._zone.onUnstable.subscribe(()=>{Wt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{d.unsubscribe(),h.unsubscribe()}});this.isStable=function Gn(...e){let n=Number.POSITIVE_INFINITY,t=null,r=e[e.length-1];return Ht(r)?(t=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof r&&(n=e.pop()),null===t&&1===e.length&&e[0]instanceof Ee?e[0]:eo(n)(et(e,t))}(o,s.pipe(function Qs(){return e=>Et()(function Zl(e,n){return function(r){let i;if(i="function"==typeof e?e:function(){return e},"function"==typeof n)return r.lift(new Ys(i,n));const o=Object.create(r,is);return o.source=r,o.subjectFactory=i,o}}(gi)(e))}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof u0;if(!this._injector.get(Zu).done)throw!i&&function na(e){const n=xt(e)||or(e)||vr(e);return null!==n&&n.standalone}(t),new we(405,false);let s;s=i?t:this._injector.get(Bc).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function WO(e){return e.isBoundToModule}(s)?void 0:this._injector.get(Es),h=s.create(Cr.NULL,[],r||s.selector,a),m=h.location.nativeElement,b=h.injector.get(R1,null);return b?.registerApplication(m),h.onDestroy(()=>{this.detachView(h.hostView),td(this.components,h),b?.unregisterApplication(m)}),this._loadComponent(h),h}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;td(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(E1,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>td(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new we(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(t){return new(t||e)(Re(Wt),Re(uo),Re(Da))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function td(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}let vo=(()=>{class e{}return e.__NG_ELEMENT_ID__=JO,e})();function JO(e){return function YO(e,n,t){if(ru(e)&&!t){const r=Jr(e.index,n);return new Hc(r,r)}return 47&e.type?new Hc(n[16],n):null}(er(),ye(),16==(16&e))}class W1{constructor(){}supports(n){return $c(n)}create(n){return new nA(n)}}const tA=(e,n)=>n;class nA{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||tA}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<K1(r,i,o)?t:r,a=K1(s,i,o),d=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const h=a-i,m=d-i;if(h!=m){for(let O=0;O<h;O++){const V=O<o.length?o[O]:o[O]=0,Q=V+O;m<=Q&&Q<h&&(o[O]=V+1)}o[s.previousIndex]=m-h}}a!==d&&n(s,a,d)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!$c(n))throw new we(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)o=n[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function HM(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[bs()]();let r;for(;!(r=t.next()).done;)n(r.value)}}(n,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,r,i){let o;return null===n?o=this._itTail:(o=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,o,i)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,o,i)):n=this._addAfter(new rA(t,r),o,i),n}_verifyReinsertion(n,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?n=this._reinsertAfter(o,n._prev,i):n.currentIndex!=i&&(n.currentIndex=i,this._addToMoves(n,i)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const i=n._prevRemoved,o=n._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(n,t,r),this._addToMoves(n,r),n}_moveAfter(n,t,r){return this._unlink(n),this._insertAfter(n,t,r),this._addToMoves(n,r),n}_addAfter(n,t,r){return this._insertAfter(n,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,r){const i=null===t?this._itHead:t._next;return n._next=i,n._prev=t,null===i?this._itTail=n:i._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new G1),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,r=n._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new G1),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class rA{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class iA{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const t=n._prevDup,r=n._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class G1{constructor(){this.map=new Map}put(n){const t=n.trackById;let r=this.map.get(t);r||(r=new iA,this.map.set(t,r)),r.add(n)}get(n,t){const i=this.map.get(n);return i?i.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function K1(e,n,t){const r=e.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+n+i}class z1{constructor(){}supports(n){return n instanceof Map||bp(n)}create(){return new oA}}class oA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let t;for(t=this._mapHead;null!==t;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}diff(n){if(n){if(!(n instanceof Map||bp(n)))throw new we(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){const r=n._prev;return t._next=n,t._prev=r,n._prev=t,r&&(r._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){const i=this._records.get(n);this._maybeAddToChanges(i,t);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new sA(n);return this._records.set(n,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(r=>t(n[r],r))}}class sA{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function q1(){return new id([new W1])}let id=(()=>{class e{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||q1()),deps:[[e,new Rc,new Ic]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new we(901,!1)}}return e.\u0275prov=He({token:e,providedIn:"root",factory:q1}),e})();function J1(){return new rl([new z1])}let rl=(()=>{class e{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||J1()),deps:[[e,new Rc,new Ic]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new we(901,!1)}}return e.\u0275prov=He({token:e,providedIn:"root",factory:J1}),e})();const lA=O1(null,"core",[]);let uA=(()=>{class e{constructor(t){}}return e.\u0275fac=function(t){return new(t||e)(Re(nl))},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({}),e})();function $a(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function ug(e,n){const t=xt(e),r=n.elementInjector||Nu();return new Uc(t).create(r,n.projectableNodes,n.hostElement,n.environmentInjector)}let od=null;function Ki(){return od}class hA{}const Cn=new $e("DocumentToken");let dg=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=He({token:e,factory:function(){return function pA(){return Re(Y1)}()},providedIn:"platform"}),e})();const gA=new $e("Location Initialized");let Y1=(()=>{class e extends dg{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ki().getBaseHref(this._doc)}onPopState(t){const r=Ki().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Ki().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Q1()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Q1()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Re(Cn))},e.\u0275prov=He({token:e,factory:function(){return function mA(){return new Y1(Re(Cn))}()},providedIn:"platform"}),e})();function Q1(){return!!window.history.pushState}function fg(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function Z1(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function yo(e){return e&&"?"!==e[0]?"?"+e:e}let Ns=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=He({token:e,factory:function(){return ut(ew)},providedIn:"root"}),e})();const X1=new $e("appBaseHref");let ew=(()=>{class e extends Ns{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ut(Cn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return fg(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+yo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+yo(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+yo(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Re(dg),Re(X1,8))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),_A=(()=>{class e extends Ns{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=fg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+yo(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+yo(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Re(dg),Re(X1,8))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})(),hg=(()=>{class e{constructor(t){this._subject=new ct,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Z1(tw(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+yo(r))}normalize(t){return e.stripTrailingSlash(function yA(e,n){return e&&n.startsWith(e)?n.substring(e.length):n}(this._baseHref,tw(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return e.normalizeQueryParams=yo,e.joinWithSlash=fg,e.stripTrailingSlash=Z1,e.\u0275fac=function(t){return new(t||e)(Re(Ns))},e.\u0275prov=He({token:e,factory:function(){return function vA(){return new hg(Re(Ns))}()},providedIn:"root"}),e})();function tw(e){return e.replace(/\/index.html$/,"")}var En=(()=>((En=En||{})[En.Format=0]="Format",En[En.Standalone=1]="Standalone",En))(),wt=(()=>((wt=wt||{})[wt.Narrow=0]="Narrow",wt[wt.Abbreviated=1]="Abbreviated",wt[wt.Wide=2]="Wide",wt[wt.Short=3]="Short",wt))(),fn=(()=>((fn=fn||{})[fn.Short=0]="Short",fn[fn.Medium=1]="Medium",fn[fn.Long=2]="Long",fn[fn.Full=3]="Full",fn))(),tt=(()=>((tt=tt||{})[tt.Decimal=0]="Decimal",tt[tt.Group=1]="Group",tt[tt.List=2]="List",tt[tt.PercentSign=3]="PercentSign",tt[tt.PlusSign=4]="PlusSign",tt[tt.MinusSign=5]="MinusSign",tt[tt.Exponential=6]="Exponential",tt[tt.SuperscriptingExponent=7]="SuperscriptingExponent",tt[tt.PerMille=8]="PerMille",tt[tt.Infinity=9]="Infinity",tt[tt.NaN=10]="NaN",tt[tt.TimeSeparator=11]="TimeSeparator",tt[tt.CurrencyDecimal=12]="CurrencyDecimal",tt[tt.CurrencyGroup=13]="CurrencyGroup",tt))();function sd(e,n){return li(Sr(e)[Be.DateFormat],n)}function ad(e,n){return li(Sr(e)[Be.TimeFormat],n)}function cd(e,n){return li(Sr(e)[Be.DateTimeFormat],n)}function ci(e,n){const t=Sr(e),r=t[Be.NumberSymbols][n];if(typeof r>"u"){if(n===tt.CurrencyDecimal)return t[Be.NumberSymbols][tt.Decimal];if(n===tt.CurrencyGroup)return t[Be.NumberSymbols][tt.Group]}return r}function rw(e){if(!e[Be.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[Be.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function li(e,n){for(let t=n;t>-1;t--)if(typeof e[t]<"u")return e[t];throw new Error("Locale data API: locale data undefined")}function gg(e){const[n,t]=e.split(":");return{hours:+n,minutes:+t}}const FA=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,il={},OA=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var jn=(()=>((jn=jn||{})[jn.Short=0]="Short",jn[jn.ShortGMT=1]="ShortGMT",jn[jn.Long=2]="Long",jn[jn.Extended=3]="Extended",jn))(),rt=(()=>((rt=rt||{})[rt.FullYear=0]="FullYear",rt[rt.Month=1]="Month",rt[rt.Date=2]="Date",rt[rt.Hours=3]="Hours",rt[rt.Minutes=4]="Minutes",rt[rt.Seconds=5]="Seconds",rt[rt.FractionalSeconds=6]="FractionalSeconds",rt[rt.Day=7]="Day",rt))(),ft=(()=>((ft=ft||{})[ft.DayPeriods=0]="DayPeriods",ft[ft.Days=1]="Days",ft[ft.Months=2]="Months",ft[ft.Eras=3]="Eras",ft))();function AA(e,n,t,r){let i=function $A(e){if(sw(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[i,o=1,s=1]=e.split("-").map(a=>+a);return ld(i,o-1,s)}const t=parseFloat(e);if(!isNaN(e-t))return new Date(t);let r;if(r=e.match(FA))return function WA(e){const n=new Date(0);let t=0,r=0;const i=e[8]?n.setUTCFullYear:n.setFullYear,o=e[8]?n.setUTCHours:n.setHours;e[9]&&(t=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(n,Number(e[1]),Number(e[2])-1,Number(e[3]));const s=Number(e[4]||0)-t,a=Number(e[5]||0)-r,d=Number(e[6]||0),h=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return o.call(n,s,a,d,h),n}(r)}const n=new Date(e);if(!sw(n))throw new Error(`Unable to convert "${e}" into a date`);return n}(e);n=bo(t,n)||n;let a,s=[];for(;n;){if(a=OA.exec(n),!a){s.push(n);break}{s=s.concat(a.slice(1));const m=s.pop();if(!m)break;n=m}}let d=i.getTimezoneOffset();r&&(d=ow(r,d),i=function UA(e,n,t){const r=t?-1:1,i=e.getTimezoneOffset();return function HA(e,n){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+n),e}(e,r*(ow(n,i)-i))}(i,r,!0));let h="";return s.forEach(m=>{const b=function jA(e){if(_g[e])return _g[e];let n;switch(e){case"G":case"GG":case"GGG":n=Qt(ft.Eras,wt.Abbreviated);break;case"GGGG":n=Qt(ft.Eras,wt.Wide);break;case"GGGGG":n=Qt(ft.Eras,wt.Narrow);break;case"y":n=An(rt.FullYear,1,0,!1,!0);break;case"yy":n=An(rt.FullYear,2,0,!0,!0);break;case"yyy":n=An(rt.FullYear,3,0,!1,!0);break;case"yyyy":n=An(rt.FullYear,4,0,!1,!0);break;case"Y":n=hd(1);break;case"YY":n=hd(2,!0);break;case"YYY":n=hd(3);break;case"YYYY":n=hd(4);break;case"M":case"L":n=An(rt.Month,1,1);break;case"MM":case"LL":n=An(rt.Month,2,1);break;case"MMM":n=Qt(ft.Months,wt.Abbreviated);break;case"MMMM":n=Qt(ft.Months,wt.Wide);break;case"MMMMM":n=Qt(ft.Months,wt.Narrow);break;case"LLL":n=Qt(ft.Months,wt.Abbreviated,En.Standalone);break;case"LLLL":n=Qt(ft.Months,wt.Wide,En.Standalone);break;case"LLLLL":n=Qt(ft.Months,wt.Narrow,En.Standalone);break;case"w":n=mg(1);break;case"ww":n=mg(2);break;case"W":n=mg(1,!0);break;case"d":n=An(rt.Date,1);break;case"dd":n=An(rt.Date,2);break;case"c":case"cc":n=An(rt.Day,1);break;case"ccc":n=Qt(ft.Days,wt.Abbreviated,En.Standalone);break;case"cccc":n=Qt(ft.Days,wt.Wide,En.Standalone);break;case"ccccc":n=Qt(ft.Days,wt.Narrow,En.Standalone);break;case"cccccc":n=Qt(ft.Days,wt.Short,En.Standalone);break;case"E":case"EE":case"EEE":n=Qt(ft.Days,wt.Abbreviated);break;case"EEEE":n=Qt(ft.Days,wt.Wide);break;case"EEEEE":n=Qt(ft.Days,wt.Narrow);break;case"EEEEEE":n=Qt(ft.Days,wt.Short);break;case"a":case"aa":case"aaa":n=Qt(ft.DayPeriods,wt.Abbreviated);break;case"aaaa":n=Qt(ft.DayPeriods,wt.Wide);break;case"aaaaa":n=Qt(ft.DayPeriods,wt.Narrow);break;case"b":case"bb":case"bbb":n=Qt(ft.DayPeriods,wt.Abbreviated,En.Standalone,!0);break;case"bbbb":n=Qt(ft.DayPeriods,wt.Wide,En.Standalone,!0);break;case"bbbbb":n=Qt(ft.DayPeriods,wt.Narrow,En.Standalone,!0);break;case"B":case"BB":case"BBB":n=Qt(ft.DayPeriods,wt.Abbreviated,En.Format,!0);break;case"BBBB":n=Qt(ft.DayPeriods,wt.Wide,En.Format,!0);break;case"BBBBB":n=Qt(ft.DayPeriods,wt.Narrow,En.Format,!0);break;case"h":n=An(rt.Hours,1,-12);break;case"hh":n=An(rt.Hours,2,-12);break;case"H":n=An(rt.Hours,1);break;case"HH":n=An(rt.Hours,2);break;case"m":n=An(rt.Minutes,1);break;case"mm":n=An(rt.Minutes,2);break;case"s":n=An(rt.Seconds,1);break;case"ss":n=An(rt.Seconds,2);break;case"S":n=An(rt.FractionalSeconds,1);break;case"SS":n=An(rt.FractionalSeconds,2);break;case"SSS":n=An(rt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":n=dd(jn.Short);break;case"ZZZZZ":n=dd(jn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=dd(jn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":n=dd(jn.Long);break;default:return null}return _g[e]=n,n}(m);h+=b?b(i,t,d):"''"===m?"'":m.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}function ld(e,n,t){const r=new Date(0);return r.setFullYear(e,n,t),r.setHours(0,0,0),r}function bo(e,n){const t=function bA(e){return Sr(e)[Be.LocaleId]}(e);if(il[t]=il[t]||{},il[t][n])return il[t][n];let r="";switch(n){case"shortDate":r=sd(e,fn.Short);break;case"mediumDate":r=sd(e,fn.Medium);break;case"longDate":r=sd(e,fn.Long);break;case"fullDate":r=sd(e,fn.Full);break;case"shortTime":r=ad(e,fn.Short);break;case"mediumTime":r=ad(e,fn.Medium);break;case"longTime":r=ad(e,fn.Long);break;case"fullTime":r=ad(e,fn.Full);break;case"short":const i=bo(e,"shortTime"),o=bo(e,"shortDate");r=ud(cd(e,fn.Short),[i,o]);break;case"medium":const s=bo(e,"mediumTime"),a=bo(e,"mediumDate");r=ud(cd(e,fn.Medium),[s,a]);break;case"long":const d=bo(e,"longTime"),h=bo(e,"longDate");r=ud(cd(e,fn.Long),[d,h]);break;case"full":const m=bo(e,"fullTime"),b=bo(e,"fullDate");r=ud(cd(e,fn.Full),[m,b])}return r&&(il[t][n]=r),r}function ud(e,n){return n&&(e=e.replace(/\{([^}]+)}/g,function(t,r){return null!=n&&r in n?n[r]:t})),e}function Ri(e,n,t="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=1-e:(e=-e,o=t));let s=String(e);for(;s.length<n;)s="0"+s;return r&&(s=s.slice(s.length-n)),o+s}function An(e,n,t=0,r=!1,i=!1){return function(o,s){let a=function PA(e,n){switch(e){case rt.FullYear:return n.getFullYear();case rt.Month:return n.getMonth();case rt.Date:return n.getDate();case rt.Hours:return n.getHours();case rt.Minutes:return n.getMinutes();case rt.Seconds:return n.getSeconds();case rt.FractionalSeconds:return n.getMilliseconds();case rt.Day:return n.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,o);if((t>0||a>-t)&&(a+=t),e===rt.Hours)0===a&&-12===t&&(a=12);else if(e===rt.FractionalSeconds)return function kA(e,n){return Ri(e,3).substring(0,n)}(a,n);const d=ci(s,tt.MinusSign);return Ri(a,n,d,r,i)}}function Qt(e,n,t=En.Format,r=!1){return function(i,o){return function LA(e,n,t,r,i,o){switch(t){case ft.Months:return function CA(e,n,t){const r=Sr(e),o=li([r[Be.MonthsFormat],r[Be.MonthsStandalone]],n);return li(o,t)}(n,i,r)[e.getMonth()];case ft.Days:return function DA(e,n,t){const r=Sr(e),o=li([r[Be.DaysFormat],r[Be.DaysStandalone]],n);return li(o,t)}(n,i,r)[e.getDay()];case ft.DayPeriods:const s=e.getHours(),a=e.getMinutes();if(o){const h=function TA(e){const n=Sr(e);return rw(n),(n[Be.ExtraData][2]||[]).map(r=>"string"==typeof r?gg(r):[gg(r[0]),gg(r[1])])}(n),m=function IA(e,n,t){const r=Sr(e);rw(r);const o=li([r[Be.ExtraData][0],r[Be.ExtraData][1]],n)||[];return li(o,t)||[]}(n,i,r),b=h.findIndex(O=>{if(Array.isArray(O)){const[V,Q]=O,re=s>=V.hours&&a>=V.minutes,ue=s<Q.hours||s===Q.hours&&a<Q.minutes;if(V.hours<Q.hours){if(re&&ue)return!0}else if(re||ue)return!0}else if(O.hours===s&&O.minutes===a)return!0;return!1});if(-1!==b)return m[b]}return function wA(e,n,t){const r=Sr(e),o=li([r[Be.DayPeriodsFormat],r[Be.DayPeriodsStandalone]],n);return li(o,t)}(n,i,r)[s<12?0:1];case ft.Eras:return function EA(e,n){return li(Sr(e)[Be.Eras],n)}(n,r)[e.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,o,e,n,t,r)}}function dd(e){return function(n,t,r){const i=-1*r,o=ci(t,tt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case jn.Short:return(i>=0?"+":"")+Ri(s,2,o)+Ri(Math.abs(i%60),2,o);case jn.ShortGMT:return"GMT"+(i>=0?"+":"")+Ri(s,1,o);case jn.Long:return"GMT"+(i>=0?"+":"")+Ri(s,2,o)+":"+Ri(Math.abs(i%60),2,o);case jn.Extended:return 0===r?"Z":(i>=0?"+":"")+Ri(s,2,o)+":"+Ri(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${e}"`)}}}function iw(e){return ld(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function mg(e,n=!1){return function(t,r){let i;if(n){const o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{const o=iw(t),s=function VA(e){const n=ld(e,0,1).getDay();return ld(e,0,1+(n<=4?4:11)-n)}(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Ri(i,e,ci(r,tt.MinusSign))}}function hd(e,n=!1){return function(t,r){return Ri(iw(t).getFullYear(),e,ci(r,tt.MinusSign),n)}}const _g={};function ow(e,n){e=e.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(t)?n:t}function sw(e){return e instanceof Date&&!isNaN(e.valueOf())}function uw(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}let dw=(()=>{class e{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&($c(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Xe(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return e.\u0275fac=function(t){return new(t||e)(ne(id),ne(rl),ne(Xt),ne(wi))},e.\u0275dir=ke({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),e})();class rk{constructor(n,t,r,i){this.$implicit=n,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vr=(()=>{class e{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new rk(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),pw(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{pw(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(ne(Ti),ne(wn),ne(id))},e.\u0275dir=ke({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function pw(e,n){e.context.$implicit=n.item}let Sn=(()=>{class e{constructor(t,r){this._viewContainer=t,this._context=new ok,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){gw("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){gw("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(ne(Ti),ne(wn))},e.\u0275dir=ke({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class ok{constructor(){this.$implicit=null,this.ngIf=null}}function gw(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Xe(n)}'.`)}const bk=new $e("DATE_PIPE_DEFAULT_TIMEZONE"),wk=new $e("DATE_PIPE_DEFAULT_OPTIONS");let _w=(()=>{class e{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(null==t||""===t||t!=t)return null;try{return AA(t,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw function Mi(e,n){return new we(2100,!1)}()}}}return e.\u0275fac=function(t){return new(t||e)(ne(mo,16),ne(bk,24),ne(wk,24))},e.\u0275pipe=ir({name:"date",type:e,pure:!0,standalone:!0}),e})(),vw=(()=>{class e{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=yw}transform(t,r=yw){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const i=this.differ.diff(t),o=r!==this.compareFn;return i&&(this.keyValues=[],i.forEachItem(s=>{this.keyValues.push(function Nk(e,n){return{key:e,value:n}}(s.key,s.currentValue))})),(i||o)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}}return e.\u0275fac=function(t){return new(t||e)(ne(rl,16))},e.\u0275pipe=ir({name:"keyvalue",type:e,pure:!1,standalone:!0}),e})();function yw(e,n){const t=e.key,r=n.key;if(t===r)return 0;if(void 0===t)return 1;if(void 0===r)return-1;if(null===t)return 1;if(null===r)return-1;if("string"==typeof t&&"string"==typeof r)return t<r?-1:1;if("number"==typeof t&&"number"==typeof r)return t-r;if("boolean"==typeof t&&"boolean"==typeof r)return t<r?-1:1;const i=String(t),o=String(r);return i==o?0:i<o?-1:1}let Xr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({}),e})();let kk=(()=>{class e{}return e.\u0275prov=He({token:e,providedIn:"root",factory:()=>new Pk(Re(Cn),window)}),e})();class Pk{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function Lk(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=n)}}scrollToElement(n){const t=n.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=ww(this.window.history)||ww(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ww(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class Dw{}class uP extends hA{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Rg extends uP{static makeCurrent(){!function fA(e){od||(od=e)}(new Rg)}onAndCancel(n,t,r){return n.addEventListener(t,r,!1),()=>{n.removeEventListener(t,r,!1)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function dP(){return cl=cl||document.querySelector("base"),cl?cl.getAttribute("href"):null}();return null==t?null:function fP(e){md=md||document.createElement("a"),md.setAttribute("href",e);const n=md.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){cl=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return uw(document.cookie,n)}}let md,cl=null;const Iw=new $e("TRANSITION_ID"),pP=[{provide:Qu,useFactory:function hP(e,n,t){return()=>{t.get(Zu).donePromise.then(()=>{const r=Ki(),i=n.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Iw,Cn,Cr],multi:!0}];let mP=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();const _d=new $e("EventManagerPlugins");let vd=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(t))return this._eventNameToPlugin.set(t,s),s}throw new Error(`No event manager plugin found for event ${t}`)}}return e.\u0275fac=function(t){return new(t||e)(Re(_d),Re(Wt))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();class Rw{constructor(n){this._doc=n}addGlobalEventListener(n,t,r){const i=Ki().getGlobalEventTarget(this._doc,n);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Mw=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})(),ll=(()=>{class e extends Mw{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(xw),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(xw))}}return e.\u0275fac=function(t){return new(t||e)(Re(Cn))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();function xw(e){Ki().remove(e)}const Mg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xg=/%COMP%/g;function yd(e,n,t){for(let r=0;r<n.length;r++){let i=n[r];Array.isArray(i)?yd(e,i,t):(i=i.replace(xg,e),t.push(i))}return t}function Aw(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}let Fg=(()=>{class e{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Og(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case ln.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new DP(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case ln.ShadowDom:return new CP(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=yd(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Re(vd),Re(ll),Re(tl))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();class Og{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?document.createElementNS(Mg[t]||t,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,t){(Pw(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(Pw(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let r="string"==typeof n?document.querySelector(n):n;if(!r)throw new Error(`The selector "${n}" did not match any elements`);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;const o=Mg[i];o?n.setAttributeNS(o,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const i=Mg[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(Lr.DashCase|Lr.Important)?n.style.setProperty(t,r,i&Lr.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&Lr.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n[t]=r}setValue(n,t){n.nodeValue=t}listen(n,t,r){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,t,Aw(r)):this.eventManager.addEventListener(n,t,Aw(r))}}function Pw(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class DP extends Og{constructor(n,t,r,i){super(n),this.component=r;const o=yd(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function yP(e){return"_ngcontent-%COMP%".replace(xg,e)}(i+"-"+r.id),this.hostAttr=function bP(e){return"_nghost-%COMP%".replace(xg,e)}(i+"-"+r.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}class CP extends Og{constructor(n,t,r,i){super(n),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=yd(i.id,i.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let EP=(()=>{class e extends Rw{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return e.\u0275fac=function(t){return new(t||e)(Re(Cn))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();const Lw=["alt","control","meta","shift"],SP={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NP={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let TP=(()=>{class e extends Rw{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,i){const o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ki().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Lw.forEach(h=>{const m=r.indexOf(h);m>-1&&(r.splice(m,1),s+=h+".")}),s+=o,0!=r.length||0===o.length)return null;const d={};return d.domEventName=i,d.fullKey=s,d}static matchEventFullKeyCode(t,r){let i=SP[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Lw.forEach(s=>{s!==i&&(0,NP[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{e.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return e.\u0275fac=function(t){return new(t||e)(Re(Cn))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();const Vw=[{provide:Xu,useValue:"browser"},{provide:C1,useValue:function IP(){Rg.makeCurrent()},multi:!0},{provide:Cn,useFactory:function MP(){return function dI(e){Th=e}(document),document},deps:[]}],xP=O1(lA,"browser",Vw),jw=new $e(""),Hw=[{provide:ed,useClass:class gP{addToWindow(n){_e.getAngularTestability=(r,i=!0)=>{const o=n.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},_e.getAllAngularTestabilities=()=>n.getAllTestabilities(),_e.getAllAngularRootElements=()=>n.getAllRootElements(),_e.frameworkStabilizers||(_e.frameworkStabilizers=[]),_e.frameworkStabilizers.push(r=>{const i=_e.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(d){s=s||d,o--,0==o&&r(s)};i.forEach(function(d){d.whenStable(a)})})}findTestabilityInTree(n,t,r){return null==t?null:n.getTestability(t)??(r?Ki().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:R1,useClass:tg,deps:[Wt,ng,ed]},{provide:tg,useClass:tg,deps:[Wt,ng,ed]}],Uw=[{provide:Ph,useValue:"root"},{provide:Da,useFactory:function RP(){return new Da},deps:[]},{provide:_d,useClass:EP,multi:!0,deps:[Cn,Wt,Xu]},{provide:_d,useClass:TP,multi:!0,deps:[Cn]},{provide:Fg,useClass:Fg,deps:[vd,ll,tl]},{provide:jh,useExisting:Fg},{provide:Mw,useExisting:ll},{provide:ll,useClass:ll,deps:[Cn]},{provide:vd,useClass:vd,deps:[_d,Wt]},{provide:Dw,useClass:mP,deps:[]},[]];let FP=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:tl,useValue:t.appId},{provide:Iw,useExisting:tl},pP]}}}return e.\u0275fac=function(t){return new(t||e)(Re(jw,12))},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({providers:[...Uw,...Hw],imports:[Xr,uA]}),e})(),$w=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return e.\u0275fac=function(t){return new(t||e)(Re(Cn))},e.\u0275prov=He({token:e,factory:function(t){let r=null;return r=t?new t:function AP(){return new $w(Re(Cn))}(),r},providedIn:"root"}),e})();function qe(...e){let n=e[e.length-1];return Ht(n)?(e.pop(),q(e,n)):et(e)}typeof window<"u"&&window;class Yn extends ze{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return t&&!t.closed&&n.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Z;return this._value}next(n){super.next(this._value=n)}}const bd=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();class Pg extends x{notifyNext(n,t,r,i,o){this.destination.next(t)}notifyError(n,t){this.destination.error(n)}notifyComplete(n){this.destination.complete()}}class UP extends x{constructor(n,t,r){super(),this.parent=n,this.outerValue=t,this.outerIndex=r,this.index=0}_next(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)}_error(n){this.parent.notifyError(n,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Lg(e,n,t,r,i=new UP(e,t,r)){if(!i.closed)return n instanceof Ee?n.subscribe(i):Y(n)(i)}const Kw={};function wd(...e){let n,t;return Ht(e[e.length-1])&&(t=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&g(e[0])&&(e=e[0]),et(e,t).lift(new $P(n))}class $P{constructor(n){this.resultSelector=n}call(n,t){return t.subscribe(new WP(n,this.resultSelector))}}class WP extends Pg{constructor(n,t){super(n),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(n){this.values.push(Kw),this.observables.push(n)}_complete(){const n=this.observables,t=n.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(Lg(this,n[r],void 0,r))}}notifyComplete(n){0==(this.active-=1)&&this.destination.complete()}notifyNext(n,t,r){const i=this.values,s=this.toRespond?i[r]===Kw?--this.toRespond:this.toRespond:0;i[r]=t,0===s&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(n){let t;try{t=this.resultSelector.apply(this,n)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}function Dd(...e){return function GP(){return eo(1)}()(qe(...e))}const Ts=new Ee(e=>e.complete());function Cd(e){return e?function KP(e){return new Ee(n=>e.schedule(()=>n.complete()))}(e):Ts}function zw(e){return new Ee(n=>{let t;try{t=e()}catch(i){return void n.error(i)}return(t?Ie(t):Cd()).subscribe(n)})}function Wa(e,n){return new Ee(n?t=>n.schedule(zP,0,{error:e,subscriber:t}):t=>t.error(e))}function zP({error:e,subscriber:n}){n.error(e)}function ei(e,n){return"function"==typeof n?t=>t.pipe(ei((r,i)=>Ie(e(r,i)).pipe(Ce((o,s)=>n(r,o,i,s))))):t=>t.lift(new qP(e))}class qP{constructor(n){this.project=n}call(n,t){return t.subscribe(new JP(n,this.project))}}class JP extends mt{constructor(n,t){super(n),this.project=t,this.index=0}_next(n){let t;const r=this.index++;try{t=this.project(n,r)}catch(i){return void this.destination.error(i)}this._innerSub(t)}_innerSub(n){const t=this.innerSubscription;t&&t.unsubscribe();const r=new pt(this),i=this.destination;i.add(r),this.innerSubscription=hr(n,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}const qw=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function Tr(e){return n=>0===e?Cd():n.lift(new YP(e))}class YP{constructor(n){if(this.total=n,this.total<0)throw new qw}call(n,t){return t.subscribe(new QP(n,this.total))}}class QP extends x{constructor(n,t){super(n),this.total=t,this.count=0}_next(n){const t=this.total,r=++this.count;r<=t&&(this.destination.next(n),r===t&&(this.destination.complete(),this.unsubscribe()))}}function Ir(e,n){return function(r){return r.lift(new ZP(e,n))}}class ZP{constructor(n,t){this.predicate=n,this.thisArg=t}call(n,t){return t.subscribe(new XP(n,this.predicate,this.thisArg))}}class XP extends x{constructor(n,t,r){super(n),this.predicate=t,this.thisArg=r,this.count=0}_next(n){let t;try{t=this.predicate.call(this.thisArg,n,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(n)}}function Sd(e=null){return n=>n.lift(new e2(e))}class e2{constructor(n){this.defaultValue=n}call(n,t){return t.subscribe(new t2(n,this.defaultValue))}}class t2 extends x{constructor(n,t){super(n),this.defaultValue=t,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Jw(e=o2){return n=>n.lift(new n2(e))}class n2{constructor(n){this.errorFactory=n}call(n,t){return t.subscribe(new r2(n,this.errorFactory))}}class r2 extends x{constructor(n,t){super(n),this.errorFactory=t,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(t){n=t}this.destination.error(n)}}}function o2(){return new bd}function Uo(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Ir((i,o)=>e(i,o,r)):se,Tr(1),t?Sd(n):Jw(()=>new bd))}function $o(e,n){return Gt(e,n,1)}function wo(){}function Qn(e,n,t){return function(i){return i.lift(new s2(e,n,t))}}class s2{constructor(n,t,r){this.nextOrObserver=n,this.error=t,this.complete=r}call(n,t){return t.subscribe(new a2(n,this.nextOrObserver,this.error,this.complete))}}class a2 extends x{constructor(n,t,r,i){super(n),this._tapNext=wo,this._tapError=wo,this._tapComplete=wo,this._tapError=r||wo,this._tapComplete=i||wo,H(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||wo,this._tapError=t.error||wo,this._tapComplete=t.complete||wo)}_next(n){try{this._tapNext.call(this._context,n)}catch(t){return void this.destination.error(t)}this.destination.next(n)}_error(n){try{this._tapError.call(this._context,n)}catch(t){return void this.destination.error(t)}this.destination.error(n)}_complete(){try{this._tapComplete.call(this._context)}catch(n){return void this.destination.error(n)}return this.destination.complete()}}function Is(e){return function(t){const r=new c2(e),i=t.lift(r);return r.caught=i}}class c2{constructor(n){this.selector=n}call(n,t){return t.subscribe(new l2(n,this.selector,this.caught))}}class l2 extends mt{constructor(n,t,r){super(n),this.selector=t,this.caught=r}error(n){if(!this.isStopped){let t;try{t=this.selector(n,this.caught)}catch(o){return void super.error(o)}this._unsubscribeAndRecycle();const r=new pt(this);this.add(r);const i=hr(t,r);i!==r&&this.add(i)}}}function Yw(e,n){let t=!1;return arguments.length>=2&&(t=!0),function(i){return i.lift(new u2(e,n,t))}}class u2{constructor(n,t,r=!1){this.accumulator=n,this.seed=t,this.hasSeed=r}call(n,t){return t.subscribe(new d2(n,this.accumulator,this.seed,this.hasSeed))}}class d2 extends x{constructor(n,t,r,i){super(n),this.accumulator=t,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const t=this.index++;let r;try{r=this.accumulator(this.seed,n,t)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function Bg(e){return function(t){return 0===e?Cd():t.lift(new f2(e))}}class f2{constructor(n){if(this.total=n,this.total<0)throw new qw}call(n,t){return t.subscribe(new h2(n,this.total))}}class h2 extends x{constructor(n,t){super(n),this.total=t,this.ring=new Array,this.count=0}_next(n){const t=this.ring,r=this.total,i=this.count++;t.length<r?t.push(n):t[i%r]=n}_complete(){const n=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let o=0;o<r;o++){const s=t++%r;n.next(i[s])}}n.complete()}}function Qw(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Ir((i,o)=>e(i,o,r)):se,Bg(1),t?Sd(n):Jw(()=>new bd))}class g2{constructor(n,t){this.predicate=n,this.inclusive=t}call(n,t){return t.subscribe(new m2(n,this.predicate,this.inclusive))}}class m2 extends x{constructor(n,t,r){super(n),this.predicate=t,this.inclusive=r,this.index=0}_next(n){const t=this.destination;let r;try{r=this.predicate(n,this.index++)}catch(i){return void t.error(i)}this.nextOrComplete(n,r)}nextOrComplete(n,t){const r=this.destination;Boolean(t)?r.next(n):(this.inclusive&&r.next(n),r.complete())}}class v2{constructor(n){this.value=n}call(n,t){return t.subscribe(new y2(n,this.value))}}class y2 extends x{constructor(n,t){super(n),this.value=t}_next(n){this.destination.next(this.value)}}function Vg(e){return n=>n.lift(new b2(e))}class b2{constructor(n){this.callback=n}call(n,t){return t.subscribe(new w2(n,this.callback))}}class w2 extends x{constructor(n,t){super(n),this.add(new D(t))}}const gt="primary",ul=Symbol("RouteTitle");class D2{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ga(e){return new D2(e)}function C2(e,n,t){const r=t.path.split("/");if(r.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=e[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function zi(e,n){const t=e?Object.keys(e):void 0,r=n?Object.keys(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Zw(e[i],n[i]))return!1;return!0}function Zw(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),r=[...n].sort();return t.every((i,o)=>r[o]===i)}return e===n}function Xw(e){return Array.prototype.concat.apply([],e)}function eD(e){return e.length>0?e[e.length-1]:null}function tr(e,n){for(const t in e)e.hasOwnProperty(t)&&n(e[t],t)}function Wo(e){return Ep(e)?e:Gc(e)?Ie(Promise.resolve(e)):qe(e)}const Nd=!1,S2={exact:function rD(e,n,t){if(!Ms(e.segments,n.segments)||!Td(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!rD(e.children[r],n.children[r],t))return!1;return!0},subset:iD},tD={exact:function N2(e,n){return zi(e,n)},subset:function T2(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>Zw(e[t],n[t]))},ignored:()=>!0};function nD(e,n,t){return S2[t.paths](e.root,n.root,t.matrixParams)&&tD[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function iD(e,n,t){return oD(e,n,n.segments,t)}function oD(e,n,t,r){if(e.segments.length>t.length){const i=e.segments.slice(0,t.length);return!(!Ms(i,t)||n.hasChildren()||!Td(i,t,r))}if(e.segments.length===t.length){if(!Ms(e.segments,t)||!Td(e.segments,t,r))return!1;for(const i in n.children)if(!e.children[i]||!iD(e.children[i],n.children[i],r))return!1;return!0}{const i=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!!(Ms(e.segments,i)&&Td(e.segments,i,r)&&e.children[gt])&&oD(e.children[gt],n,o,r)}}function Td(e,n,t){return n.every((r,i)=>tD[t](e[i].parameters,r.parameters))}class Rs{constructor(n=new vt([],{}),t={},r=null){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ga(this.queryParams)),this._queryParamMap}toString(){return M2.serialize(this)}}class vt{constructor(n,t){this.segments=n,this.children=t,this.parent=null,tr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Id(this)}}class dl{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ga(this.parameters)),this._parameterMap}toString(){return lD(this)}}function Ms(e,n){return e.length===n.length&&e.every((t,r)=>t.path===n[r].path)}let sD=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=He({token:e,factory:function(){return new jg},providedIn:"root"}),e})();class jg{parse(n){const t=new V2(n);return new Rs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${fl(n.root,!0)}`,r=function O2(e){const n=Object.keys(e).map(t=>{const r=e[t];return Array.isArray(r)?r.map(i=>`${Rd(t)}=${Rd(i)}`).join("&"):`${Rd(t)}=${Rd(r)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams),i="string"==typeof n.fragment?`#${function x2(e){return encodeURI(e)}(n.fragment)}`:"";return`${t}${r}${i}`}}const M2=new jg;function Id(e){return e.segments.map(n=>lD(n)).join("/")}function fl(e,n){if(!e.hasChildren())return Id(e);if(n){const t=e.children[gt]?fl(e.children[gt],!1):"",r=[];return tr(e.children,(i,o)=>{o!==gt&&r.push(`${o}:${fl(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function R2(e,n){let t=[];return tr(e.children,(r,i)=>{i===gt&&(t=t.concat(n(r,i)))}),tr(e.children,(r,i)=>{i!==gt&&(t=t.concat(n(r,i)))}),t}(e,(r,i)=>i===gt?[fl(e.children[gt],!1)]:[`${i}:${fl(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[gt]?`${Id(e)}/${t[0]}`:`${Id(e)}/(${t.join("//")})`}}function aD(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rd(e){return aD(e).replace(/%3B/gi,";")}function Hg(e){return aD(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Md(e){return decodeURIComponent(e)}function cD(e){return Md(e.replace(/\+/g,"%20"))}function lD(e){return`${Hg(e.path)}${function F2(e){return Object.keys(e).map(n=>`;${Hg(n)}=${Hg(e[n])}`).join("")}(e.parameters)}`}const A2=/^[^\/()?;=#]+/;function xd(e){const n=e.match(A2);return n?n[0]:""}const k2=/^[^=?&#]+/,L2=/^[^&#]+/;class V2{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vt([],{}):new vt([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[gt]=new vt(n,t)),r}parseSegment(){const n=xd(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new we(4009,Nd);return this.capture(n),new dl(Md(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=xd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=xd(this.remaining);i&&(r=i,this.capture(r))}n[Md(t)]=Md(r)}parseQueryParam(n){const t=function P2(e){const n=e.match(k2);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function B2(e){const n=e.match(L2);return n?n[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=cD(t),o=cD(r);if(n.hasOwnProperty(i)){let s=n[i];Array.isArray(s)||(s=[s],n[i]=s),s.push(o)}else n[i]=o}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=xd(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new we(4010,Nd);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=gt);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[gt]:new vt([],s),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new we(4011,Nd)}}function Ug(e){return e.segments.length>0?new vt([],{[gt]:e}):e}function Fd(e){const n={};for(const r of Object.keys(e.children)){const o=Fd(e.children[r]);(o.segments.length>0||o.hasChildren())&&(n[r]=o)}return function j2(e){if(1===e.numberOfChildren&&e.children[gt]){const n=e.children[gt];return new vt(e.segments.concat(n.segments),n.children)}return e}(new vt(e.segments,n))}function xs(e){return e instanceof Rs}function $2(e,n,t,r,i){if(0===t.length)return Ka(n.root,n.root,n.root,r,i);const o=function fD(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new dD(!0,0,e);let n=0,t=!1;const r=e.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return tr(o.outlets,(d,h)=>{a[h]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,d)=>{0==d&&"."===a||(0==d&&""===a?t=!0:".."===a?n++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new dD(t,n,r)}(t);return o.toRoot()?Ka(n.root,n.root,new vt([],{}),r,i):function s(d){const h=function G2(e,n,t,r){if(e.isAbsolute)return new za(n.root,!0,0);if(-1===r)return new za(t,t===n.root,0);return function hD(e,n,t){let r=e,i=n,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new we(4005,!1);i=r.segments.length}return new za(r,!1,i-o)}(t,r+(hl(e.commands[0])?0:1),e.numberOfDoubleDots)}(o,n,e.snapshot?._urlSegment,d),m=h.processChildren?gl(h.segmentGroup,h.index,o.commands):Wg(h.segmentGroup,h.index,o.commands);return Ka(n.root,h.segmentGroup,m,r,i)}(e.snapshot?._lastPathIndex)}function hl(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function pl(e){return"object"==typeof e&&null!=e&&e.outlets}function Ka(e,n,t,r,i){let s,o={};r&&tr(r,(d,h)=>{o[h]=Array.isArray(d)?d.map(m=>`${m}`):`${d}`}),s=e===n?t:uD(e,n,t);const a=Ug(Fd(s));return new Rs(a,o,i)}function uD(e,n,t){const r={};return tr(e.children,(i,o)=>{r[o]=i===n?t:uD(i,n,t)}),new vt(e.segments,r)}class dD{constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&hl(r[0]))throw new we(4003,!1);const i=r.find(pl);if(i&&i!==eD(r))throw new we(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class za{constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}}function Wg(e,n,t){if(e||(e=new vt([],{})),0===e.segments.length&&e.hasChildren())return gl(e,n,t);const r=function z2(e,n,t){let r=0,i=n;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return o;const s=e.segments[i],a=t[r];if(pl(a))break;const d=`${a}`,h=r<t.length-1?t[r+1]:null;if(i>0&&void 0===d)break;if(d&&h&&"object"==typeof h&&void 0===h.outlets){if(!gD(d,h,s))return o;r+=2}else{if(!gD(d,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new vt(e.segments.slice(0,r.pathIndex),{});return o.children[gt]=new vt(e.segments.slice(r.pathIndex),e.children),gl(o,0,i)}return r.match&&0===i.length?new vt(e.segments,{}):r.match&&!e.hasChildren()?Gg(e,n,t):r.match?gl(e,0,i):Gg(e,n,t)}function gl(e,n,t){if(0===t.length)return new vt(e.segments,{});{const r=function K2(e){return pl(e[0])?e[0].outlets:{[gt]:e}}(t),i={};return tr(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=Wg(e.children[s],n,o))}),tr(e.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new vt(e.segments,i)}}function Gg(e,n,t){const r=e.segments.slice(0,n);let i=0;for(;i<t.length;){const o=t[i];if(pl(o)){const d=q2(o.outlets);return new vt(r,d)}if(0===i&&hl(t[0])){r.push(new dl(e.segments[n].path,pD(t[0]))),i++;continue}const s=pl(o)?o.outlets[gt]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&hl(a)?(r.push(new dl(s,pD(a))),i+=2):(r.push(new dl(s,{})),i++)}return new vt(r,{})}function q2(e){const n={};return tr(e,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(n[r]=Gg(new vt([],{}),0,t))}),n}function pD(e){const n={};return tr(e,(t,r)=>n[r]=`${t}`),n}function gD(e,n,t){return e==t.path&&zi(n,t.parameters)}class Do{constructor(n,t){this.id=n,this.url=t}}class Kg extends Do{constructor(n,t,r="imperative",i=null){super(n,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fs extends Do{constructor(n,t,r){super(n,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Od extends Do{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mD extends Do{constructor(n,t,r,i){super(n,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class J2 extends Do{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y2 extends Do{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q2 extends Do{constructor(n,t,r,i,o){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Z2 extends Do{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X2 extends Do{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eL{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class tL{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nL{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rL{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iL{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oL{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _D{constructor(n,t,r){this.routerEvent=n,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class vD{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=zg(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){const t=zg(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=qg(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return qg(n,this._root).map(t=>t.value)}}function zg(e,n){if(e===n.value)return n;for(const t of n.children){const r=zg(e,t);if(r)return r}return null}function qg(e,n){if(e===n.value)return[n];for(const t of n.children){const r=qg(e,t);if(r.length)return r.unshift(n),r}return[]}class Co{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function qa(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class yD extends vD{constructor(n,t){super(n),this.snapshot=t,Jg(this,n)}toString(){return this.snapshot.toString()}}function bD(e,n){const t=function aL(e,n){const s=new Ad([],{},{},"",{},gt,n,null,e.root,-1,{});return new DD("",new Co(s,[]))}(e,n),r=new Yn([new dl("",{})]),i=new Yn({}),o=new Yn({}),s=new Yn({}),a=new Yn(""),d=new Eo(r,i,s,a,o,gt,n,t.root);return d.snapshot=t.root,new yD(new Co(d,[]),t)}class Eo{constructor(n,t,r,i,o,s,a,d){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe(Ce(h=>h[ul]))??qe(void 0),this._futureSnapshot=d}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ce(n=>Ga(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ce(n=>Ga(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wD(e,n="emptyOnly"){const t=e.pathFromRoot;let r=0;if("always"!==n)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function cL(e){return e.reduce((n,t)=>({params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ad{constructor(n,t,r,i,o,s,a,d,h,m,b){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=d,this._urlSegment=h,this._lastPathIndex=m,this._resolve=b}get title(){return this.data?.[ul]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ga(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ga(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class DD extends vD{constructor(n,t){super(t),this.url=n,Jg(this,t)}toString(){return CD(this._root)}}function Jg(e,n){n.value._routerState=e,n.children.forEach(t=>Jg(e,t))}function CD(e){const n=e.children.length>0?` { ${e.children.map(CD).join(", ")} } `:"";return`${e.value}${n}`}function Yg(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,zi(n.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),n.fragment!==t.fragment&&e.fragment.next(t.fragment),zi(n.params,t.params)||e.params.next(t.params),function E2(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!zi(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.url.next(t.url),zi(n.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Qg(e,n){const t=zi(e.params,n.params)&&function I2(e,n){return Ms(e,n)&&e.every((t,r)=>zi(t.parameters,n[r].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||Qg(e.parent,n.parent))}function ml(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=n.value;const i=function uL(e,n,t){return n.children.map(r=>{for(const i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return ml(e,r,i);return ml(e,r)})}(e,n,t);return new Co(r,i)}{if(e.shouldAttach(n.value)){const o=e.retrieve(n.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(a=>ml(e,a)),s}}const r=function dL(e){return new Eo(new Yn(e.url),new Yn(e.params),new Yn(e.queryParams),new Yn(e.fragment),new Yn(e.data),e.outlet,e.component,e)}(n.value),i=n.children.map(o=>ml(e,o));return new Co(r,i)}}const Zg="ngNavigationCancelingError";function ED(e,n){const{redirectTo:t,navigationBehaviorOptions:r}=xs(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=SD(!1,0,n);return i.url=t,i.navigationBehaviorOptions=r,i}function SD(e,n,t){const r=new Error("NavigationCancelingError: "+(e||""));return r[Zg]=!0,r.cancellationCode=n,t&&(r.url=t),r}function ND(e){return TD(e)&&xs(e.url)}function TD(e){return e&&e[Zg]}class fL{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new _l,this.attachRef=null}}let _l=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new fL,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const kd=!1;let Xg=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=gt,this.activateEvents=new ct,this.deactivateEvents=new ct,this.attachEvents=new ct,this.detachEvents=new ct,this.parentContexts=ut(_l),this.location=ut(Ti),this.changeDetector=ut(vo),this.environmentInjector=ut(uo)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new we(4012,kd);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new we(4012,kd);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new we(4012,kd);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new we(4013,kd);this._activatedRoute=t;const i=this.location,s=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,d=new hL(t,a,i.injector);if(r&&function pL(e){return!!e.resolveComponentFactory}(r)){const h=r.resolveComponentFactory(s);this.activated=i.createComponent(h,i.length,d)}else this.activated=i.createComponent(s,{index:i.length,injector:d,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=ke({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[yr]}),e})();class hL{constructor(n,t,r){this.route=n,this.childContexts=t,this.parent=r}get(n,t){return n===Eo?this.route:n===_l?this.childContexts:this.parent.get(n,t)}}let em=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Qe({type:e,selectors:[["ng-component"]],standalone:!0,features:[Pb],decls:1,vars:0,template:function(t,r){1&t&&_t(0,"router-outlet")},dependencies:[Xg],encapsulation:2}),e})();function ID(e,n){return e.providers&&!e._injector&&(e._injector=Gu(e.providers,n,`Route: ${e.path}`)),e._injector??n}function nm(e){const n=e.children&&e.children.map(nm),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==gt&&(t.component=em),t}function ui(e){return e.outlet||gt}function RD(e,n){const t=e.filter(r=>ui(r)===n);return t.push(...e.filter(r=>ui(r)!==n)),t}function vl(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class yL{constructor(n,t,r,i){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(n){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),Yg(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){const i=qa(t);n.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),tr(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(n,t,s.children)}else this.deactivateChildRoutes(n,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=qa(n);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:a})}}deactivateRouteAndOutlet(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=qa(n);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(n,t,r){const i=qa(t);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new oL(o.value.snapshot))}),n.children.length&&this.forwardEvent(new rL(n.value.snapshot))}activateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(Yg(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,s.children)}else this.activateChildRoutes(n,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Yg(a.route.value),this.activateChildRoutes(n,null,s.children)}else{const a=vl(i.snapshot),d=a?.get(Bc)??null;s.attachRef=null,s.route=i,s.resolver=d,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(n,null,s.children)}}else this.activateChildRoutes(n,null,r)}}class MD{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Pd{constructor(n,t){this.component=n,this.route=t}}function bL(e,n,t){const r=e._root;return yl(r,n?n._root:null,t,[r.value])}function Ja(e,n){const t=Symbol(),r=n.get(e,t);return r===t?"function"!=typeof e||function f(e){return null!==u(e)}(e)?n.get(e):e:r}function yl(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=qa(n);return e.children.forEach(s=>{(function DL(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=n?n.value:null,a=t?t.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const d=function CL(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!Ms(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Ms(e.url,n.url)||!zi(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qg(e,n)||!zi(e.queryParams,n.queryParams);default:return!Qg(e,n)}}(s,o,o.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new MD(r)):(o.data=s.data,o._resolvedData=s._resolvedData),yl(e,n,o.component?a?a.children:null:t,r,i),d&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Pd(a.outlet.component,s))}else s&&bl(n,a,i),i.canActivateChecks.push(new MD(r)),yl(e,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),tr(o,(s,a)=>bl(s,t.getContext(a),i)),i}function bl(e,n,t){const r=qa(e),i=e.value;tr(r,(o,s)=>{bl(o,i.component?n?n.children.getContext(s):null:n,t)}),t.canDeactivateChecks.push(new Pd(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}function wl(e){return"function"==typeof e}function rm(e){return e instanceof bd||"EmptyError"===e?.name}const Ld=Symbol("INITIAL_VALUE");function Ya(){return ei(e=>wd(e.map(n=>n.pipe(Tr(1),function Ed(...e){const n=e[e.length-1];return Ht(n)?(e.pop(),t=>Dd(e,t,n)):t=>Dd(e,t)}(Ld)))).pipe(Ce(n=>{for(const t of n)if(!0!==t){if(t===Ld)return Ld;if(!1===t||t instanceof Rs)return t}return!0}),Ir(n=>n!==Ld),Tr(1)))}function xD(e){return function ie(...e){return Se(e)}(Qn(n=>{if(xs(n))throw ED(0,n)}),Ce(n=>!0===n))}const im={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function FD(e,n,t,r,i){const o=om(e,n,t);return o.matched?function jL(e,n,t,r){const i=n.canMatch;return i&&0!==i.length?qe(i.map(s=>{const a=Ja(s,e);return Wo(function RL(e){return e&&wl(e.canMatch)}(a)?a.canMatch(n,t):e.runInContext(()=>a(n,t)))})).pipe(Ya(),xD()):qe(!0)}(r=ID(n,r),n,t).pipe(Ce(s=>!0===s?o:{...im})):qe(o)}function om(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...im}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(n.matcher||C2)(t,e,n);if(!i)return{...im};const o={};tr(i.posParams,(a,d)=>{o[d]=a.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Bd(e,n,t,r){if(t.length>0&&function $L(e,n,t){return t.some(r=>Vd(e,n,r)&&ui(r)!==gt)}(e,t,r)){const o=new vt(n,function UL(e,n,t,r){const i={};i[gt]=r,r._sourceSegment=e,r._segmentIndexShift=n.length;for(const o of t)if(""===o.path&&ui(o)!==gt){const s=new vt([],{});s._sourceSegment=e,s._segmentIndexShift=n.length,i[ui(o)]=s}return i}(e,n,r,new vt(t,e.children)));return o._sourceSegment=e,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function WL(e,n,t){return t.some(r=>Vd(e,n,r))}(e,t,r)){const o=new vt(e.segments,function HL(e,n,t,r,i){const o={};for(const s of r)if(Vd(e,t,s)&&!i[ui(s)]){const a=new vt([],{});a._sourceSegment=e,a._segmentIndexShift=n.length,o[ui(s)]=a}return{...i,...o}}(e,n,t,r,e.children));return o._sourceSegment=e,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:t}}const i=new vt(e.segments,e.children);return i._sourceSegment=e,i._segmentIndexShift=n.length,{segmentGroup:i,slicedSegments:t}}function Vd(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}function OD(e,n,t,r){return!!(ui(e)===r||r!==gt&&Vd(n,t,e))&&("**"===e.path||om(n,e,t).matched)}function AD(e,n,t){return 0===n.length&&!e.children[t]}const jd=!1;class Hd{constructor(n){this.segmentGroup=n||null}}class kD{constructor(n){this.urlTree=n}}function Dl(e){return Wa(new Hd(e))}function PD(e){return Wa(new kD(e))}class qL{constructor(n,t,r,i,o){this.injector=n,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const n=Bd(this.urlTree.root,[],[],this.config).segmentGroup,t=new vt(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,t,gt).pipe(Ce(o=>this.createUrlTree(Fd(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Is(o=>{if(o instanceof kD)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Hd?this.noMatchError(o):o}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,gt).pipe(Ce(i=>this.createUrlTree(Fd(i),n.queryParams,n.fragment))).pipe(Is(i=>{throw i instanceof Hd?this.noMatchError(i):i}))}noMatchError(n){return new we(4002,jd)}createUrlTree(n,t,r){const i=Ug(n);return new Rs(i,t,r)}expandSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(n,t,r).pipe(Ce(o=>new vt([],o))):this.expandSegment(n,r,t,r.segments,i,!0)}expandChildren(n,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Ie(i).pipe($o(o=>{const s=r.children[o],a=RD(t,o);return this.expandSegmentGroup(n,a,s,o).pipe(Ce(d=>({segment:d,outlet:o})))}),Yw((o,s)=>(o[s.outlet]=s.segment,o),{}),Qw())}expandSegment(n,t,r,i,o,s){return Ie(r).pipe($o(a=>this.expandSegmentAgainstRoute(n,t,r,a,i,o,s).pipe(Is(h=>{if(h instanceof Hd)return qe(null);throw h}))),Uo(a=>!!a),Is((a,d)=>{if(rm(a))return AD(t,i,o)?qe(new vt([],{})):Dl(t);throw a}))}expandSegmentAgainstRoute(n,t,r,i,o,s,a){return OD(i,t,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,t,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,s):Dl(t):Dl(t)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?PD(o):this.lineralizeSegments(r,o).pipe(Gt(s=>{const a=new vt(s,{});return this.expandSegment(n,a,t,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,o,s){const{matched:a,consumedSegments:d,remainingSegments:h,positionalParamSegments:m}=om(t,i,o);if(!a)return Dl(t);const b=this.applyRedirectCommands(d,i.redirectTo,m);return i.redirectTo.startsWith("/")?PD(b):this.lineralizeSegments(i,b).pipe(Gt(O=>this.expandSegment(n,t,r,O.concat(h),s,!1)))}matchSegmentAgainstRoute(n,t,r,i,o){return"**"===r.path?(n=ID(r,n),r.loadChildren?(r._loadedRoutes?qe({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(n,r)).pipe(Ce(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new vt(i,{})))):qe(new vt(i,{}))):FD(t,r,i,n).pipe(ei(({matched:s,consumedSegments:a,remainingSegments:d})=>s?this.getChildConfig(n=r._injector??n,r,i).pipe(Gt(m=>{const b=m.injector??n,O=m.routes,{segmentGroup:V,slicedSegments:Q}=Bd(t,a,d,O),re=new vt(V.segments,V.children);if(0===Q.length&&re.hasChildren())return this.expandChildren(b,O,re).pipe(Ce(he=>new vt(a,he)));if(0===O.length&&0===Q.length)return qe(new vt(a,{}));const ue=ui(r)===o;return this.expandSegment(b,re,O,Q,ue?gt:o,!0).pipe(Ce(ve=>new vt(a.concat(ve.segments),ve.children)))})):Dl(t)))}getChildConfig(n,t,r){return t.children?qe({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?qe({routes:t._loadedRoutes,injector:t._loadedInjector}):function VL(e,n,t,r){const i=n.canLoad;return void 0===i||0===i.length?qe(!0):qe(i.map(s=>{const a=Ja(s,e);return Wo(function SL(e){return e&&wl(e.canLoad)}(a)?a.canLoad(n,t):e.runInContext(()=>a(n,t)))})).pipe(Ya(),xD())}(n,t,r).pipe(Gt(i=>i?this.configLoader.loadChildren(n,t).pipe(Qn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function KL(e){return Wa(SD(jd,3))}())):qe({routes:[],injector:n})}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return qe(r);if(i.numberOfChildren>1||!i.children[gt])return Wa(new we(4e3,jd));i=i.children[gt]}}applyRedirectCommands(n,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,r)}applyRedirectCreateUrlTree(n,t,r,i){const o=this.createSegmentGroup(n,t.root,r,i);return new Rs(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const r={};return tr(n,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(n,t,r,i){const o=this.createSegments(n,t.segments,r,i);let s={};return tr(t.children,(a,d)=>{s[d]=this.createSegmentGroup(n,a,r,i)}),new vt(o,s)}createSegments(n,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(n,o,i):this.findOrReturn(o,r))}findPosParam(n,t,r){const i=r[t.path.substring(1)];if(!i)throw new we(4001,jd);return i}findOrReturn(n,t){let r=0;for(const i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}}class YL{}class XL{constructor(n,t,r,i,o,s,a){this.injector=n,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const n=Bd(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,gt).pipe(Ce(t=>{if(null===t)return null;const r=new Ad([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},gt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Co(r,t),o=new DD(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(n){const t=n.value,r=wD(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),n.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,t,r):this.processSegment(n,t,r,r.segments,i)}processChildren(n,t,r){return Ie(Object.keys(r.children)).pipe($o(i=>{const o=r.children[i],s=RD(t,i);return this.processSegmentGroup(n,s,o,i)}),Yw((i,o)=>i&&o?(i.push(...o),i):null),function p2(e,n=!1){return t=>t.lift(new g2(e,n))}(i=>null!==i),Sd(null),Qw(),Ce(i=>{if(null===i)return null;const o=BD(i);return function eB(e){e.sort((n,t)=>n.value.outlet===gt?-1:t.value.outlet===gt?1:n.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(n,t,r,i,o){return Ie(t).pipe($o(s=>this.processSegmentAgainstRoute(s._injector??n,s,r,i,o)),Uo(s=>!!s),Is(s=>{if(rm(s))return AD(r,i,o)?qe([]):qe(null);throw s}))}processSegmentAgainstRoute(n,t,r,i,o){if(t.redirectTo||!OD(t,r,i,o))return qe(null);let s;if("**"===t.path){const a=i.length>0?eD(i).parameters:{},d=jD(r)+i.length;s=qe({snapshot:new Ad(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,HD(t),ui(t),t.component??t._loadedComponent??null,t,VD(r),d,UD(t)),consumedSegments:[],remainingSegments:[]})}else s=FD(r,t,i,n).pipe(Ce(({matched:a,consumedSegments:d,remainingSegments:h,parameters:m})=>{if(!a)return null;const b=jD(r)+d.length;return{snapshot:new Ad(d,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,HD(t),ui(t),t.component??t._loadedComponent??null,t,VD(r),b,UD(t)),consumedSegments:d,remainingSegments:h}}));return s.pipe(ei(a=>{if(null===a)return qe(null);const{snapshot:d,consumedSegments:h,remainingSegments:m}=a;n=t._injector??n;const b=t._loadedInjector??n,O=function tB(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:Q}=Bd(r,h,m,O.filter(ue=>void 0===ue.redirectTo));if(0===Q.length&&V.hasChildren())return this.processChildren(b,O,V).pipe(Ce(ue=>null===ue?null:[new Co(d,ue)]));if(0===O.length&&0===Q.length)return qe([new Co(d,[])]);const re=ui(t)===o;return this.processSegment(b,O,V,Q,re?gt:o).pipe(Ce(ue=>null===ue?null:[new Co(d,ue)]))}))}}function nB(e){const n=e.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function BD(e){const n=[],t=new Set;for(const r of e){if(!nB(r)){n.push(r);continue}const i=n.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):n.push(r)}for(const r of t){const i=BD(r.children);n.push(new Co(r.value,i))}return n.filter(r=>!t.has(r))}function VD(e){let n=e;for(;n._sourceSegment;)n=n._sourceSegment;return n}function jD(e){let n=e,t=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,t+=n._segmentIndexShift??0;return t-1}function HD(e){return e.data||{}}function UD(e){return e.resolve||{}}function $D(e){return"string"==typeof e.title||null===e.title}function sm(e){return ei(n=>{const t=e(n);return t?Ie(t).pipe(Ce(()=>n)):qe(n)})}let WD=(()=>{class e{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===gt);return r}getResolvedTitleForRoute(t){return t.data[ul]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=He({token:e,factory:function(){return ut(GD)},providedIn:"root"}),e})(),GD=(()=>{class e extends WD{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(t){return new(t||e)(Re($w))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class uB{}class dB{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}class fB extends dB{}const Ud=new $e("",{providedIn:"root",factory:()=>({})}),Qa=new $e("ROUTES");let am=(()=>{class e{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return qe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Wo(t.loadComponent()).pipe(Ce(zD),Qn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Vg(()=>{this.componentLoaders.delete(t)})),i=new $(r,()=>new ze).pipe(Et());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return qe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Ce(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let d,h,m=!1;Array.isArray(a)?h=a:(d=a.create(t).injector,h=Xw(d.get(Qa,[],K.Self|K.Optional)));return{routes:h.map(nm),injector:d}}),Vg(()=>{this.childrenLoaders.delete(r)})),s=new $(o,()=>new ze).pipe(Et());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(t){return Wo(t()).pipe(Ce(zD),Gt(i=>i instanceof Ab||Array.isArray(i)?qe(i):Ie(this.compiler.compileModuleAsync(i))))}}return e.\u0275fac=function(t){return new(t||e)(Re(Cr),Re(Qp))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function zD(e){return function gB(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}class mB{}class _B{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,t){return n}}function vB(e){throw e}function yB(e,n,t){return n.parse("/")}const bB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function qD(){const e=ut(sD),n=ut(_l),t=ut(hg),r=ut(Cr),i=ut(Qp),o=ut(Qa,{optional:!0})??[],s=ut(Ud,{optional:!0})??{},a=ut(GD),d=ut(WD,{optional:!0}),h=ut(mB,{optional:!0}),m=ut(uB,{optional:!0}),b=new Nn(null,e,n,t,r,i,Xw(o));return h&&(b.urlHandlingStrategy=h),m&&(b.routeReuseStrategy=m),b.titleStrategy=d??a,function DB(e,n){e.errorHandler&&(n.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(n.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(n.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.urlUpdateStrategy&&(n.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(n.canceledNavigationResolution=e.canceledNavigationResolution)}(s,b),b}let Nn=(()=>{class e{constructor(t,r,i,o,s,a,d){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=d,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ze,this.errorHandler=vB,this.malformedUriErrorHandler=yB,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>qe(void 0),this.urlHandlingStrategy=new _B,this.routeReuseStrategy=new fB,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.canceledNavigationResolution="replace",this.configLoader=s.get(am),this.configLoader.onLoadEndListener=O=>this.triggerEvent(new tL(O)),this.configLoader.onLoadStartListener=O=>this.triggerEvent(new eL(O)),this.ngModule=s.get(Es),this.console=s.get(MO);const b=s.get(Wt);this.isNgZoneEnabled=b instanceof Wt&&Wt.isInAngularZone(),this.resetConfig(d),this.currentUrlTree=new Rs,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=bD(this.currentUrlTree,this.rootComponentType),this.transitions=new Yn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ir(i=>0!==i.id),Ce(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ei(i=>{let o=!1,s=!1;return qe(i).pipe(Qn(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ei(a=>{const d=this.browserUrlTree.toString(),h=!this.navigated||a.extractedUrl.toString()!==d||d!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||h)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return JD(a.source)&&(this.browserUrlTree=a.extractedUrl),qe(a).pipe(ei(b=>{const O=this.transitions.getValue();return r.next(new Kg(b.id,this.serializeUrl(b.extractedUrl),b.source,b.restoredState)),O!==this.transitions.getValue()?Ts:Promise.resolve(b)}),function JL(e,n,t,r){return ei(i=>function zL(e,n,t,r,i){return new qL(e,n,t,r,i).apply()}(e,n,t,i.extractedUrl,r).pipe(Ce(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Qn(b=>{this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},i.urlAfterRedirects=b.urlAfterRedirects}),function iB(e,n,t,r,i){return Gt(o=>function ZL(e,n,t,r,i,o,s="emptyOnly"){return new XL(e,n,t,r,i,s,o).recognize().pipe(ei(a=>null===a?function QL(e){return new Ee(n=>n.error(e))}(new YL):qe(a)))}(e,n,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe(Ce(s=>({...o,targetSnapshot:s}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy),Qn(b=>{if(i.targetSnapshot=b.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!b.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);this.setBrowserUrl(V,b)}this.browserUrlTree=b.urlAfterRedirects}const O=new J2(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);r.next(O)}));if(h&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:V,source:Q,restoredState:re,extras:ue}=a,ge=new Kg(O,this.serializeUrl(V),Q,re);r.next(ge);const ve=bD(V,this.rootComponentType).snapshot;return qe(i={...a,targetSnapshot:ve,urlAfterRedirects:V,extras:{...ue,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),Ts}),Qn(a=>{const d=new Y2(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(d)}),Ce(a=>i={...a,guards:bL(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function xL(e,n){return Gt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?qe({...t,guardsResult:!0}):function FL(e,n,t,r){return Ie(e).pipe(Gt(i=>function BL(e,n,t,r,i){const o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return o&&0!==o.length?qe(o.map(a=>{const d=vl(n)??i,h=Ja(a,d);return Wo(function IL(e){return e&&wl(e.canDeactivate)}(h)?h.canDeactivate(e,n,t,r):d.runInContext(()=>h(e,n,t,r))).pipe(Uo())})).pipe(Ya()):qe(!0)}(i.component,i.route,t,n,r)),Uo(i=>!0!==i,!0))}(s,r,i,e).pipe(Gt(a=>a&&function EL(e){return"boolean"==typeof e}(a)?function OL(e,n,t,r){return Ie(n).pipe($o(i=>Dd(function kL(e,n){return null!==e&&n&&n(new nL(e)),qe(!0)}(i.route.parent,r),function AL(e,n){return null!==e&&n&&n(new iL(e)),qe(!0)}(i.route,r),function LL(e,n,t){const r=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(s=>function wL(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(s)).filter(s=>null!==s).map(s=>zw(()=>qe(s.guards.map(d=>{const h=vl(s.node)??t,m=Ja(d,h);return Wo(function TL(e){return e&&wl(e.canActivateChild)}(m)?m.canActivateChild(r,e):h.runInContext(()=>m(r,e))).pipe(Uo())})).pipe(Ya())));return qe(o).pipe(Ya())}(e,i.path,t),function PL(e,n,t){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return qe(!0);const i=r.map(o=>zw(()=>{const s=vl(n)??t,a=Ja(o,s);return Wo(function NL(e){return e&&wl(e.canActivate)}(a)?a.canActivate(n,e):s.runInContext(()=>a(n,e))).pipe(Uo())}));return qe(i).pipe(Ya())}(e,i.route,t))),Uo(i=>!0!==i,!0))}(r,o,e,n):qe(a)),Ce(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Qn(a=>{if(i.guardsResult=a.guardsResult,xs(a.guardsResult))throw ED(0,a.guardsResult);const d=new Q2(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(d)}),Ir(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),sm(a=>{if(a.guards.canActivateChecks.length)return qe(a).pipe(Qn(d=>{const h=new Z2(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(h)}),ei(d=>{let h=!1;return qe(d).pipe(function oB(e,n){return Gt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return qe(t);let o=0;return Ie(i).pipe($o(s=>function sB(e,n,t,r){const i=e.routeConfig,o=e._resolve;return void 0!==i?.title&&!$D(i)&&(o[ul]=i.title),function aB(e,n,t,r){const i=function cB(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return qe({});const o={};return Ie(i).pipe(Gt(s=>function lB(e,n,t,r){const i=vl(n)??r,o=Ja(e,i);return Wo(o.resolve?o.resolve(n,t):i.runInContext(()=>o(n,t)))}(e[s],n,t,r).pipe(Uo(),Qn(a=>{o[s]=a}))),Bg(1),function _2(e){return n=>n.lift(new v2(e))}(o),Is(s=>rm(s)?Ts:Wa(s)))}(o,e,n,r).pipe(Ce(s=>(e._resolvedData=s,e.data=wD(e,t).resolve,i&&$D(i)&&(e.data[ul]=i.title),null)))}(s.route,r,e,n)),Qn(()=>o++),Bg(1),Gt(s=>o===i.length?qe(t):Ts))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Qn({next:()=>h=!0,complete:()=>{h||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",2))}}))}),Qn(d=>{const h=new X2(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(h)}))}),sm(a=>{const d=h=>{const m=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(h.routeConfig).pipe(Qn(b=>{h.component=b}),Ce(()=>{})));for(const b of h.children)m.push(...d(b));return m};return wd(d(a.targetSnapshot.root)).pipe(Sd(),Tr(1))}),sm(()=>this.afterPreactivation()),Ce(a=>{const d=function lL(e,n,t){const r=ml(e,n._root,t?t._root:void 0);return new yD(r,n)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return i={...a,targetRouterState:d}}),Qn(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((e,n,t)=>Ce(r=>(new yL(n,r.targetRouterState,r.currentRouterState,t).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Qn({next(){o=!0},complete(){o=!0}}),Vg(()=>{o||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Is(a=>{if(s=!0,TD(a)){ND(a)||(this.navigated=!0,this.restoreHistory(i,!0));const d=new Od(i.id,this.serializeUrl(i.extractedUrl),a.message,a.cancellationCode);if(r.next(d),ND(a)){const h=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),m={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||JD(i.source)};this.scheduleNavigation(h,"imperative",null,m,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const d=new mD(i.id,this.serializeUrl(i.extractedUrl),a,i.targetSnapshot??void 0);r.next(d);try{i.resolve(this.errorHandler(a))}catch(h){i.reject(h)}}return Ts}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const a={...o};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(i.state=a)}const s=this.parseUrl(t.url);this.scheduleNavigation(s,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(nm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:d}=r,h=i||this.routerState.root,m=d?this.currentUrlTree.fragment:s;let b=null;switch(a){case"merge":b={...this.currentUrlTree.queryParams,...o};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=o||null}return null!==b&&(b=this.removeEmptyProps(b)),$2(h,this.currentUrlTree,t,b,m??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=xs(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function CB(e){for(let n=0;n<e.length;n++){if(null==e[n])throw new we(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...bB}:!1===r?{...wB}:r,xs(t))return nD(this.currentUrlTree,t,i);const o=this.parseUrl(t);return nD(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Fs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,d,h;s?(a=s.resolve,d=s.reject,h=s.promise):h=new Promise((O,V)=>{a=O,d=V});const m=++this.navigationId;let b;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),b=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):b=0,this.setTransition({id:m,targetPageId:b,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:a,reject:d,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(O=>Promise.reject(O))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const o=new Od(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return e.\u0275fac=function(t){qh()},e.\u0275prov=He({token:e,factory:function(){return qD()},providedIn:"root"}),e})();function JD(e){return"imperative"!==e}let So=(()=>{class e{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ze;const d=s.nativeElement.tagName;this.isAnchorElement="A"===d||"AREA"===d,this.isAnchorElement?this.subscription=t.events.subscribe(h=>{h instanceof Fs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=$a(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=$a(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=$a(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function Xv(e,n,t){return function OI(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?Zv:qn}(n,t)(e)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return e.\u0275fac=function(t){return new(t||e)(ne(Nn),ne(Eo),function fa(e){return function rT(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(H_(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===n)return t[i+1];i+=2}}}return null}(er(),e)}("tabindex"),ne(wi),ne(Xt),ne(Ns))},e.\u0275dir=ke({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&nt("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&$t("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[yr]}),e})();class YD{}let NB=(()=>{class e{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ir(t=>t instanceof Fs),$o(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=Gu(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ie(i).pipe(eo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):qe(null);const o=i.pipe(Gt(s=>null===s?qe(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?Ie([o,this.loader.loadComponent(r)]).pipe(eo()):o})}}return e.\u0275fac=function(t){return new(t||e)(Re(Nn),Re(Qp),Re(uo),Re(YD),Re(am))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const cm=new $e("");let QD=(()=>{class e{constructor(t,r,i,o={}){this.router=t,this.viewportScroller=r,this.zone=i,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Kg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _D&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.router.triggerEvent(new _D(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){qh()},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();function Xa(e,n){return{\u0275kind:e,\u0275providers:n}}function XD(){const e=ut(Cr);return n=>{const t=e.get(nl);if(n!==t.components[0])return;const r=e.get(Nn),i=e.get(eC);1===e.get(um)&&r.initialNavigation(),e.get(tC,null,K.Optional)?.setUpPreloading(),e.get(cm,null,K.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const eC=new $e("",{factory:()=>new ze}),um=new $e("",{providedIn:"root",factory:()=>1});const tC=new $e("");function xB(e){return Xa(0,[{provide:tC,useExisting:NB},{provide:YD,useExisting:e}])}const nC=new $e("ROUTER_FORROOT_GUARD"),FB=[hg,{provide:sD,useClass:jg},{provide:Nn,useFactory:qD},_l,{provide:Eo,useFactory:function ZD(e){return e.routerState.root},deps:[Nn]},am,[]];function OB(){return new x1("Router",Nn)}let rC=(()=>{class e{constructor(t){}static forRoot(t,r){return{ngModule:e,providers:[FB,[],{provide:Qa,multi:!0,useValue:t},{provide:nC,useFactory:LB,deps:[[Nn,new Ic,new Rc]]},{provide:Ud,useValue:r||{}},r?.useHash?{provide:Ns,useClass:_A}:{provide:Ns,useClass:ew},{provide:cm,useFactory:()=>{const e=ut(Nn),n=ut(kk),t=ut(Wt),r=ut(Ud);return r.scrollOffset&&n.setOffset(r.scrollOffset),new QD(e,n,t,r)}},r?.preloadingStrategy?xB(r.preloadingStrategy).\u0275providers:[],{provide:x1,multi:!0,useFactory:OB},r?.initialNavigation?BB(r):[],[{provide:iC,useFactory:XD},{provide:E1,multi:!0,useExisting:iC}]]}}static forChild(t){return{ngModule:e,providers:[{provide:Qa,multi:!0,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)(Re(nC,8))},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[em]}),e})();function LB(e){return"guarded"}function BB(e){return["disabled"===e.initialNavigation?Xa(3,[{provide:Qu,multi:!0,useFactory:()=>{const n=ut(Nn);return()=>{n.setUpLocationChangeListener()}}},{provide:um,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Xa(2,[{provide:um,useValue:0},{provide:Qu,multi:!0,deps:[Cr],useFactory:n=>{const t=n.get(gA,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(o=>{const s=n.get(Nn),a=n.get(eC);(function i(o){n.get(Nn).events.pipe(Ir(a=>a instanceof Fs||a instanceof Od||a instanceof mD),Ce(a=>a instanceof Fs||a instanceof Od&&(0===a.code||1===a.code)&&null),Ir(a=>null!==a),Tr(1)).subscribe(()=>{o()})})(()=>{o(!0),r=!0}),s.afterPreactivation=()=>(o(!0),r||a.closed?qe(void 0):a),s.initialNavigation()}))}}]).\u0275providers:[]]}const iC=new $e(""),di={production:!0,personasServiceURL:"https://recommendation-service.azurewebsites.net/api/personas",recommendationServiceURL:"https://recommendation-service.azurewebsites.net/api/recommendations",profileServiceURL:"https://wikirecord-profile-service.azurewebsites.net/api/profiles",interestServiceURL:"https://recommendation-service.azurewebsites.net/api/interests",commentServiceURL:"https://comment-service.azurewebsites.net/api/comments",authenticationAuthority:"https://wikirecord.azurewebsites.net",baseHref:"/WikiRecord-Frontend/",hostsRequiringAccessToken:["https://wikirecord.azurewebsites.net","https://comment-service.azurewebsites.net","https://wikirecord-profile-service.azurewebsites.net","https://recommendation-service.azurewebsites.net"]};var Go=(()=>(function(e){e.FallbackPersonaImage="assets/img/fallback-person-image.jpg",e.RedHeart="assets/img/heart.webp"}(Go||(Go={})),Go))();class El{constructor(n){Object.assign(this,n)}static AttachMethods(n){const t=Object.assign(new El,n);return n.recommendations&&(t.recommendations=n.recommendations.map(Sl.AttachMethods)),t}getProfileImagePath({fallback:n="",width:t=600}={}){return this.imageUri?this.imageUri+"?width="+t:n||Go.FallbackPersonaImage}}class ec{constructor(n){Object.assign(this,n)}static AttachMethods(n){return Object.assign(new ec,n)}getIconPath(){return`assets/img/interestIcons/${this.type||"Other"}.png`}getImagePath({fallback:n="",width:t=600}={}){return this.imageUri?this.imageUri+"?width="+t:n||this.getIconPath()}}var Ko=(()=>(function(e){e.Book="Book",e.Movie="Movie",e.Game="Game",e.Podcast="Podcast",e.Other="Other"}(Ko||(Ko={})),Ko))();class Sl{static AttachMethods(n){const t=Object.assign(new Sl,n);return n.persona&&(t.persona=El.AttachMethods(n.persona)),n.interest&&(t.interest=ec.AttachMethods(n.interest)),t}}class Nl{constructor(n){this.recommendations=[],Object.assign(this,n)}get confirmedRecommendations(){return this.recommendations.filter(n=>n.isConfirmed)}get pendingRecommendations(){return this.recommendations.filter(n=>!n.isConfirmed)}static AttachMethods(n){const t=Object.assign(new Nl,n);return n.recommendations&&(t.recommendations=n.recommendations.map(Sl.AttachMethods)),t}get shortRecommendationsList(){return this.confirmedRecommendations.slice(0,4)}getProfileImagePath({fallback:n="",width:t=600}={}){return this.imageUri?this.imageUri+"?width="+t:n||Go.FallbackPersonaImage}geConfirmedtRecommendationsByType(){return function jB(e,n){return e.reduce((t,r)=>{const i=n instanceof Function?n(r):r[n];return t[i]=t[i]||[],t[i].push(r),t},{})}(this.confirmedRecommendations,n=>n.interest.type)}}class Wd{}class dm{}class No{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(n).forEach(t=>{let r=n[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof No?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new No;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof No?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,t);const i=("a"===n.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=n.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class HB{encodeKey(n){return oC(n)}encodeValue(n){return oC(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const $B=/%(\d[a-f0-9])/gi,WB={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function oC(e){return encodeURIComponent(e).replace($B,(n,t)=>WB[t]??n)}function Gd(e){return`${e}`}class zo{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new HB,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function UB(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,o)),n.decodeValue(i.slice(o+1))],d=t.get(s)||[];d.push(a),t.set(s,d)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const r=n.fromObject[t],i=Array.isArray(r)?r.map(Gd):[Gd(r)];this.map.set(t,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(r=>{const i=n[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new zo({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(Gd(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const i=r.indexOf(Gd(n.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class GB{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function sC(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function aC(e){return typeof Blob<"u"&&e instanceof Blob}function cC(e){return typeof FormData<"u"&&e instanceof FormData}class Tl{constructor(n,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function KB(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new No),this.context||(this.context=new GB),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new zo,this.urlWithParams=t}serializeBody(){return null===this.body?null:sC(this.body)||aC(this.body)||cC(this.body)||function zB(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof zo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||cC(this.body)?null:aC(this.body)?this.body.type||null:sC(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof zo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const t=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,o=void 0!==n.body?n.body:this.body,s=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,a=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let d=n.headers||this.headers,h=n.params||this.params;const m=n.context??this.context;return void 0!==n.setHeaders&&(d=Object.keys(n.setHeaders).reduce((b,O)=>b.set(O,n.setHeaders[O]),d)),n.setParams&&(h=Object.keys(n.setParams).reduce((b,O)=>b.set(O,n.setParams[O]),h)),new Tl(t,r,o,{params:h,headers:d,context:m,reportProgress:a,responseType:i,withCredentials:s})}}var kn=(()=>((kn=kn||{})[kn.Sent=0]="Sent",kn[kn.UploadProgress=1]="UploadProgress",kn[kn.ResponseHeader=2]="ResponseHeader",kn[kn.DownloadProgress=3]="DownloadProgress",kn[kn.Response=4]="Response",kn[kn.User=5]="User",kn))();class fm{constructor(n,t=200,r="OK"){this.headers=n.headers||new No,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class hm extends fm{constructor(n={}){super(n),this.type=kn.ResponseHeader}clone(n={}){return new hm({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Kd extends fm{constructor(n={}){super(n),this.type=kn.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new Kd({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class tc extends fm{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function pm(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let Os=(()=>{class e{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Tl)o=t;else{let d,h;d=i.headers instanceof No?i.headers:new No(i.headers),i.params&&(h=i.params instanceof zo?i.params:new zo({fromObject:i.params})),o=new Tl(t,r,void 0!==i.body?i.body:null,{headers:d,context:i.context,params:h,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=qe(o).pipe($o(d=>this.handler.handle(d)));if(t instanceof Tl||"events"===i.observe)return s;const a=s.pipe(Ir(d=>d instanceof Kd));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Ce(d=>{if(null!==d.body&&!(d.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return d.body}));case"blob":return a.pipe(Ce(d=>{if(null!==d.body&&!(d.body instanceof Blob))throw new Error("Response is not a Blob.");return d.body}));case"text":return a.pipe(Ce(d=>{if(null!==d.body&&"string"!=typeof d.body)throw new Error("Response is not a string.");return d.body}));default:return a.pipe(Ce(d=>d.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new zo).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,pm(i,r))}post(t,r,i={}){return this.request("POST",t,pm(i,r))}put(t,r,i={}){return this.request("PUT",t,pm(i,r))}}return e.\u0275fac=function(t){return new(t||e)(Re(Wd))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();function lC(e,n){return n(e)}function qB(e,n){return(t,r)=>n.intercept(t,{handle:i=>e(i,r)})}const uC=new $e("HTTP_INTERCEPTORS"),Il=new $e("HTTP_INTERCEPTOR_FNS");function YB(){let e=null;return(n,t)=>(null===e&&(e=(ut(uC,{optional:!0})??[]).reduceRight(qB,lC)),e(n,t))}let dC=(()=>{class e extends Wd{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(Il)));this.chain=r.reduceRight((i,o)=>function JB(e,n,t){return(r,i)=>t.runInContext(()=>n(r,o=>e(o,i)))}(i,o,this.injector),lC)}return this.chain(t,r=>this.backend.handle(r))}}return e.\u0275fac=function(t){return new(t||e)(Re(dm),Re(uo))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();const eV=/^\)\]\}',?\n/;let hC=(()=>{class e{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ee(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((V,Q)=>i.setRequestHeader(V,Q.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const V=t.detectContentTypeHeader();null!==V&&i.setRequestHeader("Content-Type",V)}if(t.responseType){const V=t.responseType.toLowerCase();i.responseType="json"!==V?V:"text"}const o=t.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const V=i.statusText||"OK",Q=new No(i.getAllResponseHeaders()),re=function tV(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(i)||t.url;return s=new hm({headers:Q,status:i.status,statusText:V,url:re}),s},d=()=>{let{headers:V,status:Q,statusText:re,url:ue}=a(),ge=null;204!==Q&&(ge=typeof i.response>"u"?i.responseText:i.response),0===Q&&(Q=ge?200:0);let ve=Q>=200&&Q<300;if("json"===t.responseType&&"string"==typeof ge){const he=ge;ge=ge.replace(eV,"");try{ge=""!==ge?JSON.parse(ge):null}catch(Te){ge=he,ve&&(ve=!1,ge={error:Te,text:ge})}}ve?(r.next(new Kd({body:ge,headers:V,status:Q,statusText:re,url:ue||void 0})),r.complete()):r.error(new tc({error:ge,headers:V,status:Q,statusText:re,url:ue||void 0}))},h=V=>{const{url:Q}=a(),re=new tc({error:V,status:i.status||0,statusText:i.statusText||"Unknown Error",url:Q||void 0});r.error(re)};let m=!1;const b=V=>{m||(r.next(a()),m=!0);let Q={type:kn.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(Q.total=V.total),"text"===t.responseType&&!!i.responseText&&(Q.partialText=i.responseText),r.next(Q)},O=V=>{let Q={type:kn.UploadProgress,loaded:V.loaded};V.lengthComputable&&(Q.total=V.total),r.next(Q)};return i.addEventListener("load",d),i.addEventListener("error",h),i.addEventListener("timeout",h),i.addEventListener("abort",h),t.reportProgress&&(i.addEventListener("progress",b),null!==o&&i.upload&&i.upload.addEventListener("progress",O)),i.send(o),r.next({type:kn.Sent}),()=>{i.removeEventListener("error",h),i.removeEventListener("abort",h),i.removeEventListener("load",d),i.removeEventListener("timeout",h),t.reportProgress&&(i.removeEventListener("progress",b),null!==o&&i.upload&&i.upload.removeEventListener("progress",O)),i.readyState!==i.DONE&&i.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(Re(Dw))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();const gm=new $e("XSRF_ENABLED"),pC="XSRF-TOKEN",gC=new $e("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>pC}),mC="X-XSRF-TOKEN",_C=new $e("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>mC});class vC{}let nV=(()=>{class e{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=uw(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(Re(Cn),Re(Xu),Re(gC))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();function rV(e,n){const t=e.url.toLowerCase();if(!ut(gm)||"GET"===e.method||"HEAD"===e.method||t.startsWith("http://")||t.startsWith("https://"))return n(e);const r=ut(vC).getToken(),i=ut(_C);return null!=r&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),n(e)}var Tn=(()=>((Tn=Tn||{})[Tn.Interceptors=0]="Interceptors",Tn[Tn.LegacyInterceptors=1]="LegacyInterceptors",Tn[Tn.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Tn[Tn.NoXsrfProtection=3]="NoXsrfProtection",Tn[Tn.JsonpSupport=4]="JsonpSupport",Tn[Tn.RequestsMadeViaParent=5]="RequestsMadeViaParent",Tn))();function nc(e,n){return{\u0275kind:e,\u0275providers:n}}function iV(...e){const n=[Os,hC,dC,{provide:Wd,useExisting:dC},{provide:dm,useExisting:hC},{provide:Il,useValue:rV,multi:!0},{provide:gm,useValue:!0},{provide:vC,useClass:nV}];for(const t of e)n.push(...t.\u0275providers);return function AI(e){return{\u0275providers:e}}(n)}const yC=new $e("LEGACY_INTERCEPTOR_FN");function sV({cookieName:e,headerName:n}){const t=[];return void 0!==e&&t.push({provide:gC,useValue:e}),void 0!==n&&t.push({provide:_C,useValue:n}),nc(Tn.CustomXsrfConfiguration,t)}let aV=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({providers:[iV(nc(Tn.LegacyInterceptors,[{provide:yC,useFactory:YB},{provide:Il,useExisting:yC,multi:!0}]),sV({cookieName:pC,headerName:mC}))]}),e})();const zd=di.personasServiceURL;let rc=(()=>{class e{constructor(t){this.http=t,this.searchResults=new ze,this.searchObserver=this.searchResults.asObservable()}find(t){return this.http.get(`${zd}/${t}/recommendations`)}getRecommendedPersonas(){return this.http.get(zd+"/discover")}create(t){return this.http.post(zd,t)}launchSearch(t){this.http.get(zd+"/search/"+t).subscribe(r=>{this.searchResults.next(r.map(Nl.AttachMethods))})}clearSearch(){this.searchResults.next(null)}}return e.\u0275fac=function(t){return new(t||e)(Re(Os))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function cV(e,n){if(1&e&&(ce(0,"div"),_t(1,"img",1),ce(2,"span"),Fe(3),de()()),2&e){const t=Pe();fe(1),Er("src",t.interest.getIconPath(),qn),Jn("alt","",t.interest.type," icon"),fe(2),jt(" ",t.interest.name," ")}}let bC=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Qe({type:e,selectors:[["app-interest-short-entry"]],inputs:{interest:"interest"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"img-icon",3,"src","alt"]],template:function(t,r){1&t&&Ne(0,cV,4,3,"div",0),2&t&&me("ngIf",r.interest)},dependencies:[Sn]}),e})();function lV(e,n){if(1&e&&(ce(0,"span",1),Fe(1),de()),2&e){const t=Pe();Jn("routerLink","/personas/",t.persona.id,""),fe(1),jt(" ",t.persona.name," ")}}let wC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Qe({type:e,selectors:[["app-persona-name-button"]],inputs:{persona:"persona"},decls:1,vars:1,consts:[["class","font-weight-bold cursor-pointer",3,"routerLink",4,"ngIf"],[1,"font-weight-bold","cursor-pointer",3,"routerLink"]],template:function(t,r){1&t&&Ne(0,lV,2,2,"span",0),2&t&&me("ngIf",r.persona)},dependencies:[Sn,So],encapsulation:2}),e})();function uV(e,n){if(1&e&&_t(0,"app-interest-short-entry",6),2&e){const t=n.$implicit;Jn("routerLink","/recommendations/",t.id,""),me("interest",t.interest)}}function dV(e,n){if(1&e&&(ce(0,"div",1),_t(1,"img",2),ce(2,"div",3),_t(3,"app-persona-name-button",4),Ne(4,uV,1,2,"app-interest-short-entry",5),de()()),2&e){const t=Pe();fe(1),Jn("routerLink","/personas/",t.persona.id,""),Er("src",t.persona.getProfileImagePath(),qn),Jn("alt","Image of ",t.persona.name,""),fe(2),me("persona",t.persona),fe(1),me("ngForOf",t.persona.shortRecommendationsList)}}let DC=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Qe({type:e,selectors:[["app-persona-recommendations-card"]],inputs:{persona:"persona"},decls:1,vars:1,consts:[["class","card","style","width: 18rem;",4,"ngIf"],[1,"card",2,"width","18rem"],[1,"card-img-top","person-card-image","cursor-pointer",3,"routerLink","src","alt"],[1,"card-body"],[1,"card-title","lead",3,"persona"],["class","card-text cursor-pointer",3,"interest","routerLink",4,"ngFor","ngForOf"],[1,"card-text","cursor-pointer",3,"interest","routerLink"]],template:function(t,r){1&t&&Ne(0,dV,5,5,"div",0),2&t&&me("ngIf",r.persona)},dependencies:[Vr,Sn,So,bC,wC],styles:[".person-card-image[_ngcontent-%COMP%]{max-height:50%;object-fit:cover;object-position:0 20%}"]}),e})();function Zn(e,n,t,r){return new(t||(t=Promise))(function(o,s){function a(m){try{h(r.next(m))}catch(b){s(b)}}function d(m){try{h(r.throw(m))}catch(b){s(b)}}function h(m){m.done?o(m.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(m.value).then(a,d)}h((r=r.apply(e,n||[])).next())})}let ic=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Qe({type:e,selectors:[["app-loading-indicator"]],decls:3,vars:0,consts:[[1,"lead","d-flex","justify-content-center"]],template:function(t,r){1&t&&(ce(0,"div",0)(1,"h1"),Fe(2," Loading... "),de()())}}),e})();function pV(e,n){if(1&e&&(ce(0,"div",3),Fe(1),de()),2&e){const t=Pe();fe(1),jt(" ",t.errorMessage,"\n")}}function gV(e,n){1&e&&_t(0,"app-loading-indicator")}function mV(e,n){1&e&&(ce(0,"div"),Fe(1," Could not find any recomendations. "),de())}function _V(e,n){1&e&&_t(0,"app-persona-recommendations-card",6),2&e&&me("persona",n.$implicit)}function vV(e,n){if(1&e&&(ce(0,"div",4),Ne(1,mV,2,0,"div",1),Ne(2,_V,1,1,"app-persona-recommendations-card",5),de()),2&e){const t=Pe();fe(1),me("ngIf",!t.personas.length),fe(1),me("ngForOf",t.personas)}}let yV=(()=>{class e{constructor(t){this.personasService=t,this.personas=null,this.errorMessage=null}ngOnInit(){return Zn(this,void 0,void 0,function*(){try{const t=yield this.personasService.getRecommendedPersonas().toPromise();this.personas=t.map(Nl.AttachMethods)}catch(t){console.log(t),t instanceof tc&&(this.errorMessage=t.message)}})}}return e.\u0275fac=function(t){return new(t||e)(ne(rc))},e.\u0275cmp=Qe({type:e,selectors:[["app-discover-personas-view"]],decls:3,vars:3,consts:[["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],["class","card-deck d-flex justify-content-center",4,"ngIf"],[1,"alert","alert-danger"],[1,"card-deck","d-flex","justify-content-center"],["class","d-flex mb-5",3,"persona",4,"ngFor","ngForOf"],[1,"d-flex","mb-5",3,"persona"]],template:function(t,r){1&t&&(Ne(0,pV,2,1,"div",0),Ne(1,gV,1,0,"app-loading-indicator",1),Ne(2,vV,3,2,"div",2)),2&t&&(me("ngIf",r.errorMessage),fe(1),me("ngIf",!r.personas),fe(1),me("ngIf",r.personas))},dependencies:[Vr,Sn,DC,ic]}),e})();function bV(e,n){1&e&&_t(0,"app-persona-recommendations-card",4),2&e&&me("persona",n.$implicit)}function wV(e,n){if(1&e&&(ce(0,"div",2),Ne(1,bV,1,1,"app-persona-recommendations-card",3),de()),2&e){const t=Pe();fe(1),me("ngForOf",t.searchresult)}}function DV(e,n){1&e&&(ce(0,"div")(1,"h1"),Fe(2,"Popular recommendations:"),de(),_t(3,"app-discover-personas-view"),de())}let NC=(()=>{class e{constructor(t){this.personas=t}ngOnInit(){this.personas.searchObserver.subscribe(t=>this.searchresult=t)}}return e.\u0275fac=function(t){return new(t||e)(ne(rc))},e.\u0275cmp=Qe({type:e,selectors:[["app-home-page"]],decls:3,vars:2,consts:[["class","card-deck d-flex justify-content-center",4,"ngIf"],[4,"ngIf"],[1,"card-deck","d-flex","justify-content-center"],["class","d-flex mb-5",3,"persona",4,"ngFor","ngForOf"],[1,"d-flex","mb-5",3,"persona"]],template:function(t,r){1&t&&(ce(0,"div"),Ne(1,wV,2,1,"div",0),Ne(2,DV,4,0,"div",1),de()),2&t&&(fe(1),me("ngIf",r.searchresult),fe(1),me("ngIf",!r.searchresult))},dependencies:[Vr,Sn,DC,yV]}),e})();const TC=di.recommendationServiceURL;let IC=(()=>{class e{constructor(t){this.http=t}getById(t){return this.http.get(TC+"/"+t)}createAndObserveResponse(t){return this.http.post(TC,t,{observe:"response"})}}return e.\u0275fac=function(t){return new(t||e)(Re(Os))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class CV{constructor(n){Object.assign(this,n)}}const _m=di.commentServiceURL;let vm=(()=>{class e{constructor(t){this.http=t}create(t){return this.http.post(_m,t)}getPage(t,r,i=10,o=0){return this.http.get(`${t}/${r}/comments?limit=${i}&skip=${o}`)}delete(t){return this.http.delete(_m+"/"+t).toPromise()}edit(t){return this.http.put(_m+"/"+t.id,t).toPromise()}}return e.\u0275fac=function(t){return new(t||e)(Re(Os))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Jd(e,n){return new Ee(t=>{const r=e.length;if(0===r)return void t.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const d=Ie(e[a]);let h=!1;t.add(d.subscribe({next:m=>{h||(h=!0,s++),i[a]=m},error:m=>t.error(m),complete:()=>{o++,(o===r||!h)&&(s===r&&t.next(n?n.reduce((m,b,O)=>(m[b]=i[O],m),{}):i),t.complete())}}))}})}let RC=(()=>{class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return e.\u0275fac=function(t){return new(t||e)(ne(wi),ne(Xt))},e.\u0275dir=ke({type:e}),e})(),As=(()=>{class e extends RC{}return e.\u0275fac=function(){let n;return function(r){return(n||(n=cr(e)))(r||e)}}(),e.\u0275dir=ke({type:e,features:[Pt]}),e})();const qi=new $e("NgValueAccessor"),NV={provide:qi,useExisting:ht(()=>Ji),multi:!0},IV=new $e("CompositionEventMode");let Ji=(()=>{class e extends RC{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function TV(){const e=Ki()?Ki().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return e.\u0275fac=function(t){return new(t||e)(ne(wi),ne(Xt),ne(IV,8))},e.\u0275dir=ke({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&nt("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[en([NV]),Pt]}),e})();const dr=new $e("NgValidators"),Jo=new $e("NgAsyncValidators");function AC(e){return function qo(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}(e.value)?{required:!0}:null}function Yd(e){return null}function jC(e){return null!=e}function HC(e){return Gc(e)?Ie(e):e}function UC(e){let n={};return e.forEach(t=>{n=null!=t?{...n,...t}:n}),0===Object.keys(n).length?null:n}function $C(e,n){return n.map(t=>t(e))}function WC(e){return e.map(n=>function xV(e){return!e.validate}(n)?n:t=>n.validate(t))}function ym(e){return null!=e?function GC(e){if(!e)return null;const n=e.filter(jC);return 0==n.length?null:function(t){return UC($C(t,n))}}(WC(e)):null}function bm(e){return null!=e?function KC(e){if(!e)return null;const n=e.filter(jC);return 0==n.length?null:function(t){return function EV(...e){if(1===e.length){const n=e[0];if(g(n))return Jd(n,null);if(v(n)&&Object.getPrototypeOf(n)===Object.prototype){const t=Object.keys(n);return Jd(t.map(r=>n[r]),t)}}if("function"==typeof e[e.length-1]){const n=e.pop();return Jd(e=1===e.length&&g(e[0])?e[0]:e,null).pipe(Ce(t=>n(...t)))}return Jd(e,null)}($C(t,n).map(HC)).pipe(Ce(UC))}}(WC(e)):null}function zC(e,n){return null===e?[n]:Array.isArray(e)?[...e,n]:[e,n]}function wm(e){return e?Array.isArray(e)?e:[e]:[]}function Qd(e,n){return Array.isArray(e)?e.includes(n):e===n}function YC(e,n){const t=wm(n);return wm(e).forEach(i=>{Qd(t,i)||t.push(i)}),t}function QC(e,n){return wm(n).filter(t=>!Qd(e,t))}class ZC{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=ym(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=bm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,t){return!!this.control&&this.control.hasError(n,t)}getError(n,t){return this.control?this.control.getError(n,t):null}}class Rr extends ZC{get formDirective(){return null}get path(){return null}}class Yo extends ZC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class XC{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Qo=(()=>{class e extends XC{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(ne(Yo,2))},e.\u0275dir=ke({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&yn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Pt]}),e})(),Zo=(()=>{class e extends XC{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(ne(Rr,10))},e.\u0275dir=ke({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&yn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Pt]}),e})();const Rl="VALID",Xd="INVALID",oc="PENDING",Ml="DISABLED";function Sm(e){return(ef(e)?e.validators:e)||null}function tE(e){return Array.isArray(e)?ym(e):e||null}function Nm(e,n){return(ef(n)?n.asyncValidators:e)||null}function nE(e){return Array.isArray(e)?bm(e):e||null}function ef(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class oE{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=t,this._composedValidatorFn=tE(this._rawValidators),this._composedAsyncValidatorFn=nE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Rl}get invalid(){return this.status===Xd}get pending(){return this.status==oc}get disabled(){return this.status===Ml}get enabled(){return this.status!==Ml}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=tE(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=nE(n)}addValidators(n){this.setValidators(YC(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(YC(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(QC(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(QC(n,this._rawAsyncValidators))}hasValidator(n){return Qd(this._rawValidators,n)}hasAsyncValidator(n){return Qd(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=oc,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=Ml,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=Rl,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rl||this.status===oc)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ml:Rl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=oc,this._hasOwnPendingAsyncValidator=!0;const t=HC(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(!1!==t.emitEvent)}get(n){let t=n;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(n,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new ct,this.statusChanges=new ct}_calculateStatus(){return this._allControlsDisabled()?Ml:this.errors?Xd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(oc)?oc:this._anyControlsHaveStatus(Xd)?Xd:Rl}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){ef(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}}class Tm extends oE{constructor(n,t,r){super(Sm(t),Nm(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,r={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){(function iE(e,n,t){e._forEachChild((r,i)=>{if(void 0===t[i])throw new we(1002,"")})})(this,0,n),Object.keys(n).forEach(r=>{(function rE(e,n,t){const r=e.controls;if(!(n?Object.keys(r):r).length)throw new we(1e3,"");if(!r[t])throw new we(1001,"")})(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(Object.keys(n).forEach(r=>{const i=this.controls[r];i&&i.patchValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((r,i)=>{r.reset(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,r)=>(n[r]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&n(r,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(n,t){let r=n;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}const xl=new $e("CallSetDisabledState",{providedIn:"root",factory:()=>Im}),Im="always";function Fl(e,n,t=Im){Rm(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||"always"===t)&&n.valueAccessor.setDisabledState?.(e.disabled),function jV(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&sE(e,n)})}(e,n),function UV(e,n){const t=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,n),function HV(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&sE(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),function VV(e,n){if(n.valueAccessor.setDisabledState){const t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,n)}function rf(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function Rm(e,n){const t=function qC(e){return e._rawValidators}(e);null!==n.validator?e.setValidators(zC(t,n.validator)):"function"==typeof t&&e.setValidators([t]);const r=function JC(e){return e._rawAsyncValidators}(e);null!==n.asyncValidator?e.setAsyncValidators(zC(r,n.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();rf(n._rawValidators,i),rf(n._rawAsyncValidators,i)}function sE(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}const zV={provide:Rr,useExisting:ht(()=>Yi)},Ol=(()=>Promise.resolve())();let Yi=(()=>{class e extends Rr{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ct,this.form=new Tm({},ym(t),bm(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ol.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Fl(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ol.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ol.then(()=>{const r=this._findContainer(t.path),i=new Tm({});(function aE(e,n){Rm(e,n)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ol.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ol.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function cE(e,n){e._syncPendingControls(),n.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return e.\u0275fac=function(t){return new(t||e)(ne(dr,10),ne(Jo,10),ne(xl,8))},e.\u0275dir=ke({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&nt("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[en([zV]),Pt]}),e})();function lE(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function uE(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const dE=class extends oE{constructor(n=null,t,r){super(Sm(t),Nm(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ef(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=uE(n)?n.value:n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){lE(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){lE(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){uE(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},YV={provide:Yo,useExisting:ht(()=>To)},pE=(()=>Promise.resolve())();let To=(()=>{class e extends Yo{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new dE,this._registered=!1,this.update=new ct,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Fm(e,n){if(!n)return null;let t,r,i;return Array.isArray(n),n.forEach(o=>{o.constructor===Ji?t=o:function GV(e){return Object.getPrototypeOf(e.constructor)===As}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function xm(e,n){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(n,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Fl(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){pE.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&$a(r);pE.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function tf(e,n){return[...n.path,e]}(t,this._parent):[t]}}return e.\u0275fac=function(t){return new(t||e)(ne(Rr,9),ne(dr,10),ne(Jo,10),ne(qi,10),ne(vo,8),ne(xl,8))},e.\u0275dir=ke({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[en([YV]),Pt,yr]}),e})(),Xo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=ke({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),mE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({}),e})(),ks=(()=>{class e{constructor(){this._validator=Yd}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Yd,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=ke({type:e,features:[yr]}),e})();const g3={provide:dr,useExisting:ht(()=>Ps),multi:!0};let Ps=(()=>{class e extends ks{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=$a,this.createValidator=t=>AC}enabled(t){return t}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=cr(e)))(r||e)}}(),e.\u0275dir=ke({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&$t("required",r._enabled?"":null)},inputs:{required:"required"},features:[en([g3]),Pt]}),e})(),w3=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[mE]}),e})(),AE=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:xl,useValue:t.callSetDisabledState??Im}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[w3]}),e})();function C3(e,n){if(1&e&&(ce(0,"div",5),Fe(1),de()),2&e){const t=Pe();fe(1),jt(" ",t.errorMessage," ")}}let E3=(()=>{class e{constructor(t){this.commentService=t,this.text="",this.disabled=!1,this.errorMessage=null}ngOnInit(){}submit(){return Zn(this,void 0,void 0,function*(){this.disabled=!0;try{const t=new CV({domain:this.domain,entityId:this.entityId,text:this.text});yield this.commentService.create(t).toPromise()}catch(t){if(console.log(t),!(t instanceof tc))throw t;this.errorMessage=429===t.status?"You have posted too many comments.":"Soething went wrong. Try again later."}finally{this.disabled=!1}this.text=""})}}return e.\u0275fac=function(t){return new(t||e)(ne(vm))},e.\u0275cmp=Qe({type:e,selectors:[["app-comment-box"]],inputs:{domain:"domain",entityId:"entityId"},decls:5,vars:4,consts:[["action","javascript:void(0)",3,"submit"],[1,"form-group","d-flex","flex-column"],["class","alert alert-danger",4,"ngIf"],["type","text","name","comment","placeholder","Leave a comment","rows","5",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","value","Submit",1,"btn","btn-primary","justify-content-end",3,"disabled"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(ce(0,"form",0),nt("submit",function(){return r.submit()}),ce(1,"div",1),Ne(2,C3,2,1,"div",2),ce(3,"textarea",3),nt("ngModelChange",function(o){return r.text=o}),de(),_t(4,"input",4),de()()),2&t&&(fe(2),me("ngIf",r.errorMessage),fe(1),me("ngModel",r.text),fe(1),me("disabled",r.disabled)("disabled",r.disabled))},dependencies:[Sn,Xo,Ji,Qo,Zo,To,Yi]}),e})();const S3={recommendation:{internalUrl:"/recommendations/"}};var kE=N(497);class PE{constructor(n){this.user=n,this.isLoggedIn=()=>null!=this.user&&!this.user.expired,this.getAuthorizationHeaderValue=()=>this.user?this.user.token_type+" "+this.user.access_token:null}get claims(){return this.user.profile||null}}const af=window.origin+di.baseHref;let Io=(()=>{class e{constructor(t){this.router=t,this.manager=new kE.UserManager({authority:di.authenticationAuthority,client_id:"angular-app",redirect_uri:af+"auth-callback",post_logout_redirect_uri:af+"auth-signout-callback",response_type:"code",automaticSilentRenew:!0,scope:"openid profile recommendation-service profile-service comment-service",filterProtocolClaims:!0,loadUserInfo:!0,silent_redirect_uri:af+"auth-silent-callback"}),this.UserChanged=new ct,this.completeAuthentication=()=>{window.location.search&&this.manager.signinRedirectCallback().then(()=>this.restorePath())},this.completeAuthenticationSilently=()=>this.manager.signinSilentCallback(),this.completeSignOut=()=>this.manager.signoutRedirectCallback().then(this.restorePath),this.saveRestorePath=(r=null)=>localStorage.setItem("restore-url",r||this.router.url),this.restorePath=()=>{this.router.navigateByUrl(localStorage.getItem("restore-url")||"/")},di.production||(kE.Log.logger=console),this.manager.events.addUserLoaded(r=>this.notifyUserChanged(r)),this.manager.events.addUserUnloaded(()=>this.notifyUserChanged())}notifyUserChanged(t){this.UserChanged.emit(t?new PE(t):null)}startAuthentication(t=null){this.saveRestorePath(t),this.manager.signinRedirect().catch(r=>console.log({authenticationError:r}))}startRegistrationRedirect(){this.saveRestorePath();const t=encodeURIComponent(af+"/registration-callback");window.location.href=di.authenticationAuthority+"/Account/Register?returnUrl="+t}startAuthenticationSilently(){this.manager.signinSilent().then(this.restorePath).catch(t=>console.log({authenticationError:t}))}startSignOut(){this.saveRestorePath("/"),this.manager.signoutRedirect()}getAuthenticatedeUser(){return Zn(this,void 0,void 0,function*(){try{const t=yield this.manager.getUser();return new PE(t)}catch(t){console.log({authenticationError:t})}})}}return e.\u0275fac=function(t){return new(t||e)(Re(Nn))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function N3(e,n){if(1&e&&(ce(0,"div",17),Fe(1),de()),2&e){const t=Pe(2);fe(1),jt(" ",t.errorMessage," ")}}function T3(e,n){if(1&e&&(ce(0,"pre",18),Fe(1),de()),2&e){const t=Pe(2);fe(1),go(null==t.comment.text?null:t.comment.text.trim())}}function I3(e,n){if(1&e){const t=dn();ce(0,"form",19),nt("submit",function(){return Jt(t),Yt(Pe(2).SubmitEdit())}),ce(1,"div",20)(2,"textarea",21),nt("ngModelChange",function(i){return Jt(t),Yt(Pe(2).comment.text=i)}),de(),_t(3,"input",22),de()()}if(2&e){const t=Pe(2);fe(2),me("ngModel",t.comment.text),fe(1),me("disabled",t.disabled)("disabled",t.disabled)}}function R3(e,n){if(1&e&&(ce(0,"button",23),Fe(1," View "),de()),2&e){const t=Pe(2);me("disabled",t.disabled)("routerLink",t.getUrl(t.comment))}}function M3(e,n){if(1&e){const t=dn();ce(0,"button",24),nt("click",function(){return Jt(t),Yt(Pe(2).removeComment())}),Fe(1," Remove "),de()}2&e&&me("disabled",Pe(2).disabled)}function x3(e,n){if(1&e){const t=dn();ce(0,"button",25),nt("click",function(){return Jt(t),Yt(Pe(2).startEditing())}),Fe(1," Edit "),de()}2&e&&me("disabled",Pe(2).disabled)}function F3(e,n){if(1&e&&(ce(0,"div",1)(1,"div",2)(2,"button",3),Fe(3," \u22c0 "),de(),ce(4,"button",4),Fe(5," \u22c1 "),de()(),ce(6,"div",5),Ne(7,N3,2,1,"div",6),ce(8,"div",7),Ne(9,T3,2,1,"pre",8),Ne(10,I3,4,3,"form",9),de(),ce(11,"div",10)(12,"span",11),Fe(13),de(),ce(14,"span",12),Fe(15),Lp(16,"date"),de(),ce(17,"button",13),Fe(18,"Reply"),de(),Ne(19,R3,2,2,"button",14),Ne(20,M3,2,1,"button",15),Ne(21,x3,2,1,"button",16),de()()()),2&e){const t=Pe();fe(2),me("disabled",t.disabled),fe(2),me("disabled",t.disabled),fe(3),me("ngIf",t.errorMessage),fe(2),me("ngIf",!t.editing),fe(1),me("ngIf",t.editing),fe(2),me("routerLink","/u/"+t.comment.username),fe(1),jt(" ",t.comment.username||"Annonymous"," "),fe(2),jt(" ",function Jb(e,n,t,r){const i=e+22,o=ye(),s=sa(o,i);return Xc(o,i)?Wb(o,br(),n,s.transform,t,r,s):s.transform(t,r)}(16,12,t.comment.createdAt,"short")," "),fe(2),me("disabled",t.disabled),fe(2),me("ngIf",t.showViewButton),fe(1),me("ngIf",t.canEdit()),fe(1),me("ngIf",t.canEdit())}}let LE=(()=>{class e{constructor(t,r){this.service=t,this.authService=r,this.showViewButton=!1,this.disabled=!1,this.deleted=!1,this.editing=!1,this.errorMessage=null}ngOnInit(){this.authService.getAuthenticatedeUser().then(t=>this.user=t),this.authService.UserChanged.subscribe(t=>this.user=t)}canEdit(){var t;return(null===(t=this.user)||void 0===t?void 0:t.isLoggedIn())&&this.user.claims.name===this.comment.username&&!this.comment.isDeleted}getUrl(t){var r;return(null===(r=S3[t.domain])||void 0===r?void 0:r.internalUrl)+t.entityId}removeComment(){return Zn(this,void 0,void 0,function*(){try{this.disabled=!0,yield this.service.delete(this.comment.id),this.deleted=!0}catch(t){t instanceof tc?(console.log(t),404===t.status&&(this.errorMessage="Could not confirm deletion. Please refresh the page and try again later."),403===t.status&&(this.errorMessage="You can't delete this."),console.log(this.errorMessage)):this.disabled=!1}})}startEditing(){return Zn(this,void 0,void 0,function*(){this.editing=!this.editing})}SubmitEdit(){return Zn(this,void 0,void 0,function*(){try{this.disabled=!0,yield this.service.edit(this.comment),this.disabled=!1,this.editing=!1}catch(t){t instanceof tc?(console.log(t),404===t.status&&(this.errorMessage="Could not find the comment. Please refresh the page and try again later."),403===t.status&&(this.errorMessage="You can't delete this."),console.log(this.errorMessage)):this.disabled=!1}})}}return e.\u0275fac=function(t){return new(t||e)(ne(vm),ne(Io))},e.\u0275cmp=Qe({type:e,selectors:[["app-comment"]],inputs:{comment:"comment",showViewButton:"showViewButton"},decls:1,vars:1,consts:[["class","comment-wrapper d-flex",4,"ngIf"],[1,"comment-wrapper","d-flex"],[1,"d-flex","flex-column","justify-content-end"],[1,"btn","px-0","pb-0","font-weight-bold",3,"disabled"],[1,"btn","px-0","pt-0","font-weight-bold",3,"disabled"],[1,"d-flex","flex-column","ml-2"],["class","alert alert-warning",4,"ngIf"],[1,"comment-message"],["class","m-0",4,"ngIf"],["action","javascript:void(0)",3,"submit",4,"ngIf"],[1,"mt-auto","comment-footer"],[1,"btn","username","font-weight-bold",3,"routerLink"],[1,"text-muted"],[1,"btn","font-weight-bold","py-0",3,"disabled"],["class","btn text-secondary font-weight-bold py-0",3,"disabled","routerLink",4,"ngIf"],["class","btn text-danger font-weight-bold py-0",3,"disabled","click",4,"ngIf"],["class","btn text-secondary font-weight-bold py-0",3,"disabled","click",4,"ngIf"],[1,"alert","alert-warning"],[1,"m-0"],["action","javascript:void(0)",3,"submit"],[1,"form-group","d-flex","flex-column"],["type","text","name","comment","placeholder","Leave a comment","rows","5",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","value","Submit",1,"btn","btn-primary","justify-content-end",3,"disabled"],[1,"btn","text-secondary","font-weight-bold","py-0",3,"disabled","routerLink"],[1,"btn","text-danger","font-weight-bold","py-0",3,"disabled","click"],[1,"btn","text-secondary","font-weight-bold","py-0",3,"disabled","click"]],template:function(t,r){1&t&&Ne(0,F3,22,15,"div",0),2&t&&me("ngIf",!r.deleted)},dependencies:[Sn,Xo,Ji,Qo,Zo,To,Yi,So,_w],styles:[".comment-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem;padding:.5rem;border-left:1px solid #333}.comment-footer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:2px;display:inline-block}"]}),e})();function O3(e,n){1&e&&_t(0,"app-comment",5),2&e&&me("comment",n.$implicit)}function A3(e,n){if(1&e){const t=dn();ce(0,"div",6),nt("click",function(){return Jt(t),Yt(Pe(2).onShowMore())}),Fe(1," Load more "),de()}}function k3(e,n){if(1&e&&(ce(0,"div",2),Ne(1,O3,1,1,"app-comment",3),Ne(2,A3,2,0,"div",4),de()),2&e){const t=Pe();fe(1),me("ngForOf",t.comments),fe(1),me("ngIf",t.moreAvailable)}}function P3(e,n){1&e&&_t(0,"app-loading-indicator")}let L3=(()=>{class e{constructor(t){this.commentService=t,this.comments=null,this.moreAvailable=!0}get commentUrl(){return di[this.domain+"ServiceURL"]}ngOnInit(){return Zn(this,void 0,void 0,function*(){this.comments=yield this.commentService.getPage(this.commentUrl,this.entityId,10).toPromise(),this.moreAvailable=this.comments.length>=10})}onShowMore(){var t;return Zn(this,void 0,void 0,function*(){const r=yield this.commentService.getPage(this.commentUrl,this.entityId,10,(null===(t=this.comments)||void 0===t?void 0:t.length)||0).toPromise();this.comments.push(...r),this.moreAvailable=r.length>=10})}}return e.\u0275fac=function(t){return new(t||e)(ne(vm))},e.\u0275cmp=Qe({type:e,selectors:[["app-comment-list"]],inputs:{entity:"entity",domain:"domain",entityId:"entityId"},decls:2,vars:2,consts:[["class","d-flex flex-column",4,"ngIf"],[4,"ngIf"],[1,"d-flex","flex-column"],[3,"comment",4,"ngFor","ngForOf"],["class","btn btn-outline-primary mb-5 align-self-center",3,"click",4,"ngIf"],[3,"comment"],[1,"btn","btn-outline-primary","mb-5","align-self-center",3,"click"]],template:function(t,r){1&t&&(Ne(0,k3,3,2,"div",0),Ne(1,P3,1,0,"app-loading-indicator",1)),2&t&&(me("ngIf",r.comments),fe(1),me("ngIf",!r.comments))},dependencies:[Vr,Sn,ic,LE]}),e})();function B3(e,n){1&e&&_t(0,"img",21),2&e&&Er("src",Pe(2).HEART_PATH,qn)}function V3(e,n){1&e&&(ce(0,"span"),Fe(1,"(maybe)"),de())}const j3=function(e,n){return{"text-success":e,"text-danger":n}};function H3(e,n){if(1&e&&(ce(0,"div",2)(1,"div",3)(2,"div",4),_t(3,"img",5),de(),ce(4,"div",6),Ne(5,B3,1,1,"img",7),de(),ce(6,"div",8),_t(7,"img",5),de()(),ce(8,"div",9)(9,"div",4),_t(10,"app-persona-name-button",10),de(),ce(11,"div",11),Ne(12,V3,2,0,"span",1),Fe(13," recommends "),de(),ce(14,"div",12),Fe(15),de()(),ce(16,"div",13)(17,"a",14),Fe(18),de(),ce(19,"a",15),Fe(20),de(),ce(21,"strong",16),Fe(22),de(),ce(23,"div")(24,"a",17),Fe(25,"\u22c0 Legitimate "),de(),ce(26,"a",17),Fe(27,"\u22c1 Fake "),de()(),ce(28,"a",17),Fe(29,"Share"),de()(),ce(30,"div",18),_t(31,"app-comment-box",19),de(),ce(32,"div",18),_t(33,"app-comment-list",20),de()()),2&e){const t=Pe();fe(3),Er("src",t.recommendation.persona.getProfileImagePath(),qn),Jn("alt","Image of ",t.recommendation.persona.name,""),fe(2),me("ngIf",t.recommendation.isConfirmed),fe(2),Er("src",t.recommendation.interest.getImagePath(),qn),Vu("alt","Icon for ",t.recommendation.interest.name," ",t.recommendation.interest.type,""),fe(3),me("persona",t.recommendation.persona),fe(2),me("ngIf",!t.recommendation.isConfirmed),fe(3),jt(" ",t.recommendation.interest.name," "),fe(2),me("routerLink","/u/"+t.recommendation.addedBy),fe(1),jt("Added by ",t.recommendation.addedBy,""),fe(1),Er("href",t.recommendation.context,qn),fe(1),jt(" ",t.recommendation.isConfirmed?"Context":"Proof"," "),fe(1),me("ngClass",function Va(e,n,t,r,i){return Wb(ye(),br(),e,n,t,r,i)}(20,j3,t.recommendation.isConfirmed,!t.recommendation.isConfirmed)),fe(1),jt(" Certainty ",t.recommendation.isConfirmed?100:0," % "),fe(9),me("domain","recommendation")("entityId",t.recommendation.id.toString()),fe(2),me("domain","recommendation")("entity","recommendations")("entityId",t.recommendation.id.toString())}}function U3(e,n){1&e&&_t(0,"app-loading-indicator")}let $3=(()=>{class e{constructor(t,r){this.recommendations=t,this.route=r,this.HEART_PATH=Go.RedHeart}ngOnInit(){this.id=Number(this.route.snapshot.paramMap.get("id")),this.recommendations.getById(this.id).subscribe({next:t=>this.recommendation=Sl.AttachMethods(t)})}}return e.\u0275fac=function(t){return new(t||e)(ne(IC),ne(Eo))},e.\u0275cmp=Qe({type:e,selectors:[["app-recommendation-page"]],decls:2,vars:2,consts:[["class","container-fluid",4,"ngIf"],[4,"ngIf"],[1,"container-fluid"],[1,"row","justify-content-center","wrap"],[1,"col-4","text-right"],[1,"persona-profile-img",3,"src","alt"],[1,"col-2","col-lg-3","text-center"],["alt","Heart icon","class","recommendation-heart",3,"src",4,"ngIf"],[1,"col-4"],[1,"row","justify-content-center","recommendation-view"],[3,"persona"],[1,"col-3","text-center"],[1,"col-4","text-left"],[1,"d-flex","justify-content-start","button-pane","mt-3"],[3,"routerLink"],["target","_blank",3,"href"],[3,"ngClass"],["href","#"],[1,"mt-3"],[3,"domain","entityId"],[3,"domain","entity","entityId"],["alt","Heart icon",1,"recommendation-heart",3,"src"]],template:function(t,r){1&t&&(Ne(0,H3,34,23,"div",0),Ne(1,U3,1,0,"app-loading-indicator",1)),2&t&&(me("ngIf",r.recommendation),fe(1),me("ngIf",!r.recommendation))},dependencies:[dw,Sn,So,ic,wC,E3,L3],styles:[".recommendation-heart[_ngcontent-%COMP%]{width:15vw;height:15vw;min-width:6rem;min-height:6rem;max-width:10rem;max-height:10rem}.recommendation-view[_ngcontent-%COMP%]{font-size:1.8em}.button-pane[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 15px}.button-pane[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:unset;font-weight:700}"]}),e})(),W3=(()=>{class e{constructor(t,r){this.authService=t,this.router=r}ngOnInit(){this.authService.completeAuthentication()}}return e.\u0275fac=function(t){return new(t||e)(ne(Io),ne(Nn))},e.\u0275cmp=Qe({type:e,selectors:[["app-auth-callback-page"]],decls:2,vars:0,template:function(t,r){1&t&&(ce(0,"p"),Fe(1,"Redirecting..."),de())},encapsulation:2}),e})(),G3=(()=>{class e{constructor(t,r){this.authService=t,this.router=r}ngOnInit(){this.authService.completeSignOut()}}return e.\u0275fac=function(t){return new(t||e)(ne(Io),ne(Nn))},e.\u0275cmp=Qe({type:e,selectors:[["app-auth-signout-callback-page"]],decls:2,vars:0,template:function(t,r){1&t&&(ce(0,"p"),Fe(1,"Redirecting..."),de())},encapsulation:2}),e})(),K3=(()=>{class e{constructor(t){this.auth=t}ngOnInit(){this.auth.startAuthenticationSilently()}}return e.\u0275fac=function(t){return new(t||e)(ne(Io))},e.\u0275cmp=Qe({type:e,selectors:[["app-registration-callback-page"]],decls:2,vars:0,template:function(t,r){1&t&&(ce(0,"p"),Fe(1,"Redirecting..."),de())},encapsulation:2}),e})(),z3=(()=>{class e{constructor(t){this.auth=t}ngOnInit(){this.auth.completeAuthenticationSilently()}}return e.\u0275fac=function(t){return new(t||e)(ne(Io))},e.\u0275cmp=Qe({type:e,selectors:[["app-auth-silent-callback-page"]],decls:2,vars:0,template:function(t,r){1&t&&(ce(0,"p"),Fe(1,"Redirecting..."),de())},encapsulation:2}),e})();class q3{constructor(n){Object.assign(this,n)}}var J3=N(166),Bm=N.n(J3),Al=(()=>(function(e){e.InstanceOf="P31",e.Image="P18"}(Al||(Al={})),Al))();let kl=(()=>{class e{constructor(t){Object.assign(this,t)}static OrderByModifiedDateDesc(t,r){return r.modified.localeCompare(t.modified)}static PersonaModelMapper(t){return new e({wikiId:t.id,name:t.labels.en,description:t.descriptions.en,modified:t.modified,images:t.claims[Al.Image]})}getImageUri(t=600){return this.images?Bm().getImageUrl(this.images[0],t):Go.FallbackPersonaImage}}return e.PersonaEntityFilter=n=>n.claims.P31&&"Q5"===n.claims.P31[0],e})(),Y3=(()=>{class e{constructor(){this.wiki=Bm()({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"})}searchEntities(t){return this.wiki.searchEntities(t)}getManyEntities(t){return this.wiki.getManyEntities(t)[0]}simplifyEntities(t){return this.wiki.simplify.entities(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Vm=(()=>{class e{constructor(t,r){this.http=t,this.wiki=r}GetSearchResults(t){return new Ee(r=>this.SearchAndPublishSegment(t,0,r))}SearchAndPublishSegment(t,r,i){if(r>90||null==r)return i.complete();const o=this.wiki.searchEntities({search:t,language:"en",limit:20,continue:r});this.http.get(o).subscribe(s=>{i.next(s),this.SearchAndPublishSegment(t,s["search-continue"],i)},s=>i.error(s))}GetEntitiesByIds(...t){return Zn(this,void 0,void 0,function*(){if(!t||0===t.length)return Promise.resolve([]);const r=this.wiki.getManyEntities({ids:t,languages:["en"],props:["info","labels","claims","descriptions"]}),i=yield this.http.get(r).toPromise();return Object.values(this.wiki.simplifyEntities(i.entities))||[]})}}return e.\u0275fac=function(t){return new(t||e)(Re(Os),Re(Y3))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Q3(e,n){if(1&e){const t=dn();ce(0,"div",8)(1,"div",9)(2,"div",10)(3,"a",11)(4,"h5"),Fe(5),de(),ce(6,"span",12),Fe(7),de()(),ce(8,"p"),Fe(9),de()(),ce(10,"div",13)(11,"div",14),nt("click",function(){const o=Jt(t).$implicit;return Yt(Pe().addPersona(o))}),Fe(12,"Add"),de()()()()}if(2&e){const t=n.$implicit;fe(3),Jn("href","https://www.wikidata.org/wiki/",t.wikiId,"",qn),fe(2),jt("",t.name," "),fe(2),go(t.wikiId),fe(2),jt("",t.description," ")}}function Z3(e,n){1&e&&_t(0,"app-loading-indicator")}const X3=function(){return[]};let ej=(()=>{class e{constructor(t,r){this.personasService=t,this.wiki=r,this.model=new kl,this.isLoading=!1,this.endLoading=()=>{this.isLoading=!1}}ngOnInit(){}onSubmit(){}updateSugestions(){this.startLoading();const t=this.model.name;setTimeout(()=>Zn(this,void 0,void 0,function*(){this.searchStillRelevant(t)&&(yield this.populateSuggestions(t))}),300)}startLoading(){this.wikiModel=[],this.isLoading=!0}searchStillRelevant(t){return this.model.name&&t===this.model.name}populateSuggestions(t){this.personaSubscription=this.wiki.GetSearchResults(t).subscribe({next:r=>Zn(this,void 0,void 0,function*(){return yield this.AddDetailed(t,r)}),error:console.error,complete:this.endLoading})}AddDetailed(t,r){return Zn(this,void 0,void 0,function*(){if(!r.search||!1===this.searchStillRelevant(t))return;this.wikiModel.length>25&&this.personaSubscription.unsubscribe();const i=r.search.map(a=>a.id),o=yield this.wiki.GetEntitiesByIds(...i);if(!o||!this.searchStillRelevant(t))return;const s=o.filter(a=>a.claims.P31&&"Q5"===a.claims.P31[0]).map(a=>new kl({wikiId:a.id,name:a.labels.en,description:a.descriptions.en,modified:a.modified})).sort(kl.OrderByModifiedDateDesc);this.wikiModel.push(...s),this.wikiModel.length>25&&this.personaSubscription.unsubscribe()})}addPersona(t){this.personasService.create(new q3(t)).subscribe(r=>console.log(r)),this.wikiModel=this.wikiModel.filter(r=>r!==t)}}return e.\u0275fac=function(t){return new(t||e)(ne(rc),ne(Vm))},e.\u0275cmp=Qe({type:e,selectors:[["app-add-persona-page"]],decls:12,vars:4,consts:[[1,"container","row","justify-content-center"],[1,"col","col-md-8","col-lg-6"],[1,"form-group"],["for","name"],["type","text","required","","id","name","name","name",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-deck","d-flex","justify-content-center"],["class","d-flex col-4 mb-3",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-flex","col-4","mb-3"],[1,"card"],[1,"card-body"],["target","_blank",1,"card-title",3,"href"],[1,"text-muted"],[1,"card-footer"],[1,"btn","btn-primary","float-right",3,"click"]],template:function(t,r){1&t&&(ce(0,"div",0)(1,"div",1)(2,"h1"),Fe(3,"Add Persona"),de(),ce(4,"form")(5,"div",2)(6,"label",3),Fe(7,"Name as seen on Wikipedia or Wikibase ID"),de(),ce(8,"input",4),nt("ngModelChange",function(o){return r.model.name=o})("ngModelChange",function(){return r.updateSugestions()}),de()()()()(),ce(9,"div",5),Ne(10,Q3,13,4,"div",6),de(),Ne(11,Z3,1,0,"app-loading-indicator",7)),2&t&&(fe(8),me("ngModel",r.model.name),fe(2),me("ngForOf",r.wikiModel||Ku(3,X3)),fe(1),me("ngIf",r.isLoading))},dependencies:[Vr,Sn,Xo,Ji,Qo,Zo,Ps,To,Yi,ic]}),e})();class tj{constructor(n){Object.assign(this,n)}}var Lt=(()=>(function(e){e.Human="Q5",e.Anthalogy="Q105420",e.Book="Q571",e.EpicPoem="Q37484",e.Haiku="Q37707",e.LiteraryWork="Q7725634",e.Myth="Q12827256",e.Novel="Q8261",e.Novella="Q149537",e.Play="Q25379",e.Poem="Q5185279",e.ShortStory="Q49084",e.ShortNovel="Q12799318",e.WrittenWork="Q47461344",e.Xiaoshuo="Q59126",e.AnimatedSeries="Q581714",e.AnimeTVSeries="Q63952888",e.FeatureFilm="Q24869",e.Film="Q11424",e.Film3D="Q229390",e.Miniseries="Q1259759",e.TVSeries="Q5398426",e.TVSerial="Q7724161",e.VideoGame="Q7889",e.VideoGameMod="Q865493",e.Podcast="Q24634210",e.RadioDramaSeries="Q3511312",e.CreativeWork="Q17537576"}(Lt||(Lt={})),Lt))();class Ls{constructor(n){Object.assign(this,n)}static OrderByModifiedDateDesc(n,t){return t.modified.localeCompare(n.modified)}static InterestEntityFilter(n){const t=n.claims.P31||["undefined"];return Object.keys(BE).includes(t[0])}static InterestModelMapper(n){return new Ls({wikiId:n.id,name:n.labels.en,description:n.descriptions.en,modified:n.modified,instanceOf:n.claims.P31[0],images:n.claims[Al.Image]})}getImageUri(n){return this.images?Bm().getImageUrl(this.images[0],n):null}}const rj=[Lt.AnimatedSeries,Lt.AnimeTVSeries,Lt.FeatureFilm,Lt.Film3D,Lt.Film,Lt.Miniseries,Lt.TVSeries,Lt.TVSerial],ij=[Lt.VideoGame,Lt.VideoGameMod],oj=[Lt.Podcast,Lt.RadioDramaSeries],sj=[Lt.CreativeWork],sc={};[Lt.Anthalogy,Lt.Book,Lt.EpicPoem,Lt.Haiku,Lt.LiteraryWork,Lt.Myth,Lt.Novel,Lt.Novella,Lt.Play,Lt.Poem,Lt.ShortStory,Lt.ShortNovel,Lt.WrittenWork,Lt.Xiaoshuo].forEach(e=>sc[e.toString()]=Ko.Book),rj.forEach(e=>sc[e.toString()]=Ko.Movie),ij.forEach(e=>sc[e.toString()]=Ko.Game),oj.forEach(e=>sc[e.toString()]=Ko.Podcast),sj.forEach(e=>sc[e.toString()]=Ko.Other);const BE=sc;let VE=(()=>{class e{constructor(t){this.http=t,this.baseUrl=di.interestServiceURL}create(t){return this.http.post(this.baseUrl,t)}}return e.\u0275fac=function(t){return new(t||e)(Re(Os))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function aj(e,n){if(1&e){const t=dn();ce(0,"div",8)(1,"div",9)(2,"div",10)(3,"a",11)(4,"h5"),Fe(5),de(),ce(6,"span",12),Fe(7),de()(),ce(8,"p"),Fe(9),de()(),ce(10,"div",13)(11,"div",14),nt("click",function(){const o=Jt(t).$implicit;return Yt(Pe().addInterest(o))}),Fe(12,"Add"),de()()()()}if(2&e){const t=n.$implicit;fe(3),Jn("href","https://www.wikidata.org/wiki/",t.wikiId,"",qn),fe(2),jt("",t.name," "),fe(2),go(t.wikiId),fe(2),jt("",t.description," ")}}function cj(e,n){1&e&&_t(0,"app-loading-indicator")}const lj=function(){return[]};let uj=(()=>{class e{constructor(t,r){this.wiki=t,this.service=r,this.model=new ec,this.isLoading=!1,this.endLoading=()=>{this.isLoading=!1}}ngOnInit(){}updateSugestions(){this.startLoading();const t=this.model.name;setTimeout(()=>{this.searchStillRelevant(t)&&this.populateSuggestions(t)},300)}startLoading(){this.wikiModel=[],this.isLoading=!0}searchStillRelevant(t){return this.model.name&&t===this.model.name}populateSuggestions(t){this.interestSubscription=this.wiki.GetSearchResults(t).subscribe({next:r=>Zn(this,void 0,void 0,function*(){return yield this.AddDetailed(t,r)}),error:console.error,complete:this.endLoading})}AddDetailed(t,r){return Zn(this,void 0,void 0,function*(){if(!1===this.searchStillRelevant(t))return;const i=r.search.map(a=>a.id),o=yield this.wiki.GetEntitiesByIds(...i);if(!o||!this.searchStillRelevant(t))return;const s=o.filter(Ls.InterestEntityFilter).map(Ls.InterestModelMapper).sort(Ls.OrderByModifiedDateDesc);this.wikiModel.push(...s)})}addInterest(t){this.service.create(new tj(t)).subscribe(console.log),this.wikiModel=this.wikiModel.filter(r=>r!==t)}}return e.\u0275fac=function(t){return new(t||e)(ne(Vm),ne(VE))},e.\u0275cmp=Qe({type:e,selectors:[["app-add-interest-page"]],decls:12,vars:4,consts:[[1,"container","row","justify-content-center"],[1,"col","col-md-8","col-lg-6"],[1,"form-group"],["for","name"],["type","text","required","","id","name","name","name",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-deck","d-flex","justify-content-center"],["class","d-flex col-4 mb-3",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-flex","col-4","mb-3"],[1,"card"],[1,"card-body"],["target","_blank",1,"card-title",3,"href"],[1,"text-muted"],[1,"card-footer"],[1,"btn","btn-primary","float-right",3,"click"]],template:function(t,r){1&t&&(ce(0,"div",0)(1,"div",1)(2,"h1"),Fe(3,"Add Interest"),de(),ce(4,"form")(5,"div",2)(6,"label",3),Fe(7,"Name"),de(),ce(8,"input",4),nt("ngModelChange",function(o){return r.model.name=o})("ngModelChange",function(){return r.updateSugestions()}),de()()()()(),ce(9,"div",5),Ne(10,aj,13,4,"div",6),de(),Ne(11,cj,1,0,"app-loading-indicator",7)),2&t&&(fe(8),me("ngModel",r.model.name),fe(2),me("ngForOf",r.wikiModel||Ku(3,lj)),fe(1),me("ngIf",r.isLoading))},dependencies:[Vr,Sn,Xo,Ji,Qo,Zo,Ps,To,Yi,ic]}),e})();class dj{}function fj(e,n){if(1&e&&_t(0,"img",16),2&e){const t=Pe().$implicit;Er("src",t.getImageUri(600),qn),Jn("alt","Image of ",t.name,"")}}function hj(e,n){if(1&e){const t=dn();ce(0,"div",8)(1,"div",9),Ne(2,fj,1,2,"img",10),ce(3,"div",11)(4,"a",12)(5,"h5"),Fe(6),de(),ce(7,"span",13),Fe(8),de()(),ce(9,"p"),Fe(10),de()(),ce(11,"div",14)(12,"button",15),nt("click",function(){const o=Jt(t).$implicit;return Yt(Pe().selectEntity(o))}),Fe(13,"Select"),de()()()()}if(2&e){const t=n.$implicit;fe(2),me("ngIf",t.images),fe(2),Jn("href","https://www.wikidata.org/wiki/",t.wikiId,"",qn),fe(2),jt("",t.name," "),fe(2),go(t.wikiId),fe(2),jt("",t.description," ")}}function pj(e,n){1&e&&_t(0,"app-loading-indicator")}const gj=function(){return[]};let mj=(()=>{class e{constructor(t){this.wiki=t,this.isLoading=!1,this.title="Select entity",this.EntitySelected=new ct,this.endLoading=()=>{this.isLoading=!1}}ngOnInit(){}updateSugestions(){this.startLoading();const t=this.searchQueryModel;setTimeout(()=>{!1===this.searchIsOutdated(t)&&this.populateSuggestions(t)},300)}startLoading(){this.wikiModel=[],this.isLoading=!0}searchIsOutdated(t){return!t||t!==this.searchQueryModel}populateSuggestions(t){this.entitiesSubscription=this.wiki.GetSearchResults(t).subscribe({next:r=>Zn(this,void 0,void 0,function*(){return yield this.AddDetailed(t,r)}),error:console.error,complete:this.endLoading})}AddDetailed(t,r){return Zn(this,void 0,void 0,function*(){if(!r.search||this.searchIsOutdated(t))return;this.wikiModel.length>25&&this.entitiesSubscription.unsubscribe();const i=r.search.map(a=>a.id),o=yield this.wiki.GetEntitiesByIds(...i);if(!o||this.searchIsOutdated(t))return;const s=o.filter(this.EntityFilter).map(this.ModelMapper);this.wikiModel.push(...s),this.wikiModel.length>25&&this.entitiesSubscription.unsubscribe()})}selectEntity(t){this.EntitySelected.emit(t)}}return e.\u0275fac=function(t){return new(t||e)(ne(Vm))},e.\u0275cmp=Qe({type:e,selectors:[["app-wiki-entity-selector"]],inputs:{ModelMapper:"ModelMapper",EntityFilter:"EntityFilter",title:"title"},outputs:{EntitySelected:"EntitySelected"},decls:12,vars:5,consts:[[1,"container","row","justify-content-center"],[1,"col","col-md-8","col-lg-6"],[1,"form-group"],["for","name"],["type","search","required","","name","name",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-deck","d-flex","justify-content-center"],["class","d-flex col-4 mb-4",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-flex","col-4","mb-4"],[1,"card","m-0"],["class","card-img-top person-card-image cursor-pointer",3,"src","alt",4,"ngIf"],[1,"card-body"],["target","_blank",1,"card-title",3,"href"],[1,"text-muted"],[1,"card-footer"],[1,"btn","btn-primary","float-right",3,"click"],[1,"card-img-top","person-card-image","cursor-pointer",3,"src","alt"]],template:function(t,r){1&t&&(ce(0,"div",0)(1,"div",1)(2,"h3"),Fe(3),de(),ce(4,"form")(5,"div",2)(6,"label",3),Fe(7,"Name as seen on Wikipedia or the Wikibase ID"),de(),ce(8,"input",4),nt("ngModelChange",function(o){return r.searchQueryModel=o})("ngModelChange",function(){return r.updateSugestions()}),de()()()()(),ce(9,"div",5),Ne(10,hj,14,5,"div",6),de(),Ne(11,pj,1,0,"app-loading-indicator",7)),2&t&&(fe(3),go(r.title),fe(5),me("ngModel",r.searchQueryModel),fe(2),me("ngForOf",r.wikiModel||Ku(4,gj)),fe(1),me("ngIf",r.isLoading))},dependencies:[Vr,Sn,Xo,Ji,Qo,Zo,Ps,To,Yi,ic]}),e})();const _j=["PersonaSelectionForm"],vj=["InterestSelectionForm"],yj=["submitForm"];function bj(e,n){if(1&e&&(ce(0,"div",5),_t(1,"img",11),de()),2&e){const t=Pe();fe(1),Er("src",t.persona.getProfileImagePath(),qn),Jn("alt","Image of ",t.persona.name,"")}}function wj(e,n){if(1&e&&(ce(0,"div",12),_t(1,"img",13),de()),2&e){const t=Pe();fe(1),Er("src",t.HEART_IMAGE,qn)}}function Dj(e,n){if(1&e&&(ce(0,"div",14),_t(1,"img",11),de()),2&e){const t=Pe();fe(1),Er("src",t.interest.getImagePath(),qn),Vu("alt","Icon for ",t.interest.name," ",t.interest.type,"")}}function Cj(e,n){1&e&&(ce(0,"div",12),Fe(1," recommends "),de())}function Ej(e,n){if(1&e&&(ce(0,"div",15),Fe(1),de()),2&e){const t=Pe();fe(1),jt(" ",t.interest.name," ")}}function Sj(e,n){if(1&e){const t=dn();ce(0,"app-wiki-entity-selector",16,17),nt("EntitySelected",function(i){return Jt(t),Yt(Pe().personaSelected(i))}),de()}if(2&e){const t=Pe();me("ModelMapper",t.PersonaModelMapper)("EntityFilter",t.PersonaEntityFilter)}}function Nj(e,n){if(1&e){const t=dn();ce(0,"app-wiki-entity-selector",18,19),nt("EntitySelected",function(i){return Jt(t),Yt(Pe().interestSelected(i))}),de()}if(2&e){const t=Pe();me("ModelMapper",t.InterestModelMapper)("EntityFilter",t.InterestEntityFilter)}}function Tj(e,n){if(1&e){const t=dn();ce(0,"div",20)(1,"div",21)(2,"form",22,23),nt("ngSubmit",function(){return Jt(t),Yt(Pe().addRecommendation())}),ce(4,"div",24)(5,"div",25),Fe(6," Please enter an url to a credible source for this recommendation. Best sources are official blog posts, interviews, tweets, Youtube videos etc. "),de(),ce(7,"input",26),nt("ngModelChange",function(i){return Jt(t),Yt(Pe().model.context=i)}),de()(),ce(8,"button",27),Fe(9," Register "),de()()()()}if(2&e){const t=Ei(3),r=Pe();fe(7),me("ngModel",r.model.context),fe(1),me("disabled",!t.form.valid||!r.model.interestId||!r.model.personaId)}}let Ij=(()=>{class e{constructor(t,r,i,o){this.service=t,this.personasService=r,this.interestsService=i,this.router=o,this.model=new dj,this.persona=null,this.interest=null,this.HEART_IMAGE=Go.RedHeart;const s=this.router.getCurrentNavigation();s&&s.extras.state&&(this.persona=s.extras.state.persona,this.model.personaId=this.persona.id)}ngOnInit(){}personaSelected(t){this.persona=new El({name:t.name,imageUri:t.getImageUri()}),this.personasService.create(t).subscribe(r=>{this.persona=El.AttachMethods(r),this.model.personaId=r.id})}interestSelected(t){this.interest=new ec({name:t.name,type:BE[t.instanceOf]}),this.interestsService.create(t).subscribe(r=>{this.interest=ec.AttachMethods(r),this.model.interestId=r.id})}addRecommendation(){const t=window.location.href;this.service.createAndObserveResponse(this.model).subscribe({next:r=>{switch(t===window.location.href&&this.router.navigate(["recommendations",r.body.id]),r.status){case 200:console.log("recommendation already existed");break;case 201:console.log("new recommendation created")}}})}get PersonaModelMapper(){return kl.PersonaModelMapper}get PersonaEntityFilter(){return kl.PersonaEntityFilter}get InterestModelMapper(){return Ls.InterestModelMapper}get InterestEntityFilter(){return Ls.InterestEntityFilter}}return e.\u0275fac=function(t){return new(t||e)(ne(IC),ne(rc),ne(VE),ne(Nn))},e.\u0275cmp=Qe({type:e,selectors:[["app-add-recommendation-page"]],viewQuery:function(t,r){if(1&t&&(ja(_j,5),ja(vj,5),ja(yj,5)),2&t){let i;tn(i=nn())&&(r.PersonaSelectionForm=i.first),tn(i=nn())&&(r.InterestSelectionForm=i.first),tn(i=nn())&&(r.submitForm=i.first)}},decls:14,vars:9,consts:[[1,"row","justify-content-center","wrap"],["class","col-4 text-right ",4,"ngIf"],["class","col-3 text-center ",4,"ngIf"],["class","col-4",4,"ngIf"],[1,"row","justify-content-center","recommendation-view","mb-3"],[1,"col-4","text-right"],["class","col-3 text-center",4,"ngIf"],["class","col-4 text-left",4,"ngIf"],["title","Select Persona",3,"ModelMapper","EntityFilter","EntitySelected",4,"ngIf"],["title","Select Interest",3,"ModelMapper","EntityFilter","EntitySelected",4,"ngIf"],["class","row justify-content-center",4,"ngIf"],[1,"persona-profile-img",3,"src","alt"],[1,"col-3","text-center"],["alt","Heart icon",1,"recommendation-heart",3,"src"],[1,"col-4"],[1,"col-4","text-left"],["title","Select Persona",3,"ModelMapper","EntityFilter","EntitySelected"],["PersonaSelectionForm",""],["title","Select Interest",3,"ModelMapper","EntityFilter","EntitySelected"],["InterestSelectionForm",""],[1,"row","justify-content-center"],[1,"col","col-lg-6","align-self-center"],[3,"ngSubmit"],["submitForm","ngForm"],[1,"form-group"],[1,"text-muted"],["type","url","required","","placeholder","Proof","name","context","id","context",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","float-right",3,"disabled"]],template:function(t,r){1&t&&(ce(0,"h2"),Fe(1,"Register recommednation"),de(),ce(2,"div",0),Ne(3,bj,2,2,"div",1),Ne(4,wj,2,1,"div",2),Ne(5,Dj,2,3,"div",3),de(),ce(6,"div",4)(7,"div",5),Fe(8),de(),Ne(9,Cj,2,0,"div",6),Ne(10,Ej,2,1,"div",7),de(),Ne(11,Sj,2,2,"app-wiki-entity-selector",8),Ne(12,Nj,2,2,"app-wiki-entity-selector",9),Ne(13,Tj,10,2,"div",10)),2&t&&(fe(3),me("ngIf",r.persona),fe(1),me("ngIf",r.persona&&r.interest),fe(1),me("ngIf",r.interest),fe(3),jt(" ",null==r.persona?null:r.persona.name," "),fe(1),me("ngIf",r.persona&&r.interest),fe(1),me("ngIf",r.interest),fe(1),me("ngIf",!r.persona),fe(1),me("ngIf",r.persona&&!r.interest),fe(1),me("ngIf",r.persona&&r.interest))},dependencies:[Sn,Xo,Ji,Qo,Zo,Ps,To,Yi,mj],styles:[".recommendation-heart[_ngcontent-%COMP%]{width:15vw;height:15vw;min-width:6rem;min-height:6rem;max-width:10rem;max-height:10rem}.recommendation-view[_ngcontent-%COMP%]{font-size:1.8em}"]}),e})(),jm=(()=>{class e{constructor(t){this.auth=t}canActivate(t){return Zn(this,void 0,void 0,function*(){return!!(yield this.auth.getAuthenticatedeUser()).isLoggedIn()||(this.auth.startAuthentication(t.url.join("/")),!1)})}}return e.\u0275fac=function(t){return new(t||e)(Re(Io))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Rj(e,n){1&e&&(ce(0,"a",13),_t(1,"img",14),de()),2&e&&Er("href",Pe(2).persona.wikipediaUri,qn)}function Mj(e,n){if(1&e){const t=dn();ce(0,"div",3)(1,"div",4),_t(2,"img",5),de(),ce(3,"div",6)(4,"h1"),Fe(5),de(),ce(6,"span",7),Fe(7),de(),ce(8,"a",8),Fe(9),de(),ce(10,"div",9),Ne(11,Rj,2,1,"a",10),de(),ce(12,"div")(13,"div",11),nt("click",function(){return Jt(t),Yt(Pe().registerButtonClicked())}),Fe(14," Add recommendation "),de(),ce(15,"div",12),Fe(16," Follow "),de()()()()}if(2&e){const t=Pe();fe(2),Er("src",t.persona.getProfileImagePath(),qn),fe(3),go(t.persona.name),fe(2),jt(" ",t.persona.description,""),fe(1),Jn("href","https://www.wikidata.org/wiki/",t.persona.wikiId,"",qn),fe(1),jt(" ",t.persona.wikiId,""),fe(2),me("ngIf",t.persona.wikipediaUri)}}function xj(e,n){if(1&e&&_t(0,"app-interest-short-entry",23),2&e){const t=n.$implicit;Jn("routerLink","/recommendations/",t.id,""),me("interest",t.interest)}}function Fj(e,n){if(1&e&&(ce(0,"div",20)(1,"div",18),Fe(2),de(),ce(3,"div",21),Ne(4,xj,1,2,"app-interest-short-entry",22),de()()),2&e){const t=n.$implicit;fe(2),jt(" ",t.key,"s "),fe(2),me("ngForOf",t.value)}}function Oj(e,n){if(1&e&&(ce(0,"div",24),_t(1,"app-interest-short-entry",23),de()),2&e){const t=n.$implicit;fe(1),Jn("routerLink","/recommendations/",t.id,""),me("interest",t.interest)}}function Aj(e,n){if(1&e&&(ce(0,"div",15),Ne(1,Fj,5,2,"div",16),Lp(2,"keyvalue"),ce(3,"div",17)(4,"div",18),Fe(5," Pending "),de(),Ne(6,Oj,2,2,"div",19),de()()),2&e){const t=Pe();fe(1),me("ngForOf",qb(2,2,t.persona.geConfirmedtRecommendationsByType())),fe(5),me("ngForOf",t.persona.pendingRecommendations)}}let kj=(()=>{class e{constructor(t,r,i){this.personaService=t,this.route=r,this.router=i}ngOnInit(){this.personaService.find(this.route.snapshot.params.id).subscribe(t=>{this.persona=Nl.AttachMethods(t)})}registerButtonClicked(){this.router.navigate(["recommendations","add"],{state:{persona:this.persona}})}}return e.\u0275fac=function(t){return new(t||e)(ne(rc),ne(Eo),ne(Nn))},e.\u0275cmp=Qe({type:e,selectors:[["app-view-persona-page"]],decls:5,vars:2,consts:[["class","row justify-content-center",4,"ngIf"],[1,"mt-5"],["class","row",4,"ngIf"],[1,"row","justify-content-center"],[1,"col-3"],[1,"w-100",3,"src"],[1,"col","col-md-5","justify-content-left"],[1,"text-muted"],[1,"btn-link","text-muted",3,"href"],[1,"mb-3"],["target","_blank",3,"href",4,"ngIf"],[1,"btn","btn-primary","mx-2",3,"click"],[1,"btn","btn-primary","mx-2"],["target","_blank",3,"href"],["src","assets/img/icons/wiki.png","alt","Wikipedia logo",1,"img-icon-lg"],[1,"row"],["class","col p-0 m-0 interest-column",4,"ngFor","ngForOf"],[1,"col","p-0"],[1,"lead","column-header","p-1"],["class","px-1",4,"ngFor","ngForOf"],[1,"col","p-0","m-0","interest-column"],[1,"p-1"],["class","cursor-pointer",3,"interest","routerLink",4,"ngFor","ngForOf"],[1,"cursor-pointer",3,"interest","routerLink"],[1,"px-1"]],template:function(t,r){1&t&&(ce(0,"div"),Ne(1,Mj,17,6,"div",0),ce(2,"h3",1),Fe(3,"Recommendations:"),de(),Ne(4,Aj,7,4,"div",2),de()),2&t&&(fe(1),me("ngIf",r.persona),fe(3),me("ngIf",r.persona))},dependencies:[Vr,Sn,So,bC,vw],styles:[".column-header[_ngcontent-%COMP%]{width:100%;border-bottom:2px solid black}.interest-column[_ngcontent-%COMP%]{border-right:2px solid black}"]}),e})();const Pj=di.profileServiceURL;let Lj=(()=>{class e{constructor(t){this.http=t}getByUsername(t){return this.http.get(Pj+"/"+t)}}return e.\u0275fac=function(t){return new(t||e)(Re(Os))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Bj(e,n){if(1&e&&(ce(0,"div"),_t(1,"app-comment",3),de()),2&e){const t=n.$implicit;fe(1),me("comment",t)("showViewButton",!0)}}function Vj(e,n){if(1&e&&(ce(0,"div",1),Ne(1,Bj,2,2,"div",2),de()),2&e){const t=Pe();fe(1),me("ngForOf",t.user.comments)}}const jj=[{path:"",component:NC},{path:"recommendations/add",component:Ij,canActivate:[jm]},{path:"recommendations/:id",component:$3},{path:"auth-callback",component:W3},{path:"auth-signout-callback",component:G3},{path:"registration-callback",component:K3},{path:"auth-silent-callback",component:z3},{path:"personas/add",component:ej,canActivate:[jm]},{path:"personas/:id",component:kj},{path:"interests/add",component:uj,canActivate:[jm]},{path:"u/:username",component:(()=>{class e{constructor(t,r){this.service=t,this.route=r}ngOnInit(){return Zn(this,void 0,void 0,function*(){this.username=this.route.snapshot.paramMap.get("username"),this.user=yield this.service.getByUsername(this.username).toPromise(),console.log(this.user)})}}return e.\u0275fac=function(t){return new(t||e)(ne(Lj),ne(Eo))},e.\u0275cmp=Qe({type:e,selectors:[["app-profile-page"]],decls:5,vars:2,consts:[["class","d-flex flex-column",4,"ngIf"],[1,"d-flex","flex-column"],[4,"ngFor","ngForOf"],[3,"comment","showViewButton"]],template:function(t,r){1&t&&(ce(0,"h1"),Fe(1),de(),ce(2,"h2"),Fe(3,"Recent comments:"),de(),Ne(4,Vj,2,1,"div",0)),2&t&&(fe(1),go(r.user&&r.user.id),fe(3),me("ngIf",r.user&&r.user.comments))},dependencies:[Vr,Sn,LE]}),e})()},{path:"**",component:NC}];let Hj=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[rC.forRoot(jj),rC]}),e})();function jr(e,n,t,r){return H(t)&&(r=t,t=void 0),r?jr(e,n,t).pipe(Ce(i=>g(i)?r(...i):r(i))):new Ee(i=>{jE(e,n,function o(s){i.next(arguments.length>1?Array.prototype.slice.call(arguments):s)},i,t)})}function jE(e,n,t,r,i){let o;if(function Wj(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){const s=e;e.addEventListener(n,t,i),o=()=>s.removeEventListener(n,t,i)}else if(function $j(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){const s=e;e.on(n,t),o=()=>s.off(n,t)}else if(function Uj(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){const s=e;e.addListener(n,t),o=()=>s.removeListener(n,t)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,a=e.length;s<a;s++)jE(e[s],n,t,r,i)}r.add(o)}class Gj extends D{constructor(n,t){super()}schedule(n,t=0){return this}}let HE=(()=>{class e{constructor(t,r=e.now){this.SchedulerAction=t,this.now=r}schedule(t,r=0,i){return new this.SchedulerAction(this,t).schedule(i,r)}}return e.now=()=>Date.now(),e})();class es extends HE{constructor(n,t=HE.now){super(n,()=>es.delegate&&es.delegate!==this?es.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(n,t=0,r){return es.delegate&&es.delegate!==this?es.delegate.schedule(n,t,r):super.schedule(n,t,r)}flush(n){const{actions:t}=this;if(this.active)return void t.push(n);let r;this.active=!0;do{if(r=n.execute(n.state,n.delay))break}while(n=t.shift());if(this.active=!1,r){for(;n=t.shift();)n.unsubscribe();throw r}}}const UE=new es(class Kj extends Gj{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){if(this.closed)return this;this.state=n;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(n,t,r=0){return setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,t,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(n,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let i,r=!1;try{this.work(n)}catch(o){r=!0,i=!!o&&o||new Error(o)}if(r)return this.unsubscribe(),i}_unsubscribe(){const n=this.id,t=this.scheduler,r=t.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null}});function $E(e){return!g(e)&&e-parseFloat(e)+1>=0}function zj(e){const{index:n,period:t,subscriber:r}=e;if(r.next(n),!r.closed){if(-1===t)return r.complete();e.index=n+1,this.schedule(e,t)}}function GE(...e){if(1===e.length){if(!g(e[0]))return e[0];e=e[0]}return et(e,void 0).lift(new qj)}class qj{call(n,t){return t.subscribe(new Jj(n))}}class Jj extends Pg{constructor(n){super(n),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(n){this.observables.push(n)}_complete(){const n=this.observables,t=n.length;if(0===t)this.destination.complete();else{for(let r=0;r<t&&!this.hasFirst;r++){const o=Lg(this,n[r],void 0,r);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}}notifyNext(n,t,r){if(!this.hasFirst){this.hasFirst=!0;for(let i=0;i<this.subscriptions.length;i++)if(i!==r){let o=this.subscriptions[i];o.unsubscribe(),this.remove(o)}this.subscriptions=null}this.destination.next(t)}}function lf(...e){const n=e[e.length-1];return"function"==typeof n&&e.pop(),et(e,void 0).lift(new Yj(n))}new Ee(wo);class Yj{constructor(n){this.resultSelector=n}call(n,t){return t.subscribe(new Qj(n,this.resultSelector))}}class Qj extends x{constructor(n,t,r=Object.create(null)){super(n),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(n){const t=this.iterators;g(n)?t.push(new Xj(n)):t.push("function"==typeof n[mn]?new Zj(n[mn]()):new eH(this.destination,this,n))}_complete(){const n=this.iterators,t=n.length;if(this.unsubscribe(),0!==t){this.active=t;for(let r=0;r<t;r++){let i=n[r];i.stillUnsubscribed?this.destination.add(i.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const n=this.iterators,t=n.length,r=this.destination;for(let s=0;s<t;s++){let a=n[s];if("function"==typeof a.hasValue&&!a.hasValue())return}let i=!1;const o=[];for(let s=0;s<t;s++){let a=n[s],d=a.next();if(a.hasCompleted()&&(i=!0),d.done)return void r.complete();o.push(d.value)}this.resultSelector?this._tryresultSelector(o):r.next(o),i&&r.complete()}_tryresultSelector(n){let t;try{t=this.resultSelector.apply(this,n)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class Zj{constructor(n){this.iterator=n,this.nextResult=n.next()}hasValue(){return!0}next(){const n=this.nextResult;return this.nextResult=this.iterator.next(),n}hasCompleted(){const n=this.nextResult;return Boolean(n&&n.done)}}class Xj{constructor(n){this.array=n,this.index=0,this.length=0,this.length=n.length}[mn](){return this}next(n){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class eH extends mt{constructor(n,t,r){super(n),this.parent=t,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[mn](){return this}next(){const n=this.buffer;return 0===n.length&&this.isComplete?{value:null,done:!0}:{value:n.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(n){this.buffer.push(n),this.parent.checkIterators()}subscribe(){return hr(this.observable,new pt(this))}}function Un(e){return n=>n.lift(new nH(e))}class nH{constructor(n){this.notifier=n}call(n,t){const r=new rH(n),i=hr(this.notifier,new pt(r));return i&&!r.seenValue?(r.add(i),t.subscribe(r)):r}}class rH extends mt{constructor(n){super(n),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function Um(...e){return n=>{let t;return"function"==typeof e[e.length-1]&&(t=e.pop()),n.lift(new sH(e,t))}}class sH{constructor(n,t){this.observables=n,this.project=t}call(n,t){return t.subscribe(new aH(n,this.observables,this.project))}}class aH extends Pg{constructor(n,t,r){super(n),this.observables=t,this.project=r,this.toRespond=[];const i=t.length;this.values=new Array(i);for(let o=0;o<i;o++)this.toRespond.push(o);for(let o=0;o<i;o++)this.add(Lg(this,t[o],void 0,o))}notifyNext(n,t,r){this.values[r]=t;const i=this.toRespond;if(i.length>0){const o=i.indexOf(r);-1!==o&&i.splice(o,1)}}notifyComplete(){}_next(n){if(0===this.toRespond.length){const t=[n,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(n){let t;try{t=this.project.apply(this,n)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class xi{constructor(n,t,r){this.kind=n,this.value=t,this.error=r,this.hasValue="N"===n}observe(n){switch(this.kind){case"N":return n.next&&n.next(this.value);case"E":return n.error&&n.error(this.error);case"C":return n.complete&&n.complete()}}do(n,t,r){switch(this.kind){case"N":return n&&n(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}}accept(n,t,r){return n&&"function"==typeof n.next?this.observe(n):this.do(n,t,r)}toObservable(){switch(this.kind){case"N":return qe(this.value);case"E":return Wa(this.error);case"C":return Cd()}throw new Error("unexpected notification kind value")}static createNext(n){return typeof n<"u"?new xi("N",n):xi.undefinedValueNotification}static createError(n){return new xi("E",void 0,n)}static createComplete(){return xi.completeNotification}}xi.completeNotification=new xi("C"),xi.undefinedValueNotification=new xi("N",void 0);class uH{constructor(n,t){this.delay=n,this.scheduler=t}call(n,t){return t.subscribe(new $m(n,this.delay,this.scheduler))}}class $m extends x{constructor(n,t,r){super(n),this.delay=t,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}static dispatch(n){const t=n.source,r=t.queue,i=n.scheduler,o=n.destination;for(;r.length>0&&r[0].time-i.now()<=0;)r.shift().notification.observe(o);if(r.length>0){const s=Math.max(0,r[0].time-i.now());this.schedule(n,s)}else this.unsubscribe(),t.active=!1}_schedule(n){this.active=!0,this.destination.add(n.schedule($m.dispatch,this.delay,{source:this,destination:this.destination,scheduler:n}))}scheduleNotification(n){if(!0===this.errored)return;const t=this.scheduler,r=new dH(t.now()+this.delay,n);this.queue.push(r),!1===this.active&&this._schedule(t)}_next(n){this.scheduleNotification(xi.createNext(n))}_error(n){this.errored=!0,this.queue=[],this.destination.error(n),this.unsubscribe()}_complete(){this.scheduleNotification(xi.createComplete()),this.unsubscribe()}}class dH{constructor(n,t){this.time=n,this.notification=t}}var gH={left:"right",right:"left",bottom:"top",top:"bottom"};function uf(e){return e.replace(/left|right|bottom|top/g,function(n){return gH[n]})}function Qi(e){return e.split("-")[0]}var mH={start:"end",end:"start"};function zE(e){return e.replace(/start|end/g,function(n){return mH[n]})}var ti="top",Fi="bottom",Oi="right",ni="left",Wm="auto",Pl=[ti,Fi,Oi,ni],ac="start",Ll="end",qE="viewport",Bl="popper",JE=Pl.reduce(function(e,n){return e.concat([n+"-"+ac,n+"-"+Ll])},[]),YE=[].concat(Pl,[Wm]).reduce(function(e,n){return e.concat([n,n+"-"+ac,n+"-"+Ll])},[]),IH=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function fi(e){if(null==e)return window;if("[object Window]"!==e.toString()){var n=e.ownerDocument;return n&&n.defaultView||window}return e}function Bs(e){return e instanceof fi(e).Element||e instanceof Element}function hi(e){return e instanceof fi(e).HTMLElement||e instanceof HTMLElement}function Gm(e){return!(typeof ShadowRoot>"u")&&(e instanceof fi(e).ShadowRoot||e instanceof ShadowRoot)}function ts(e){return((Bs(e)?e.ownerDocument:e.document)||window.document).documentElement}var Vs=Math.max,df=Math.min,cc=Math.round;function Km(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function QE(){return!/^((?!chrome|android).)*safari/i.test(Km())}function lc(e,n,t){void 0===n&&(n=!1),void 0===t&&(t=!1);var r=e.getBoundingClientRect(),i=1,o=1;n&&hi(e)&&(i=e.offsetWidth>0&&cc(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&cc(r.height)/e.offsetHeight||1);var a=(Bs(e)?fi(e):window).visualViewport,d=!QE()&&t,h=(r.left+(d&&a?a.offsetLeft:0))/i,m=(r.top+(d&&a?a.offsetTop:0))/o,b=r.width/i,O=r.height/o;return{width:b,height:O,top:m,right:h+b,bottom:m+O,left:h,x:h,y:m}}function zm(e){var n=fi(e);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function qm(e){return lc(ts(e)).left+zm(e).scrollLeft}function Ro(e){return fi(e).getComputedStyle(e)}function Zi(e){return e?(e.nodeName||"").toLowerCase():null}function ff(e){return"html"===Zi(e)?e:e.assignedSlot||e.parentNode||(Gm(e)?e.host:null)||ts(e)}function Jm(e){var n=Ro(e);return/auto|scroll|overlay|hidden/.test(n.overflow+n.overflowY+n.overflowX)}function ZE(e){return["html","body","#document"].indexOf(Zi(e))>=0?e.ownerDocument.body:hi(e)&&Jm(e)?e:ZE(ff(e))}function Vl(e,n){var t;void 0===n&&(n=[]);var r=ZE(e),i=r===(null==(t=e.ownerDocument)?void 0:t.body),o=fi(r),s=i?[o].concat(o.visualViewport||[],Jm(r)?r:[]):r,a=n.concat(s);return i?a:a.concat(Vl(ff(s)))}function xH(e){return["table","td","th"].indexOf(Zi(e))>=0}function XE(e){return hi(e)&&"fixed"!==Ro(e).position?e.offsetParent:null}function jl(e){for(var n=fi(e),t=XE(e);t&&xH(t)&&"static"===Ro(t).position;)t=XE(t);return t&&("html"===Zi(t)||"body"===Zi(t)&&"static"===Ro(t).position)?n:t||function FH(e){var n=/firefox/i.test(Km());if(/Trident/i.test(Km())&&hi(e)&&"fixed"===Ro(e).position)return null;var i=ff(e);for(Gm(i)&&(i=i.host);hi(i)&&["html","body"].indexOf(Zi(i))<0;){var o=Ro(i);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||n&&"filter"===o.willChange||n&&o.filter&&"none"!==o.filter)return i;i=i.parentNode}return null}(e)||n}function eS(e,n){var t=n.getRootNode&&n.getRootNode();if(e.contains(n))return!0;if(t&&Gm(t)){var r=n;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ym(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function tS(e,n,t){return n===qE?Ym(function RH(e,n){var t=fi(e),r=ts(e),i=t.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,d=0;if(i){o=i.width,s=i.height;var h=QE();(h||!h&&"fixed"===n)&&(a=i.offsetLeft,d=i.offsetTop)}return{width:o,height:s,x:a+qm(e),y:d}}(e,t)):Bs(n)?function OH(e,n){var t=lc(e,!1,"fixed"===n);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(n,t):Ym(function MH(e){var n,t=ts(e),r=zm(e),i=null==(n=e.ownerDocument)?void 0:n.body,o=Vs(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Vs(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+qm(e),d=-r.scrollTop;return"rtl"===Ro(i||t).direction&&(a+=Vs(t.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:d}}(ts(e)))}function uc(e){return e.split("-")[1]}function Qm(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function nS(e){var d,n=e.reference,t=e.element,r=e.placement,i=r?Qi(r):null,o=r?uc(r):null,s=n.x+n.width/2-t.width/2,a=n.y+n.height/2-t.height/2;switch(i){case ti:d={x:s,y:n.y-t.height};break;case Fi:d={x:s,y:n.y+n.height};break;case Oi:d={x:n.x+n.width,y:a};break;case ni:d={x:n.x-t.width,y:a};break;default:d={x:n.x,y:n.y}}var h=i?Qm(i):null;if(null!=h){var m="y"===h?"height":"width";switch(o){case ac:d[h]=d[h]-(n[m]/2-t[m]/2);break;case Ll:d[h]=d[h]+(n[m]/2-t[m]/2)}}return d}function iS(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function oS(e,n){return n.reduce(function(t,r){return t[r]=e,t},{})}function Zm(e,n){void 0===n&&(n={});var r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,s=void 0===o?e.strategy:o,a=n.boundary,d=void 0===a?"clippingParents":a,h=n.rootBoundary,m=void 0===h?qE:h,b=n.elementContext,O=void 0===b?Bl:b,V=n.altBoundary,Q=void 0!==V&&V,re=n.padding,ue=void 0===re?0:re,ge=iS("number"!=typeof ue?ue:oS(ue,Pl)),he=e.rects.popper,Te=e.elements[Q?O===Bl?"reference":Bl:O],Ve=function kH(e,n,t,r){var i="clippingParents"===n?function AH(e){var n=Vl(ff(e)),r=["absolute","fixed"].indexOf(Ro(e).position)>=0&&hi(e)?jl(e):e;return Bs(r)?n.filter(function(i){return Bs(i)&&eS(i,r)&&"body"!==Zi(i)}):[]}(e):[].concat(n),o=[].concat(i,[t]),a=o.reduce(function(d,h){var m=tS(e,h,r);return d.top=Vs(m.top,d.top),d.right=df(m.right,d.right),d.bottom=df(m.bottom,d.bottom),d.left=Vs(m.left,d.left),d},tS(e,o[0],r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(Bs(Te)?Te:Te.contextElement||ts(e.elements.popper),d,m,s),Je=lc(e.elements.reference),Tt=nS({reference:Je,element:he,strategy:"absolute",placement:i}),kt=Ym(Object.assign({},he,Tt)),hn=O===Bl?kt:Je,pn={top:Ve.top-hn.top+ge.top,bottom:hn.bottom-Ve.bottom+ge.bottom,left:Ve.left-hn.left+ge.left,right:hn.right-Ve.right+ge.right},rn=e.modifiersData.offset;if(O===Bl&&rn){var xr=rn[i];Object.keys(pn).forEach(function(Wn){var ki=[Oi,Fi].indexOf(Wn)>=0?1:-1,Pi=[ti,Fi].indexOf(Wn)>=0?"y":"x";pn[Wn]+=xr[Pi]*ki})}return pn}const VH={name:"flip",enabled:!0,phase:"main",fn:function BH(e){var n=e.state,t=e.options,r=e.name;if(!n.modifiersData[r]._skip){for(var i=t.mainAxis,o=void 0===i||i,s=t.altAxis,a=void 0===s||s,d=t.fallbackPlacements,h=t.padding,m=t.boundary,b=t.rootBoundary,O=t.altBoundary,V=t.flipVariations,Q=void 0===V||V,re=t.allowedAutoPlacements,ue=n.options.placement,ge=Qi(ue),he=d||(ge!==ue&&Q?function LH(e){if(Qi(e)===Wm)return[];var n=uf(e);return[zE(e),n,zE(n)]}(ue):[uf(ue)]),Te=[ue].concat(he).reduce(function(hc,rs){return hc.concat(Qi(rs)===Wm?function PH(e,n){void 0===n&&(n={});var i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,d=n.allowedAutoPlacements,h=void 0===d?YE:d,m=uc(n.placement),b=m?a?JE:JE.filter(function(Q){return uc(Q)===m}):Pl,O=b.filter(function(Q){return h.indexOf(Q)>=0});0===O.length&&(O=b);var V=O.reduce(function(Q,re){return Q[re]=Zm(e,{placement:re,boundary:i,rootBoundary:o,padding:s})[Qi(re)],Q},{});return Object.keys(V).sort(function(Q,re){return V[Q]-V[re]})}(n,{placement:rs,boundary:m,rootBoundary:b,padding:h,flipVariations:Q,allowedAutoPlacements:re}):rs)},[]),Ve=n.rects.reference,Je=n.rects.popper,Tt=new Map,kt=!0,hn=Te[0],pn=0;pn<Te.length;pn++){var rn=Te[pn],xr=Qi(rn),Wn=uc(rn)===ac,ki=[ti,Fi].indexOf(xr)>=0,Pi=ki?"width":"height",nr=Zm(n,{placement:rn,boundary:m,rootBoundary:b,altBoundary:O,padding:h}),ri=ki?Wn?Oi:ni:Wn?Fi:ti;Ve[Pi]>Je[Pi]&&(ri=uf(ri));var Df=uf(ri),Gs=[];if(o&&Gs.push(nr[xr]<=0),a&&Gs.push(nr[ri]<=0,nr[Df]<=0),Gs.every(function(hc){return hc})){hn=rn,kt=!1;break}Tt.set(rn,Gs)}if(kt)for(var h_=function(rs){var Jl=Te.find(function(Sf){var Ks=Tt.get(Sf);if(Ks)return Ks.slice(0,rs).every(function(p_){return p_})});if(Jl)return hn=Jl,"break"},ql=Q?3:1;ql>0&&"break"!==h_(ql);ql--);n.placement!==hn&&(n.modifiersData[r]._skip=!0,n.placement=hn,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Hl(e,n,t){return Vs(e,df(n,t))}function Xm(e){var n=lc(e),t=e.offsetWidth,r=e.offsetHeight;return Math.abs(n.width-t)<=1&&(t=n.width),Math.abs(n.height-r)<=1&&(r=n.height),{x:e.offsetLeft,y:e.offsetTop,width:t,height:r}}const $H={name:"preventOverflow",enabled:!0,phase:"main",fn:function UH(e){var n=e.state,t=e.options,r=e.name,i=t.mainAxis,o=void 0===i||i,s=t.altAxis,a=void 0!==s&&s,O=t.tether,V=void 0===O||O,Q=t.tetherOffset,re=void 0===Q?0:Q,ue=Zm(n,{boundary:t.boundary,rootBoundary:t.rootBoundary,padding:t.padding,altBoundary:t.altBoundary}),ge=Qi(n.placement),ve=uc(n.placement),he=!ve,Te=Qm(ge),Ve=function jH(e){return"x"===e?"y":"x"}(Te),Je=n.modifiersData.popperOffsets,Tt=n.rects.reference,kt=n.rects.popper,hn="function"==typeof re?re(Object.assign({},n.rects,{placement:n.placement})):re,pn="number"==typeof hn?{mainAxis:hn,altAxis:hn}:Object.assign({mainAxis:0,altAxis:0},hn),rn=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,xr={x:0,y:0};if(Je){if(o){var Wn,ki="y"===Te?ti:ni,Pi="y"===Te?Fi:Oi,nr="y"===Te?"height":"width",ri=Je[Te],Df=ri+ue[ki],Gs=ri-ue[Pi],Cf=V?-kt[nr]/2:0,h_=ve===ac?Tt[nr]:kt[nr],ql=ve===ac?-kt[nr]:-Tt[nr],Ef=n.elements.arrow,hc=V&&Ef?Xm(Ef):{width:0,height:0},rs=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Jl=rs[ki],Sf=rs[Pi],Ks=Hl(0,Tt[nr],hc[nr]),p_=he?Tt[nr]/2-Cf-Ks-Jl-pn.mainAxis:h_-Ks-Jl-pn.mainAxis,e5=he?-Tt[nr]/2+Cf+Ks+Sf+pn.mainAxis:ql+Ks+Sf+pn.mainAxis,g_=n.elements.arrow&&jl(n.elements.arrow),oN=null!=(Wn=rn?.[Te])?Wn:0,r5=ri+e5-oN,sN=Hl(V?df(Df,ri+p_-oN-(g_?"y"===Te?g_.clientTop||0:g_.clientLeft||0:0)):Df,ri,V?Vs(Gs,r5):Gs);Je[Te]=sN,xr[Te]=sN-ri}if(a){var aN,zs=Je[Ve],Nf="y"===Ve?"height":"width",cN=zs+ue["x"===Te?ti:ni],lN=zs-ue["x"===Te?Fi:Oi],m_=-1!==[ti,ni].indexOf(ge),uN=null!=(aN=rn?.[Ve])?aN:0,dN=m_?cN:zs-Tt[Nf]-kt[Nf]-uN+pn.altAxis,fN=m_?zs+Tt[Nf]+kt[Nf]-uN-pn.altAxis:lN,hN=V&&m_?function HH(e,n,t){var r=Hl(e,n,t);return r>t?t:r}(dN,zs,fN):Hl(V?dN:cN,zs,V?fN:lN);Je[Ve]=hN,xr[Ve]=hN-zs}n.modifiersData[r]=xr}},requiresIfExists:["offset"]},zH={name:"arrow",enabled:!0,phase:"main",fn:function GH(e){var n,t=e.state,r=e.name,i=e.options,o=t.elements.arrow,s=t.modifiersData.popperOffsets,a=Qi(t.placement),d=Qm(a),m=[ni,Oi].indexOf(a)>=0?"height":"width";if(o&&s){var b=function(n,t){return iS("number"!=typeof(n="function"==typeof n?n(Object.assign({},t.rects,{placement:t.placement})):n)?n:oS(n,Pl))}(i.padding,t),O=Xm(o),V="y"===d?ti:ni,Q="y"===d?Fi:Oi,re=t.rects.reference[m]+t.rects.reference[d]-s[d]-t.rects.popper[m],ue=s[d]-t.rects.reference[d],ge=jl(o),ve=ge?"y"===d?ge.clientHeight||0:ge.clientWidth||0:0,Je=ve/2-O[m]/2+(re/2-ue/2),Tt=Hl(b[V],Je,ve-O[m]-b[Q]);t.modifiersData[r]=((n={})[d]=Tt,n.centerOffset=Tt-Je,n)}},effect:function KH(e){var n=e.state,r=e.options.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"==typeof i&&!(i=n.elements.popper.querySelector(i))||!eS(n.elements.popper,i)||(n.elements.arrow=i))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function QH(e,n,t){void 0===t&&(t=!1);var r=hi(n),i=hi(n)&&function YH(e){var n=e.getBoundingClientRect(),t=cc(n.width)/e.offsetWidth||1,r=cc(n.height)/e.offsetHeight||1;return 1!==t||1!==r}(n),o=ts(n),s=lc(e,i,t),a={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!t)&&(("body"!==Zi(n)||Jm(o))&&(a=function JH(e){return e!==fi(e)&&hi(e)?function qH(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}(e):zm(e)}(n)),hi(n)?((d=lc(n,!0)).x+=n.clientLeft,d.y+=n.clientTop):o&&(d.x=qm(o))),{x:s.left+a.scrollLeft-d.x,y:s.top+a.scrollTop-d.y,width:s.width,height:s.height}}function ZH(e){var n=new Map,t=new Set,r=[];function i(o){t.add(o.name),[].concat(o.requires||[],o.requiresIfExists||[]).forEach(function(a){if(!t.has(a)){var d=n.get(a);d&&i(d)}}),r.push(o)}return e.forEach(function(o){n.set(o.name,o)}),e.forEach(function(o){t.has(o.name)||i(o)}),r}function e8(e){var n;return function(){return n||(n=new Promise(function(t){Promise.resolve().then(function(){n=void 0,t(e())})})),n}}var sS={placement:"bottom",modifiers:[],strategy:"absolute"};function aS(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return!n.some(function(r){return!(r&&"function"==typeof r.getBoundingClientRect)})}function n8(e){void 0===e&&(e={});var t=e.defaultModifiers,r=void 0===t?[]:t,i=e.defaultOptions,o=void 0===i?sS:i;return function(a,d,h){void 0===h&&(h=o);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},sS,o),modifiersData:{},elements:{reference:a,popper:d},attributes:{},styles:{}},b=[],O=!1,V={state:m,setOptions:function(ge){var ve="function"==typeof ge?ge(m.options):ge;re(),m.options=Object.assign({},o,m.options,ve),m.scrollParents={reference:Bs(a)?Vl(a):a.contextElement?Vl(a.contextElement):[],popper:Vl(d)};var he=function XH(e){var n=ZH(e);return IH.reduce(function(t,r){return t.concat(n.filter(function(i){return i.phase===r}))},[])}(function t8(e){var n=e.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(n).map(function(t){return n[t]})}([].concat(r,m.options.modifiers)));return m.orderedModifiers=he.filter(function(rn){return rn.enabled}),function Q(){m.orderedModifiers.forEach(function(ue){var ve=ue.options,Te=ue.effect;if("function"==typeof Te){var Ve=Te({state:m,name:ue.name,instance:V,options:void 0===ve?{}:ve});b.push(Ve||function(){})}})}(),V.update()},forceUpdate:function(){if(!O){var ge=m.elements,ve=ge.reference,he=ge.popper;if(aS(ve,he)){m.rects={reference:QH(ve,jl(he),"fixed"===m.options.strategy),popper:Xm(he)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(rn){return m.modifiersData[rn.name]=Object.assign({},rn.data)});for(var Ve=0;Ve<m.orderedModifiers.length;Ve++)if(!0!==m.reset){var Je=m.orderedModifiers[Ve],Tt=Je.fn,kt=Je.options;"function"==typeof Tt&&(m=Tt({state:m,options:void 0===kt?{}:kt,name:Je.name,instance:V})||m)}else m.reset=!1,Ve=-1}}},update:e8(function(){return new Promise(function(ue){V.forceUpdate(),ue(m)})}),destroy:function(){re(),O=!0}};if(!aS(a,d))return V;function re(){b.forEach(function(ue){return ue()}),b=[]}return V.setOptions(h).then(function(ue){!O&&h.onFirstUpdate&&h.onFirstUpdate(ue)}),V}}var hf={passive:!0};const i8={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function r8(e){var n=e.state,t=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,d=fi(n.elements.popper),h=[].concat(n.scrollParents.reference,n.scrollParents.popper);return o&&h.forEach(function(m){m.addEventListener("scroll",t.update,hf)}),a&&d.addEventListener("resize",t.update,hf),function(){o&&h.forEach(function(m){m.removeEventListener("scroll",t.update,hf)}),a&&d.removeEventListener("resize",t.update,hf)}},data:{}},s8={name:"popperOffsets",enabled:!0,phase:"read",fn:function o8(e){var n=e.state;n.modifiersData[e.name]=nS({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})},data:{}};var a8={top:"auto",right:"auto",bottom:"auto",left:"auto"};function cS(e){var n,t=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,d=e.gpuAcceleration,h=e.adaptive,m=e.roundOffsets,b=e.isFixed,O=s.x,V=void 0===O?0:O,Q=s.y,re=void 0===Q?0:Q,ue="function"==typeof m?m({x:V,y:re}):{x:V,y:re};V=ue.x,re=ue.y;var ge=s.hasOwnProperty("x"),ve=s.hasOwnProperty("y"),he=ni,Te=ti,Ve=window;if(h){var Je=jl(t),Tt="clientHeight",kt="clientWidth";Je===fi(t)&&"static"!==Ro(Je=ts(t)).position&&"absolute"===a&&(Tt="scrollHeight",kt="scrollWidth"),(i===ti||(i===ni||i===Oi)&&o===Ll)&&(Te=Fi,re-=(b&&Je===Ve&&Ve.visualViewport?Ve.visualViewport.height:Je[Tt])-r.height,re*=d?1:-1),i!==ni&&(i!==ti&&i!==Fi||o!==Ll)||(he=Oi,V-=(b&&Je===Ve&&Ve.visualViewport?Ve.visualViewport.width:Je[kt])-r.width,V*=d?1:-1)}var Wn,rn=Object.assign({position:a},h&&a8),xr=!0===m?function c8(e){var t=e.y,i=window.devicePixelRatio||1;return{x:cc(e.x*i)/i||0,y:cc(t*i)/i||0}}({x:V,y:re}):{x:V,y:re};return V=xr.x,re=xr.y,Object.assign({},rn,d?((Wn={})[Te]=ve?"0":"",Wn[he]=ge?"0":"",Wn.transform=(Ve.devicePixelRatio||1)<=1?"translate("+V+"px, "+re+"px)":"translate3d("+V+"px, "+re+"px, 0)",Wn):((n={})[Te]=ve?re+"px":"",n[he]=ge?V+"px":"",n.transform="",n))}const u8={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function l8(e){var n=e.state,t=e.options,r=t.gpuAcceleration,i=void 0===r||r,o=t.adaptive,s=void 0===o||o,a=t.roundOffsets,d=void 0===a||a,m={placement:Qi(n.placement),variation:uc(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:i,isFixed:"fixed"===n.options.strategy};null!=n.modifiersData.popperOffsets&&(n.styles.popper=Object.assign({},n.styles.popper,cS(Object.assign({},m,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:s,roundOffsets:d})))),null!=n.modifiersData.arrow&&(n.styles.arrow=Object.assign({},n.styles.arrow,cS(Object.assign({},m,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})},data:{}};var h8=[i8,s8,u8,{name:"applyStyles",enabled:!0,phase:"write",fn:function d8(e){var n=e.state;Object.keys(n.elements).forEach(function(t){var r=n.styles[t]||{},i=n.attributes[t]||{},o=n.elements[t];!hi(o)||!Zi(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];!1===a?o.removeAttribute(s):o.setAttribute(s,!0===a?"":a)}))})},effect:function f8(e){var n=e.state,t={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,t.popper),n.styles=t,n.elements.arrow&&Object.assign(n.elements.arrow.style,t.arrow),function(){Object.keys(n.elements).forEach(function(r){var i=n.elements[r],o=n.attributes[r]||{},a=Object.keys(n.styles.hasOwnProperty(r)?n.styles[r]:t[r]).reduce(function(d,h){return d[h]="",d},{});!hi(i)||!Zi(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(d){i.removeAttribute(d)}))})}},requires:["computeStyles"]}],p8=n8({defaultModifiers:h8});const _8={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function m8(e){var n=e.state,r=e.name,i=e.options.offset,o=void 0===i?[0,0]:i,s=YE.reduce(function(m,b){return m[b]=function g8(e,n,t){var r=Qi(e),i=[ni,ti].indexOf(r)>=0?-1:1,o="function"==typeof t?t(Object.assign({},n,{placement:e})):t,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[ni,Oi].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(b,n.rects,o),m},{}),a=s[n.placement],h=a.y;null!=n.modifiersData.popperOffsets&&(n.modifiersData.popperOffsets.x+=a.x,n.modifiersData.popperOffsets.y+=h),n.modifiersData[r]=s}},S8=["*"],$8=["dialog"];function t_(e){return"string"==typeof e}function js(e){return null!=e}function dc(e){return(e||document.body).getBoundingClientRect()}const uS={animation:!0,transitionTimerDelayMs:5},L4=()=>{},{transitionTimerDelayMs:B4}=uS,Ul=new Map,Mr=(e,n,t,r)=>{let i=r.context||{};const o=Ul.get(n);if(o)switch(r.runningTransition){case"continue":return Ts;case"stop":e.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),Ul.delete(n)}const s=t(n,r.animation,i)||L4;if(!r.animation||"none"===window.getComputedStyle(n).transitionProperty)return e.run(()=>s()),qe(void 0).pipe(function k4(e){return n=>new Ee(t=>n.subscribe({next:s=>e.run(()=>t.next(s)),error:s=>e.run(()=>t.error(s)),complete:()=>e.run(()=>t.complete())}))}(e));const a=new ze,d=new ze,h=a.pipe(function tH(...e){return n=>Dd(n,qe(...e))}(!0));Ul.set(n,{transition$:a,complete:()=>{d.next(),d.complete()},context:i});const m=function P4(e){const{transitionDelay:n,transitionDuration:t}=window.getComputedStyle(e);return 1e3*(parseFloat(n)+parseFloat(t))}(n);return e.runOutsideAngular(()=>{const b=jr(n,"transitionend").pipe(Un(h),Ir(({target:V})=>V===n));GE(function WE(e=0,n,t){let r=-1;return $E(n)?r=Number(n)<1?1:Number(n):Ht(n)&&(t=n),Ht(t)||(t=UE),new Ee(i=>{const o=$E(e)?e:+e-t.now();return t.schedule(zj,o,{index:0,period:r,subscriber:i})})}(m+B4).pipe(Un(h)),b,d).pipe(Un(h)).subscribe(()=>{Ul.delete(n),e.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};let gf=(()=>{class e{constructor(){this.animation=uS.animation}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),mS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Xr]}),e})(),_S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Xr]}),e})(),bS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Xr]}),e})(),wS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({}),e})();var $n=(()=>(function(e){e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown"}($n||($n={})),$n))();const _f=(e,n)=>!!n&&n.some(t=>t.contains(e)),DS=(e,n)=>!n||null!=function A4(e,n){return!n||typeof e.closest>"u"?null:e.closest(n)}(e,n),tU=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function rU(e,n,t,r,i,o,s,a){t&&e.runOutsideAngular((e=>tU?()=>setTimeout(()=>e(),100):e)(()=>{const h=jr(n,"keydown").pipe(Un(i),Ir(O=>O.which===$n.Escape),Qn(O=>O.preventDefault())),m=jr(n,"mousedown").pipe(Ce(O=>{const V=O.target;return 2!==O.button&&!_f(V,s)&&("inside"===t?_f(V,o)&&DS(V,a):"outside"===t?!_f(V,o):DS(V,a)||!_f(V,o))}),Un(i)),b=jr(n,"mouseup").pipe(Um(m),Ir(([O,V])=>V),function lH(e,n=UE){const r=function cH(e){return e instanceof Date&&!isNaN(+e)}(e)?+e-n.now():Math.abs(e);return i=>i.lift(new uH(r,n))}(0),Un(i));GE([h.pipe(Ce(O=>0)),b.pipe(Ce(O=>1))]).subscribe(O=>e.run(()=>r(O)))}))}const CS=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function ES(e){const n=Array.from(e.querySelectorAll(CS)).filter(t=>-1!==t.tabIndex);return[n[0],n[n.length-1]]}const oU=/\s+/,sU=/  +/gi,aU={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]},lU=/^left/,uU=/^right/,dU=/^start/,fU=/^end/;function SS({placement:e,baseClass:n},t){let r=Array.isArray(e)?e:e.split(oU),o=r.findIndex(h=>"auto"===h);o>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(h){null==r.find(m=>-1!==m.search("^"+h))&&r.splice(o++,1,h)});const s=r.map(h=>function cU(e,n){const[t,r]=aU[e];return n&&r||t}(h,t.isRTL()));return{placement:s.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!n,phase:"write",fn({state:h}){const m=new RegExp(n+"(-[a-z]+)*","gi"),b=h.elements.popper,O=h.placement;let V=b.className;V=V.replace(m,""),V+=` ${function hU(e,n){let[t,r]=n.split("-");const i=t.replace(lU,"start").replace(uU,"end");let o=[i];if(r){let s=r;("left"===t||"right"===t)&&(s=s.replace(dU,"top").replace(fU,"bottom")),o.push(`${i}-${s}`)}return e&&(o=o.map(s=>`${e}-${s}`)),o.join(" ")}(n,O)}`,V=V.trim().replace(sU," "),b.className=V}},VH,$H,zH,{enabled:!0,name:"flip",options:{fallbackPlacements:s}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function NS(e){return e}let _U=(()=>{class e{constructor(t){this._element=t.documentElement}isRTL(){return"rtl"===(this._element.getAttribute("dir")||"").toLowerCase()}}return e.\u0275fac=function(t){return new(t||e)(Re(Cn))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();new Date(1882,10,12),new Date(2174,10,25);let FS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Xr,AE]}),e})(),SU=(()=>{class e{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"],this.popperOptions=t=>t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),c_=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=ke({type:e,selectors:[["",8,"navbar"]]}),e})(),OS=(()=>{class e{constructor(t,r){this.elementRef=t,this._renderer=r,this._disabled=!1}set disabled(t){this._disabled=""===t||!0===t,this._renderer.setProperty(this.elementRef.nativeElement,"disabled",this._disabled)}get disabled(){return this._disabled}}return e.\u0275fac=function(t){return new(t||e)(ne(Xt),ne(wi))},e.\u0275dir=ke({type:e,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:3,hostBindings:function(t,r){2&t&&(Pa("tabIndex",r.disabled?-1:0),yn("disabled",r.disabled))},inputs:{disabled:"disabled"}}),e})(),l_=(()=>{class e{constructor(t,r){this.dropdown=t,this.placement="bottom",this.isOpen=!1,this.nativeElement=r.nativeElement}}return e.\u0275fac=function(t){return new(t||e)(ne(ht(()=>Kl)),ne(Xt))},e.\u0275dir=ke({type:e,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(t,r,i){if(1&t&&Fn(i,OS,4),2&t){let o;tn(o=nn())&&(r.menuItems=o)}},hostVars:4,hostBindings:function(t,r){1&t&&nt("keydown.ArrowUp",function(o){return r.dropdown.onKeyDown(o)})("keydown.ArrowDown",function(o){return r.dropdown.onKeyDown(o)})("keydown.Home",function(o){return r.dropdown.onKeyDown(o)})("keydown.End",function(o){return r.dropdown.onKeyDown(o)})("keydown.Enter",function(o){return r.dropdown.onKeyDown(o)})("keydown.Space",function(o){return r.dropdown.onKeyDown(o)})("keydown.Tab",function(o){return r.dropdown.onKeyDown(o)})("keydown.Shift.Tab",function(o){return r.dropdown.onKeyDown(o)}),2&t&&yn("dropdown-menu",!0)("show",r.dropdown.isOpen())}}),e})(),wf=(()=>{class e{constructor(t,r){this.dropdown=t,this.nativeElement=r.nativeElement}}return e.\u0275fac=function(t){return new(t||e)(ne(ht(()=>Kl)),ne(Xt))},e.\u0275dir=ke({type:e,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,r){2&t&&$t("aria-expanded",r.dropdown.isOpen())}}),e})(),AS=(()=>{class e extends wf{constructor(t,r){super(t,r)}}return e.\u0275fac=function(t){return new(t||e)(ne(ht(()=>Kl)),ne(Xt))},e.\u0275dir=ke({type:e,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,r){1&t&&nt("click",function(){return r.dropdown.toggle()})("keydown.ArrowUp",function(o){return r.dropdown.onKeyDown(o)})("keydown.ArrowDown",function(o){return r.dropdown.onKeyDown(o)})("keydown.Home",function(o){return r.dropdown.onKeyDown(o)})("keydown.End",function(o){return r.dropdown.onKeyDown(o)})("keydown.Tab",function(o){return r.dropdown.onKeyDown(o)})("keydown.Shift.Tab",function(o){return r.dropdown.onKeyDown(o)}),2&t&&$t("aria-expanded",r.dropdown.isOpen())},features:[en([{provide:wf,useExisting:ht(()=>e)}]),Pt]}),e})(),Kl=(()=>{class e{constructor(t,r,i,o,s,a,d,h){this._changeDetector=t,this._document=o,this._ngZone=s,this._elementRef=a,this._renderer=d,this._destroyCloseHandlers$=new ze,this._bodyContainer=null,this._open=!1,this.openChange=new ct,this.placement=i.placement,this.popperOptions=i.popperOptions,this.container=i.container,this.autoClose=i.autoClose,this._positioning=function pU(e){let n=null;return{createPopper(t){if(!n){let i=(t.updatePopperOptions||NS)(SS(t,e));n=p8(t.hostElement,t.targetElement,i)}},update(){n&&n.update()},setOptions(t){if(n){let i=(t.updatePopperOptions||NS)(SS(t,e));n.setOptions(i)}},destroy(){n&&(n.destroy(),n=null)}}}(r),this.display=h?"static":"dynamic"}ngAfterContentInit(){this._ngZone.onStable.pipe(Tr(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(t){if(t.container&&this._open&&this._applyContainer(this.container),t.placement&&!t.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),t.dropdownClass){const{currentValue:r,previousValue:i}=t.dropdownClass;this._applyCustomDropdownClass(r,i)}t.autoClose&&this._open&&(this.autoClose=t.autoClose.currentValue,this._setCloseHandlers())}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:t=>this.popperOptions(function gU(e){return n=>(n.modifiers.push(_8,{name:"offset",options:{offset:()=>e}}),n)}([0,2])(t))}),this._applyPlacementClasses(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positionMenu())})))}_setCloseHandlers(){this._destroyCloseHandlers$.next(),rU(this._ngZone,this._document,this.autoClose,t=>{this.close(),0===t&&this._anchor.nativeElement.focus()},this._destroyCloseHandlers$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this.close()}onKeyDown(t){const r=t.which,i=this._getMenuElements();let o=-1,s=null;const a=this._isEventFromToggle(t);if(!a&&i.length&&i.forEach((d,h)=>{d.contains(t.target)&&(s=d),d===this._document.activeElement&&(o=h)}),r!==$n.Space&&r!==$n.Enter){if(r!==$n.Tab){if(a||s){if(this.open(),i.length){switch(r){case $n.ArrowDown:o=Math.min(o+1,i.length-1);break;case $n.ArrowUp:if(this._isDropup()&&-1===o){o=i.length-1;break}o=Math.max(o-1,0);break;case $n.Home:o=0;break;case $n.End:o=i.length-1}i[o].focus()}t.preventDefault()}}else if(t.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===t.target)return void("body"!==this.container||t.shiftKey?t.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const d=this._menu.nativeElement.querySelectorAll(CS);t.shiftKey&&t.target===d[0]?(this._anchor.nativeElement.focus(),t.preventDefault()):!t.shiftKey&&t.target===d[d.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else jr(t.target,"focusout").pipe(Tr(1)).subscribe(({relatedTarget:d})=>{this._elementRef.nativeElement.contains(d)||this.close()})}}else s&&(!0===this.autoClose||"inside"===this.autoClose)&&jr(s,"click").pipe(Tr(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(t){return this._anchor.nativeElement.contains(t.target)}_getMenuElements(){const t=this._menu;return null==t?[]:t.menuItems.filter(r=>!r.disabled).map(r=>r.elementRef.nativeElement)}_positionMenu(){const t=this._menu;this.isOpen()&&t&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(t){return Array.isArray(t)?t[0]:t.split(" ")[0]}_resetContainer(){const t=this._renderer;this._menu&&t.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(t.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(t=null){if(this._resetContainer(),"body"===t){const r=this._renderer,i=this._menu.nativeElement,o=this._bodyContainer=this._bodyContainer||r.createElement("div");r.setStyle(o,"position","absolute"),r.setStyle(i,"position","static"),r.setStyle(o,"z-index","1055"),r.appendChild(o,i),r.appendChild(this._document.body,o)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(t,r){const i="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;i&&(r&&this._renderer.removeClass(i,r),t&&this._renderer.addClass(i,t))}_applyPlacementClasses(t){const r=this._menu;if(r){t||(t=this._getFirstPlacement(this.placement));const i=this._renderer,o=this._elementRef.nativeElement;i.removeClass(o,"dropup"),i.removeClass(o,"dropdown");const{nativeElement:s}=r;"static"===this.display?(r.placement=null,i.setAttribute(s,"data-bs-popper","static")):(r.placement=t,i.removeAttribute(s,"data-bs-popper"));const a=-1!==t.search("^top")?"dropup":"dropdown";i.addClass(o,a);const d=this._bodyContainer;d&&(i.removeClass(d,"dropup"),i.removeClass(d,"dropdown"),i.addClass(d,a))}}}return e.\u0275fac=function(t){return new(t||e)(ne(vo),ne(_U),ne(SU),ne(Cn),ne(Wt),ne(Xt),ne(wi),ne(c_,8))},e.\u0275dir=ke({type:e,selectors:[["","ngbDropdown",""]],contentQueries:function(t,r,i){if(1&t&&(Fn(i,l_,5),Fn(i,wf,5)),2&t){let o;tn(o=nn())&&(r._menu=o.first),tn(o=nn())&&(r._anchor=o.first)}},hostVars:2,hostBindings:function(t,r){2&t&&yn("show",r.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",popperOptions:"popperOptions",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[yr]}),e})(),kS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({}),e})();class Ws{constructor(n,t,r){this.nodes=n,this.viewRef=t,this.componentRef=r}}let NU=(()=>{class e{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(Tr(1)).subscribe(()=>{Mr(this._zone,this._el.nativeElement,(t,r)=>{r&&dc(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Mr(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return e.\u0275fac=function(t){return new(t||e)(ne(Xt),ne(Wt))},e.\u0275cmp=Qe({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,r){2&t&&(Ds("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),yn("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),e})();class PS{close(n){}dismiss(n){}}class TU{constructor(n,t,r,i){this._windowCmptRef=n,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new ze,this._dismissed=new ze,this._hidden=new ze,n.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Un(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Un(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function lS(e){return e&&e.then}(t)?!1!==t&&this._dismiss(n):t.then(r=>{!1!==r&&this._dismiss(n)},()=>{})}else this._dismiss(n)}_removeModalElements(){const n=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():qe(void 0);n.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),lf(n,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var zl=(()=>(function(e){e[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC"}(zl||(zl={})),zl))();let IU=(()=>{class e{constructor(t,r,i){this._document=t,this._elRef=r,this._zone=i,this._closed$=new ze,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new ct,this.shown=new ze,this.hidden=new ze}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":t_(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Tr(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},s=lf(Mr(this._zone,t,()=>t.classList.remove("show"),r),Mr(this._zone,this._dialogEl.nativeElement,()=>{},r));return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){const t={animation:this.animation,runningTransition:"continue"};lf(Mr(this._zone,this._elRef.nativeElement,(o,s)=>{s&&dc(o),o.classList.add("show")},t),Mr(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{jr(t,"keydown").pipe(Un(this._closed$),Ir(i=>i.which===$n.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(zl.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;jr(this._dialogEl.nativeElement,"mousedown").pipe(Un(this._closed$),Qn(()=>r=!1),ei(()=>jr(t,"mouseup").pipe(Un(this._closed$),Tr(1))),Ir(({target:i})=>t===i)).subscribe(()=>{r=!0}),jr(t,"click").pipe(Un(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(zl.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=ES(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Mr(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return e.\u0275fac=function(t){return new(t||e)(ne(Cn),ne(Xt),ne(Wt))},e.\u0275cmp=Qe({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&ja($8,7),2&t){let i;tn(i=nn())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&($t("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),Ds("modal d-block"+(r.windowClass?" "+r.windowClass:"")),yn("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:S8,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(function by(e){const n=ye()[16][6];if(!n.projection){const r=n.projection=Tc(e?e.length:1,null),i=r.slice();let o=n.child;for(;null!==o;){const s=e?JM(o,e):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}(),ce(0,"div",0,1)(2,"div",2),function wy(e,n=0,t){const r=ye(),i=Nt(),o=Sa(i,22+e,16,null,t||null);null===o.projection&&(o.projection=n),$f(),32!=(32&o.flags)&&function iI(e,n,t){Bv(n[11],0,n,t,Rv(e,t,n),Ov(t.parent||n[6],t,n))}(i,r,o)}(3),de()()),2&t&&Ds("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),e})(),RU=(()=>{class e{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:o,paddingRight:s}=i;if(t>0){const a=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${a+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=s),i.overflow=o}}}return e.\u0275fac=function(t){return new(t||e)(Re(Cn))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),MU=(()=>{class e{constructor(t,r,i,o,s,a){this._applicationRef=t,this._injector=r,this._document=i,this._scrollBar=o,this._rendererFactory=s,this._ngZone=a,this._activeWindowCmptHasChanged=new ze,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new ct,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const d=this._windowCmpts[this._windowCmpts.length-1];((e,n,t,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const i=jr(n,"focusin").pipe(Un(t),Ce(o=>o.target));jr(n,"keydown").pipe(Un(t),Ir(o=>o.which===$n.Tab),Um(i)).subscribe(([o,s])=>{const[a,d]=ES(n);(s===a||s===n)&&o.shiftKey&&(d.focus(),o.preventDefault()),s===d&&!o.shiftKey&&(a.focus(),o.preventDefault())}),r&&jr(n,"click").pipe(Un(t),Um(i),Ce(o=>o[1])).subscribe(o=>o.focus())})})(0,d.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(d.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i){const o=i.container instanceof HTMLElement?i.container:js(i.container)?this._document.querySelector(i.container):this._document.body,s=this._rendererFactory.createRenderer(null,null);if(!o)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const a=new PS,d=this._getContentRef(i.injector||t,r,a,i);let h=!1!==i.backdrop?this._attachBackdrop(o):void 0,m=this._attachWindowComponent(o,d.nodes),b=new TU(m,d,h,i.beforeDismiss);return this._registerModalRef(b),this._registerWindowCmpt(m),b.hidden.pipe(Tr(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=O=>{b.close(O)},a.dismiss=O=>{b.dismiss(O)},this._applyWindowOptions(m.instance,i),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),h&&h.instance&&(this._applyBackdropOptions(h.instance,i),h.changeDetectorRef.detectChanges()),m.changeDetectorRef.detectChanges(),b}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let r=ug(NU,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_attachWindowComponent(t,r){let i=ug(IU,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_applyWindowOptions(t,r){this._windowAttributes.forEach(i=>{js(r[i])&&(t[i]=r[i])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(i=>{js(r[i])&&(t[i]=r[i])})}_getContentRef(t,r,i,o){return r?r instanceof wn?this._createFromTemplateRef(r,i):t_(r)?this._createFromString(r):this._createFromComponent(t,r,i,o):new Ws([])}_createFromTemplateRef(t,r){const o=t.createEmbeddedView({$implicit:r,close(s){r.close(s)},dismiss(s){r.dismiss(s)}});return this._applicationRef.attachView(o),new Ws([o.rootNodes],o)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new Ws([[r]])}_createFromComponent(t,r,i,o){const s=Cr.create({providers:[{provide:PS,useValue:i}],parent:t}),a=ug(r,{environmentInjector:this._applicationRef.injector,elementInjector:s}),d=a.location.nativeElement;return o.scrollable&&d.classList.add("component-host-scrollable"),this._applicationRef.attachView(a.hostView),new Ws([[d]],a.hostView,a)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return e.\u0275fac=function(t){return new(t||e)(Re(nl),Re(Cr),Re(Cn),Re(RU),Re(jh),Re(Wt))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),xU=(()=>{class e{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return e.\u0275fac=function(t){return new(t||e)(Re(gf))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),FU=(()=>{class e{constructor(t,r,i){this._injector=t,this._modalStack=r,this._config=i}open(t,r={}){const i={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return e.\u0275fac=function(t){return new(t||e)(Re(Cr),Re(MU),Re(xU))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),LS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({providers:[FU]}),e})(),HS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Xr]}),e})(),JS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Xr]}),e})(),QS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Xr]}),e})(),ZS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Xr]}),e})(),XS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Xr]}),e})(),eN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Xr]}),e})(),tN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Xr]}),e})(),nN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({}),e})();new $e("live announcer delay",{providedIn:"root",factory:function GU(){return 100}});let rN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[Xr]}),e})(),iN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({}),e})();const KU=[mS,_S,bS,wS,FS,kS,LS,HS,iN,JS,QS,ZS,XS,eN,tN,nN,rN];let zU=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=c({imports:[KU,mS,_S,bS,wS,FS,kS,LS,HS,iN,JS,QS,ZS,XS,eN,tN,nN,rN]}),e})();function qU(e,n){if(1&e){const t=dn();ce(0,"div")(1,"div",10)(2,"span",11),Fe(3),de(),ce(4,"div",12)(5,"button",13),Fe(6," View Profile "),de(),ce(7,"button",14),nt("click",function(){return Jt(t),Yt(Pe().logoutButtonClicked())}),Fe(8," Log out"),de()()()()}if(2&e){const t=Pe();fe(3),jt(" ",t.user.claims.preferred_username," "),fe(2),me("routerLink","/u/"+t.user.claims.preferred_username)}}function JU(e,n){if(1&e){const t=dn();ce(0,"div",15)(1,"a",16),nt("click",function(){return Jt(t),Yt(Pe().loginButtonClicked())}),Fe(2," Log in"),de(),ce(3,"span"),Fe(4," / "),de(),ce(5,"a",16),nt("click",function(){return Jt(t),Yt(Pe().signUpButtonClicked())}),Fe(6," Sign up "),de()()}}let YU=(()=>{class e{constructor(t,r){this.authService=t,this.personas=r}ngOnInit(){this.authService.getAuthenticatedeUser().then(t=>this.user=t),this.authService.UserChanged.subscribe(t=>this.user=t)}loginButtonClicked(){this.authService.startAuthentication()}logoutButtonClicked(){this.authService.startSignOut()}signUpButtonClicked(){this.authService.startRegistrationRedirect()}searchModelChanged(){const t=this.searchModel;setTimeout(()=>{this.searchModel.trim()||this.personas.clearSearch(),this.searchIsStillRelevant(t)&&this.personas.launchSearch(t)},300)}searchIsStillRelevant(t){return t&&t===this.searchModel}}return e.\u0275fac=function(t){return new(t||e)(ne(Io),ne(rc))},e.\u0275cmp=Qe({type:e,selectors:[["app-standard-header"]],decls:13,vars:3,consts:[[1,"navbar","navbar-expand-lg"],["aria-selected","false",1,"col-auto","col-lg-2","cursor-pointer","text-center","navbar-brand"],["routerLink","/"],[1,"col","form-inline","my-2","my-lg-0"],["type","search","placeholder","Search","aria-label","Search","name","search",1,"form-control","mr-sm-2","w-100",3,"ngModel","ngModelChange"],[1,"col-auto","btn-group"],["routerLink","/recommendations/add",1,"btn","btn-primary"],[1,"col-auto","col-lg-2"],[4,"ngIf","ngIfElse"],["navigations",""],["ngbDropdown","","placement","bottom-right",1,"d-inline-block","float_right"],["id","userAccountDropdown","ngbDropdownToggle","",1,"cursor-pointer"],["ngbDropdownMenu","","aria-labelledby","userAccountDropdown"],[1,"dropdown-item",3,"routerLink"],[1,"dropdown-item",3,"click"],[1,"login-navigations"],[1,"btn","btn-link","p-0",3,"click"]],template:function(t,r){if(1&t&&(ce(0,"nav",0)(1,"div",1)(2,"h4",2),Fe(3," WikiRecord "),de()(),ce(4,"form",3)(5,"input",4),nt("ngModelChange",function(o){return r.searchModel=o})("ngModelChange",function(){return r.searchModelChanged()}),de()(),ce(6,"div",5)(7,"button",6),Fe(8," Add Recommendation "),de()(),ce(9,"div",7),Ne(10,qU,9,2,"div",8),Ne(11,JU,7,0,"ng-template",null,9,Gi),de()()),2&t){const i=Ei(12);fe(5),me("ngModel",r.searchModel),fe(5),me("ngIf",null==r.user?null:r.user.isLoggedIn())("ngIfElse",i)}},dependencies:[Sn,Xo,Ji,Qo,Zo,To,Yi,So,Kl,AS,l_,c_],styles:[".login-navigations[_ngcontent-%COMP%]{text-decoration:none}"]}),e})(),QU=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Qe({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(t,r){1&t&&(_t(0,"app-standard-header"),ce(1,"div",0),_t(2,"router-outlet"),de())},dependencies:[Xg,YU],encapsulation:2}),e})(),ZU=(()=>{class e{constructor(t){this.auth=t}intercept(t,r){return di.hostsRequiringAccessToken.some(o=>t.url.startsWith(o))?Ie(this.auth.getAuthenticatedeUser()).pipe(Gt(o=>(o.isLoggedIn()&&(t=t.clone({setHeaders:{Authorization:o.getAuthorizationHeaderValue()}})),r.handle(t)))):r.handle(t)}}return e.\u0275fac=function(t){return new(t||e)(Re(Io))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})(),XU=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mt({type:e,bootstrap:[QU]}),e.\u0275inj=c({providers:[Io,{provide:uC,useClass:ZU,multi:!0}],imports:[FP,AE,Hj,aV,zU]}),e})();xP().bootstrapModule(XU).catch(e=>console.error(e))},497:function(We){We.exports=function(be){var N={};function H(k){if(N[k])return N[k].exports;var y=N[k]={i:k,l:!1,exports:{}};return be[k].call(y.exports,y,y.exports,H),y.l=!0,y.exports}return H.m=be,H.c=N,H.d=function(k,y,M){H.o(k,y)||Object.defineProperty(k,y,{enumerable:!0,get:M})},H.r=function(k){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},H.t=function(k,y){if(1&y&&(k=H(k)),8&y||4&y&&"object"==typeof k&&k&&k.__esModule)return k;var M=Object.create(null);if(H.r(M),Object.defineProperty(M,"default",{enumerable:!0,value:k}),2&y&&"string"!=typeof k)for(var S in k)H.d(M,S,function(g){return k[g]}.bind(null,S));return M},H.n=function(k){var y=k&&k.__esModule?function(){return k.default}:function(){return k};return H.d(y,"a",y),y},H.o=function(k,y){return Object.prototype.hasOwnProperty.call(k,y)},H.p="",H(H.s=22)}([function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k=function(){function g(v,_){for(var T=0;T<_.length;T++){var D=_[T];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(v,D.key,D)}}return function(v,_,T){return _&&g(v.prototype,_),T&&g(v,T),v}}(),y={debug:function(){},info:function(){},warn:function(){},error:function(){}},M=void 0,S=void 0;(N.Log=function(){function g(){!function(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}(this,g)}return g.reset=function(){S=3,M=y},g.debug=function(){if(S>=4){for(var _=arguments.length,T=Array(_),D=0;D<_;D++)T[D]=arguments[D];M.debug.apply(M,Array.from(T))}},g.info=function(){if(S>=3){for(var _=arguments.length,T=Array(_),D=0;D<_;D++)T[D]=arguments[D];M.info.apply(M,Array.from(T))}},g.warn=function(){if(S>=2){for(var _=arguments.length,T=Array(_),D=0;D<_;D++)T[D]=arguments[D];M.warn.apply(M,Array.from(T))}},g.error=function(){if(S>=1){for(var _=arguments.length,T=Array(_),D=0;D<_;D++)T[D]=arguments[D];M.error.apply(M,Array.from(T))}},k(g,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return S},set:function(_){if(!(0<=_&&_<=4))throw new Error("Invalid log level");S=_}},{key:"logger",get:function(){return M},set:function(_){if(!_.debug&&_.info&&(_.debug=_.info),!(_.debug&&_.info&&_.warn&&_.error))throw new Error("Invalid logger");M=_}}]),g}()).reset()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k=function(){function g(v,_){for(var T=0;T<_.length;T++){var D=_[T];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(v,D.key,D)}}return function(v,_,T){return _&&g(v.prototype,_),T&&g(v,T),v}}(),y={setInterval:function(g){function v(_,T){return g.apply(this,arguments)}return v.toString=function(){return g.toString()},v}(function(g,v){return setInterval(g,v)}),clearInterval:function(g){function v(_){return g.apply(this,arguments)}return v.toString=function(){return g.toString()},v}(function(g){return clearInterval(g)})},M=!1,S=null;N.Global=function(){function g(){!function(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}(this,g)}return g._testing=function(){M=!0},g.setXMLHttpRequest=function(_){S=_},k(g,null,[{key:"location",get:function(){if(!M)return location}},{key:"localStorage",get:function(){if(!M&&typeof window<"u")return localStorage}},{key:"sessionStorage",get:function(){if(!M&&typeof window<"u")return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!M&&typeof window<"u")return S||XMLHttpRequest}},{key:"timer",get:function(){if(!M)return y}}]),g}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.MetadataService=void 0;var k=function(){function S(g,v){for(var _=0;_<v.length;_++){var T=v[_];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(g,T.key,T)}}return function(g,v,_){return v&&S(g.prototype,v),_&&S(g,_),g}}(),y=H(0),M=H(7);N.MetadataService=function(){function S(g){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.JsonService;if(function(T,D){if(!(T instanceof D))throw new TypeError("Cannot call a class as a function")}(this,S),!g)throw y.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=g,this._jsonService=new v(["application/jwk-set+json"])}return S.prototype.getMetadata=function(){var v=this;return this._settings.metadata?(y.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(y.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(_){return y.Log.debug("MetadataService.getMetadata: json received"),v._settings.metadata=_,_})):(y.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},S.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},S.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},S.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},S.prototype.getTokenEndpoint=function(){return this._getMetadataProperty("token_endpoint",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},S.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},S.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},S.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},S.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},S.prototype._getMetadataProperty=function(v){var _=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return y.Log.debug("MetadataService.getMetadataProperty for: "+v),this.getMetadata().then(function(T){if(y.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===T[v]){if(!0===_)return void y.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+v);throw y.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+v),new Error("Metadata does not contain property "+v)}return T[v]})},S.prototype.getSigningKeys=function(){var v=this;return this._settings.signingKeys?(y.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(_){return y.Log.debug("MetadataService.getSigningKeys: jwks_uri received",_),v._jsonService.getJson(_).then(function(T){if(y.Log.debug("MetadataService.getSigningKeys: key set received",T),!T.keys)throw y.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return v._settings.signingKeys=T.keys,v._settings.signingKeys})})},k(S,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(".well-known/openid-configuration")<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=".well-known/openid-configuration"))),this._metadataUrl}}]),S}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.UrlUtility=void 0;var k=H(0),y=H(1);N.UrlUtility=function(){function M(){!function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}(this,M)}return M.addQueryParam=function(g,v,_){return g.indexOf("?")<0&&(g+="?"),"?"!==g[g.length-1]&&(g+="&"),g+=encodeURIComponent(v),(g+="=")+encodeURIComponent(_)},M.parseUrlFragment=function(g){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";"string"!=typeof g&&(g=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.Global).location.href);var T=g.lastIndexOf(v);T>=0&&(g=g.substr(T+1)),"?"===v&&(T=g.indexOf("#"))>=0&&(g=g.substr(0,T));for(var D,j={},L=/([^&=]+)=([^&]*)/g,A=0;D=L.exec(g);)if(j[decodeURIComponent(D[1])]=decodeURIComponent(D[2]),A++>50)return k.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",g),{error:"Response exceeded expected number of parameters"};for(var x in j)return j;return{}},M}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.JoseUtil=void 0;var S,k=H(25),y=(S=H(32))&&S.__esModule?S:{default:S};N.JoseUtil=(0,y.default)({jws:k.jws,KeyUtil:k.KeyUtil,X509:k.X509,crypto:k.crypto,hextob64u:k.hextob64u,b64tohex:k.b64tohex,AllowedSigningAlgs:k.AllowedSigningAlgs})},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.OidcClientSettings=void 0;var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},y=function(){function L(A,x){for(var R=0;R<x.length;R++){var F=x[R];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(A,F.key,F)}}return function(A,x,R){return x&&L(A.prototype,x),R&&L(A,R),A}}(),M=H(0),S=H(6),g=H(23),v=H(2),_="id_token",T="openid";N.OidcClientSettings=function(){function L(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},x=A.authority,R=A.metadataUrl,F=A.metadata,P=A.signingKeys,z=A.client_id,se=A.client_secret,ie=A.response_type,Se=void 0===ie?_:ie,Ee=A.scope,Ke=void 0===Ee?T:Ee,yt=A.redirect_uri,Z=A.post_logout_redirect_uri,Ze=A.prompt,on=A.display,ze=A.max_age,gn=A.ui_locales,Ht=A.acr_values,Ce=A.resource,St=A.response_mode,Ft=A.filterProtocolClaims,Bt=void 0===Ft||Ft,Zt=A.loadUserInfo,Ut=void 0===Zt||Zt,mn=A.staleStateAge,Hr=void 0===mn?900:mn,Fr=A.clockSkew,Xn=void 0===Fr?300:Fr,fr=A.userInfoJwtIssuer,Or=void 0===fr?"OP":fr,Y=A.stateStore,C=void 0===Y?new S.WebStorageStateStore:Y,E=A.ResponseValidatorCtor,q=void 0===E?g.ResponseValidator:E,te=A.MetadataServiceCtor,ee=void 0===te?v.MetadataService:te,pe=A.extraQueryParams,xe=void 0===pe?{}:pe,Ie=A.extraTokenParams,pt=void 0===Ie?{}:Ie;(function(mt,pi){if(!(mt instanceof pi))throw new TypeError("Cannot call a class as a function")})(this,L),this._authority=x,this._metadataUrl=R,this._metadata=F,this._signingKeys=P,this._client_id=z,this._client_secret=se,this._response_type=Se,this._scope=Ke,this._redirect_uri=yt,this._post_logout_redirect_uri=Z,this._prompt=Ze,this._display=on,this._max_age=ze,this._ui_locales=gn,this._acr_values=Ht,this._resource=Ce,this._response_mode=St,this._filterProtocolClaims=!!Bt,this._loadUserInfo=!!Ut,this._staleStateAge=Hr,this._clockSkew=Xn,this._userInfoJwtIssuer=Or,this._stateStore=C,this._validator=new q(this),this._metadataService=new ee(this),this._extraQueryParams="object"===(void 0===xe?"undefined":k(xe))?xe:{},this._extraTokenParams="object"===(void 0===pt?"undefined":k(pt))?pt:{}}return y(L,[{key:"client_id",get:function(){return this._client_id},set:function(x){if(this._client_id)throw M.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=x}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(x){if(this._authority)throw M.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=x}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(".well-known/openid-configuration")<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=".well-known/openid-configuration")),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(x){this._metadata=x}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(x){this._signingKeys=x}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(x){this._extraQueryParams="object"===(void 0===x?"undefined":k(x))?x:{}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(x){this._extraTokenParams="object"===(void 0===x?"undefined":k(x))?x:{}}}]),L}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.WebStorageStateStore=void 0;var k=H(0),y=H(1);N.WebStorageStateStore=function(){function M(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=S.prefix,v=void 0===g?"oidc.":g,_=S.store,T=void 0===_?y.Global.localStorage:_;(function(j,L){if(!(j instanceof L))throw new TypeError("Cannot call a class as a function")})(this,M),this._store=T,this._prefix=v}return M.prototype.set=function(g,v){return k.Log.debug("WebStorageStateStore.set",g),this._store.setItem(g=this._prefix+g,v),Promise.resolve()},M.prototype.get=function(g){k.Log.debug("WebStorageStateStore.get",g);var v=this._store.getItem(g=this._prefix+g);return Promise.resolve(v)},M.prototype.remove=function(g){k.Log.debug("WebStorageStateStore.remove",g);var v=this._store.getItem(g=this._prefix+g);return this._store.removeItem(g),Promise.resolve(v)},M.prototype.getAllKeys=function(){k.Log.debug("WebStorageStateStore.getAllKeys");for(var g=[],v=0;v<this._store.length;v++){var _=this._store.key(v);0===_.indexOf(this._prefix)&&g.push(_.substr(this._prefix.length))}return Promise.resolve(g)},M}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.JsonService=void 0;var k=H(0),y=H(1);N.JsonService=function(){function M(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.Global.XMLHttpRequest,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(function(T,D){if(!(T instanceof D))throw new TypeError("Cannot call a class as a function")})(this,M),this._contentTypes=S&&Array.isArray(S)?S.slice():[],this._contentTypes.push("application/json"),v&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=g,this._jwtHandler=v}return M.prototype.getJson=function(g,v){var _=this;if(!g)throw k.Log.error("JsonService.getJson: No url passed"),new Error("url");return k.Log.debug("JsonService.getJson, url: ",g),new Promise(function(T,D){var j=new _._XMLHttpRequest;j.open("GET",g);var L=_._contentTypes,A=_._jwtHandler;j.onload=function(){if(k.Log.debug("JsonService.getJson: HTTP response received, status",j.status),200===j.status){var x=j.getResponseHeader("Content-Type");if(x){var R=L.find(function(F){if(x.startsWith(F))return!0});if("application/jwt"==R)return void A(j).then(T,D);if(R)try{return void T(JSON.parse(j.responseText))}catch(F){return k.Log.error("JsonService.getJson: Error parsing JSON response",F.message),void D(F)}}D(Error("Invalid response Content-Type: "+x+", from URL: "+g))}else D(Error(j.statusText+" ("+j.status+")"))},j.onerror=function(){k.Log.error("JsonService.getJson: network error"),D(Error("Network Error"))},v&&(k.Log.debug("JsonService.getJson: token passed, setting Authorization header"),j.setRequestHeader("Authorization","Bearer "+v)),j.send()})},M.prototype.postForm=function(g,v){var _=this;if(!g)throw k.Log.error("JsonService.postForm: No url passed"),new Error("url");return k.Log.debug("JsonService.postForm, url: ",g),new Promise(function(T,D){var j=new _._XMLHttpRequest;j.open("POST",g);var L=_._contentTypes;j.onload=function(){if(k.Log.debug("JsonService.postForm: HTTP response received, status",j.status),200!==j.status){if(400===j.status&&(P=j.getResponseHeader("Content-Type"))&&L.find(function(z){if(P.startsWith(z))return!0}))try{var F=JSON.parse(j.responseText);if(F&&F.error)return k.Log.error("JsonService.postForm: Error from server: ",F.error),void D(new Error(F.error))}catch(z){return k.Log.error("JsonService.postForm: Error parsing JSON response",z.message),void D(z)}D(Error(j.statusText+" ("+j.status+")"))}else{var P;if((P=j.getResponseHeader("Content-Type"))&&L.find(function(z){if(P.startsWith(z))return!0}))try{return void T(JSON.parse(j.responseText))}catch(z){return k.Log.error("JsonService.postForm: Error parsing JSON response",z.message),void D(z)}D(Error("Invalid response Content-Type: "+P+", from URL: "+g))}},j.onerror=function(){k.Log.error("JsonService.postForm: network error"),D(Error("Network Error"))};var A="";for(var x in v){var R=v[x];R&&(A.length>0&&(A+="&"),A+=encodeURIComponent(x),A+="=",A+=encodeURIComponent(R))}j.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),j.send(A)})},M}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.State=void 0;var g,k=function(){function S(g,v){for(var _=0;_<v.length;_++){var T=v[_];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(g,T.key,T)}}return function(g,v,_){return v&&S(g.prototype,v),_&&S(g,_),g}}(),y=H(0),M=(g=H(14))&&g.__esModule?g:{default:g};N.State=function(){function S(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=g.id,_=g.data,T=g.created,D=g.request_type;(function(L,A){if(!(L instanceof A))throw new TypeError("Cannot call a class as a function")})(this,S),this._id=v||(0,M.default)(),this._data=_,this._created="number"==typeof T&&T>0?T:parseInt(Date.now()/1e3),this._request_type=D}return S.prototype.toStorageString=function(){return y.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},S.fromStorageString=function(v){return y.Log.debug("State.fromStorageString"),new S(JSON.parse(v))},S.clearStaleState=function(v,_){var T=Date.now()/1e3-_;return v.getAllKeys().then(function(D){y.Log.debug("State.clearStaleState: got keys",D);for(var j=[],L=function(F){var P=D[F];x=v.get(P).then(function(z){var se=!1;if(z)try{var ie=S.fromStorageString(z);y.Log.debug("State.clearStaleState: got item from key: ",P,ie.created),ie.created<=T&&(se=!0)}catch(Se){y.Log.error("State.clearStaleState: Error parsing state for key",P,Se.message),se=!0}else y.Log.debug("State.clearStaleState: no item in storage for key: ",P),se=!0;if(se)return y.Log.debug("State.clearStaleState: removed item for key: ",P),v.remove(P)}),j.push(x)},A=0;A<D.length;A++){var x;L(A)}return y.Log.debug("State.clearStaleState: waiting on promise count:",j.length),Promise.all(j)})},k(S,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),S}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.OidcClient=void 0;var k=function(){function L(A,x){for(var R=0;R<x.length;R++){var F=x[R];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(A,F.key,F)}}return function(A,x,R){return x&&L(A.prototype,x),R&&L(A,R),A}}(),y=H(0),M=H(5),S=H(11),g=H(12),v=H(36),_=H(37),T=H(38),D=H(13),j=H(8);N.OidcClient=function(){function L(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function(R,F){if(!(R instanceof F))throw new TypeError("Cannot call a class as a function")})(this,L),this._settings=A instanceof M.OidcClientSettings?A:new M.OidcClientSettings(A)}return L.prototype.createSigninRequest=function(){var x=this,R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},F=R.response_type,P=R.scope,z=R.redirect_uri,se=R.data,ie=R.state,Se=R.prompt,Ee=R.display,Ke=R.max_age,yt=R.ui_locales,Z=R.id_token_hint,Ze=R.login_hint,on=R.acr_values,ze=R.resource,gn=R.request,Ht=R.request_uri,Ce=R.response_mode,St=R.extraQueryParams,Ft=R.extraTokenParams,Bt=R.request_type,Zt=R.skipUserInfo,Ut=arguments[1];y.Log.debug("OidcClient.createSigninRequest");var mn=this._settings.client_id;P=P||this._settings.scope,z=z||this._settings.redirect_uri,Se=Se||this._settings.prompt,Ee=Ee||this._settings.display,Ke=Ke||this._settings.max_age,yt=yt||this._settings.ui_locales,on=on||this._settings.acr_values,ze=ze||this._settings.resource,Ce=Ce||this._settings.response_mode,St=St||this._settings.extraQueryParams,Ft=Ft||this._settings.extraTokenParams;var Hr=this._settings.authority;return g.SigninRequest.isCode(F=F||this._settings.response_type)&&"code"!==F?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(Fr){y.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",Fr);var Xn=new g.SigninRequest({url:Fr,client_id:mn,redirect_uri:z,response_type:F,scope:P,data:se||ie,authority:Hr,prompt:Se,display:Ee,max_age:Ke,ui_locales:yt,id_token_hint:Z,login_hint:Ze,acr_values:on,resource:ze,request:gn,request_uri:Ht,extraQueryParams:St,extraTokenParams:Ft,request_type:Bt,response_mode:Ce,client_secret:x._settings.client_secret,skipUserInfo:Zt}),fr=Xn.state;return(Ut=Ut||x._stateStore).set(fr.id,fr.toStorageString()).then(function(){return Xn})})},L.prototype.readSigninResponseState=function(x,R){var F=arguments.length>2&&void 0!==arguments[2]&&arguments[2];y.Log.debug("OidcClient.readSigninResponseState");var P="query"===this._settings.response_mode||!this._settings.response_mode&&g.SigninRequest.isCode(this._settings.response_type)?"?":"#",z=new v.SigninResponse(x,P);return z.state?(R=R||this._stateStore,(F?R.remove.bind(R):R.get.bind(R))(z.state).then(function(se){if(!se)throw y.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:D.SigninState.fromStorageString(se),response:z}})):(y.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response")))},L.prototype.processSigninResponse=function(x,R){var F=this;return y.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(x,R,!0).then(function(P){var z=P.state,se=P.response;return y.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),F._validator.validateSigninResponse(z,se)})},L.prototype.createSignoutRequest=function(){var x=this,R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},F=R.id_token_hint,P=R.data,z=R.state,se=R.post_logout_redirect_uri,ie=R.extraQueryParams,Se=R.request_type,Ee=arguments[1];return y.Log.debug("OidcClient.createSignoutRequest"),se=se||this._settings.post_logout_redirect_uri,ie=ie||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(Ke){if(!Ke)throw y.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");y.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",Ke);var yt=new _.SignoutRequest({url:Ke,id_token_hint:F,post_logout_redirect_uri:se,data:P||z,extraQueryParams:ie,request_type:Se}),Z=yt.state;return Z&&(y.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(Ee=Ee||x._stateStore).set(Z.id,Z.toStorageString())),yt})},L.prototype.readSignoutResponseState=function(x,R){var F=arguments.length>2&&void 0!==arguments[2]&&arguments[2];y.Log.debug("OidcClient.readSignoutResponseState");var P=new T.SignoutResponse(x);if(!P.state)return y.Log.debug("OidcClient.readSignoutResponseState: No state in response"),P.error?(y.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",P.error),Promise.reject(new S.ErrorResponse(P))):Promise.resolve({undefined:void 0,response:P});var z=P.state;return R=R||this._stateStore,(F?R.remove.bind(R):R.get.bind(R))(z).then(function(se){if(!se)throw y.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:j.State.fromStorageString(se),response:P}})},L.prototype.processSignoutResponse=function(x,R){var F=this;return y.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(x,R,!0).then(function(P){var z=P.state,se=P.response;return z?(y.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),F._validator.validateSignoutResponse(z,se)):(y.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),se)})},L.prototype.clearStaleState=function(x){return y.Log.debug("OidcClient.clearStaleState"),j.State.clearStaleState(x=x||this._stateStore,this.settings.staleStateAge)},k(L,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),L}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.TokenClient=void 0;var k=H(7),y=H(2),M=H(0);N.TokenClient=function(){function S(g){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.JsonService,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.MetadataService;if(function(D,j){if(!(D instanceof j))throw new TypeError("Cannot call a class as a function")}(this,S),!g)throw M.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=g,this._jsonService=new v,this._metadataService=new _(this._settings)}return S.prototype.exchangeCode=function(){var v=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(_=Object.assign({},_)).grant_type=_.grant_type||"authorization_code",_.client_id=_.client_id||this._settings.client_id,_.redirect_uri=_.redirect_uri||this._settings.redirect_uri,_.code?_.redirect_uri?_.code_verifier?_.client_id?this._metadataService.getTokenEndpoint(!1).then(function(T){return M.Log.debug("TokenClient.exchangeCode: Received token endpoint"),v._jsonService.postForm(T,_).then(function(D){return M.Log.debug("TokenClient.exchangeCode: response received"),D})}):(M.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(M.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(M.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(M.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},S.prototype.exchangeRefreshToken=function(){var v=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(_=Object.assign({},_)).grant_type=_.grant_type||"refresh_token",_.client_id=_.client_id||this._settings.client_id,_.client_secret=_.client_secret||this._settings.client_secret,_.refresh_token?_.client_id?this._metadataService.getTokenEndpoint(!1).then(function(T){return M.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),v._jsonService.postForm(T,_).then(function(D){return M.Log.debug("TokenClient.exchangeRefreshToken: response received"),D})}):(M.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(M.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},S}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.ErrorResponse=void 0;var k=H(0);N.ErrorResponse=function(y){function M(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=S.error,v=S.error_description,_=S.error_uri,T=S.state,D=S.session_state;if(function(A,x){if(!(A instanceof x))throw new TypeError("Cannot call a class as a function")}(this,M),!g)throw k.Log.error("No error passed to ErrorResponse"),new Error("error");var j=function(A,x){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!x||"object"!=typeof x&&"function"!=typeof x?A:x}(this,y.call(this,v||g));return j.name="ErrorResponse",j.error=g,j.error_description=v,j.error_uri=_,j.state=T,j.session_state=D,j}return function(g,v){if("function"!=typeof v&&null!==v)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}(M,y),M}(Error)},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.SigninRequest=void 0;var k=H(0),y=H(3),M=H(13);N.SigninRequest=function(){function S(g){var v=g.url,_=g.client_id,T=g.redirect_uri,D=g.response_type,j=g.scope,L=g.authority,A=g.data,x=g.prompt,R=g.display,F=g.max_age,P=g.ui_locales,z=g.id_token_hint,se=g.login_hint,ie=g.acr_values,Se=g.resource,Ee=g.response_mode,Ke=g.request,yt=g.request_uri,Z=g.extraQueryParams,Ze=g.request_type,on=g.client_secret,ze=g.extraTokenParams,gn=g.skipUserInfo;if(function(Ut,mn){if(!(Ut instanceof mn))throw new TypeError("Cannot call a class as a function")}(this,S),!v)throw k.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!_)throw k.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!T)throw k.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!D)throw k.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!j)throw k.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!L)throw k.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var Ht=S.isOidc(D),Ce=S.isCode(D);Ee||(Ee=S.isCode(D)?"query":null),this.state=new M.SigninState({nonce:Ht,data:A,client_id:_,authority:L,redirect_uri:T,code_verifier:Ce,request_type:Ze,response_mode:Ee,client_secret:on,scope:j,extraTokenParams:ze,skipUserInfo:gn}),v=y.UrlUtility.addQueryParam(v,"client_id",_),v=y.UrlUtility.addQueryParam(v,"redirect_uri",T),v=y.UrlUtility.addQueryParam(v,"response_type",D),v=y.UrlUtility.addQueryParam(v,"scope",j),v=y.UrlUtility.addQueryParam(v,"state",this.state.id),Ht&&(v=y.UrlUtility.addQueryParam(v,"nonce",this.state.nonce)),Ce&&(v=y.UrlUtility.addQueryParam(v,"code_challenge",this.state.code_challenge),v=y.UrlUtility.addQueryParam(v,"code_challenge_method","S256"));var St={prompt:x,display:R,max_age:F,ui_locales:P,id_token_hint:z,login_hint:se,acr_values:ie,resource:Se,request:Ke,request_uri:yt,response_mode:Ee};for(var Ft in St)St[Ft]&&(v=y.UrlUtility.addQueryParam(v,Ft,St[Ft]));for(var Bt in Z)v=y.UrlUtility.addQueryParam(v,Bt,Z[Bt]);this.url=v}return S.isOidc=function(v){return!!v.split(/\s+/g).filter(function(_){return"id_token"===_})[0]},S.isOAuth=function(v){return!!v.split(/\s+/g).filter(function(_){return"token"===_})[0]},S.isCode=function(v){return!!v.split(/\s+/g).filter(function(_){return"code"===_})[0]},S}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.SigninState=void 0;var _,k=function(){function v(_,T){for(var D=0;D<T.length;D++){var j=T[D];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(_,j.key,j)}}return function(_,T,D){return T&&v(_.prototype,T),D&&v(_,D),_}}(),y=H(0),M=H(8),S=H(4),g=(_=H(14))&&_.__esModule?_:{default:_};N.SigninState=function(v){function _(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},D=T.nonce,j=T.authority,L=T.client_id,A=T.redirect_uri,x=T.code_verifier,R=T.response_mode,F=T.client_secret,P=T.scope,z=T.extraTokenParams,se=T.skipUserInfo;!function(Ke,yt){if(!(Ke instanceof yt))throw new TypeError("Cannot call a class as a function")}(this,_);var ie=function(Ke,yt){if(!Ke)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!yt||"object"!=typeof yt&&"function"!=typeof yt?Ke:yt}(this,v.call(this,arguments[0]));if(!0===D?ie._nonce=(0,g.default)():D&&(ie._nonce=D),!0===x?ie._code_verifier=(0,g.default)()+(0,g.default)()+(0,g.default)():x&&(ie._code_verifier=x),ie.code_verifier){var Se=S.JoseUtil.hashString(ie.code_verifier,"SHA256");ie._code_challenge=S.JoseUtil.hexToBase64Url(Se)}return ie._redirect_uri=A,ie._authority=j,ie._client_id=L,ie._response_mode=R,ie._client_secret=F,ie._scope=P,ie._extraTokenParams=z,ie._skipUserInfo=se,ie}return function(D,j){if("function"!=typeof j&&null!==j)throw new TypeError("Super expression must either be null or a function, not "+typeof j);D.prototype=Object.create(j&&j.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(D,j):D.__proto__=j)}(_,v),_.prototype.toStorageString=function(){return y.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},_.fromStorageString=function(D){return y.Log.debug("SigninState.fromStorageString"),new _(JSON.parse(D))},k(_,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),_}(M.State)},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=function(){return(0,k.default)().replace(/-/g,"")};var M,k=(M=H(33))&&M.__esModule?M:{default:M};be.exports=N.default},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.User=void 0;var k=function(){function M(S,g){for(var v=0;v<g.length;v++){var _=g[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(S,_.key,_)}}return function(S,g,v){return g&&M(S.prototype,g),v&&M(S,v),S}}(),y=H(0);N.User=function(){function M(S){var g=S.id_token,v=S.session_state,_=S.access_token,T=S.refresh_token,D=S.token_type,j=S.scope,L=S.profile,A=S.expires_at,x=S.state;(function(F,P){if(!(F instanceof P))throw new TypeError("Cannot call a class as a function")})(this,M),this.id_token=g,this.session_state=v,this.access_token=_,this.refresh_token=T,this.token_type=D,this.scope=j,this.profile=L,this.expires_at=A,this.state=x}return M.prototype.toStorageString=function(){return y.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},M.fromStorageString=function(g){return y.Log.debug("User.fromStorageString"),new M(JSON.parse(g))},k(M,[{key:"expires_in",get:function(){if(this.expires_at){var g=parseInt(Date.now()/1e3);return this.expires_at-g}},set:function(g){var v=parseInt(g);if("number"==typeof v&&v>0){var _=parseInt(Date.now()/1e3);this.expires_at=_+v}}},{key:"expired",get:function(){var g=this.expires_in;if(void 0!==g)return g<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),M}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.AccessTokenEvents=void 0;var k=H(0),y=H(48);N.AccessTokenEvents=function(){function S(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=g.accessTokenExpiringNotificationTime,_=void 0===v?60:v,T=g.accessTokenExpiringTimer,D=void 0===T?new y.Timer("Access token expiring"):T,j=g.accessTokenExpiredTimer,L=void 0===j?new y.Timer("Access token expired"):j;(function(x,R){if(!(x instanceof R))throw new TypeError("Cannot call a class as a function")})(this,S),this._accessTokenExpiringNotificationTime=_,this._accessTokenExpiring=D,this._accessTokenExpired=L}return S.prototype.load=function(v){if(v.access_token&&void 0!==v.expires_in){var _=v.expires_in;if(k.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",_),_>0){var T=_-this._accessTokenExpiringNotificationTime;T<=0&&(T=1),k.Log.debug("AccessTokenEvents.load: registering expiring timer in:",T),this._accessTokenExpiring.init(T)}else k.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var D=_+1;k.Log.debug("AccessTokenEvents.load: registering expired timer in:",D),this._accessTokenExpired.init(D)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},S.prototype.unload=function(){k.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},S.prototype.addAccessTokenExpiring=function(v){this._accessTokenExpiring.addHandler(v)},S.prototype.removeAccessTokenExpiring=function(v){this._accessTokenExpiring.removeHandler(v)},S.prototype.addAccessTokenExpired=function(v){this._accessTokenExpired.addHandler(v)},S.prototype.removeAccessTokenExpired=function(v){this._accessTokenExpired.removeHandler(v)},S}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Event=void 0;var k=H(0);N.Event=function(){function y(M){(function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")})(this,y),this._name=M,this._callbacks=[]}return y.prototype.addHandler=function(S){this._callbacks.push(S)},y.prototype.removeHandler=function(S){var g=this._callbacks.findIndex(function(v){return v===S});g>=0&&this._callbacks.splice(g,1)},y.prototype.raise=function(){k.Log.debug("Event: Raising event: "+this._name);for(var S=0;S<this._callbacks.length;S++){var g;(g=this._callbacks)[S].apply(g,arguments)}},y}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.SessionMonitor=void 0;var k=function(){function g(v,_){for(var T=0;T<_.length;T++){var D=_[T];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(v,D.key,D)}}return function(v,_,T){return _&&g(v.prototype,_),T&&g(v,T),v}}(),y=H(0),M=H(19),S=H(1);N.SessionMonitor=function(){function g(v){var _=this,T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.CheckSessionIFrame,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.Global.timer;if(function(L,A){if(!(L instanceof A))throw new TypeError("Cannot call a class as a function")}(this,g),!v)throw y.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=v,this._CheckSessionIFrameCtor=T,this._timer=D,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),this._userManager.getUser().then(function(j){j?_._start(j):_._settings.monitorAnonymousSession&&_._userManager.querySessionStatus().then(function(L){var A={session_state:L.session_state};L.sub&&L.sid&&(A.profile={sub:L.sub,sid:L.sid}),_._start(A)}).catch(function(L){y.Log.error("SessionMonitor ctor: error from querySessionStatus:",L.message)})}).catch(function(j){y.Log.error("SessionMonitor ctor: error from getUser:",j.message)})}return g.prototype._start=function(_){var T=this,D=_.session_state;D&&(_.profile?(this._sub=_.profile.sub,this._sid=_.profile.sid,y.Log.debug("SessionMonitor._start: session_state:",D,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,y.Log.debug("SessionMonitor._start: session_state:",D,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(D):this._metadataService.getCheckSessionIframe().then(function(j){if(j){y.Log.debug("SessionMonitor._start: Initializing check session iframe");var L=T._client_id,A=T._checkSessionInterval,x=T._stopCheckSessionOnError;T._checkSessionIFrame=new T._CheckSessionIFrameCtor(T._callback.bind(T),L,j,A,x),T._checkSessionIFrame.load().then(function(){T._checkSessionIFrame.start(D)})}else y.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(j){y.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",j.message)}))},g.prototype._stop=function(){var _=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(y.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var T=this._timer.setInterval(function(){_._timer.clearInterval(T),_._userManager.querySessionStatus().then(function(D){var j={session_state:D.session_state};D.sub&&D.sid&&(j.profile={sub:D.sub,sid:D.sid}),_._start(j)}).catch(function(D){y.Log.error("SessionMonitor: error from querySessionStatus:",D.message)})},1e3)},g.prototype._callback=function(){var _=this;this._userManager.querySessionStatus().then(function(T){var D=!0;T?T.sub===_._sub?(D=!1,_._checkSessionIFrame.start(T.session_state),T.sid===_._sid?y.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",T.session_state):(y.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",T.session_state),_._userManager.events._raiseUserSessionChanged())):y.Log.debug("SessionMonitor._callback: Different subject signed into OP:",T.sub):y.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),D&&(_._sub?(y.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),_._userManager.events._raiseUserSignedOut()):(y.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),_._userManager.events._raiseUserSignedIn()))}).catch(function(T){_._sub&&(y.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",T.message),_._userManager.events._raiseUserSignedOut())})},k(g,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),g}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.CheckSessionIFrame=void 0;var k=H(0);N.CheckSessionIFrame=function(){function M(S,g,v,_){var T=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];(function(L,A){if(!(L instanceof A))throw new TypeError("Cannot call a class as a function")})(this,M),this._callback=S,this._client_id=g,this._url=v,this._interval=_||2e3,this._stopOnError=T;var D=v.indexOf("/",v.indexOf("//")+2);this._frame_origin=v.substr(0,D),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.style.width=0,this._frame.style.height=0,this._frame.src=v}return M.prototype.load=function(){var g=this;return new Promise(function(v){g._frame.onload=function(){v()},window.document.body.appendChild(g._frame),g._boundMessageEvent=g._message.bind(g),window.addEventListener("message",g._boundMessageEvent,!1)})},M.prototype._message=function(g){g.origin===this._frame_origin&&g.source===this._frame.contentWindow&&("error"===g.data?(k.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===g.data?(k.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):k.Log.debug("CheckSessionIFrame: "+g.data+" message from check session op iframe"))},M.prototype.start=function(g){var v=this;if(this._session_state!==g){k.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=g;var _=function(){v._frame.contentWindow.postMessage(v._client_id+" "+v._session_state,v._frame_origin)};_(),this._timer=window.setInterval(_,this._interval)}},M.prototype.stop=function(){this._session_state=null,this._timer&&(k.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},M}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.TokenRevocationClient=void 0;var k=H(0),y=H(2),M=H(1);N.TokenRevocationClient=function(){function S(g){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.Global.XMLHttpRequest,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.MetadataService;if(function(D,j){if(!(D instanceof j))throw new TypeError("Cannot call a class as a function")}(this,S),!g)throw k.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=g,this._XMLHttpRequestCtor=v,this._metadataService=new _(this._settings)}return S.prototype.revoke=function(v,_){var T=this,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!v)throw k.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if("access_token"!==D&&"refresh_token"!=D)throw k.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(j){if(j)return k.Log.debug("TokenRevocationClient.revoke: Revoking "+D),T._revoke(j,T._settings.client_id,T._settings.client_secret,v,D);if(_)throw k.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},S.prototype._revoke=function(v,_,T,D,j){var L=this;return new Promise(function(A,x){var R=new L._XMLHttpRequestCtor;R.open("POST",v),R.onload=function(){k.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",R.status),200===R.status?A():x(Error(R.statusText+" ("+R.status+")"))},R.onerror=function(){k.Log.debug("TokenRevocationClient.revoke: Network Error."),x("Network Error")};var F="client_id="+encodeURIComponent(_);T&&(F+="&client_secret="+encodeURIComponent(T)),F+="&token_type_hint="+encodeURIComponent(j),F+="&token="+encodeURIComponent(D),R.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),R.send(F)})},S}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.CordovaPopupWindow=void 0;var k=function(){function g(v,_){for(var T=0;T<_.length;T++){var D=_[T];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(v,D.key,D)}}return function(v,_,T){return _&&g(v.prototype,_),T&&g(v,T),v}}(),y=H(0);N.CordovaPopupWindow=function(){function g(v){var _=this;(function(D,j){if(!(D instanceof j))throw new TypeError("Cannot call a class as a function")})(this,g),this._promise=new Promise(function(T,D){_._resolve=T,_._reject=D}),this.features=v.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=v.popupWindowTarget||"_blank",this.redirect_uri=v.startUrl,y.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return g.prototype._isInAppBrowserInstalled=function(_){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(T){return _.hasOwnProperty(T)})},g.prototype.navigate=function(_){if(_&&_.url){if(!window.cordova)return this._error("cordova is undefined");var T=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(T))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(_.url,this.target,this.features),this._popup?(y.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},g.prototype._loadStartCallback=function(_){0===_.url.indexOf(this.redirect_uri)&&this._success({url:_.url})},g.prototype._exitCallback=function(_){this._error(_)},g.prototype._success=function(_){this._cleanup(),y.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(_)},g.prototype._error=function(_){this._cleanup(),y.Log.error(_),this._reject(new Error(_))},g.prototype.close=function(){this._cleanup()},g.prototype._cleanup=function(){this._popup&&(y.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},k(g,[{key:"promise",get:function(){return this._promise}}]),g}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k=H(0),y=H(9),M=H(5),S=H(6),g=H(39),v=H(40),_=H(16),T=H(2),D=H(50),j=H(51),L=H(19),A=H(20),x=H(18),R=H(1),F=H(15),P=H(52);N.default={Version:P.Version,Log:k.Log,OidcClient:y.OidcClient,OidcClientSettings:M.OidcClientSettings,WebStorageStateStore:S.WebStorageStateStore,InMemoryWebStorage:g.InMemoryWebStorage,UserManager:v.UserManager,AccessTokenEvents:_.AccessTokenEvents,MetadataService:T.MetadataService,CordovaPopupNavigator:D.CordovaPopupNavigator,CordovaIFrameNavigator:j.CordovaIFrameNavigator,CheckSessionIFrame:L.CheckSessionIFrame,TokenRevocationClient:A.TokenRevocationClient,SessionMonitor:x.SessionMonitor,Global:R.Global,User:F.User},be.exports=N.default},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.ResponseValidator=void 0;var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},y=H(0),M=H(2),S=H(24),g=H(10),v=H(11),_=H(4),T=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];N.ResponseValidator=function(){function D(j){var L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.MetadataService,A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.UserInfoService,x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_.JoseUtil,R=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g.TokenClient;if(function(P,z){if(!(P instanceof z))throw new TypeError("Cannot call a class as a function")}(this,D),!j)throw y.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=j,this._metadataService=new L(this._settings),this._userInfoService=new A(this._settings),this._joseUtil=x,this._tokenClient=new R(this._settings)}return D.prototype.validateSigninResponse=function(L,A){var x=this;return y.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(L,A).then(function(R){return y.Log.debug("ResponseValidator.validateSigninResponse: state processed"),x._validateTokens(L,R).then(function(F){return y.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),x._processClaims(L,F).then(function(P){return y.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),P})})})},D.prototype.validateSignoutResponse=function(L,A){return L.id!==A.state?(y.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(y.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),A.state=L.data,A.error?(y.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",A.error),Promise.reject(new v.ErrorResponse(A))):Promise.resolve(A))},D.prototype._processSigninParams=function(L,A){if(L.id!==A.state)return y.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!L.client_id)return y.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!L.authority)return y.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==L.authority)return y.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=L.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==L.client_id)return y.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=L.client_id;return y.Log.debug("ResponseValidator._processSigninParams: state validated"),A.state=L.data,A.error?(y.Log.warn("ResponseValidator._processSigninParams: Response was error",A.error),Promise.reject(new v.ErrorResponse(A))):L.nonce&&!A.id_token?(y.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!L.nonce&&A.id_token?(y.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):L.code_verifier&&!A.code?(y.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!L.code_verifier&&A.code?(y.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(A.scope||(A.scope=L.scope),Promise.resolve(A))},D.prototype._processClaims=function(L,A){var x=this;if(A.isOpenIdConnect){if(y.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),A.profile=this._filterProtocolClaims(A.profile),!0!==L.skipUserInfo&&this._settings.loadUserInfo&&A.access_token)return y.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(A.access_token).then(function(R){return y.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),R.sub!==A.profile.sub?(y.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in access_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in access_token"))):(A.profile=x._mergeClaims(A.profile,R),y.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",A.profile),A)});y.Log.debug("ResponseValidator._processClaims: not loading user info")}else y.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(A)},D.prototype._mergeClaims=function(L,A){var x=Object.assign({},L);for(var R in A){var F=A[R];Array.isArray(F)||(F=[F]);for(var P=0;P<F.length;P++){var z=F[P];x[R]?Array.isArray(x[R])?x[R].indexOf(z)<0&&x[R].push(z):x[R]!==z&&(x[R]="object"===(void 0===z?"undefined":k(z))?this._mergeClaims(x[R],z):[x[R],z]):x[R]=z}}return x},D.prototype._filterProtocolClaims=function(L){y.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",L);var A=Object.assign({},L);return this._settings._filterProtocolClaims?(T.forEach(function(x){delete A[x]}),y.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",A)):y.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),A},D.prototype._validateTokens=function(L,A){return A.code?(y.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(L,A)):A.id_token?A.access_token?(y.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(L,A)):(y.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(L,A)):(y.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(A))},D.prototype._processCode=function(L,A){var x=this,R={client_id:L.client_id,client_secret:L.client_secret,code:A.code,redirect_uri:L.redirect_uri,code_verifier:L.code_verifier};return L.extraTokenParams&&"object"===k(L.extraTokenParams)&&Object.assign(R,L.extraTokenParams),this._tokenClient.exchangeCode(R).then(function(F){for(var P in F)A[P]=F[P];return A.id_token?(y.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),x._validateIdTokenAttributes(L,A)):(y.Log.debug("ResponseValidator._processCode: token response successful, returning response"),A)})},D.prototype._validateIdTokenAttributes=function(L,A){var x=this;return this._metadataService.getIssuer().then(function(R){var F=L.client_id,P=x._settings.clockSkew;return y.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",P),x._joseUtil.validateJwtAttributes(A.id_token,R,F,P).then(function(z){return L.nonce&&L.nonce!==z.nonce?(y.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):z.sub?(A.profile=z,A):(y.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})},D.prototype._validateIdTokenAndAccessToken=function(L,A){var x=this;return this._validateIdToken(L,A).then(function(R){return x._validateAccessToken(R)})},D.prototype._validateIdToken=function(L,A){var x=this;if(!L.nonce)return y.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var R=this._joseUtil.parseJwt(A.id_token);if(!R||!R.header||!R.payload)return y.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",R),Promise.reject(new Error("Failed to parse id_token"));if(L.nonce!==R.payload.nonce)return y.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"));var F=R.header.kid;return this._metadataService.getIssuer().then(function(P){return y.Log.debug("ResponseValidator._validateIdToken: Received issuer"),x._metadataService.getSigningKeys().then(function(z){if(!z)return y.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));y.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var se=void 0;if(F)se=z.filter(function(Ee){return Ee.kid===F})[0];else{if((z=x._filterByAlg(z,R.header.alg)).length>1)return y.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));se=z[0]}if(!se)return y.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var ie=L.client_id,Se=x._settings.clockSkew;return y.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",Se),x._joseUtil.validateJwt(A.id_token,se,P,ie,Se).then(function(){return y.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),R.payload.sub?(A.profile=R.payload,A):(y.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},D.prototype._filterByAlg=function(L,A){var x=null;if(A.startsWith("RS"))x="RSA";else if(A.startsWith("PS"))x="PS";else{if(!A.startsWith("ES"))return y.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",A),[];x="EC"}return y.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",x),L=L.filter(function(R){return R.kty===x}),y.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",x,L.length),L},D.prototype._validateAccessToken=function(L){if(!L.profile)return y.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!L.profile.at_hash)return y.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!L.id_token)return y.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var A=this._joseUtil.parseJwt(L.id_token);if(!A||!A.header)return y.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",A),Promise.reject(new Error("Failed to parse id_token"));var x=A.header.alg;if(!x||5!==x.length)return y.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",x),Promise.reject(new Error("Unsupported alg: "+x));var R=x.substr(2,3);if(!R)return y.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",x,R),Promise.reject(new Error("Unsupported alg: "+x));if(256!==(R=parseInt(R))&&384!==R&&512!==R)return y.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",x,R),Promise.reject(new Error("Unsupported alg: "+x));var F="sha"+R,P=this._joseUtil.hashString(L.access_token,F);if(!P)return y.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",F),Promise.reject(new Error("Failed to validate at_hash"));var z=P.substr(0,P.length/2),se=this._joseUtil.hexToBase64Url(z);return se!==L.profile.at_hash?(y.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",se,L.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(y.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(L))},D}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.UserInfoService=void 0;var k=H(7),y=H(2),M=H(0),S=H(4);N.UserInfoService=function(){function g(v){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.JsonService,T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.MetadataService,D=arguments.length>3&&void 0!==arguments[3]?arguments[3]:S.JoseUtil;if(function(L,A){if(!(L instanceof A))throw new TypeError("Cannot call a class as a function")}(this,g),!v)throw M.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=v,this._jsonService=new _(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new T(this._settings),this._joseUtil=D}return g.prototype.getClaims=function(_){var T=this;return _?this._metadataService.getUserInfoEndpoint().then(function(D){return M.Log.debug("UserInfoService.getClaims: received userinfo url",D),T._jsonService.getJson(D,_).then(function(j){return M.Log.debug("UserInfoService.getClaims: claims received",j),j})}):(M.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},g.prototype._getClaimsFromJwt=function(_){var T=this;try{var D=this._joseUtil.parseJwt(_.responseText);if(!D||!D.header||!D.payload)return M.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",D),Promise.reject(new Error("Failed to parse id_token"));var j=D.header.kid,L=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":L=this._metadataService.getIssuer();break;case"ANY":L=Promise.resolve(D.payload.iss);break;default:L=Promise.resolve(this._settings.userInfoJwtIssuer)}return L.then(function(A){return M.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+A),T._metadataService.getSigningKeys().then(function(x){if(!x)return M.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));M.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var R=void 0;if(j)R=x.filter(function(z){return z.kid===j})[0];else{if((x=T._filterByAlg(x,D.header.alg)).length>1)return M.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));R=x[0]}if(!R)return M.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var F=T._settings.client_id,P=T._settings.clockSkew;return M.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",P),T._joseUtil.validateJwt(_.responseText,R,A,F,P,void 0,!0).then(function(){return M.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),D.payload})})})}catch(A){return M.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",A.message),void reject(A)}},g.prototype._filterByAlg=function(_,T){var D=null;if(T.startsWith("RS"))D="RSA";else if(T.startsWith("PS"))D="PS";else{if(!T.startsWith("ES"))return M.Log.debug("UserInfoService._filterByAlg: alg not supported: ",T),[];D="EC"}return M.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",D),_=_.filter(function(j){return j.kty===D}),M.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",D,_.length),_},g}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.AllowedSigningAlgs=N.b64tohex=N.hextob64u=N.crypto=N.X509=N.KeyUtil=N.jws=void 0;var k=H(26);N.jws=k.jws,N.KeyUtil=k.KEYUTIL,N.X509=k.X509,N.crypto=k.crypto,N.hextob64u=k.hextob64u,N.b64tohex=k.b64tohex,N.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(be,N,H){"use strict";(function(k){Object.defineProperty(N,"__esModule",{value:!0});var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},M={userAgent:!1},S={};if(void 0===g)var g={};g.lang={extend:function(c,u,f){if(!u||!c)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var p=function(){};if(p.prototype=u.prototype,c.prototype=new p,c.prototype.constructor=c,c.superclass=u.prototype,u.prototype.constructor==Object.prototype.constructor&&(u.prototype.constructor=u),f){var w;for(w in f)c.prototype[w]=f[w];var I=function(){},U=["toString","valueOf"];try{/MSIE/.test(M.userAgent)&&(I=function(W,J){for(w=0;w<U.length;w+=1){var G=U[w],K=J[G];"function"==typeof K&&K!=Object.prototype[G]&&(W[G]=K)}})}catch{}I(c.prototype,f)}}};var v,_,T,D,j,L,A,x,R,F,P,c,u,f,p,z=z||(v=Math,T=(_={}).lib={},D=T.Base=function(){function l(){}return{extend:function(u){l.prototype=this;var f=new l;return u&&f.mixIn(u),f.hasOwnProperty("init")||(f.init=function(){f.$super.init.apply(this,arguments)}),f.init.prototype=f,f.$super=this,f},create:function(){var u=this.extend();return u.init.apply(u,arguments),u},init:function(){},mixIn:function(u){for(var f in u)u.hasOwnProperty(f)&&(this[f]=u[f]);u.hasOwnProperty("toString")&&(this.toString=u.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),j=T.WordArray=D.extend({init:function(c,u){c=this.words=c||[],this.sigBytes=u??4*c.length},toString:function(c){return(c||A).stringify(this)},concat:function(c){var u=this.words,f=c.words,p=this.sigBytes,w=c.sigBytes;if(this.clamp(),p%4)for(var I=0;I<w;I++)u[p+I>>>2]|=(f[I>>>2]>>>24-I%4*8&255)<<24-(p+I)%4*8;else for(I=0;I<w;I+=4)u[p+I>>>2]=f[I>>>2];return this.sigBytes+=w,this},clamp:function(){var c=this.words,u=this.sigBytes;c[u>>>2]&=4294967295<<32-u%4*8,c.length=v.ceil(u/4)},clone:function(){var c=D.clone.call(this);return c.words=this.words.slice(0),c},random:function(c){for(var u=[],f=0;f<c;f+=4)u.push(4294967296*v.random()|0);return new j.init(u,c)}}),L=_.enc={},A=L.Hex={stringify:function(c){for(var u=c.words,f=c.sigBytes,p=[],w=0;w<f;w++){var I=u[w>>>2]>>>24-w%4*8&255;p.push((I>>>4).toString(16)),p.push((15&I).toString(16))}return p.join("")},parse:function(c){for(var u=c.length,f=[],p=0;p<u;p+=2)f[p>>>3]|=parseInt(c.substr(p,2),16)<<24-p%8*4;return new j.init(f,u/2)}},x=L.Latin1={stringify:function(c){for(var u=c.words,f=c.sigBytes,p=[],w=0;w<f;w++)p.push(String.fromCharCode(u[w>>>2]>>>24-w%4*8&255));return p.join("")},parse:function(c){for(var u=c.length,f=[],p=0;p<u;p++)f[p>>>2]|=(255&c.charCodeAt(p))<<24-p%4*8;return new j.init(f,u)}},R=L.Utf8={stringify:function(c){try{return decodeURIComponent(escape(x.stringify(c)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(c){return x.parse(unescape(encodeURIComponent(c)))}},F=T.BufferedBlockAlgorithm=D.extend({reset:function(){this._data=new j.init,this._nDataBytes=0},_append:function(c){"string"==typeof c&&(c=R.parse(c)),this._data.concat(c),this._nDataBytes+=c.sigBytes},_process:function(c){var u=this._data,f=u.words,p=u.sigBytes,w=this.blockSize,I=p/(4*w),U=(I=c?v.ceil(I):v.max((0|I)-this._minBufferSize,0))*w,B=v.min(4*U,p);if(U){for(var W=0;W<U;W+=w)this._doProcessBlock(f,W);var J=f.splice(0,U);u.sigBytes-=B}return new j.init(J,B)},clone:function(){var c=D.clone.call(this);return c._data=this._data.clone(),c},_minBufferSize:0}),T.Hasher=F.extend({cfg:D.extend(),init:function(c){this.cfg=this.cfg.extend(c),this.reset()},reset:function(){F.reset.call(this),this._doReset()},update:function(c){return this._append(c),this._process(),this},finalize:function(c){return c&&this._append(c),this._doFinalize()},blockSize:16,_createHelper:function(c){return function(u,f){return new c.init(f).finalize(u)}},_createHmacHelper:function(c){return function(u,f){return new P.HMAC.init(c,f).finalize(u)}}}),P=_.algo={},_);u=(c=z).lib,f=u.Base,p=u.WordArray,(c=c.x64={}).Word=f.extend({init:function(I,U){this.high=I,this.low=U}}),c.WordArray=f.extend({init:function(I,U){I=this.words=I||[],this.sigBytes=U??8*I.length},toX32:function(){for(var I=this.words,U=I.length,B=[],W=0;W<U;W++){var J=I[W];B.push(J.high),B.push(J.low)}return p.create(B,this.sigBytes)},clone:function(){for(var I=f.clone.call(this),U=I.words=this.words.slice(0),B=U.length,W=0;W<B;W++)U[W]=U[W].clone();return I}}),function(){var c=z.lib.WordArray;z.enc.Base64={stringify:function(f){var p=f.words,w=f.sigBytes,I=this._map;f.clamp(),f=[];for(var U=0;U<w;U+=3)for(var B=(p[U>>>2]>>>24-U%4*8&255)<<16|(p[U+1>>>2]>>>24-(U+1)%4*8&255)<<8|p[U+2>>>2]>>>24-(U+2)%4*8&255,W=0;4>W&&U+.75*W<w;W++)f.push(I.charAt(B>>>6*(3-W)&63));if(p=I.charAt(64))for(;f.length%4;)f.push(p);return f.join("")},parse:function(f){var p=f.length,w=this._map;(I=w.charAt(64))&&-1!=(I=f.indexOf(I))&&(p=I);for(var I=[],U=0,B=0;B<p;B++)if(B%4){var W=w.indexOf(f.charAt(B-1))<<B%4*2,J=w.indexOf(f.charAt(B))>>>6-B%4*2;I[U>>>2]|=(W|J)<<24-U%4*8,U++}return c.create(I,U)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(l){for(var c=z,u=(p=c.lib).WordArray,f=p.Hasher,p=c.algo,w=[],I=[],U=function(ae){return 4294967296*(ae-(0|ae))|0},B=2,W=0;64>W;){var J;e:{for(var G=l.sqrt(J=B),K=2;K<=G;K++)if(!(J%K)){J=!1;break e}J=!0}J&&(8>W&&(w[W]=U(l.pow(B,.5))),I[W]=U(l.pow(B,1/3)),W++),B++}var X=[];p=p.SHA256=f.extend({_doReset:function(){this._hash=new u.init(w.slice(0))},_doProcessBlock:function(ae,le){for(var De=this._hash.words,_e=De[0],Me=De[1],Oe=De[2],Ae=De[3],je=De[4],At=De[5],Dt=De[6],Vt=De[7],Ue=0;64>Ue;Ue++){if(16>Ue)X[Ue]=0|ae[le+Ue];else{var ot=X[Ue-15],Kt=X[Ue-2];X[Ue]=((ot<<25|ot>>>7)^(ot<<14|ot>>>18)^ot>>>3)+X[Ue-7]+((Kt<<15|Kt>>>17)^(Kt<<13|Kt>>>19)^Kt>>>10)+X[Ue-16]}ot=Vt+((je<<26|je>>>6)^(je<<21|je>>>11)^(je<<7|je>>>25))+(je&At^~je&Dt)+I[Ue]+X[Ue],Kt=((_e<<30|_e>>>2)^(_e<<19|_e>>>13)^(_e<<10|_e>>>22))+(_e&Me^_e&Oe^Me&Oe),Vt=Dt,Dt=At,At=je,je=Ae+ot|0,Ae=Oe,Oe=Me,Me=_e,_e=ot+Kt|0}De[0]=De[0]+_e|0,De[1]=De[1]+Me|0,De[2]=De[2]+Oe|0,De[3]=De[3]+Ae|0,De[4]=De[4]+je|0,De[5]=De[5]+At|0,De[6]=De[6]+Dt|0,De[7]=De[7]+Vt|0},_doFinalize:function(){var ae=this._data,le=ae.words,De=8*this._nDataBytes,_e=8*ae.sigBytes;return le[_e>>>5]|=128<<24-_e%32,le[14+(_e+64>>>9<<4)]=l.floor(De/4294967296),le[15+(_e+64>>>9<<4)]=De,ae.sigBytes=4*le.length,this._process(),this._hash},clone:function(){var ae=f.clone.call(this);return ae._hash=this._hash.clone(),ae}}),c.SHA256=f._createHelper(p),c.HmacSHA256=f._createHmacHelper(p)}(Math),function(){function l(){return f.create.apply(f,arguments)}for(var c=z,u=c.lib.Hasher,f=(w=c.x64).Word,p=w.WordArray,w=c.algo,I=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],U=[],B=0;80>B;B++)U[B]=l();w=w.SHA512=u.extend({_doReset:function(){this._hash=new p.init([new f.init(1779033703,4089235720),new f.init(3144134277,2227873595),new f.init(1013904242,4271175723),new f.init(2773480762,1595750129),new f.init(1359893119,2917565137),new f.init(2600822924,725511199),new f.init(528734635,4215389547),new f.init(1541459225,327033209)])},_doProcessBlock:function(J,G){for(var K=(Me=this._hash.words)[0],X=Me[1],oe=Me[2],ae=Me[3],le=Me[4],De=Me[5],_e=Me[6],Me=Me[7],Oe=K.high,Ae=K.low,je=X.high,At=X.low,Dt=oe.high,Vt=oe.low,Ue=ae.high,ot=ae.low,Kt=le.high,Rn=le.low,zt=De.high,xo=De.low,Re=_e.high,to=_e.low,ut=Me.high,no=Me.low,gr=Oe,Kn=Ae,as=je,Fo=At,cs=Dt,mr=Vt,_r=Ue,ta=ot,ii=Kt,ln=Rn,Ar=zt,bt=xo,ro=Re,io=to,ls=ut,Oo=no,Dn=0;80>Dn;Dn++){var kr=U[Dn];if(16>Dn)var mi=kr.high=0|J[G+2*Dn],Qe=kr.low=0|J[G+2*Dn+1];else{mi=((Qe=(mi=U[Dn-15]).high)>>>1|(_i=mi.low)<<31)^(Qe>>>8|_i<<24)^Qe>>>7;var _i=(_i>>>1|Qe<<31)^(_i>>>8|Qe<<24)^(_i>>>7|Qe<<25),oo=((Qe=(oo=U[Dn-2]).high)>>>19|(_n=oo.low)<<13)^(Qe<<3|_n>>>29)^Qe>>>6,_n=(_n>>>19|Qe<<13)^(_n<<3|Qe>>>29)^(_n>>>6|Qe<<26),Mt=(Qe=U[Dn-7]).high,so=(Bi=U[Dn-16]).high,Bi=Bi.low;mi=(mi=(mi=mi+Mt+((Qe=_i+Qe.low)>>>0<_i>>>0?1:0))+oo+((Qe+=_n)>>>0<_n>>>0?1:0))+so+((Qe+=Bi)>>>0<Bi>>>0?1:0),kr.high=mi,kr.low=Qe}kr=gr&as^gr&cs^as&cs;var ke=Kn&Fo^Kn&mr^Fo&mr,ir=(_i=(gr>>>28|Kn<<4)^(gr<<30|Kn>>>2)^(gr<<25|Kn>>>7),oo=(Kn>>>28|gr<<4)^(Kn<<30|gr>>>2)^(Kn<<25|gr>>>7),(_n=I[Dn]).high),xt=_n.low;so=(so=(so=(so=ls+((ii>>>14|ln<<18)^(ii>>>18|ln<<14)^(ii<<23|ln>>>9))+((_n=Oo+((ln>>>14|ii<<18)^(ln>>>18|ii<<14)^(ln<<23|ii>>>9)))>>>0<Oo>>>0?1:0))+(Mt=ii&Ar^~ii&ro)+((_n+=Bi=ln&bt^~ln&io)>>>0<Bi>>>0?1:0))+ir+((_n+=xt)>>>0<xt>>>0?1:0))+mi+((_n+=Qe)>>>0<Qe>>>0?1:0),ls=ro,Oo=io,ro=Ar,io=bt,Ar=ii,bt=ln,ii=_r+so+((ln=ta+_n|0)>>>0<ta>>>0?1:0)|0,_r=cs,ta=mr,cs=as,mr=Fo,as=gr,Fo=Kn,gr=so+(kr=_i+kr+((Qe=oo+ke)>>>0<oo>>>0?1:0))+((Kn=_n+Qe|0)>>>0<_n>>>0?1:0)|0}Ae=K.low=Ae+Kn,K.high=Oe+gr+(Ae>>>0<Kn>>>0?1:0),At=X.low=At+Fo,X.high=je+as+(At>>>0<Fo>>>0?1:0),Vt=oe.low=Vt+mr,oe.high=Dt+cs+(Vt>>>0<mr>>>0?1:0),ot=ae.low=ot+ta,ae.high=Ue+_r+(ot>>>0<ta>>>0?1:0),Rn=le.low=Rn+ln,le.high=Kt+ii+(Rn>>>0<ln>>>0?1:0),xo=De.low=xo+bt,De.high=zt+Ar+(xo>>>0<bt>>>0?1:0),to=_e.low=to+io,_e.high=Re+ro+(to>>>0<io>>>0?1:0),no=Me.low=no+Oo,Me.high=ut+ls+(no>>>0<Oo>>>0?1:0)},_doFinalize:function(){var J=this._data,G=J.words,K=8*this._nDataBytes,X=8*J.sigBytes;return G[X>>>5]|=128<<24-X%32,G[30+(X+128>>>10<<5)]=Math.floor(K/4294967296),G[31+(X+128>>>10<<5)]=K,J.sigBytes=4*G.length,this._process(),this._hash.toX32()},clone:function(){var J=u.clone.call(this);return J._hash=this._hash.clone(),J},blockSize:32}),c.SHA512=u._createHelper(w),c.HmacSHA512=u._createHmacHelper(w)}(),function(){var l=z,c=(p=l.x64).Word,u=p.WordArray,f=(p=l.algo).SHA512,p=p.SHA384=f.extend({_doReset:function(){this._hash=new u.init([new c.init(3418070365,3238371032),new c.init(1654270250,914150663),new c.init(2438529370,812702999),new c.init(355462360,4144912697),new c.init(1731405415,4290775857),new c.init(2394180231,1750603025),new c.init(3675008525,1694076839),new c.init(1203062813,3204075428)])},_doFinalize:function(){var I=f._doFinalize.call(this);return I.sigBytes-=16,I}});l.SHA384=f._createHelper(p),l.HmacSHA384=f._createHmacHelper(p)}();var se,ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Ee(l){var c,u,f="";for(c=0;c+3<=l.length;c+=3)u=parseInt(l.substring(c,c+3),16),f+=ie.charAt(u>>6)+ie.charAt(63&u);for(c+1==l.length?(u=parseInt(l.substring(c,c+1),16),f+=ie.charAt(u<<2)):c+2==l.length&&(u=parseInt(l.substring(c,c+2),16),f+=ie.charAt(u>>2)+ie.charAt((3&u)<<4)),"=";(3&f.length)>0;)f+="=";return f}function Ke(l){var c,u,f,p="",w=0;for(c=0;c<l.length&&"="!=l.charAt(c);++c)(f=ie.indexOf(l.charAt(c)))<0||(0==w?(p+=Ce(f>>2),u=3&f,w=1):1==w?(p+=Ce(u<<2|f>>4),u=15&f,w=2):2==w?(p+=Ce(u),p+=Ce(f>>2),u=3&f,w=3):(p+=Ce(u<<2|f>>4),p+=Ce(15&f),w=0));return 1==w&&(p+=Ce(u<<2)),p}function yt(l){var c,u=Ke(l),f=new Array;for(c=0;2*c<u.length;++c)f[c]=parseInt(u.substring(2*c,2*c+2),16);return f}function Z(l,c,u){null!=l&&("number"==typeof l?this.fromNumber(l,c,u):this.fromString(l,null==c&&"string"!=typeof l?256:c))}function Ze(){return new Z(null)}"Microsoft Internet Explorer"==M.appName?(Z.prototype.am=function(c,u,f,p,w,I){for(var U=32767&u,B=u>>15;--I>=0;){var W=32767&this[c],J=this[c++]>>15,G=B*W+J*U;w=((W=U*W+((32767&G)<<15)+f[p]+(1073741823&w))>>>30)+(G>>>15)+B*J+(w>>>30),f[p++]=1073741823&W}return w},se=30):"Netscape"!=M.appName?(Z.prototype.am=function(c,u,f,p,w,I){for(;--I>=0;){var U=u*this[c++]+f[p]+w;w=Math.floor(U/67108864),f[p++]=67108863&U}return w},se=26):(Z.prototype.am=function(c,u,f,p,w,I){for(var U=16383&u,B=u>>14;--I>=0;){var W=16383&this[c],J=this[c++]>>14,G=B*W+J*U;w=((W=U*W+((16383&G)<<14)+f[p]+w)>>28)+(G>>14)+B*J,f[p++]=268435455&W}return w},se=28),Z.prototype.DB=se,Z.prototype.DM=(1<<se)-1,Z.prototype.DV=1<<se,Z.prototype.FV=Math.pow(2,52),Z.prototype.F1=52-se,Z.prototype.F2=2*se-52;var on,ze,Ht=new Array;for(on="0".charCodeAt(0),ze=0;ze<=9;++ze)Ht[on++]=ze;for(on="a".charCodeAt(0),ze=10;ze<36;++ze)Ht[on++]=ze;for(on="A".charCodeAt(0),ze=10;ze<36;++ze)Ht[on++]=ze;function Ce(l){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(l)}function St(l,c){return Ht[l.charCodeAt(c)]??-1}function Ft(l){var c=Ze();return c.fromInt(l),c}function Bt(l){var c,u=1;return 0!=(c=l>>>16)&&(l=c,u+=16),0!=(c=l>>8)&&(l=c,u+=8),0!=(c=l>>4)&&(l=c,u+=4),0!=(c=l>>2)&&(l=c,u+=2),0!=(c=l>>1)&&(l=c,u+=1),u}function Zt(l){this.m=l}function Ut(l){this.m=l,this.mp=l.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<l.DB-15)-1,this.mt2=2*l.t}function mn(l,c){return l&c}function Hr(l,c){return l|c}function Fr(l,c){return l^c}function Xn(l,c){return l&~c}function fr(l){if(0==l)return-1;var c=0;return 0==(65535&l)&&(l>>=16,c+=16),0==(255&l)&&(l>>=8,c+=8),0==(15&l)&&(l>>=4,c+=4),0==(3&l)&&(l>>=2,c+=2),0==(1&l)&&++c,c}function Or(l){for(var c=0;0!=l;)l&=l-1,++c;return c}function Y(){}function C(l){return l}function E(l){this.r2=Ze(),this.q3=Ze(),Z.ONE.dlShiftTo(2*l.t,this.r2),this.mu=this.r2.divide(l),this.m=l}Zt.prototype.convert=function(c){return c.s<0||c.compareTo(this.m)>=0?c.mod(this.m):c},Zt.prototype.revert=function(c){return c},Zt.prototype.reduce=function(c){c.divRemTo(this.m,null,c)},Zt.prototype.mulTo=function(c,u,f){c.multiplyTo(u,f),this.reduce(f)},Zt.prototype.sqrTo=function(c,u){c.squareTo(u),this.reduce(u)},Ut.prototype.convert=function(c){var u=Ze();return c.abs().dlShiftTo(this.m.t,u),u.divRemTo(this.m,null,u),c.s<0&&u.compareTo(Z.ZERO)>0&&this.m.subTo(u,u),u},Ut.prototype.revert=function(c){var u=Ze();return c.copyTo(u),this.reduce(u),u},Ut.prototype.reduce=function(c){for(;c.t<=this.mt2;)c[c.t++]=0;for(var u=0;u<this.m.t;++u){var f=32767&c[u],p=f*this.mpl+((f*this.mph+(c[u]>>15)*this.mpl&this.um)<<15)&c.DM;for(c[f=u+this.m.t]+=this.m.am(0,p,c,u,0,this.m.t);c[f]>=c.DV;)c[f]-=c.DV,c[++f]++}c.clamp(),c.drShiftTo(this.m.t,c),c.compareTo(this.m)>=0&&c.subTo(this.m,c)},Ut.prototype.mulTo=function(c,u,f){c.multiplyTo(u,f),this.reduce(f)},Ut.prototype.sqrTo=function(c,u){c.squareTo(u),this.reduce(u)},Z.prototype.copyTo=function(c){for(var u=this.t-1;u>=0;--u)c[u]=this[u];c.t=this.t,c.s=this.s},Z.prototype.fromInt=function(c){this.t=1,this.s=c<0?-1:0,c>0?this[0]=c:c<-1?this[0]=c+this.DV:this.t=0},Z.prototype.fromString=function(c,u){var f;if(16==u)f=4;else if(8==u)f=3;else if(256==u)f=8;else if(2==u)f=1;else if(32==u)f=5;else{if(4!=u)return void this.fromRadix(c,u);f=2}this.t=0,this.s=0;for(var p=c.length,w=!1,I=0;--p>=0;){var U=8==f?255&c[p]:St(c,p);U<0?"-"==c.charAt(p)&&(w=!0):(w=!1,0==I?this[this.t++]=U:I+f>this.DB?(this[this.t-1]|=(U&(1<<this.DB-I)-1)<<I,this[this.t++]=U>>this.DB-I):this[this.t-1]|=U<<I,(I+=f)>=this.DB&&(I-=this.DB))}8==f&&0!=(128&c[0])&&(this.s=-1,I>0&&(this[this.t-1]|=(1<<this.DB-I)-1<<I)),this.clamp(),w&&Z.ZERO.subTo(this,this)},Z.prototype.clamp=function(){for(var c=this.s&this.DM;this.t>0&&this[this.t-1]==c;)--this.t},Z.prototype.dlShiftTo=function(c,u){var f;for(f=this.t-1;f>=0;--f)u[f+c]=this[f];for(f=c-1;f>=0;--f)u[f]=0;u.t=this.t+c,u.s=this.s},Z.prototype.drShiftTo=function(c,u){for(var f=c;f<this.t;++f)u[f-c]=this[f];u.t=Math.max(this.t-c,0),u.s=this.s},Z.prototype.lShiftTo=function(c,u){var f,p=c%this.DB,w=this.DB-p,I=(1<<w)-1,U=Math.floor(c/this.DB),B=this.s<<p&this.DM;for(f=this.t-1;f>=0;--f)u[f+U+1]=this[f]>>w|B,B=(this[f]&I)<<p;for(f=U-1;f>=0;--f)u[f]=0;u[U]=B,u.t=this.t+U+1,u.s=this.s,u.clamp()},Z.prototype.rShiftTo=function(c,u){u.s=this.s;var f=Math.floor(c/this.DB);if(f>=this.t)u.t=0;else{var p=c%this.DB,w=this.DB-p,I=(1<<p)-1;u[0]=this[f]>>p;for(var U=f+1;U<this.t;++U)u[U-f-1]|=(this[U]&I)<<w,u[U-f]=this[U]>>p;p>0&&(u[this.t-f-1]|=(this.s&I)<<w),u.t=this.t-f,u.clamp()}},Z.prototype.subTo=function(c,u){for(var f=0,p=0,w=Math.min(c.t,this.t);f<w;)p+=this[f]-c[f],u[f++]=p&this.DM,p>>=this.DB;if(c.t<this.t){for(p-=c.s;f<this.t;)p+=this[f],u[f++]=p&this.DM,p>>=this.DB;p+=this.s}else{for(p+=this.s;f<c.t;)p-=c[f],u[f++]=p&this.DM,p>>=this.DB;p-=c.s}u.s=p<0?-1:0,p<-1?u[f++]=this.DV+p:p>0&&(u[f++]=p),u.t=f,u.clamp()},Z.prototype.multiplyTo=function(c,u){var f=this.abs(),p=c.abs(),w=f.t;for(u.t=w+p.t;--w>=0;)u[w]=0;for(w=0;w<p.t;++w)u[w+f.t]=f.am(0,p[w],u,w,0,f.t);u.s=0,u.clamp(),this.s!=c.s&&Z.ZERO.subTo(u,u)},Z.prototype.squareTo=function(c){for(var u=this.abs(),f=c.t=2*u.t;--f>=0;)c[f]=0;for(f=0;f<u.t-1;++f){var p=u.am(f,u[f],c,2*f,0,1);(c[f+u.t]+=u.am(f+1,2*u[f],c,2*f+1,p,u.t-f-1))>=u.DV&&(c[f+u.t]-=u.DV,c[f+u.t+1]=1)}c.t>0&&(c[c.t-1]+=u.am(f,u[f],c,2*f,0,1)),c.s=0,c.clamp()},Z.prototype.divRemTo=function(c,u,f){var p=c.abs();if(!(p.t<=0)){var w=this.abs();if(w.t<p.t)return u?.fromInt(0),void(null!=f&&this.copyTo(f));null==f&&(f=Ze());var I=Ze(),U=this.s,B=c.s,W=this.DB-Bt(p[p.t-1]);W>0?(p.lShiftTo(W,I),w.lShiftTo(W,f)):(p.copyTo(I),w.copyTo(f));var J=I.t,G=I[J-1];if(0!=G){var K=G*(1<<this.F1)+(J>1?I[J-2]>>this.F2:0),X=this.FV/K,oe=(1<<this.F1)/K,ae=1<<this.F2,le=f.t,De=le-J,_e=u??Ze();for(I.dlShiftTo(De,_e),f.compareTo(_e)>=0&&(f[f.t++]=1,f.subTo(_e,f)),Z.ONE.dlShiftTo(J,_e),_e.subTo(I,I);I.t<J;)I[I.t++]=0;for(;--De>=0;){var Me=f[--le]==G?this.DM:Math.floor(f[le]*X+(f[le-1]+ae)*oe);if((f[le]+=I.am(0,Me,f,De,0,J))<Me)for(I.dlShiftTo(De,_e),f.subTo(_e,f);f[le]<--Me;)f.subTo(_e,f)}null!=u&&(f.drShiftTo(J,u),U!=B&&Z.ZERO.subTo(u,u)),f.t=J,f.clamp(),W>0&&f.rShiftTo(W,f),U<0&&Z.ZERO.subTo(f,f)}}},Z.prototype.invDigit=function(){if(this.t<1)return 0;var c=this[0];if(0==(1&c))return 0;var u=3&c;return(u=(u=(u=(u=u*(2-(15&c)*u)&15)*(2-(255&c)*u)&255)*(2-((65535&c)*u&65535))&65535)*(2-c*u%this.DV)%this.DV)>0?this.DV-u:-u},Z.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},Z.prototype.exp=function(c,u){if(c>4294967295||c<1)return Z.ONE;var f=Ze(),p=Ze(),w=u.convert(this),I=Bt(c)-1;for(w.copyTo(f);--I>=0;)if(u.sqrTo(f,p),(c&1<<I)>0)u.mulTo(p,w,f);else{var U=f;f=p,p=U}return u.revert(f)},Z.prototype.toString=function(c){if(this.s<0)return"-"+this.negate().toString(c);var u;if(16==c)u=4;else if(8==c)u=3;else if(2==c)u=1;else if(32==c)u=5;else{if(4!=c)return this.toRadix(c);u=2}var f,p=(1<<u)-1,w=!1,I="",U=this.t,B=this.DB-U*this.DB%u;if(U-- >0)for(B<this.DB&&(f=this[U]>>B)>0&&(w=!0,I=Ce(f));U>=0;)B<u?(f=(this[U]&(1<<B)-1)<<u-B,f|=this[--U]>>(B+=this.DB-u)):(f=this[U]>>(B-=u)&p,B<=0&&(B+=this.DB,--U)),f>0&&(w=!0),w&&(I+=Ce(f));return w?I:"0"},Z.prototype.negate=function(){var c=Ze();return Z.ZERO.subTo(this,c),c},Z.prototype.abs=function(){return this.s<0?this.negate():this},Z.prototype.compareTo=function(c){var u=this.s-c.s;if(0!=u)return u;var f=this.t;if(0!=(u=f-c.t))return this.s<0?-u:u;for(;--f>=0;)if(0!=(u=this[f]-c[f]))return u;return 0},Z.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Bt(this[this.t-1]^this.s&this.DM)},Z.prototype.mod=function(c){var u=Ze();return this.abs().divRemTo(c,null,u),this.s<0&&u.compareTo(Z.ZERO)>0&&c.subTo(u,u),u},Z.prototype.modPowInt=function(c,u){var f;return f=c<256||u.isEven()?new Zt(u):new Ut(u),this.exp(c,f)},Z.ZERO=Ft(0),Z.ONE=Ft(1),Y.prototype.convert=C,Y.prototype.revert=C,Y.prototype.mulTo=function(c,u,f){c.multiplyTo(u,f)},Y.prototype.sqrTo=function(c,u){c.squareTo(u)},E.prototype.convert=function(c){if(c.s<0||c.t>2*this.m.t)return c.mod(this.m);if(c.compareTo(this.m)<0)return c;var u=Ze();return c.copyTo(u),this.reduce(u),u},E.prototype.revert=function(c){return c},E.prototype.reduce=function(c){for(c.drShiftTo(this.m.t-1,this.r2),c.t>this.m.t+1&&(c.t=this.m.t+1,c.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);c.compareTo(this.r2)<0;)c.dAddOffset(1,this.m.t+1);for(c.subTo(this.r2,c);c.compareTo(this.m)>=0;)c.subTo(this.m,c)},E.prototype.mulTo=function(c,u,f){c.multiplyTo(u,f),this.reduce(f)},E.prototype.sqrTo=function(c,u){c.squareTo(u),this.reduce(u)};var q=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],te=(1<<26)/q[q.length-1];function ee(){this.i=0,this.j=0,this.S=new Array}Z.prototype.chunkSize=function(c){return Math.floor(Math.LN2*this.DB/Math.log(c))},Z.prototype.toRadix=function(c){if(null==c&&(c=10),0==this.signum()||c<2||c>36)return"0";var u=this.chunkSize(c),f=Math.pow(c,u),p=Ft(f),w=Ze(),I=Ze(),U="";for(this.divRemTo(p,w,I);w.signum()>0;)U=(f+I.intValue()).toString(c).substr(1)+U,w.divRemTo(p,w,I);return I.intValue().toString(c)+U},Z.prototype.fromRadix=function(c,u){this.fromInt(0),null==u&&(u=10);for(var f=this.chunkSize(u),p=Math.pow(u,f),w=!1,I=0,U=0,B=0;B<c.length;++B){var W=St(c,B);W<0?"-"==c.charAt(B)&&0==this.signum()&&(w=!0):(U=u*U+W,++I>=f&&(this.dMultiply(p),this.dAddOffset(U,0),I=0,U=0))}I>0&&(this.dMultiply(Math.pow(u,I)),this.dAddOffset(U,0)),w&&Z.ZERO.subTo(this,this)},Z.prototype.fromNumber=function(c,u,f){if("number"==typeof u)if(c<2)this.fromInt(1);else for(this.fromNumber(c,f),this.testBit(c-1)||this.bitwiseTo(Z.ONE.shiftLeft(c-1),Hr,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(u);)this.dAddOffset(2,0),this.bitLength()>c&&this.subTo(Z.ONE.shiftLeft(c-1),this);else{var p=new Array,w=7&c;p.length=1+(c>>3),u.nextBytes(p),w>0?p[0]&=(1<<w)-1:p[0]=0,this.fromString(p,256)}},Z.prototype.bitwiseTo=function(c,u,f){var p,w,I=Math.min(c.t,this.t);for(p=0;p<I;++p)f[p]=u(this[p],c[p]);if(c.t<this.t){for(w=c.s&this.DM,p=I;p<this.t;++p)f[p]=u(this[p],w);f.t=this.t}else{for(w=this.s&this.DM,p=I;p<c.t;++p)f[p]=u(w,c[p]);f.t=c.t}f.s=u(this.s,c.s),f.clamp()},Z.prototype.changeBit=function(c,u){var f=Z.ONE.shiftLeft(c);return this.bitwiseTo(f,u,f),f},Z.prototype.addTo=function(c,u){for(var f=0,p=0,w=Math.min(c.t,this.t);f<w;)p+=this[f]+c[f],u[f++]=p&this.DM,p>>=this.DB;if(c.t<this.t){for(p+=c.s;f<this.t;)p+=this[f],u[f++]=p&this.DM,p>>=this.DB;p+=this.s}else{for(p+=this.s;f<c.t;)p+=c[f],u[f++]=p&this.DM,p>>=this.DB;p+=c.s}u.s=p<0?-1:0,p>0?u[f++]=p:p<-1&&(u[f++]=this.DV+p),u.t=f,u.clamp()},Z.prototype.dMultiply=function(c){this[this.t]=this.am(0,c-1,this,0,0,this.t),++this.t,this.clamp()},Z.prototype.dAddOffset=function(c,u){if(0!=c){for(;this.t<=u;)this[this.t++]=0;for(this[u]+=c;this[u]>=this.DV;)this[u]-=this.DV,++u>=this.t&&(this[this.t++]=0),++this[u]}},Z.prototype.multiplyLowerTo=function(c,u,f){var p,w=Math.min(this.t+c.t,u);for(f.s=0,f.t=w;w>0;)f[--w]=0;for(p=f.t-this.t;w<p;++w)f[w+this.t]=this.am(0,c[w],f,w,0,this.t);for(p=Math.min(c.t,u);w<p;++w)this.am(0,c[w],f,w,0,u-w);f.clamp()},Z.prototype.multiplyUpperTo=function(c,u,f){--u;var p=f.t=this.t+c.t-u;for(f.s=0;--p>=0;)f[p]=0;for(p=Math.max(u-this.t,0);p<c.t;++p)f[this.t+p-u]=this.am(u-p,c[p],f,0,0,this.t+p-u);f.clamp(),f.drShiftTo(1,f)},Z.prototype.modInt=function(c){if(c<=0)return 0;var u=this.DV%c,f=this.s<0?c-1:0;if(this.t>0)if(0==u)f=this[0]%c;else for(var p=this.t-1;p>=0;--p)f=(u*f+this[p])%c;return f},Z.prototype.millerRabin=function(c){var u=this.subtract(Z.ONE),f=u.getLowestSetBit();if(f<=0)return!1;var p=u.shiftRight(f);(c=c+1>>1)>q.length&&(c=q.length);for(var w=Ze(),I=0;I<c;++I){w.fromInt(q[Math.floor(Math.random()*q.length)]);var U=w.modPow(p,this);if(0!=U.compareTo(Z.ONE)&&0!=U.compareTo(u)){for(var B=1;B++<f&&0!=U.compareTo(u);)if(0==(U=U.modPowInt(2,this)).compareTo(Z.ONE))return!1;if(0!=U.compareTo(u))return!1}}return!0},Z.prototype.clone=function(){var c=Ze();return this.copyTo(c),c},Z.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},Z.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},Z.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},Z.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},Z.prototype.toByteArray=function(){var c=this.t,u=new Array;u[0]=this.s;var f,p=this.DB-c*this.DB%8,w=0;if(c-- >0)for(p<this.DB&&(f=this[c]>>p)!=(this.s&this.DM)>>p&&(u[w++]=f|this.s<<this.DB-p);c>=0;)p<8?(f=(this[c]&(1<<p)-1)<<8-p,f|=this[--c]>>(p+=this.DB-8)):(f=this[c]>>(p-=8)&255,p<=0&&(p+=this.DB,--c)),0!=(128&f)&&(f|=-256),0==w&&(128&this.s)!=(128&f)&&++w,(w>0||f!=this.s)&&(u[w++]=f);return u},Z.prototype.equals=function(c){return 0==this.compareTo(c)},Z.prototype.min=function(c){return this.compareTo(c)<0?this:c},Z.prototype.max=function(c){return this.compareTo(c)>0?this:c},Z.prototype.and=function(c){var u=Ze();return this.bitwiseTo(c,mn,u),u},Z.prototype.or=function(c){var u=Ze();return this.bitwiseTo(c,Hr,u),u},Z.prototype.xor=function(c){var u=Ze();return this.bitwiseTo(c,Fr,u),u},Z.prototype.andNot=function(c){var u=Ze();return this.bitwiseTo(c,Xn,u),u},Z.prototype.not=function(){for(var c=Ze(),u=0;u<this.t;++u)c[u]=this.DM&~this[u];return c.t=this.t,c.s=~this.s,c},Z.prototype.shiftLeft=function(c){var u=Ze();return c<0?this.rShiftTo(-c,u):this.lShiftTo(c,u),u},Z.prototype.shiftRight=function(c){var u=Ze();return c<0?this.lShiftTo(-c,u):this.rShiftTo(c,u),u},Z.prototype.getLowestSetBit=function(){for(var c=0;c<this.t;++c)if(0!=this[c])return c*this.DB+fr(this[c]);return this.s<0?this.t*this.DB:-1},Z.prototype.bitCount=function(){for(var c=0,u=this.s&this.DM,f=0;f<this.t;++f)c+=Or(this[f]^u);return c},Z.prototype.testBit=function(c){var u=Math.floor(c/this.DB);return u>=this.t?0!=this.s:0!=(this[u]&1<<c%this.DB)},Z.prototype.setBit=function(c){return this.changeBit(c,Hr)},Z.prototype.clearBit=function(c){return this.changeBit(c,Xn)},Z.prototype.flipBit=function(c){return this.changeBit(c,Fr)},Z.prototype.add=function(c){var u=Ze();return this.addTo(c,u),u},Z.prototype.subtract=function(c){var u=Ze();return this.subTo(c,u),u},Z.prototype.multiply=function(c){var u=Ze();return this.multiplyTo(c,u),u},Z.prototype.divide=function(c){var u=Ze();return this.divRemTo(c,u,null),u},Z.prototype.remainder=function(c){var u=Ze();return this.divRemTo(c,null,u),u},Z.prototype.divideAndRemainder=function(c){var u=Ze(),f=Ze();return this.divRemTo(c,u,f),new Array(u,f)},Z.prototype.modPow=function(c,u){var f,p,w=c.bitLength(),I=Ft(1);if(w<=0)return I;f=w<18?1:w<48?3:w<144?4:w<768?5:6,p=w<8?new Zt(u):u.isEven()?new E(u):new Ut(u);var U=new Array,B=3,W=f-1,J=(1<<f)-1;if(U[1]=p.convert(this),f>1){var G=Ze();for(p.sqrTo(U[1],G);B<=J;)U[B]=Ze(),p.mulTo(G,U[B-2],U[B]),B+=2}var K,X,oe=c.t-1,ae=!0,le=Ze();for(w=Bt(c[oe])-1;oe>=0;){for(w>=W?K=c[oe]>>w-W&J:(K=(c[oe]&(1<<w+1)-1)<<W-w,oe>0&&(K|=c[oe-1]>>this.DB+w-W)),B=f;0==(1&K);)K>>=1,--B;if((w-=B)<0&&(w+=this.DB,--oe),ae)U[K].copyTo(I),ae=!1;else{for(;B>1;)p.sqrTo(I,le),p.sqrTo(le,I),B-=2;B>0?p.sqrTo(I,le):(X=I,I=le,le=X),p.mulTo(le,U[K],I)}for(;oe>=0&&0==(c[oe]&1<<w);)p.sqrTo(I,le),X=I,I=le,le=X,--w<0&&(w=this.DB-1,--oe)}return p.revert(I)},Z.prototype.modInverse=function(c){var u=c.isEven();if(this.isEven()&&u||0==c.signum())return Z.ZERO;for(var f=c.clone(),p=this.clone(),w=Ft(1),I=Ft(0),U=Ft(0),B=Ft(1);0!=f.signum();){for(;f.isEven();)f.rShiftTo(1,f),u?(w.isEven()&&I.isEven()||(w.addTo(this,w),I.subTo(c,I)),w.rShiftTo(1,w)):I.isEven()||I.subTo(c,I),I.rShiftTo(1,I);for(;p.isEven();)p.rShiftTo(1,p),u?(U.isEven()&&B.isEven()||(U.addTo(this,U),B.subTo(c,B)),U.rShiftTo(1,U)):B.isEven()||B.subTo(c,B),B.rShiftTo(1,B);f.compareTo(p)>=0?(f.subTo(p,f),u&&w.subTo(U,w),I.subTo(B,I)):(p.subTo(f,p),u&&U.subTo(w,U),B.subTo(I,B))}return 0!=p.compareTo(Z.ONE)?Z.ZERO:B.compareTo(c)>=0?B.subtract(c):B.signum()<0?(B.addTo(c,B),B.signum()<0?B.add(c):B):B},Z.prototype.pow=function(c){return this.exp(c,new Y)},Z.prototype.gcd=function(c){var u=this.s<0?this.negate():this.clone(),f=c.s<0?c.negate():c.clone();if(u.compareTo(f)<0){var p=u;u=f,f=p}var w=u.getLowestSetBit(),I=f.getLowestSetBit();if(I<0)return u;for(w<I&&(I=w),I>0&&(u.rShiftTo(I,u),f.rShiftTo(I,f));u.signum()>0;)(w=u.getLowestSetBit())>0&&u.rShiftTo(w,u),(w=f.getLowestSetBit())>0&&f.rShiftTo(w,f),u.compareTo(f)>=0?(u.subTo(f,u),u.rShiftTo(1,u)):(f.subTo(u,f),f.rShiftTo(1,f));return I>0&&f.lShiftTo(I,f),f},Z.prototype.isProbablePrime=function(c){var u,f=this.abs();if(1==f.t&&f[0]<=q[q.length-1]){for(u=0;u<q.length;++u)if(f[0]==q[u])return!0;return!1}if(f.isEven())return!1;for(u=1;u<q.length;){for(var p=q[u],w=u+1;w<q.length&&p<te;)p*=q[w++];for(p=f.modInt(p);u<w;)if(p%q[u++]==0)return!1}return f.millerRabin(c)},Z.prototype.square=function(){var c=Ze();return this.squareTo(c),c},ee.prototype.init=function(c){var u,f,p;for(u=0;u<256;++u)this.S[u]=u;for(f=0,u=0;u<256;++u)p=this.S[u],this.S[u]=this.S[f=f+this.S[u]+c[u%c.length]&255],this.S[f]=p;this.i=0,this.j=0},ee.prototype.next=function(){var c;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,c=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=c,this.S[c+this.S[this.i]&255]};var pe,xe,Ie;function Ct(){!function(c){xe[Ie++]^=255&c,xe[Ie++]^=c>>8&255,xe[Ie++]^=c>>16&255,xe[Ie++]^=c>>24&255,Ie>=256&&(Ie-=256)}((new Date).getTime())}if(null==xe){var mt;if(xe=new Array,Ie=0,void 0!==S&&(void 0!==S.crypto||void 0!==S.msCrypto)){var pi=S.crypto||S.msCrypto;if(pi.getRandomValues){var hr=new Uint8Array(32);for(pi.getRandomValues(hr),mt=0;mt<32;++mt)xe[Ie++]=hr[mt]}else if("Netscape"==M.appName&&M.appVersion<"5"){var Gt=S.crypto.random(32);for(mt=0;mt<Gt.length;++mt)xe[Ie++]=255&Gt.charCodeAt(mt)}}for(;Ie<256;)mt=Math.floor(65536*Math.random()),xe[Ie++]=mt>>>8,xe[Ie++]=255&mt;Ie=0,Ct()}function qs(){if(null==pe){for(Ct(),(pe=new ee).init(xe),Ie=0;Ie<xe.length;++Ie)xe[Ie]=0;Ie=0}return pe.next()}function Ur(){}function Js(l,c){return new Z(l,c)}function eo(l,c,u){for(var f="",p=0;f.length<c;)f+=u(String.fromCharCode.apply(String,l.concat([(4278190080&p)>>24,(16711680&p)>>16,(65280&p)>>8,255&p]))),p+=1;return f}function et(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Gn(l,c){this.x=c,this.q=l}function Et(l,c,u,f){this.curve=l,this.x=c,this.y=u,this.z=f??Z.ONE,this.zinv=null}function Li(l,c,u){this.q=l,this.a=this.fromBigInteger(c),this.b=this.fromBigInteger(u),this.infinity=new Et(this,null,null)}Ur.prototype.nextBytes=function(c){var u;for(u=0;u<c.length;++u)c[u]=qs()},et.prototype.doPublic=function(c){return c.modPowInt(this.e,this.n)},et.prototype.setPublic=function(c,u){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof c)this.n=c,this.e=u;else{if(!(null!=c&&null!=u&&c.length>0&&u.length>0))throw"Invalid RSA public key";this.n=Js(c,16),this.e=parseInt(u,16)}},et.prototype.encrypt=function(c){var u=function(I,U){if(U<I.length+11)throw"Message too long for RSA";for(var B=new Array,W=I.length-1;W>=0&&U>0;){var J=I.charCodeAt(W--);J<128?B[--U]=J:J>127&&J<2048?(B[--U]=63&J|128,B[--U]=J>>6|192):(B[--U]=63&J|128,B[--U]=J>>6&63|128,B[--U]=J>>12|224)}B[--U]=0;for(var G=new Ur,K=new Array;U>2;){for(K[0]=0;0==K[0];)G.nextBytes(K);B[--U]=K[0]}return B[--U]=2,B[--U]=0,new Z(B)}(c,this.n.bitLength()+7>>3);if(null==u)return null;var f=this.doPublic(u);if(null==f)return null;var p=f.toString(16);return 0==(1&p.length)?p:"0"+p},et.prototype.encryptOAEP=function(c,u,f){var p=function(B,W,J,G){var K=$.crypto.MessageDigest,X=$.crypto.Util,oe=null;if(J||(J="sha1"),"string"==typeof J&&(oe=K.getCanonicalAlgName(J),G=K.getHashLength(oe),J=function(Dt){return ht(X.hashHex(Ge(Dt),oe))}),B.length+2*G+2>W)throw"Message too long for RSA";var ae,le="";for(ae=0;ae<W-B.length-2*G-2;ae+=1)le+="\0";var De=J("")+le+"\x01"+B,_e=new Array(G);(new Ur).nextBytes(_e);var Me=eo(_e,De.length,J),Oe=[];for(ae=0;ae<De.length;ae+=1)Oe[ae]=De.charCodeAt(ae)^Me.charCodeAt(ae);var Ae=eo(Oe,_e.length,J),je=[0];for(ae=0;ae<_e.length;ae+=1)je[ae+1]=_e[ae]^Ae.charCodeAt(ae);return new Z(je.concat(Oe))}(c,this.n.bitLength()+7>>3,u,f);if(null==p)return null;var w=this.doPublic(p);if(null==w)return null;var I=w.toString(16);return 0==(1&I.length)?I:"0"+I},et.prototype.type="RSA",Gn.prototype.equals=function(c){return c==this||this.q.equals(c.q)&&this.x.equals(c.x)},Gn.prototype.toBigInteger=function(){return this.x},Gn.prototype.negate=function(){return new Gn(this.q,this.x.negate().mod(this.q))},Gn.prototype.add=function(c){return new Gn(this.q,this.x.add(c.toBigInteger()).mod(this.q))},Gn.prototype.subtract=function(c){return new Gn(this.q,this.x.subtract(c.toBigInteger()).mod(this.q))},Gn.prototype.multiply=function(c){return new Gn(this.q,this.x.multiply(c.toBigInteger()).mod(this.q))},Gn.prototype.square=function(){return new Gn(this.q,this.x.square().mod(this.q))},Gn.prototype.divide=function(c){return new Gn(this.q,this.x.multiply(c.toBigInteger().modInverse(this.q)).mod(this.q))},Et.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Et.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Et.prototype.equals=function(c){return c==this||(this.isInfinity()?c.isInfinity():c.isInfinity()?this.isInfinity():!!c.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(c.z)).mod(this.curve.q).equals(Z.ZERO)&&c.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(c.z)).mod(this.curve.q).equals(Z.ZERO))},Et.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(Z.ZERO)&&!this.y.toBigInteger().equals(Z.ZERO)},Et.prototype.negate=function(){return new Et(this.curve,this.x,this.y.negate(),this.z)},Et.prototype.add=function(c){if(this.isInfinity())return c;if(c.isInfinity())return this;var u=c.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(c.z)).mod(this.curve.q),f=c.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(c.z)).mod(this.curve.q);if(Z.ZERO.equals(f))return Z.ZERO.equals(u)?this.twice():this.curve.getInfinity();var p=new Z("3"),w=this.x.toBigInteger(),I=this.y.toBigInteger(),U=(c.x.toBigInteger(),c.y.toBigInteger(),f.square()),B=U.multiply(f),W=w.multiply(U),J=u.square().multiply(this.z),G=J.subtract(W.shiftLeft(1)).multiply(c.z).subtract(B).multiply(f).mod(this.curve.q),K=W.multiply(p).multiply(u).subtract(I.multiply(B)).subtract(J.multiply(u)).multiply(c.z).add(u.multiply(B)).mod(this.curve.q),X=B.multiply(this.z).multiply(c.z).mod(this.curve.q);return new Et(this.curve,this.curve.fromBigInteger(G),this.curve.fromBigInteger(K),X)},Et.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var c=new Z("3"),u=this.x.toBigInteger(),f=this.y.toBigInteger(),p=f.multiply(this.z),w=p.multiply(f).mod(this.curve.q),I=this.curve.a.toBigInteger(),U=u.square().multiply(c);Z.ZERO.equals(I)||(U=U.add(this.z.square().multiply(I)));var B=(U=U.mod(this.curve.q)).square().subtract(u.shiftLeft(3).multiply(w)).shiftLeft(1).multiply(p).mod(this.curve.q),W=U.multiply(c).multiply(u).subtract(w.shiftLeft(1)).shiftLeft(2).multiply(w).subtract(U.square().multiply(U)).mod(this.curve.q),J=p.square().multiply(p).shiftLeft(3).mod(this.curve.q);return new Et(this.curve,this.curve.fromBigInteger(B),this.curve.fromBigInteger(W),J)},Et.prototype.multiply=function(c){if(this.isInfinity())return this;if(0==c.signum())return this.curve.getInfinity();var u,f=c,p=f.multiply(new Z("3")),w=this.negate(),I=this;for(u=p.bitLength()-2;u>0;--u){I=I.twice();var U=p.testBit(u);U!=f.testBit(u)&&(I=I.add(U?this:w))}return I},Et.prototype.multiplyTwo=function(c,u,f){var p;p=c.bitLength()>f.bitLength()?c.bitLength()-1:f.bitLength()-1;for(var w=this.curve.getInfinity(),I=this.add(u);p>=0;)w=w.twice(),c.testBit(p)?w=f.testBit(p)?w.add(I):w.add(this):f.testBit(p)&&(w=w.add(u)),--p;return w},Li.prototype.getQ=function(){return this.q},Li.prototype.getA=function(){return this.a},Li.prototype.getB=function(){return this.b},Li.prototype.equals=function(c){return c==this||this.q.equals(c.q)&&this.a.equals(c.a)&&this.b.equals(c.b)},Li.prototype.getInfinity=function(){return this.infinity},Li.prototype.fromBigInteger=function(c){return new Gn(this.q,c)},Li.prototype.decodePointHex=function(c){switch(parseInt(c.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:default:return null;case 4:case 6:case 7:var u=(c.length-2)/2,f=c.substr(2,u),p=c.substr(u+2,u);return new Et(this,this.fromBigInteger(new Z(f,16)),this.fromBigInteger(new Z(p,16)))}},Gn.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},Et.prototype.getEncoded=function(l){var c=function(I,U){var B=I.toByteArrayUnsigned();if(U<B.length)B=B.slice(B.length-U);else for(;U>B.length;)B.unshift(0);return B},u=this.getX().toBigInteger(),f=this.getY().toBigInteger(),p=c(u,32);return l?f.isEven()?p.unshift(2):p.unshift(3):(p.unshift(4),p=p.concat(c(f,32))),p},Et.decodeFrom=function(l,c){var u=c.length-1,f=c.slice(1,1+u/2),p=c.slice(1+u/2,1+u);f.unshift(0),p.unshift(0);var w=new Z(f),I=new Z(p);return new Et(l,l.fromBigInteger(w),l.fromBigInteger(I))},Et.decodeFromHex=function(l,c){c.substr(0,2);var u=c.length-2,f=c.substr(2,u/2),p=c.substr(2+u/2,u/2),w=new Z(f,16),I=new Z(p,16);return new Et(l,l.fromBigInteger(w),l.fromBigInteger(I))},Et.prototype.add2D=function(l){if(this.isInfinity())return l;if(l.isInfinity())return this;if(this.x.equals(l.x))return this.y.equals(l.y)?this.twice():this.curve.getInfinity();var c=l.x.subtract(this.x),u=l.y.subtract(this.y).divide(c),f=u.square().subtract(this.x).subtract(l.x),p=u.multiply(this.x.subtract(f)).subtract(this.y);return new Et(this.curve,f,p)},Et.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var l=this.curve.fromBigInteger(Z.valueOf(2)),c=this.curve.fromBigInteger(Z.valueOf(3)),u=this.x.square().multiply(c).add(this.curve.a).divide(this.y.multiply(l)),f=u.square().subtract(this.x.multiply(l)),p=u.multiply(this.x.subtract(f)).subtract(this.y);return new Et(this.curve,f,p)},Et.prototype.multiply2D=function(l){if(this.isInfinity())return this;if(0==l.signum())return this.curve.getInfinity();var c,u=l,f=u.multiply(new Z("3")),p=this.negate(),w=this;for(c=f.bitLength()-2;c>0;--c){w=w.twice();var I=f.testBit(c);I!=u.testBit(c)&&(w=w.add2D(I?this:p))}return w},Et.prototype.isOnCurve=function(){var l=this.getX().toBigInteger(),c=this.getY().toBigInteger(),u=this.curve.getA().toBigInteger(),f=this.curve.getB().toBigInteger(),p=this.curve.getQ(),w=c.multiply(c).mod(p),I=l.multiply(l).multiply(l).add(u.multiply(l)).add(f).mod(p);return w.equals(I)},Et.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},Et.prototype.validate=function(){var l=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var c=this.getX().toBigInteger(),u=this.getY().toBigInteger();if(c.compareTo(Z.ONE)<0||c.compareTo(l.subtract(Z.ONE))>0)throw new Error("x coordinate out of bounds");if(u.compareTo(Z.ONE)<0||u.compareTo(l.subtract(Z.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(l).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var Yl=function(){var l=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),c=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),u={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function f(I,U,B){return U?u[U]:String.fromCharCode(parseInt(B,16))}var p=new String(""),w=Object.hasOwnProperty;return function(I,U){var B,W,J=I.match(l),G=J[0],K=!1;"{"===G?B={}:"["===G?B=[]:(B=[],K=!0);for(var X=[B],oe=1-K,ae=J.length;oe<ae;++oe){var le;switch((G=J[oe]).charCodeAt(0)){default:(le=X[0])[W||le.length]=+G,W=void 0;break;case 34:if(-1!==(G=G.substring(1,G.length-1)).indexOf("\\")&&(G=G.replace(c,f)),le=X[0],!W){if(!(le instanceof Array)){W=G||p;break}W=le.length}le[W]=G,W=void 0;break;case 91:X.unshift((le=X[0])[W||le.length]=[]),W=void 0;break;case 93:case 125:X.shift();break;case 102:(le=X[0])[W||le.length]=!1,W=void 0;break;case 110:(le=X[0])[W||le.length]=null,W=void 0;break;case 116:(le=X[0])[W||le.length]=!0,W=void 0;break;case 123:X.unshift((le=X[0])[W||le.length]={}),W=void 0}}if(K){if(1!==X.length)throw new Error;B=B[0]}else if(X.length)throw new Error;return U&&(B=function De(_e,Me){var Oe=_e[Me];if(Oe&&"object"===(void 0===Oe?"undefined":y(Oe))){var Ae=null;for(var je in Oe)if(w.call(Oe,je)&&Oe!==_e){var At=De(Oe,je);void 0!==At?Oe[je]=At:(Ae||(Ae=[]),Ae.push(je))}if(Ae)for(var Dt=Ae.length;--Dt>=0;)delete Oe[Ae[Dt]]}return U.call(_e,Me,Oe)}({"":B},"")),B}}();void 0!==$&&$||(N.KJUR=$={}),void 0!==$.asn1&&$.asn1||($.asn1={}),$.asn1.ASN1Util=new function(){this.integerToByteHex=function(l){var c=l.toString(16);return c.length%2==1&&(c="0"+c),c},this.bigIntToMinTwosComplementsHex=function(l){var c=l.toString(16);if("-"!=c.substr(0,1))c.length%2==1?c="0"+c:c.match(/^[0-7]/)||(c="00"+c);else{var u=c.substr(1).length;u%2==1?u+=1:c.match(/^[0-7]/)||(u+=2);for(var f="",p=0;p<u;p++)f+="f";c=new Z(f,16).xor(l).add(Z.ONE).toString(16).replace(/^-/,"")}return c},this.getPEMStringFromHex=function(l,c){return we(l,c)},this.newObject=function(l){var c=$.asn1,u=c.DERBoolean,f=c.DERInteger,p=c.DERBitString,w=c.DEROctetString,I=c.DERNull,U=c.DERObjectIdentifier,B=c.DEREnumerated,W=c.DERUTF8String,J=c.DERNumericString,G=c.DERPrintableString,K=c.DERTeletexString,X=c.DERIA5String,oe=c.DERUTCTime,ae=c.DERGeneralizedTime,le=c.DERSequence,De=c.DERSet,_e=c.DERTaggedObject,Me=c.ASN1Util.newObject,Oe=Object.keys(l);if(1!=Oe.length)throw"key of param shall be only one.";var Ae=Oe[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+Ae+":"))throw"undefined key: "+Ae;if("bool"==Ae)return new u(l[Ae]);if("int"==Ae)return new f(l[Ae]);if("bitstr"==Ae)return new p(l[Ae]);if("octstr"==Ae)return new w(l[Ae]);if("null"==Ae)return new I(l[Ae]);if("oid"==Ae)return new U(l[Ae]);if("enum"==Ae)return new B(l[Ae]);if("utf8str"==Ae)return new W(l[Ae]);if("numstr"==Ae)return new J(l[Ae]);if("prnstr"==Ae)return new G(l[Ae]);if("telstr"==Ae)return new K(l[Ae]);if("ia5str"==Ae)return new X(l[Ae]);if("utctime"==Ae)return new oe(l[Ae]);if("gentime"==Ae)return new ae(l[Ae]);if("seq"==Ae){for(var je=l[Ae],At=[],Dt=0;Dt<je.length;Dt++){var Vt=Me(je[Dt]);At.push(Vt)}return new le({array:At})}if("set"==Ae){for(je=l[Ae],At=[],Dt=0;Dt<je.length;Dt++)Vt=Me(je[Dt]),At.push(Vt);return new De({array:At})}if("tag"==Ae){var Ue=l[Ae];if("[object Array]"===Object.prototype.toString.call(Ue)&&3==Ue.length){var ot=Me(Ue[2]);return new _e({tag:Ue[0],explicit:Ue[1],obj:ot})}var Kt={};if(void 0!==Ue.explicit&&(Kt.explicit=Ue.explicit),void 0!==Ue.tag&&(Kt.tag=Ue.tag),void 0===Ue.obj)throw"obj shall be specified for 'tag'.";return Kt.obj=Me(Ue.obj),new _e(Kt)}},this.jsonToASN1HEX=function(l){return this.newObject(l).getEncodedHex()}},$.asn1.ASN1Util.oidHexToInt=function(l){for(var c="",u=parseInt(l.substr(0,2),16),f=(c=Math.floor(u/40)+"."+u%40,""),p=2;p<l.length;p+=2){var w=("00000000"+parseInt(l.substr(p,2),16).toString(2)).slice(-8);f+=w.substr(1,7),"0"==w.substr(0,1)&&(c=c+"."+new Z(f,2).toString(10),f="")}return c},$.asn1.ASN1Util.oidIntToHex=function(l){var c=function(B){var W=B.toString(16);return 1==W.length&&(W="0"+W),W},u=function(B){var W="",J=new Z(B,10).toString(2),G=7-J.length%7;7==G&&(G=0);for(var K="",X=0;X<G;X++)K+="0";for(J=K+J,X=0;X<J.length-1;X+=7){var oe=J.substr(X,7);X!=J.length-7&&(oe="1"+oe),W+=c(parseInt(oe,2))}return W};if(!l.match(/^[0-9.]+$/))throw"malformed oid string: "+l;var f="",p=l.split("."),w=40*parseInt(p[0])+parseInt(p[1]);f+=c(w),p.splice(0,2);for(var I=0;I<p.length;I++)f+=u(p[I]);return f},$.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n=0,v="+this.hV;var l=this.hV.length/2,c=l.toString(16);if(c.length%2==1&&(c="0"+c),l<128)return c;var u=c.length/2;if(u>15)throw"ASN.1 length too long to represent by 8x: n = "+l.toString(16);return(128+u).toString(16)+c},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},$.asn1.DERAbstractString=function(l){$.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(c){this.hTLV=null,this.isModified=!0,this.s=c,this.hV=os(this.s).toLowerCase()},this.setStringHex=function(c){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=c},this.getFreshValueHex=function(){return this.hV},void 0!==l&&("string"==typeof l?this.setString(l):void 0!==l.str?this.setString(l.str):void 0!==l.hex&&this.setStringHex(l.hex))},g.lang.extend($.asn1.DERAbstractString,$.asn1.ASN1Object),$.asn1.DERAbstractTime=function(l){$.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(c){return utc=c.getTime()+6e4*c.getTimezoneOffset(),new Date(utc)},this.formatDate=function(c,u,f){var p=this.zeroPadding,w=this.localDateToUTC(c),I=String(w.getFullYear());"utc"==u&&(I=I.substr(2,2));var U=I+p(String(w.getMonth()+1),2)+p(String(w.getDate()),2)+p(String(w.getHours()),2)+p(String(w.getMinutes()),2)+p(String(w.getSeconds()),2);if(!0===f){var B=w.getMilliseconds();if(0!=B){var W=p(String(B),3);U=U+"."+(W=W.replace(/[0]+$/,""))}}return U+"Z"},this.zeroPadding=function(c,u){return c.length>=u?c:new Array(u-c.length+1).join("0")+c},this.getString=function(){return this.s},this.setString=function(c){this.hTLV=null,this.isModified=!0,this.s=c,this.hV=gi(c)},this.setByDateValue=function(c,u,f,p,w,I){var U=new Date(Date.UTC(c,u-1,f,p,w,I,0));this.setByDate(U)},this.getFreshValueHex=function(){return this.hV}},g.lang.extend($.asn1.DERAbstractTime,$.asn1.ASN1Object),$.asn1.DERAbstractStructured=function(l){$.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(c){this.hTLV=null,this.isModified=!0,this.asn1Array=c},this.appendASN1Object=function(c){this.hTLV=null,this.isModified=!0,this.asn1Array.push(c)},this.asn1Array=new Array,void 0!==l&&void 0!==l.array&&(this.asn1Array=l.array)},g.lang.extend($.asn1.DERAbstractStructured,$.asn1.ASN1Object),$.asn1.DERBoolean=function(){$.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},g.lang.extend($.asn1.DERBoolean,$.asn1.ASN1Object),$.asn1.DERInteger=function(l){$.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(c){this.hTLV=null,this.isModified=!0,this.hV=$.asn1.ASN1Util.bigIntToMinTwosComplementsHex(c)},this.setByInteger=function(c){var u=new Z(String(c),10);this.setByBigInteger(u)},this.setValueHex=function(c){this.hV=c},this.getFreshValueHex=function(){return this.hV},void 0!==l&&(void 0!==l.bigint?this.setByBigInteger(l.bigint):void 0!==l.int?this.setByInteger(l.int):"number"==typeof l?this.setByInteger(l):void 0!==l.hex&&this.setValueHex(l.hex))},g.lang.extend($.asn1.DERInteger,$.asn1.ASN1Object),$.asn1.DERBitString=function(l){if(void 0!==l&&void 0!==l.obj){var c=$.asn1.ASN1Util.newObject(l.obj);l.hex="00"+c.getEncodedHex()}$.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(u){this.hTLV=null,this.isModified=!0,this.hV=u},this.setUnusedBitsAndHexValue=function(u,f){if(u<0||7<u)throw"unused bits shall be from 0 to 7: u = "+u;var p="0"+u;this.hTLV=null,this.isModified=!0,this.hV=p+f},this.setByBinaryString=function(u){var f=8-(u=u.replace(/0+$/,"")).length%8;8==f&&(f=0);for(var p=0;p<=f;p++)u+="0";var w="";for(p=0;p<u.length-1;p+=8){var I=u.substr(p,8),U=parseInt(I,2).toString(16);1==U.length&&(U="0"+U),w+=U}this.hTLV=null,this.isModified=!0,this.hV="0"+f+w},this.setByBooleanArray=function(u){for(var f="",p=0;p<u.length;p++)f+=1==u[p]?"1":"0";this.setByBinaryString(f)},this.newFalseArray=function(u){for(var f=new Array(u),p=0;p<u;p++)f[p]=!1;return f},this.getFreshValueHex=function(){return this.hV},void 0!==l&&("string"==typeof l&&l.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(l):void 0!==l.hex?this.setHexValueIncludingUnusedBits(l.hex):void 0!==l.bin?this.setByBinaryString(l.bin):void 0!==l.array&&this.setByBooleanArray(l.array))},g.lang.extend($.asn1.DERBitString,$.asn1.ASN1Object),$.asn1.DEROctetString=function(l){if(void 0!==l&&void 0!==l.obj){var c=$.asn1.ASN1Util.newObject(l.obj);l.hex=c.getEncodedHex()}$.asn1.DEROctetString.superclass.constructor.call(this,l),this.hT="04"},g.lang.extend($.asn1.DEROctetString,$.asn1.DERAbstractString),$.asn1.DERNull=function(){$.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},g.lang.extend($.asn1.DERNull,$.asn1.ASN1Object),$.asn1.DERObjectIdentifier=function(l){var c=function(p){var w=p.toString(16);return 1==w.length&&(w="0"+w),w},u=function(p){var w="",I=new Z(p,10).toString(2),U=7-I.length%7;7==U&&(U=0);for(var B="",W=0;W<U;W++)B+="0";for(I=B+I,W=0;W<I.length-1;W+=7){var J=I.substr(W,7);W!=I.length-7&&(J="1"+J),w+=c(parseInt(J,2))}return w};$.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(f){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=f},this.setValueOidString=function(f){if(!f.match(/^[0-9.]+$/))throw"malformed oid string: "+f;var p="",w=f.split("."),I=40*parseInt(w[0])+parseInt(w[1]);p+=c(I),w.splice(0,2);for(var U=0;U<w.length;U++)p+=u(w[U]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=p},this.setValueName=function(f){var p=$.asn1.x509.OID.name2oid(f);if(""===p)throw"DERObjectIdentifier oidName undefined: "+f;this.setValueOidString(p)},this.getFreshValueHex=function(){return this.hV},void 0!==l&&("string"==typeof l?l.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(l):this.setValueName(l):void 0!==l.oid?this.setValueOidString(l.oid):void 0!==l.hex?this.setValueHex(l.hex):void 0!==l.name&&this.setValueName(l.name))},g.lang.extend($.asn1.DERObjectIdentifier,$.asn1.ASN1Object),$.asn1.DEREnumerated=function(l){$.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(c){this.hTLV=null,this.isModified=!0,this.hV=$.asn1.ASN1Util.bigIntToMinTwosComplementsHex(c)},this.setByInteger=function(c){var u=new Z(String(c),10);this.setByBigInteger(u)},this.setValueHex=function(c){this.hV=c},this.getFreshValueHex=function(){return this.hV},void 0!==l&&(void 0!==l.int?this.setByInteger(l.int):"number"==typeof l?this.setByInteger(l):void 0!==l.hex&&this.setValueHex(l.hex))},g.lang.extend($.asn1.DEREnumerated,$.asn1.ASN1Object),$.asn1.DERUTF8String=function(l){$.asn1.DERUTF8String.superclass.constructor.call(this,l),this.hT="0c"},g.lang.extend($.asn1.DERUTF8String,$.asn1.DERAbstractString),$.asn1.DERNumericString=function(l){$.asn1.DERNumericString.superclass.constructor.call(this,l),this.hT="12"},g.lang.extend($.asn1.DERNumericString,$.asn1.DERAbstractString),$.asn1.DERPrintableString=function(l){$.asn1.DERPrintableString.superclass.constructor.call(this,l),this.hT="13"},g.lang.extend($.asn1.DERPrintableString,$.asn1.DERAbstractString),$.asn1.DERTeletexString=function(l){$.asn1.DERTeletexString.superclass.constructor.call(this,l),this.hT="14"},g.lang.extend($.asn1.DERTeletexString,$.asn1.DERAbstractString),$.asn1.DERIA5String=function(l){$.asn1.DERIA5String.superclass.constructor.call(this,l),this.hT="16"},g.lang.extend($.asn1.DERIA5String,$.asn1.DERAbstractString),$.asn1.DERUTCTime=function(l){$.asn1.DERUTCTime.superclass.constructor.call(this,l),this.hT="17",this.setByDate=function(c){this.hTLV=null,this.isModified=!0,this.date=c,this.s=this.formatDate(this.date,"utc"),this.hV=gi(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=gi(this.s)),this.hV},void 0!==l&&(void 0!==l.str?this.setString(l.str):"string"==typeof l&&l.match(/^[0-9]{12}Z$/)?this.setString(l):void 0!==l.hex?this.setStringHex(l.hex):void 0!==l.date&&this.setByDate(l.date))},g.lang.extend($.asn1.DERUTCTime,$.asn1.DERAbstractTime),$.asn1.DERGeneralizedTime=function(l){$.asn1.DERGeneralizedTime.superclass.constructor.call(this,l),this.hT="18",this.withMillis=!1,this.setByDate=function(c){this.hTLV=null,this.isModified=!0,this.date=c,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=gi(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=gi(this.s)),this.hV},void 0!==l&&(void 0!==l.str?this.setString(l.str):"string"==typeof l&&l.match(/^[0-9]{14}Z$/)?this.setString(l):void 0!==l.hex?this.setStringHex(l.hex):void 0!==l.date&&this.setByDate(l.date),!0===l.millis&&(this.withMillis=!0))},g.lang.extend($.asn1.DERGeneralizedTime,$.asn1.DERAbstractTime),$.asn1.DERSequence=function(l){$.asn1.DERSequence.superclass.constructor.call(this,l),this.hT="30",this.getFreshValueHex=function(){for(var c="",u=0;u<this.asn1Array.length;u++)c+=this.asn1Array[u].getEncodedHex();return this.hV=c,this.hV}},g.lang.extend($.asn1.DERSequence,$.asn1.DERAbstractStructured),$.asn1.DERSet=function(l){$.asn1.DERSet.superclass.constructor.call(this,l),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var c=new Array,u=0;u<this.asn1Array.length;u++)c.push(this.asn1Array[u].getEncodedHex());return 1==this.sortFlag&&c.sort(),this.hV=c.join(""),this.hV},void 0!==l&&void 0!==l.sortflag&&0==l.sortflag&&(this.sortFlag=!1)},g.lang.extend($.asn1.DERSet,$.asn1.DERAbstractStructured),$.asn1.DERTaggedObject=function(l){$.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(c,u,f){this.hT=u,this.isExplicit=c,this.asn1Object=f,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=f.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,u),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==l&&(void 0!==l.tag&&(this.hT=l.tag),void 0!==l.explicit&&(this.isExplicit=l.explicit),void 0!==l.obj&&(this.asn1Object=l.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},g.lang.extend($.asn1.DERTaggedObject,$.asn1.ASN1Object);var $,is,$r,Ye=new function(){};function Ql(l){for(var c=new Array,u=0;u<l.length;u++)c[u]=l.charCodeAt(u);return c}function Zl(l){for(var c="",u=0;u<l.length;u++)c+=String.fromCharCode(l[u]);return c}function Ys(l){for(var c="",u=0;u<l.length;u++){var f=l[u].toString(16);1==f.length&&(f="0"+f),c+=f}return c}function gi(l){return Ys(Ql(l))}function Qs(l){return(l=(l=l.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function It(l){return l.length%4==2?l+="==":l.length%4==3&&(l+="="),(l=l.replace(/-/g,"+")).replace(/_/g,"/")}function cn(l){return l.length%2==1&&(l="0"+l),Qs(Ee(l))}function Xe(l){return Ke(It(l))}function os(l){return ea(gc(l))}function Pn(l){return decodeURIComponent(pc(l))}function ht(l){for(var c="",u=0;u<l.length-1;u+=2)c+=String.fromCharCode(parseInt(l.substr(u,2),16));return c}function Ge(l){for(var c="",u=0;u<l.length;u++)c+=("0"+l.charCodeAt(u).toString(16)).slice(-2);return c}function Zs(l){return Ee(l)}function Xs(l){return Zs(l).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function Tf(l){return Ke(l.replace(/[^0-9A-Za-z\/+=]*/g,""))}function we(l,c){return"-----BEGIN "+c+"-----\r\n"+Xs(l)+"\r\n-----END "+c+"-----\r\n"}function Wr(l,c){if(-1==l.indexOf("-----BEGIN "))throw"can't find PEM header: "+c;return Tf(l=void 0!==c?(l=l.replace("-----BEGIN "+c+"-----","")).replace("-----END "+c+"-----",""):(l=l.replace(/-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----/,""))}function it(l){var c,u,f,p,w,I,U,B,W,J,G;if(G=l.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return B=G[1],c=parseInt(B),2===B.length&&(50<=c&&c<100?c=1900+c:0<=c&&c<50&&(c=2e3+c)),u=parseInt(G[2])-1,f=parseInt(G[3]),p=parseInt(G[4]),w=parseInt(G[5]),I=parseInt(G[6]),U=0,""!==(W=G[7])&&(J=(W.substr(1)+"00").substr(0,3),U=parseInt(J)),Date.UTC(c,u,f,p,w,I,U);throw"unsupported zulu format: "+l}function Rt(l){return~~(it(l)/1e3)}function ea(l){return l.replace(/%/g,"")}function pc(l){return l.replace(/(..)/g,"%$1")}function Xl(l){var c="malformed IPv6 address";if(!l.match(/^[0-9A-Fa-f:]+$/))throw c;var u=(l=l.toLowerCase()).split(":").length-1;if(u<2)throw c;var f=":".repeat(7-u+2),p=(l=l.replace("::",f)).split(":");if(8!=p.length)throw c;for(var w=0;w<8;w++)p[w]=("0000"+p[w]).slice(-4);return p.join("")}function ss(l){if(!l.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var c=(l=l.toLowerCase()).match(/.{1,4}/g),u=0;u<8;u++)c[u]=c[u].replace(/^0+/,""),""==c[u]&&(c[u]="0");var f=(l=":"+c.join(":")+":").match(/:(0:){2,}/g);if(null===f)return l.slice(1,-1);var p="";for(u=0;u<f.length;u++)f[u].length>p.length&&(p=f[u]);return(l=l.replace(p,"::")).slice(1,-1)}function rr(l){var c="malformed hex value";if(!l.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw c;if(8!=l.length)return 32==l.length?ss(l):l;try{return parseInt(l.substr(0,2),16)+"."+parseInt(l.substr(2,2),16)+"."+parseInt(l.substr(4,2),16)+"."+parseInt(l.substr(6,2),16)}catch{throw c}}function gc(l){for(var c=encodeURIComponent(l),u="",f=0;f<c.length;f++)"%"==c[f]?(u+=c.substr(f,3),f+=2):u=u+"%"+gi(c[f]);return u}function mc(l){return l.length%2==1?"0"+l:l.substr(0,1)>"7"?"00"+l:l}Ye.getLblen=function(l,c){if("8"!=l.substr(c+2,1))return 1;var u=parseInt(l.substr(c+3,1));return 0==u?-1:0<u&&u<10?u+1:-2},Ye.getL=function(l,c){var u=Ye.getLblen(l,c);return u<1?"":l.substr(c+2,2*u)},Ye.getVblen=function(l,c){var u;return""==(u=Ye.getL(l,c))?-1:("8"===u.substr(0,1)?new Z(u.substr(2),16):new Z(u,16)).intValue()},Ye.getVidx=function(l,c){var u=Ye.getLblen(l,c);return u<0?u:c+2*(u+1)},Ye.getV=function(l,c){var u=Ye.getVidx(l,c),f=Ye.getVblen(l,c);return l.substr(u,2*f)},Ye.getTLV=function(l,c){return l.substr(c,2)+Ye.getL(l,c)+Ye.getV(l,c)},Ye.getNextSiblingIdx=function(l,c){return Ye.getVidx(l,c)+2*Ye.getVblen(l,c)},Ye.getChildIdx=function(l,c){var u=Ye,f=new Array,p=u.getVidx(l,c);"03"==l.substr(c,2)?f.push(p+2):f.push(p);for(var w=u.getVblen(l,c),I=p,U=0;;){var B=u.getNextSiblingIdx(l,I);if(null==B||B-p>=2*w||U>=200)break;f.push(B),I=B,U++}return f},Ye.getNthChildIdx=function(l,c,u){return Ye.getChildIdx(l,c)[u]},Ye.getIdxbyList=function(l,c,u,f){var p,w,I=Ye;if(0==u.length){if(void 0!==f&&l.substr(c,2)!==f)throw"checking tag doesn't match: "+l.substr(c,2)+"!="+f;return c}return p=u.shift(),w=I.getChildIdx(l,c),I.getIdxbyList(l,w[p],u,f)},Ye.getTLVbyList=function(l,c,u,f){var p=Ye,w=p.getIdxbyList(l,c,u);if(void 0===w)throw"can't find nthList object";if(void 0!==f&&l.substr(w,2)!=f)throw"checking tag doesn't match: "+l.substr(w,2)+"!="+f;return p.getTLV(l,w)},Ye.getVbyList=function(l,c,u,f,p){var w,I,U=Ye;if(void 0===(w=U.getIdxbyList(l,c,u,f)))throw"can't find nthList object";return I=U.getV(l,w),!0===p&&(I=I.substr(2)),I},Ye.hextooidstr=function(l){var c=function(K,X){return K.length>=X?K:new Array(X-K.length+1).join("0")+K},u=[],f=l.substr(0,2),p=parseInt(f,16);u[0]=new String(Math.floor(p/40)),u[1]=new String(p%40);for(var w=l.substr(2),I=[],U=0;U<w.length/2;U++)I.push(parseInt(w.substr(2*U,2),16));var B=[],W="";for(U=0;U<I.length;U++)128&I[U]?W+=c((127&I[U]).toString(2),7):(W+=c((127&I[U]).toString(2),7),B.push(new String(parseInt(W,2))),W="");var J=u.join(".");return B.length>0&&(J=J+"."+B.join(".")),J},Ye.dump=function(l,c,u,f){var p=Ye,w=p.getV,I=p.dump,U=p.getChildIdx,B=l;l instanceof $.asn1.ASN1Object&&(B=l.getEncodedHex());var W=function(Dt,Vt){return Dt.length<=2*Vt?Dt:Dt.substr(0,Vt)+"..(total "+Dt.length/2+"bytes).."+Dt.substr(Dt.length-Vt,Vt)};void 0===c&&(c={ommit_long_octet:32}),void 0===u&&(u=0),void 0===f&&(f="");var J=c.ommit_long_octet;if("01"==B.substr(u,2))return"00"==(G=w(B,u))?f+"BOOLEAN FALSE\n":f+"BOOLEAN TRUE\n";if("02"==B.substr(u,2))return f+"INTEGER "+W(G=w(B,u),J)+"\n";if("03"==B.substr(u,2))return f+"BITSTRING "+W(G=w(B,u),J)+"\n";if("04"==B.substr(u,2)){var G=w(B,u);return p.isASN1HEX(G)?(K=f+"OCTETSTRING, encapsulates\n")+I(G,c,0,f+"  "):f+"OCTETSTRING "+W(G,J)+"\n"}if("05"==B.substr(u,2))return f+"NULL\n";if("06"==B.substr(u,2)){var X=w(B,u),oe=$.asn1.ASN1Util.oidHexToInt(X),ae=$.asn1.x509.OID.oid2name(oe),le=oe.replace(/\./g," ");return""!=ae?f+"ObjectIdentifier "+ae+" ("+le+")\n":f+"ObjectIdentifier ("+le+")\n"}if("0c"==B.substr(u,2))return f+"UTF8String '"+Pn(w(B,u))+"'\n";if("13"==B.substr(u,2))return f+"PrintableString '"+Pn(w(B,u))+"'\n";if("14"==B.substr(u,2))return f+"TeletexString '"+Pn(w(B,u))+"'\n";if("16"==B.substr(u,2))return f+"IA5String '"+Pn(w(B,u))+"'\n";if("17"==B.substr(u,2))return f+"UTCTime "+Pn(w(B,u))+"\n";if("18"==B.substr(u,2))return f+"GeneralizedTime "+Pn(w(B,u))+"\n";if("30"==B.substr(u,2)){if("3000"==B.substr(u,4))return f+"SEQUENCE {}\n";K=f+"SEQUENCE\n";var De=c;if((2==(Oe=U(B,u)).length||3==Oe.length)&&"06"==B.substr(Oe[0],2)&&"04"==B.substr(Oe[Oe.length-1],2)){ae=p.oidname(w(B,Oe[0]));var _e=JSON.parse(JSON.stringify(c));_e.x509ExtName=ae,De=_e}for(var Me=0;Me<Oe.length;Me++)K+=I(B,De,Oe[Me],f+"  ");return K}if("31"==B.substr(u,2)){K=f+"SET\n";var Oe=U(B,u);for(Me=0;Me<Oe.length;Me++)K+=I(B,c,Oe[Me],f+"  ");return K}var Ae=parseInt(B.substr(u,2),16);if(0!=(128&Ae)){var je=31&Ae;if(0!=(32&Ae)){var K=f+"["+je+"]\n";for(Oe=U(B,u),Me=0;Me<Oe.length;Me++)K+=I(B,c,Oe[Me],f+"  ");return K}return"68747470"==(G=w(B,u)).substr(0,8)&&(G=Pn(G)),"subjectAltName"===c.x509ExtName&&2==je&&(G=Pn(G)),f+"["+je+"] "+G+"\n"}return f+"UNKNOWN("+B.substr(u,2)+") "+w(B,u)+"\n"},Ye.isASN1HEX=function(l){var c=Ye;if(l.length%2==1)return!1;var u=c.getVblen(l,0),f=l.substr(0,2),p=c.getL(l,0);return l.length-f.length-p.length==2*u},Ye.oidname=function(l){var c=$.asn1;$.lang.String.isHex(l)&&(l=c.ASN1Util.oidHexToInt(l));var u=c.x509.OID.oid2name(l);return""===u&&(u=l),u},void 0!==$&&$||(N.KJUR=$={}),void 0!==$.lang&&$.lang||($.lang={}),$.lang.String=function(){},"function"==typeof k?(N.utf8tob64u=is=function(c){return Qs(new k(c,"utf8").toString("base64"))},N.b64utoutf8=$r=function(c){return new k(It(c),"base64").toString("utf8")}):(N.utf8tob64u=is=function(c){return cn(ea(gc(c)))},N.b64utoutf8=$r=function(c){return decodeURIComponent(pc(Xe(c)))}),$.lang.String.isInteger=function(l){return!!l.match(/^[0-9]+$/)||!!l.match(/^-[0-9]+$/)},$.lang.String.isHex=function(l){return!(l.length%2!=0||!l.match(/^[0-9a-f]+$/)&&!l.match(/^[0-9A-F]+$/))},$.lang.String.isBase64=function(l){return!(!(l=l.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||l.length%4!=0)},$.lang.String.isBase64URL=function(l){return!l.match(/[+/=]/)&&(l=It(l),$.lang.String.isBase64(l))},$.lang.String.isIntegerArray=function(l){return!!(l=l.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},void 0!==$&&$||(N.KJUR=$={}),void 0!==$.crypto&&$.crypto||($.crypto={}),$.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:z.algo.MD5,sha1:z.algo.SHA1,sha224:z.algo.SHA224,sha256:z.algo.SHA256,sha384:z.algo.SHA384,sha512:z.algo.SHA512,ripemd160:z.algo.RIPEMD160},this.getDigestInfoHex=function(l,c){if(void 0===this.DIGESTINFOHEAD[c])throw"alg not supported in Util.DIGESTINFOHEAD: "+c;return this.DIGESTINFOHEAD[c]+l},this.getPaddedDigestInfoHex=function(l,c,u){var f=this.getDigestInfoHex(l,c),p=u/4;if(f.length+22>p)throw"key is too short for SigAlg: keylen="+u+","+c;for(var w="0001",I="00"+f,U="",B=p-w.length-I.length,W=0;W<B;W+=2)U+="ff";return w+U+I},this.hashString=function(l,c){return new $.crypto.MessageDigest({alg:c}).digestString(l)},this.hashHex=function(l,c){return new $.crypto.MessageDigest({alg:c}).digestHex(l)},this.sha1=function(l){return new $.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(l)},this.sha256=function(l){return new $.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(l)},this.sha256Hex=function(l){return new $.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(l)},this.sha512=function(l){return new $.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(l)},this.sha512Hex=function(l){return new $.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(l)}},$.crypto.Util.md5=function(l){return new $.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(l)},$.crypto.Util.ripemd160=function(l){return new $.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(l)},$.crypto.Util.SECURERANDOMGEN=new Ur,$.crypto.Util.getRandomHexOfNbytes=function(l){var c=new Array(l);return $.crypto.Util.SECURERANDOMGEN.nextBytes(c),Ys(c)},$.crypto.Util.getRandomBigIntegerOfNbytes=function(l){return new Z($.crypto.Util.getRandomHexOfNbytes(l),16)},$.crypto.Util.getRandomHexOfNbits=function(l){var c=l%8,u=new Array((l-c)/8+1);return $.crypto.Util.SECURERANDOMGEN.nextBytes(u),u[0]=(255<<c&255^255)&u[0],Ys(u)},$.crypto.Util.getRandomBigIntegerOfNbits=function(l){return new Z($.crypto.Util.getRandomHexOfNbits(l),16)},$.crypto.Util.getRandomBigIntegerZeroToMax=function(l){for(var c=l.bitLength();;){var u=$.crypto.Util.getRandomBigIntegerOfNbits(c);if(-1!=l.compareTo(u))return u}},$.crypto.Util.getRandomBigIntegerMinToMax=function(l,c){var u=l.compareTo(c);if(1==u)throw"biMin is greater than biMax";if(0==u)return l;var f=c.subtract(l);return $.crypto.Util.getRandomBigIntegerZeroToMax(f).add(l)},$.crypto.MessageDigest=function(l){this.setAlgAndProvider=function(c,u){if(null!==(c=$.crypto.MessageDigest.getCanonicalAlgName(c))&&void 0===u&&(u=$.crypto.Util.DEFAULTPROVIDER[c]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(c)&&"cryptojs"==u){try{this.md=$.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[c].create()}catch(f){throw"setAlgAndProvider hash alg set fail alg="+c+"/"+f}this.updateString=function(f){this.md.update(f)},this.updateHex=function(f){var p=z.enc.Hex.parse(f);this.md.update(p)},this.digest=function(){return this.md.finalize().toString(z.enc.Hex)},this.digestString=function(f){return this.updateString(f),this.digest()},this.digestHex=function(f){return this.updateHex(f),this.digest()}}if(-1!=":sha256:".indexOf(c)&&"sjcl"==u){try{this.md=new sjcl.hash.sha256}catch(f){throw"setAlgAndProvider hash alg set fail alg="+c+"/"+f}this.updateString=function(f){this.md.update(f)},this.updateHex=function(f){var p=sjcl.codec.hex.toBits(f);this.md.update(p)},this.digest=function(){var f=this.md.finalize();return sjcl.codec.hex.fromBits(f)},this.digestString=function(f){return this.updateString(f),this.digest()},this.digestHex=function(f){return this.updateHex(f),this.digest()}}},this.updateString=function(c){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(c){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(c){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(c){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==l&&void 0!==l.alg&&(this.algName=l.alg,void 0===l.prov&&(this.provName=$.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},$.crypto.MessageDigest.getCanonicalAlgName=function(l){return"string"==typeof l&&(l=(l=l.toLowerCase()).replace(/-/,"")),l},$.crypto.MessageDigest.getHashLength=function(l){var c=$.crypto.MessageDigest,u=c.getCanonicalAlgName(l);if(void 0===c.HASHLENGTH[u])throw"not supported algorithm: "+l;return c.HASHLENGTH[u]},$.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},$.crypto.Mac=function(l){this.setAlgAndProvider=function(c,u){if(null==(c=c.toLowerCase())&&(c="hmacsha1"),"hmac"!=(c=c.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+c;void 0===u&&(u=$.crypto.Util.DEFAULTPROVIDER[c]),this.algProv=c+"/"+u;var f=c.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(f)&&"cryptojs"==u){try{this.mac=z.algo.HMAC.create($.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[f],this.pass)}catch(w){throw"setAlgAndProvider hash alg set fail hashAlg="+f+"/"+w}this.updateString=function(w){this.mac.update(w)},this.updateHex=function(w){var I=z.enc.Hex.parse(w);this.mac.update(I)},this.doFinal=function(){return this.mac.finalize().toString(z.enc.Hex)},this.doFinalString=function(w){return this.updateString(w),this.doFinal()},this.doFinalHex=function(w){return this.updateHex(w),this.doFinal()}}},this.updateString=function(c){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(c){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(c){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(c){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(c){if("string"==typeof c){var u=c;return c.length%2!=1&&c.match(/^[0-9A-Fa-f]+$/)||(u=Ge(c)),void(this.pass=z.enc.Hex.parse(u))}if("object"!=(void 0===c?"undefined":y(c)))throw"KJUR.crypto.Mac unsupported password type: "+c;if(u=null,void 0!==c.hex){if(c.hex.length%2!=0||!c.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+c.hex;u=c.hex}if(void 0!==c.utf8&&(u=os(c.utf8)),void 0!==c.rstr&&(u=Ge(c.rstr)),void 0!==c.b64&&(u=Ke(c.b64)),void 0!==c.b64u&&(u=Xe(c.b64u)),null==u)throw"KJUR.crypto.Mac unsupported password type: "+c;this.pass=z.enc.Hex.parse(u)},void 0!==l&&(void 0!==l.pass&&this.setPassword(l.pass),void 0!==l.alg&&(this.algName=l.alg,void 0===l.prov&&(this.provName=$.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},$.crypto.Signature=function(l){var c=null;if(this._setAlgNames=function(){var u=this.algName.match(/^(.+)with(.+)$/);u&&(this.mdAlgName=u[1].toLowerCase(),this.pubkeyAlgName=u[2].toLowerCase())},this._zeroPaddingOfSignature=function(u,f){for(var p="",w=f/4-u.length,I=0;I<w;I++)p+="0";return p+u},this.setAlgAndProvider=function(u,f){if(this._setAlgNames(),"cryptojs/jsrsa"!=f)throw"provider not supported: "+f;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new $.crypto.MessageDigest({alg:this.mdAlgName})}catch(p){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+p}this.init=function(p,w){var I=null;try{I=void 0===w?Ln.getKey(p):Ln.getKey(p,w)}catch(U){throw"init failed:"+U}if(!0===I.isPrivate)this.prvKey=I,this.state="SIGN";else{if(!0!==I.isPublic)throw"init failed.:"+I;this.pubKey=I,this.state="VERIFY"}},this.updateString=function(p){this.md.updateString(p)},this.updateHex=function(p){this.md.updateHex(p)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0!==this.ecprvhex&&void 0!==this.eccurvename){var p=new $.crypto.ECDSA({curve:this.eccurvename});this.hSign=p.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof et&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof et&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof $.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof $.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(p){return this.updateString(p),this.sign()},this.signHex=function(p){return this.updateHex(p),this.sign()},this.verify=function(p){if(this.sHashHex=this.md.digest(),void 0!==this.ecpubhex&&void 0!==this.eccurvename)return new $.crypto.ECDSA({curve:this.eccurvename}).verifyHex(this.sHashHex,p,this.ecpubhex);if(this.pubKey instanceof et&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,p,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof et&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,p);if(void 0!==$.crypto.ECDSA&&this.pubKey instanceof $.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,p);if(void 0!==$.crypto.DSA&&this.pubKey instanceof $.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,p);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(u,f){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(u){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(u){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(u){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(u){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(u){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=l,void 0!==l&&(void 0!==l.alg&&(this.algName=l.alg,this.provName=void 0===l.prov?$.crypto.Util.DEFAULTPROVIDER[this.algName]:l.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==l.psssaltlen&&(this.pssSaltLen=l.psssaltlen),void 0!==l.prvkeypem)){if(void 0!==l.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{c=Ln.getKey(l.prvkeypem),this.init(c)}catch(u){throw"fatal error to load pem private key: "+u}}},$.crypto.Cipher=function(l){},$.crypto.Cipher.encrypt=function(l,c,u){if(c instanceof et&&c.isPublic){var f=$.crypto.Cipher.getAlgByKeyAndName(c,u);if("RSA"===f)return c.encrypt(l);if("RSAOAEP"===f)return c.encryptOAEP(l,"sha1");var p=f.match(/^RSAOAEP(\d+)$/);if(null!==p)return c.encryptOAEP(l,"sha"+p[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+u}throw"Cipher.encrypt: unsupported key or algorithm"},$.crypto.Cipher.decrypt=function(l,c,u){if(c instanceof et&&c.isPrivate){var f=$.crypto.Cipher.getAlgByKeyAndName(c,u);if("RSA"===f)return c.decrypt(l);if("RSAOAEP"===f)return c.decryptOAEP(l,"sha1");var p=f.match(/^RSAOAEP(\d+)$/);if(null!==p)return c.decryptOAEP(l,"sha"+p[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+u}throw"Cipher.decrypt: unsupported key or algorithm"},$.crypto.Cipher.getAlgByKeyAndName=function(l,c){if(l instanceof et){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(c))return c;if(null==c)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+c}throw"getAlgByKeyAndName: not supported algorithm name: "+c},$.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==$&&$||(N.KJUR=$={}),void 0!==$.crypto&&$.crypto||($.crypto={}),$.crypto.ECDSA=function(l){var c=new Ur;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(u){return new Z(u.bitLength(),c).mod(u.subtract(Z.ONE)).add(Z.ONE)},this.setNamedCurve=function(u){this.ecparams=$.crypto.ECParameterDB.getByName(u),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=u},this.setPrivateKeyHex=function(u){this.isPrivate=!0,this.prvKeyHex=u},this.setPublicKeyHex=function(u){this.isPublic=!0,this.pubKeyHex=u},this.getPublicKeyXYHex=function(){var u=this.pubKeyHex;if("04"!==u.substr(0,2))throw"this method supports uncompressed format(04) only";var f=this.ecparams.keylen/4;if(u.length!==2+2*f)throw"malformed public key hex length";var p={};return p.x=u.substr(2,f),p.y=u.substr(2+f),p},this.getShortNISTPCurveName=function(){var u=this.curveName;return"secp256r1"===u||"NIST P-256"===u||"P-256"===u||"prime256v1"===u?"P-256":"secp384r1"===u||"NIST P-384"===u||"P-384"===u?"P-384":null},this.generateKeyPairHex=function(){var f=this.getBigRandom(this.ecparams.n),p=this.ecparams.G.multiply(f),w=p.getX().toBigInteger(),I=p.getY().toBigInteger(),U=this.ecparams.keylen/4,B=("0000000000"+f.toString(16)).slice(-U),W="04"+("0000000000"+w.toString(16)).slice(-U)+("0000000000"+I.toString(16)).slice(-U);return this.setPrivateKeyHex(B),this.setPublicKeyHex(W),{ecprvhex:B,ecpubhex:W}},this.signWithMessageHash=function(u){return this.signHex(u,this.prvKeyHex)},this.signHex=function(u,f){var p=new Z(f,16),w=this.ecparams.n,I=new Z(u,16);do{var U=this.getBigRandom(w),B=this.ecparams.G.multiply(U).getX().toBigInteger().mod(w)}while(B.compareTo(Z.ZERO)<=0);var W=U.modInverse(w).multiply(I.add(p.multiply(B))).mod(w);return $.crypto.ECDSA.biRSSigToASN1Sig(B,W)},this.sign=function(u,f){var p=f,w=this.ecparams.n,I=Z.fromByteArrayUnsigned(u);do{var U=this.getBigRandom(w),B=this.ecparams.G.multiply(U).getX().toBigInteger().mod(w)}while(B.compareTo(Z.ZERO)<=0);var W=U.modInverse(w).multiply(I.add(p.multiply(B))).mod(w);return this.serializeSig(B,W)},this.verifyWithMessageHash=function(u,f){return this.verifyHex(u,f,this.pubKeyHex)},this.verifyHex=function(u,f,p){var w,I,U,B=$.crypto.ECDSA.parseSigHex(f);w=B.r,I=B.s,U=Et.decodeFromHex(this.ecparams.curve,p);var W=new Z(u,16);return this.verifyRaw(W,w,I,U)},this.verify=function(u,f,p){var w,I,U;if(Bitcoin.Util.isArray(f)){var B=this.parseSig(f);w=B.r,I=B.s}else{if("object"!==(void 0===f?"undefined":y(f))||!f.r||!f.s)throw"Invalid value for signature";w=f.r,I=f.s}if(p instanceof Et)U=p;else{if(!Bitcoin.Util.isArray(p))throw"Invalid format for pubkey value, must be byte array or ECPointFp";U=Et.decodeFrom(this.ecparams.curve,p)}var W=Z.fromByteArrayUnsigned(u);return this.verifyRaw(W,w,I,U)},this.verifyRaw=function(u,f,p,w){var I=this.ecparams.n,U=this.ecparams.G;if(f.compareTo(Z.ONE)<0||f.compareTo(I)>=0||p.compareTo(Z.ONE)<0||p.compareTo(I)>=0)return!1;var B=p.modInverse(I),W=u.multiply(B).mod(I),J=f.multiply(B).mod(I);return U.multiply(W).add(w.multiply(J)).getX().toBigInteger().mod(I).equals(f)},this.serializeSig=function(u,f){var p=u.toByteArraySigned(),w=f.toByteArraySigned(),I=[];return I.push(2),I.push(p.length),(I=I.concat(p)).push(2),I.push(w.length),(I=I.concat(w)).unshift(I.length),I.unshift(48),I},this.parseSig=function(u){var f;if(48!=u[0])throw new Error("Signature not a valid DERSequence");if(2!=u[f=2])throw new Error("First element in signature must be a DERInteger");var p=u.slice(f+2,f+2+u[f+1]);if(2!=u[f+=2+u[f+1]])throw new Error("Second element in signature must be a DERInteger");var w=u.slice(f+2,f+2+u[f+1]);return f+=2+u[f+1],{r:Z.fromByteArrayUnsigned(p),s:Z.fromByteArrayUnsigned(w)}},this.parseSigCompact=function(u){if(65!==u.length)throw"Signature has the wrong length";var f=u[0]-27;if(f<0||f>7)throw"Invalid signature type";var p=this.ecparams.n;return{r:Z.fromByteArrayUnsigned(u.slice(1,33)).mod(p),s:Z.fromByteArrayUnsigned(u.slice(33,65)).mod(p),i:f}},this.readPKCS5PrvKeyHex=function(u){var f,p,w,U=$.crypto.ECDSA.getName,B=Ye.getVbyList;if(!1===Ye.isASN1HEX(u))throw"not ASN.1 hex string";try{f=B(u,0,[2,0],"06"),p=B(u,0,[1],"04");try{w=B(u,0,[3,0],"03").substr(2)}catch{}}catch{throw"malformed PKCS#1/5 plain ECC private key"}if(this.curveName=U(f),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(w),this.setPrivateKeyHex(p),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(u){var f,p,w,U=$.crypto.ECDSA.getName,B=Ye.getVbyList;if(!1===Ye.isASN1HEX(u))throw"not ASN.1 hex string";try{B(u,0,[1,0],"06"),f=B(u,0,[1,1],"06"),p=B(u,0,[2,0,1],"04");try{w=B(u,0,[2,0,2,0],"03").substr(2)}catch{}}catch{throw"malformed PKCS#8 plain ECC private key"}if(this.curveName=U(f),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(w),this.setPrivateKeyHex(p),this.isPublic=!1},this.readPKCS8PubKeyHex=function(u){var f,p,I=$.crypto.ECDSA.getName,U=Ye.getVbyList;if(!1===Ye.isASN1HEX(u))throw"not ASN.1 hex string";try{U(u,0,[0,0],"06"),f=U(u,0,[0,1],"06"),p=U(u,0,[1],"03").substr(2)}catch{throw"malformed PKCS#8 ECC public key"}if(this.curveName=I(f),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(p)},this.readCertPubKeyHex=function(u,f){5!==f&&(f=6);var p,w,U=$.crypto.ECDSA.getName,B=Ye.getVbyList;if(!1===Ye.isASN1HEX(u))throw"not ASN.1 hex string";try{p=B(u,0,[0,f,0,1],"06"),w=B(u,0,[0,f,1],"03").substr(2)}catch{throw"malformed X.509 certificate ECC public key"}if(this.curveName=U(p),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(w)},void 0!==l&&void 0!==l.curve&&(this.curveName=l.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==l&&(void 0!==l.prv&&this.setPrivateKeyHex(l.prv),void 0!==l.pub&&this.setPublicKeyHex(l.pub))},$.crypto.ECDSA.parseSigHex=function(l){var c=$.crypto.ECDSA.parseSigHexInHexRS(l);return{r:new Z(c.r,16),s:new Z(c.s,16)}},$.crypto.ECDSA.parseSigHexInHexRS=function(l){var u=Ye.getChildIdx,f=Ye.getV;if("30"!=l.substr(0,2))throw"signature is not a ASN.1 sequence";var p=u(l,0);if(2!=p.length)throw"number of signature ASN.1 sequence elements seem wrong";var w=p[0],I=p[1];if("02"!=l.substr(w,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=l.substr(I,2))throw"2nd item of sequene of signature is not ASN.1 integer";return{r:f(l,w),s:f(l,I)}},$.crypto.ECDSA.asn1SigToConcatSig=function(l){var c=$.crypto.ECDSA.parseSigHexInHexRS(l),u=c.r,f=c.s;if("00"==u.substr(0,2)&&u.length%32==2&&(u=u.substr(2)),"00"==f.substr(0,2)&&f.length%32==2&&(f=f.substr(2)),u.length%32==30&&(u="00"+u),f.length%32==30&&(f="00"+f),u.length%32!=0)throw"unknown ECDSA sig r length error";if(f.length%32!=0)throw"unknown ECDSA sig s length error";return u+f},$.crypto.ECDSA.concatSigToASN1Sig=function(l){if(l.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var c=l.substr(0,l.length/2),u=l.substr(l.length/2);return $.crypto.ECDSA.hexRSSigToASN1Sig(c,u)},$.crypto.ECDSA.hexRSSigToASN1Sig=function(l,c){var u=new Z(l,16),f=new Z(c,16);return $.crypto.ECDSA.biRSSigToASN1Sig(u,f)},$.crypto.ECDSA.biRSSigToASN1Sig=function(l,c){var u=$.asn1,f=new u.DERInteger({bigint:l}),p=new u.DERInteger({bigint:c});return new u.DERSequence({array:[f,p]}).getEncodedHex()},$.crypto.ECDSA.getName=function(l){return"2a8648ce3d030107"===l?"secp256r1":"2b8104000a"===l?"secp256k1":"2b81040022"===l?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(l)?"secp256r1":-1!=="|secp256k1|".indexOf(l)?"secp256k1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(l)?"secp384r1":null},void 0!==$&&$||(N.KJUR=$={}),void 0!==$.crypto&&$.crypto||($.crypto={}),$.crypto.ECParameterDB=new function(){var l={},c={};function u(f){return new Z(f,16)}this.getByName=function(f){var p=f;if(void 0!==c[p]&&(p=c[f]),void 0!==l[p])return l[p];throw"unregistered EC curve name: "+p},this.regist=function(f,p,w,I,U,B,W,J,G,K,X,oe){l[f]={};var ae=u(w),le=u(I),De=u(U),_e=u(B),Me=u(W),Oe=new Li(ae,le,De),Ae=Oe.decodePointHex("04"+J+G);l[f].name=f,l[f].keylen=p,l[f].curve=Oe,l[f].G=Ae,l[f].n=_e,l[f].h=Me,l[f].oid=X,l[f].info=oe;for(var je=0;je<K.length;je++)c[K[je]]=f}},$.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),$.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),$.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),$.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),$.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),$.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),$.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),$.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),$.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),$.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var Ln=function(){var l=function(W,J,G){return c(z.AES,W,J,G)},c=function(W,J,G,K){var X=z.enc.Hex.parse(J),oe=z.enc.Hex.parse(G),ae=z.enc.Hex.parse(K),le={};le.key=oe,le.iv=ae,le.ciphertext=X;var De=W.decrypt(le,oe,{iv:ae});return z.enc.Hex.stringify(De)},u=function(W,J,G){return f(z.AES,W,J,G)},f=function(W,J,G,K){var X=z.enc.Hex.parse(J),oe=z.enc.Hex.parse(G),ae=z.enc.Hex.parse(K),le=W.encrypt(X,oe,{iv:ae}),De=z.enc.Hex.parse(le.toString());return z.enc.Base64.stringify(De)},p={"AES-256-CBC":{proc:l,eproc:u,keylen:32,ivlen:16},"AES-192-CBC":{proc:l,eproc:u,keylen:24,ivlen:16},"AES-128-CBC":{proc:l,eproc:u,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(W,J,G){return c(z.TripleDES,W,J,G)},eproc:function(W,J,G){return f(z.TripleDES,W,J,G)},keylen:24,ivlen:8},"DES-CBC":{proc:function(W,J,G){return c(z.DES,W,J,G)},eproc:function(W,J,G){return f(z.DES,W,J,G)},keylen:8,ivlen:8}},w=function(W){var J={},G=W.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));G&&(J.cipher=G[1],J.ivsalt=G[2]);var K=W.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));K&&(J.type=K[1]);var X=-1,oe=0;-1!=W.indexOf("\r\n\r\n")&&(X=W.indexOf("\r\n\r\n"),oe=2),-1!=W.indexOf("\n\n")&&(X=W.indexOf("\n\n"),oe=1);var ae=W.indexOf("-----END");if(-1!=X&&-1!=ae){var le=W.substring(X+2*oe,ae-oe);le=le.replace(/\s+/g,""),J.data=le}return J},I=function(W,J,G){for(var K=G.substring(0,16),X=z.enc.Hex.parse(K),oe=z.enc.Utf8.parse(J),ae=p[W].keylen+p[W].ivlen,le="",De=null;;){var _e=z.algo.MD5.create();if(null!=De&&_e.update(De),_e.update(oe),_e.update(X),De=_e.finalize(),(le+=z.enc.Hex.stringify(De)).length>=2*ae)break}var Me={};return Me.keyhex=le.substr(0,2*p[W].keylen),Me.ivhex=le.substr(2*p[W].keylen,2*p[W].ivlen),Me},U=function(W,J,G,K){var X=z.enc.Base64.parse(W),oe=z.enc.Hex.stringify(X);return(0,p[J].proc)(oe,G,K)};return{version:"1.0.0",parsePKCS5PEM:function(W){return w(W)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(W,J,G){return I(W,J,G)},decryptKeyB64:function(W,J,G,K){return U(W,J,G,K)},getDecryptedKeyHex:function(W,J){var G=w(W),K=G.cipher,X=G.ivsalt,oe=G.data,ae=I(K,J,X).keyhex;return U(oe,K,ae,X)},getEncryptedPKCS5PEMFromPrvKeyHex:function(W,J,G,K,X){var De,_e,oe="";if(void 0!==K&&null!=K||(K="AES-256-CBC"),void 0===p[K])throw"KEYUTIL unsupported algorithm: "+K;void 0!==X&&null!=X||(X=(De=p[K].ivlen,_e=z.lib.WordArray.random(De),z.enc.Hex.stringify(_e)).toUpperCase());var ae=function(De,_e,Me,Oe){return(0,p[_e].eproc)(De,Me,Oe)}(J,K,I(K,G,X).keyhex,X);return oe="-----BEGIN "+W+" PRIVATE KEY-----\r\n",oe+="Proc-Type: 4,ENCRYPTED\r\n",oe+="DEK-Info: "+K+","+X+"\r\n",oe+="\r\n",(oe+=ae.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+W+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(W){var G=Ye.getChildIdx,K=Ye.getV,X={},oe=G(W,0);if(2!=oe.length)throw"malformed format: SEQUENCE(0).items != 2: "+oe.length;X.ciphertext=K(W,oe[1]);var ae=G(W,oe[0]);if(2!=ae.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+ae.length;if("2a864886f70d01050d"!=K(W,ae[0]))throw"this only supports pkcs5PBES2";var le=G(W,ae[1]);if(2!=ae.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+le.length;var De=G(W,le[1]);if(2!=De.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+De.length;if("2a864886f70d0307"!=K(W,De[0]))throw"this only supports TripleDES";X.encryptionSchemeAlg="TripleDES",X.encryptionSchemeIV=K(W,De[1]);var _e=G(W,le[0]);if(2!=_e.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+_e.length;if("2a864886f70d01050c"!=K(W,_e[0]))throw"this only supports pkcs5PBKDF2";var Me=G(W,_e[1]);if(Me.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+Me.length;X.pbkdf2Salt=K(W,Me[0]);var Oe=K(W,Me[1]);try{X.pbkdf2Iter=parseInt(Oe,16)}catch{throw"malformed format pbkdf2Iter: "+Oe}return X},getPBKDF2KeyHexFromParam:function(W,J){var G=z.enc.Hex.parse(W.pbkdf2Salt),X=z.PBKDF2(J,G,{keySize:6,iterations:W.pbkdf2Iter});return z.enc.Hex.stringify(X)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(W,J){var G=Wr(W,"ENCRYPTED PRIVATE KEY"),K=this.parseHexOfEncryptedPKCS8(G),X=Ln.getPBKDF2KeyHexFromParam(K,J),oe={};oe.ciphertext=z.enc.Hex.parse(K.ciphertext);var ae=z.enc.Hex.parse(X),le=z.enc.Hex.parse(K.encryptionSchemeIV),De=z.TripleDES.decrypt(oe,ae,{iv:le});return z.enc.Hex.stringify(De)},getKeyFromEncryptedPKCS8PEM:function(W,J){var G=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(W,J);return this.getKeyFromPlainPrivatePKCS8Hex(G)},parsePlainPrivatePKCS8Hex:function(W){var J=Ye,G=J.getChildIdx,K=J.getV,X={algparam:null};if("30"!=W.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var oe=G(W,0);if(3!=oe.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=W.substr(oe[1],2))throw"malformed PKCS8 private key(code:003)";var ae=G(W,oe[1]);if(2!=ae.length)throw"malformed PKCS8 private key(code:004)";if("06"!=W.substr(ae[0],2))throw"malformed PKCS8 private key(code:005)";if(X.algoid=K(W,ae[0]),"06"==W.substr(ae[1],2)&&(X.algparam=K(W,ae[1])),"04"!=W.substr(oe[2],2))throw"malformed PKCS8 private key(code:006)";return X.keyidx=J.getVidx(W,oe[2]),X},getKeyFromPlainPrivatePKCS8PEM:function(W){var J=Wr(W,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(J)},getKeyFromPlainPrivatePKCS8Hex:function(W){var J,G=this.parsePlainPrivatePKCS8Hex(W);if("2a864886f70d010101"==G.algoid)J=new et;else if("2a8648ce380401"==G.algoid)J=new $.crypto.DSA;else{if("2a8648ce3d0201"!=G.algoid)throw"unsupported private key algorithm";J=new $.crypto.ECDSA}return J.readPKCS8PrvKeyHex(W),J},_getKeyFromPublicPKCS8Hex:function(W){var J,G=Ye.getVbyList(W,0,[0,0],"06");if("2a864886f70d010101"===G)J=new et;else if("2a8648ce380401"===G)J=new $.crypto.DSA;else{if("2a8648ce3d0201"!==G)throw"unsupported PKCS#8 public key hex";J=new $.crypto.ECDSA}return J.readPKCS8PubKeyHex(W),J},parsePublicRawRSAKeyHex:function(W){var G=Ye.getChildIdx,K=Ye.getV,X={};if("30"!=W.substr(0,2))throw"malformed RSA key(code:001)";var oe=G(W,0);if(2!=oe.length)throw"malformed RSA key(code:002)";if("02"!=W.substr(oe[0],2))throw"malformed RSA key(code:003)";if(X.n=K(W,oe[0]),"02"!=W.substr(oe[1],2))throw"malformed RSA key(code:004)";return X.e=K(W,oe[1]),X},parsePublicPKCS8Hex:function(W){var J=Ye,G=J.getChildIdx,K=J.getV,X={algparam:null},oe=G(W,0);if(2!=oe.length)throw"outer DERSequence shall have 2 elements: "+oe.length;var ae=oe[0];if("30"!=W.substr(ae,2))throw"malformed PKCS8 public key(code:001)";var le=G(W,ae);if(2!=le.length)throw"malformed PKCS8 public key(code:002)";if("06"!=W.substr(le[0],2))throw"malformed PKCS8 public key(code:003)";if(X.algoid=K(W,le[0]),"06"==W.substr(le[1],2)?X.algparam=K(W,le[1]):"30"==W.substr(le[1],2)&&(X.algparam={},X.algparam.p=J.getVbyList(W,le[1],[0],"02"),X.algparam.q=J.getVbyList(W,le[1],[1],"02"),X.algparam.g=J.getVbyList(W,le[1],[2],"02")),"03"!=W.substr(oe[1],2))throw"malformed PKCS8 public key(code:004)";return X.key=K(W,oe[1]).substr(2),X}}}();Ln.getKey=function(l,c,u){var zt,f=(le=Ye).getChildIdx,p=le.getVbyList,w=$.crypto,I=w.ECDSA,U=w.DSA,B=et,W=Wr,J=Ln;if(void 0!==B&&l instanceof B||void 0!==I&&l instanceof I||void 0!==U&&l instanceof U)return l;if(void 0!==l.curve&&void 0!==l.xy&&void 0===l.d)return new I({pub:l.xy,curve:l.curve});if(void 0!==l.curve&&void 0!==l.d)return new I({prv:l.d,curve:l.curve});if(void 0===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0===l.d)return(ot=new B).setPublic(l.n,l.e),ot;if(void 0===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0!==l.d&&void 0!==l.p&&void 0!==l.q&&void 0!==l.dp&&void 0!==l.dq&&void 0!==l.co&&void 0===l.qi)return(ot=new B).setPrivateEx(l.n,l.e,l.d,l.p,l.q,l.dp,l.dq,l.co),ot;if(void 0===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0!==l.d&&void 0===l.p)return(ot=new B).setPrivate(l.n,l.e,l.d),ot;if(void 0!==l.p&&void 0!==l.q&&void 0!==l.g&&void 0!==l.y&&void 0===l.x)return(ot=new U).setPublic(l.p,l.q,l.g,l.y),ot;if(void 0!==l.p&&void 0!==l.q&&void 0!==l.g&&void 0!==l.y&&void 0!==l.x)return(ot=new U).setPrivate(l.p,l.q,l.g,l.y,l.x),ot;if("RSA"===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0===l.d)return(ot=new B).setPublic(Xe(l.n),Xe(l.e)),ot;if("RSA"===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0!==l.d&&void 0!==l.p&&void 0!==l.q&&void 0!==l.dp&&void 0!==l.dq&&void 0!==l.qi)return(ot=new B).setPrivateEx(Xe(l.n),Xe(l.e),Xe(l.d),Xe(l.p),Xe(l.q),Xe(l.dp),Xe(l.dq),Xe(l.qi)),ot;if("RSA"===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0!==l.d)return(ot=new B).setPrivate(Xe(l.n),Xe(l.e),Xe(l.d)),ot;if("EC"===l.kty&&void 0!==l.crv&&void 0!==l.x&&void 0!==l.y&&void 0===l.d){var G=(Ue=new I({curve:l.crv})).ecparams.keylen/4,K="04"+("0000000000"+Xe(l.x)).slice(-G)+("0000000000"+Xe(l.y)).slice(-G);return Ue.setPublicKeyHex(K),Ue}if("EC"===l.kty&&void 0!==l.crv&&void 0!==l.x&&void 0!==l.y&&void 0!==l.d){G=(Ue=new I({curve:l.crv})).ecparams.keylen/4,K="04"+("0000000000"+Xe(l.x)).slice(-G)+("0000000000"+Xe(l.y)).slice(-G);var X=("0000000000"+Xe(l.d)).slice(-G);return Ue.setPublicKeyHex(K),Ue.setPrivateKeyHex(X),Ue}if("pkcs5prv"===u){var oe,ae=l,le=Ye;if(9===(oe=f(ae,0)).length)(ot=new B).readPKCS5PrvKeyHex(ae);else if(6===oe.length)(ot=new U).readPKCS5PrvKeyHex(ae);else{if(!(oe.length>2&&"04"===ae.substr(oe[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(ot=new I).readPKCS5PrvKeyHex(ae)}return ot}if("pkcs8prv"===u)return J.getKeyFromPlainPrivatePKCS8Hex(l);if("pkcs8pub"===u)return J._getKeyFromPublicPKCS8Hex(l);if("x509pub"===u)return In.getPublicKeyFromCertHex(l);if(-1!=l.indexOf("-END CERTIFICATE-",0)||-1!=l.indexOf("-END X509 CERTIFICATE-",0)||-1!=l.indexOf("-END TRUSTED CERTIFICATE-",0))return In.getPublicKeyFromCertPEM(l);if(-1!=l.indexOf("-END PUBLIC KEY-")){var De=Wr(l,"PUBLIC KEY");return J._getKeyFromPublicPKCS8Hex(De)}if(-1!=l.indexOf("-END RSA PRIVATE KEY-")&&-1==l.indexOf("4,ENCRYPTED")){var _e=W(l,"RSA PRIVATE KEY");return J.getKey(_e,null,"pkcs5prv")}if(-1!=l.indexOf("-END DSA PRIVATE KEY-")&&-1==l.indexOf("4,ENCRYPTED")){var Me=p(zt=W(l,"DSA PRIVATE KEY"),0,[1],"02"),Oe=p(zt,0,[2],"02"),Ae=p(zt,0,[3],"02"),je=p(zt,0,[4],"02"),At=p(zt,0,[5],"02");return(ot=new U).setPrivate(new Z(Me,16),new Z(Oe,16),new Z(Ae,16),new Z(je,16),new Z(At,16)),ot}if(-1!=l.indexOf("-END PRIVATE KEY-"))return J.getKeyFromPlainPrivatePKCS8PEM(l);if(-1!=l.indexOf("-END RSA PRIVATE KEY-")&&-1!=l.indexOf("4,ENCRYPTED")){var Dt=J.getDecryptedKeyHex(l,c),Vt=new et;return Vt.readPKCS5PrvKeyHex(Dt),Vt}if(-1!=l.indexOf("-END EC PRIVATE KEY-")&&-1!=l.indexOf("4,ENCRYPTED")){var Ue,ot=p(zt=J.getDecryptedKeyHex(l,c),0,[1],"04"),Kt=p(zt,0,[2,0],"06"),Rn=p(zt,0,[3,0],"03").substr(2);if(void 0===$.crypto.OID.oidhex2name[Kt])throw"undefined OID(hex) in KJUR.crypto.OID: "+Kt;return(Ue=new I({curve:$.crypto.OID.oidhex2name[Kt]})).setPublicKeyHex(Rn),Ue.setPrivateKeyHex(ot),Ue.isPublic=!1,Ue}if(-1!=l.indexOf("-END DSA PRIVATE KEY-")&&-1!=l.indexOf("4,ENCRYPTED"))return Me=p(zt=J.getDecryptedKeyHex(l,c),0,[1],"02"),Oe=p(zt,0,[2],"02"),Ae=p(zt,0,[3],"02"),je=p(zt,0,[4],"02"),At=p(zt,0,[5],"02"),(ot=new U).setPrivate(new Z(Me,16),new Z(Oe,16),new Z(Ae,16),new Z(je,16),new Z(At,16)),ot;if(-1!=l.indexOf("-END ENCRYPTED PRIVATE KEY-"))return J.getKeyFromEncryptedPKCS8PEM(l,c);throw"not supported argument"},Ln.generateKeypair=function(l,c){if("RSA"==l){var u=c;(I=new et).generate(u,"10001"),I.isPrivate=!0,I.isPublic=!0;var f=new et,p=I.n.toString(16),w=I.e.toString(16);return f.setPublic(p,w),f.isPrivate=!1,f.isPublic=!0,(U={}).prvKeyObj=I,U.pubKeyObj=f,U}if("EC"==l){var I,U,B=c,W=new $.crypto.ECDSA({curve:B}).generateKeyPairHex();return(I=new $.crypto.ECDSA({curve:B})).setPublicKeyHex(W.ecpubhex),I.setPrivateKeyHex(W.ecprvhex),I.isPrivate=!0,I.isPublic=!1,(f=new $.crypto.ECDSA({curve:B})).setPublicKeyHex(W.ecpubhex),f.isPrivate=!1,f.isPublic=!0,(U={}).prvKeyObj=I,U.pubKeyObj=f,U}throw"unknown algorithm: "+l},Ln.getPEM=function(l,c,u,f,p,w){var U=$.asn1,B=U.DERObjectIdentifier,W=U.DERInteger,J=U.ASN1Util.newObject,K=$.crypto,X=K.DSA,oe=K.ECDSA,ae=et;function le(Ue){return J({seq:[{int:0},{int:{bigint:Ue.n}},{int:Ue.e},{int:{bigint:Ue.d}},{int:{bigint:Ue.p}},{int:{bigint:Ue.q}},{int:{bigint:Ue.dmp1}},{int:{bigint:Ue.dmq1}},{int:{bigint:Ue.coeff}}]})}function De(Ue){return J({seq:[{int:1},{octstr:{hex:Ue.prvKeyHex}},{tag:["a0",!0,{oid:{name:Ue.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+Ue.pubKeyHex}}]}]})}function _e(Ue){return J({seq:[{int:0},{int:{bigint:Ue.p}},{int:{bigint:Ue.q}},{int:{bigint:Ue.g}},{int:{bigint:Ue.y}},{int:{bigint:Ue.x}}]})}if((void 0!==ae&&l instanceof ae||void 0!==X&&l instanceof X||void 0!==oe&&l instanceof oe)&&1==l.isPublic&&(void 0===c||"PKCS8PUB"==c))return we(je=new(0,U.x509.SubjectPublicKeyInfo)(l).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==c&&void 0!==ae&&l instanceof ae&&(void 0===u||null==u)&&1==l.isPrivate)return we(je=le(l).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==c&&void 0!==oe&&l instanceof oe&&(void 0===u||null==u)&&1==l.isPrivate){var Me=new B({name:l.curveName}).getEncodedHex(),Oe=De(l).getEncodedHex(),Ae="";return(Ae+=we(Me,"EC PARAMETERS"))+we(Oe,"EC PRIVATE KEY")}if("PKCS1PRV"==c&&void 0!==X&&l instanceof X&&(void 0===u||null==u)&&1==l.isPrivate)return we(je=_e(l).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==c&&void 0!==ae&&l instanceof ae&&void 0!==u&&null!=u&&1==l.isPrivate){var je=le(l).getEncodedHex();return void 0===f&&(f="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",je,u,f,w)}if("PKCS5PRV"==c&&void 0!==oe&&l instanceof oe&&void 0!==u&&null!=u&&1==l.isPrivate)return je=De(l).getEncodedHex(),void 0===f&&(f="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",je,u,f,w);if("PKCS5PRV"==c&&void 0!==X&&l instanceof X&&void 0!==u&&null!=u&&1==l.isPrivate)return je=_e(l).getEncodedHex(),void 0===f&&(f="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",je,u,f,w);var At=function(ot,Kt){var Rn=Dt(ot,Kt);return new J({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Rn.pbkdf2Salt}},{int:Rn.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Rn.encryptionSchemeIV}}]}]}]},{octstr:{hex:Rn.ciphertext}}]}).getEncodedHex()},Dt=function(ot,Kt){var Rn=z.lib.WordArray.random(8),zt=z.lib.WordArray.random(8),xo=z.PBKDF2(Kt,Rn,{keySize:6,iterations:100}),Re=z.enc.Hex.parse(ot),to=z.TripleDES.encrypt(Re,xo,{iv:zt})+"",ut={};return ut.ciphertext=to,ut.pbkdf2Salt=z.enc.Hex.stringify(Rn),ut.pbkdf2Iter=100,ut.encryptionSchemeAlg="DES-EDE3-CBC",ut.encryptionSchemeIV=z.enc.Hex.stringify(zt),ut};if("PKCS8PRV"==c&&null!=ae&&l instanceof ae&&1==l.isPrivate){var Vt=le(l).getEncodedHex();return je=J({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Vt}}]}).getEncodedHex(),void 0===u||null==u?we(je,"PRIVATE KEY"):we(Oe=At(je,u),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==c&&void 0!==oe&&l instanceof oe&&1==l.isPrivate)return Vt=new J({seq:[{int:1},{octstr:{hex:l.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+l.pubKeyHex}}]}]}).getEncodedHex(),je=J({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:l.curveName}}]},{octstr:{hex:Vt}}]}).getEncodedHex(),void 0===u||null==u?we(je,"PRIVATE KEY"):we(Oe=At(je,u),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==c&&void 0!==X&&l instanceof X&&1==l.isPrivate)return Vt=new W({bigint:l.x}).getEncodedHex(),je=J({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:l.p}},{int:{bigint:l.q}},{int:{bigint:l.g}}]}]},{octstr:{hex:Vt}}]}).getEncodedHex(),void 0===u||null==u?we(je,"PRIVATE KEY"):we(Oe=At(je,u),"ENCRYPTED PRIVATE KEY");throw"unsupported object nor format"},Ln.getKeyFromCSRPEM=function(l){var c=Wr(l,"CERTIFICATE REQUEST");return Ln.getKeyFromCSRHex(c)},Ln.getKeyFromCSRHex=function(l){var c=Ln.parseCSRHex(l);return Ln.getKey(c.p8pubkeyhex,null,"pkcs8pub")},Ln.parseCSRHex=function(l){var u=Ye.getChildIdx,f=Ye.getTLV,p={},w=l;if("30"!=w.substr(0,2))throw"malformed CSR(code:001)";var I=u(w,0);if(I.length<1)throw"malformed CSR(code:002)";if("30"!=w.substr(I[0],2))throw"malformed CSR(code:003)";var U=u(w,I[0]);if(U.length<3)throw"malformed CSR(code:004)";return p.p8pubkeyhex=f(w,U[2]),p},Ln.getJWKFromKey=function(l){var c={};if(l instanceof et&&l.isPrivate)return c.kty="RSA",c.n=cn(l.n.toString(16)),c.e=cn(l.e.toString(16)),c.d=cn(l.d.toString(16)),c.p=cn(l.p.toString(16)),c.q=cn(l.q.toString(16)),c.dp=cn(l.dmp1.toString(16)),c.dq=cn(l.dmq1.toString(16)),c.qi=cn(l.coeff.toString(16)),c;if(l instanceof et&&l.isPublic)return c.kty="RSA",c.n=cn(l.n.toString(16)),c.e=cn(l.e.toString(16)),c;if(l instanceof $.crypto.ECDSA&&l.isPrivate){if("P-256"!==(f=l.getShortNISTPCurveName())&&"P-384"!==f)throw"unsupported curve name for JWT: "+f;var u=l.getPublicKeyXYHex();return c.kty="EC",c.crv=f,c.x=cn(u.x),c.y=cn(u.y),c.d=cn(l.prvKeyHex),c}if(l instanceof $.crypto.ECDSA&&l.isPublic){var f;if("P-256"!==(f=l.getShortNISTPCurveName())&&"P-384"!==f)throw"unsupported curve name for JWT: "+f;return u=l.getPublicKeyXYHex(),c.kty="EC",c.crv=f,c.x=cn(u.x),c.y=cn(u.y),c}throw"not supported key object"},et.getPosArrayOfChildrenFromHex=function(l){return Ye.getChildIdx(l,0)},et.getHexValueArrayOfChildrenFromHex=function(l){var c,u=Ye.getV,f=u(l,(c=et.getPosArrayOfChildrenFromHex(l))[0]),p=u(l,c[1]),w=u(l,c[2]),I=u(l,c[3]),U=u(l,c[4]),B=u(l,c[5]),W=u(l,c[6]),J=u(l,c[7]),G=u(l,c[8]);return(c=new Array).push(f,p,w,I,U,B,W,J,G),c},et.prototype.readPrivateKeyFromPEMString=function(l){var c=Wr(l),u=et.getHexValueArrayOfChildrenFromHex(c);this.setPrivateEx(u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8])},et.prototype.readPKCS5PrvKeyHex=function(l){var c=et.getHexValueArrayOfChildrenFromHex(l);this.setPrivateEx(c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8])},et.prototype.readPKCS8PrvKeyHex=function(l){var c,u,f,p,w,I,U,B,J=Ye.getVbyList;if(!1===Ye.isASN1HEX(l))throw"not ASN.1 hex string";try{c=J(l,0,[2,0,1],"02"),u=J(l,0,[2,0,2],"02"),f=J(l,0,[2,0,3],"02"),p=J(l,0,[2,0,4],"02"),w=J(l,0,[2,0,5],"02"),I=J(l,0,[2,0,6],"02"),U=J(l,0,[2,0,7],"02"),B=J(l,0,[2,0,8],"02")}catch{throw"malformed PKCS#8 plain RSA private key"}this.setPrivateEx(c,u,f,p,w,I,U,B)},et.prototype.readPKCS5PubKeyHex=function(l){var c=Ye,u=c.getV;if(!1===c.isASN1HEX(l))throw"keyHex is not ASN.1 hex string";var f=c.getChildIdx(l,0);if(2!==f.length||"02"!==l.substr(f[0],2)||"02"!==l.substr(f[1],2))throw"wrong hex for PKCS#5 public key";var p=u(l,f[0]),w=u(l,f[1]);this.setPublic(p,w)},et.prototype.readPKCS8PubKeyHex=function(l){var c=Ye;if(!1===c.isASN1HEX(l))throw"not ASN.1 hex string";if("06092a864886f70d010101"!==c.getTLVbyList(l,0,[0,0]))throw"not PKCS8 RSA public key";var u=c.getTLVbyList(l,0,[1,0]);this.readPKCS5PubKeyHex(u)},et.prototype.readCertPubKeyHex=function(l,c){var u,f;(u=new In).readCertHex(l),f=u.getPublicKeyHex(),this.readPKCS8PubKeyHex(f)};var Gr=new RegExp("");function If(l,c){for(var u="",f=c/4-l.length,p=0;p<f;p++)u+="0";return u+l}function Rf(l,c,u){for(var f="",p=0;f.length<c;)f+=ht(u(Ge(l+String.fromCharCode.apply(String,[(4278190080&p)>>24,(16711680&p)>>16,(65280&p)>>8,255&p])))),p+=1;return f}function Mf(l){for(var c in $.crypto.Util.DIGESTINFOHEAD){var u=$.crypto.Util.DIGESTINFOHEAD[c],f=u.length;if(l.substring(0,f)==u)return[c,l.substring(f)]}return[]}function In(){var l=Ye,c=l.getChildIdx,u=l.getV,f=l.getTLV,p=l.getVbyList,w=l.getTLVbyList,I=l.getIdxbyList,U=l.getVidx,B=l.oidname,W=In,J=Wr;this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==w(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return p(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){return B(p(this.hex,0,[0,2+this.foffset,0],"06"))},this.getIssuerHex=function(){return w(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return W.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return w(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return W.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var G=p(this.hex,0,[0,4+this.foffset,0]);return G=G.replace(/(..)/g,"%$1"),decodeURIComponent(G)},this.getNotAfter=function(){var G=p(this.hex,0,[0,4+this.foffset,1]);return G=G.replace(/(..)/g,"%$1"),decodeURIComponent(G)},this.getPublicKeyHex=function(){return l.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return I(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var G=this.getPublicKeyIdx();return I(this.hex,G,[1,0],"30")},this.getPublicKey=function(){return Ln.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return B(p(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return p(this.hex,0,[2],"03",!0)},this.verifySignature=function(G){var K=this.getSignatureAlgorithmName(),X=this.getSignatureValueHex(),oe=w(this.hex,0,[0],"30"),ae=new $.crypto.Signature({alg:K});return ae.init(G),ae.updateHex(oe),ae.verify(X)},this.parseExt=function(){if(3!==this.version)return-1;var G=I(this.hex,0,[0,7,0],"30"),K=c(this.hex,G);this.aExtInfo=new Array;for(var X=0;X<K.length;X++){var oe={critical:!1},ae=0;3===c(this.hex,K[X]).length&&(oe.critical=!0,ae=1),oe.oid=l.hextooidstr(p(this.hex,K[X],[0],"06"));var le=I(this.hex,K[X],[1+ae]);oe.vidx=U(this.hex,le),this.aExtInfo.push(oe)}},this.getExtInfo=function(G){var K=this.aExtInfo,X=G;if(G.match(/^[0-9.]+$/)||(X=$.asn1.x509.OID.name2oid(G)),""!==X)for(var oe=0;oe<K.length;oe++)if(K[oe].oid===X)return K[oe]},this.getExtBasicConstraints=function(){var G=this.getExtInfo("basicConstraints");if(void 0===G)return G;var K=u(this.hex,G.vidx);if(""===K)return{};if("0101ff"===K)return{cA:!0};if("0101ff02"===K.substr(0,8)){var X=u(K,6);return{cA:!0,pathLen:parseInt(X,16)}}throw"basicConstraints parse error"},this.getExtKeyUsageBin=function(){var G=this.getExtInfo("keyUsage");if(void 0===G)return"";var K=u(this.hex,G.vidx);if(K.length%2!=0||K.length<=2)throw"malformed key usage value";var X=parseInt(K.substr(0,2)),oe=parseInt(K.substr(2),16).toString(2);return oe.substr(0,oe.length-X)},this.getExtKeyUsageString=function(){for(var G=this.getExtKeyUsageBin(),K=new Array,X=0;X<G.length;X++)"1"==G.substr(X,1)&&K.push(In.KEYUSAGE_NAME[X]);return K.join(",")},this.getExtSubjectKeyIdentifier=function(){var G=this.getExtInfo("subjectKeyIdentifier");return void 0===G?G:u(this.hex,G.vidx)},this.getExtAuthorityKeyIdentifier=function(){var G=this.getExtInfo("authorityKeyIdentifier");if(void 0===G)return G;for(var K={},X=f(this.hex,G.vidx),oe=c(X,0),ae=0;ae<oe.length;ae++)"80"===X.substr(oe[ae],2)&&(K.kid=u(X,oe[ae]));return K},this.getExtExtKeyUsageName=function(){var G=this.getExtInfo("extKeyUsage");if(void 0===G)return G;var K=new Array,X=f(this.hex,G.vidx);if(""===X)return K;for(var oe=c(X,0),ae=0;ae<oe.length;ae++)K.push(B(u(X,oe[ae])));return K},this.getExtSubjectAltName=function(){for(var G=this.getExtSubjectAltName2(),K=new Array,X=0;X<G.length;X++)"DNS"===G[X][0]&&K.push(G[X][1]);return K},this.getExtSubjectAltName2=function(){var G,K,X,oe=this.getExtInfo("subjectAltName");if(void 0===oe)return oe;for(var ae=new Array,le=f(this.hex,oe.vidx),De=c(le,0),_e=0;_e<De.length;_e++)X=le.substr(De[_e],2),G=u(le,De[_e]),"81"===X&&(K=Pn(G),ae.push(["MAIL",K])),"82"===X&&(K=Pn(G),ae.push(["DNS",K])),"84"===X&&(K=In.hex2dn(G,0),ae.push(["DN",K])),"86"===X&&(K=Pn(G),ae.push(["URI",K])),"87"===X&&(K=rr(G),ae.push(["IP",K]));return ae},this.getExtCRLDistributionPointsURI=function(){var G=this.getExtInfo("cRLDistributionPoints");if(void 0===G)return G;for(var K=new Array,X=c(this.hex,G.vidx),oe=0;oe<X.length;oe++)try{var ae=Pn(p(this.hex,X[oe],[0,0,0],"86"));K.push(ae)}catch{}return K},this.getExtAIAInfo=function(){var G=this.getExtInfo("authorityInfoAccess");if(void 0===G)return G;for(var K={ocsp:[],caissuer:[]},X=c(this.hex,G.vidx),oe=0;oe<X.length;oe++){var ae=p(this.hex,X[oe],[0],"06"),le=p(this.hex,X[oe],[1],"86");"2b06010505073001"===ae&&K.ocsp.push(Pn(le)),"2b06010505073002"===ae&&K.caissuer.push(Pn(le))}return K},this.getExtCertificatePolicies=function(){var G=this.getExtInfo("certificatePolicies");if(void 0===G)return G;for(var K=f(this.hex,G.vidx),X=[],oe=c(K,0),ae=0;ae<oe.length;ae++){var le={},De=c(K,oe[ae]);if(le.id=B(u(K,De[0])),2===De.length)for(var _e=c(K,De[1]),Me=0;Me<_e.length;Me++){var Oe=p(K,_e[Me],[0],"06");"2b06010505070201"===Oe?le.cps=Pn(p(K,_e[Me],[1])):"2b06010505070202"===Oe&&(le.unotice=Pn(p(K,_e[Me],[1,0])))}X.push(le)}return X},this.readCertPEM=function(G){this.readCertHex(J(G))},this.readCertHex=function(G){this.hex=G,this.getVersion();try{I(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getInfo=function(){var G,K,X;if(G="Basic Fields\n",G+="  serial number: "+this.getSerialNumberHex()+"\n",G+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",G+="  issuer: "+this.getIssuerString()+"\n",G+="  notBefore: "+this.getNotBefore()+"\n",G+="  notAfter: "+this.getNotAfter()+"\n",G+="  subject: "+this.getSubjectString()+"\n",G+="  subject public key info: \n",G+="    key algorithm: "+(K=this.getPublicKey()).type+"\n","RSA"===K.type&&(G+="    n="+mc(K.n.toString(16)).substr(0,16)+"...\n",G+="    e="+mc(K.e.toString(16))+"\n"),void 0!==(X=this.aExtInfo)&&null!==X){G+="X509v3 Extensions:\n";for(var oe=0;oe<X.length;oe++){var ae=X[oe],le=$.asn1.x509.OID.oid2name(ae.oid);""===le&&(le=ae.oid);var De="";if(!0===ae.critical&&(De="CRITICAL"),G+="  "+le+" "+De+":\n","basicConstraints"===le){var _e=this.getExtBasicConstraints();void 0===_e.cA?G+="    {}\n":(G+="    cA=true",void 0!==_e.pathLen&&(G+=", pathLen="+_e.pathLen),G+="\n")}else if("keyUsage"===le)G+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===le)G+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===le){var Me=this.getExtAuthorityKeyIdentifier();void 0!==Me.kid&&(G+="    kid="+Me.kid+"\n")}else if("extKeyUsage"===le)G+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===le)G+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===le)G+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===le){var Oe=this.getExtAIAInfo();void 0!==Oe.ocsp&&(G+="    ocsp: "+Oe.ocsp.join(",")+"\n"),void 0!==Oe.caissuer&&(G+="    caissuer: "+Oe.caissuer.join(",")+"\n")}else if("certificatePolicies"===le)for(var Ae=this.getExtCertificatePolicies(),je=0;je<Ae.length;je++)void 0!==Ae[je].id&&(G+="    policy oid: "+Ae[je].id+"\n"),void 0!==Ae[je].cps&&(G+="    cps: "+Ae[je].cps+"\n")}}return(G+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}Gr.compile("[^0-9a-f]","gi"),et.prototype.sign=function(l,c){var u=function(p){return $.crypto.Util.hashString(p,c)}(l);return this.signWithMessageHash(u,c)},et.prototype.signWithMessageHash=function(l,c){var u=Js($.crypto.Util.getPaddedDigestInfoHex(l,c,this.n.bitLength()),16);return If(this.doPrivate(u).toString(16),this.n.bitLength())},et.prototype.signPSS=function(l,c,u){var w,f=(w=Ge(l),$.crypto.Util.hashHex(w,c));return void 0===u&&(u=-1),this.signWithMessageHashPSS(f,c,u)},et.prototype.signWithMessageHashPSS=function(l,c,u){var f,p=ht(l),w=p.length,I=this.n.bitLength()-1,U=Math.ceil(I/8),B=function(De){return $.crypto.Util.hashHex(De,c)};if(-1===u||void 0===u)u=w;else if(-2===u)u=U-w-2;else if(u<-2)throw"invalid salt length";if(U<w+u+2)throw"data too long";var W="";u>0&&(W=new Array(u),(new Ur).nextBytes(W),W=String.fromCharCode.apply(String,W));var J=ht(B(Ge("\0\0\0\0\0\0\0\0"+p+W))),G=[];for(f=0;f<U-u-w-2;f+=1)G[f]=0;var K=String.fromCharCode.apply(String,G)+"\x01"+W,X=Rf(J,K.length,B),oe=[];for(f=0;f<K.length;f+=1)oe[f]=K.charCodeAt(f)^X.charCodeAt(f);for(oe[0]&=~(65280>>8*U-I&255),f=0;f<w;f++)oe.push(J.charCodeAt(f));return oe.push(188),If(this.doPrivate(new Z(oe)).toString(16),this.n.bitLength())},et.prototype.verify=function(l,c){var u=Js(c=(c=c.replace(Gr,"")).replace(/[ \n]+/g,""),16);if(u.bitLength()>this.n.bitLength())return 0;var f=Mf(this.doPublic(u).toString(16).replace(/^1f+00/,""));return 0!=f.length&&f[1]==$.crypto.Util.hashString(l,f[0])},et.prototype.verifyWithMessageHash=function(l,c){var u=Js(c=(c=c.replace(Gr,"")).replace(/[ \n]+/g,""),16);if(u.bitLength()>this.n.bitLength())return 0;var f=Mf(this.doPublic(u).toString(16).replace(/^1f+00/,""));return 0!=f.length&&f[1]==l},et.prototype.verifyPSS=function(l,c,u,f){var I,p=(I=Ge(l),$.crypto.Util.hashHex(I,u));return void 0===f&&(f=-1),this.verifyWithMessageHashPSS(p,c,u,f)},et.prototype.verifyWithMessageHashPSS=function(l,c,u,f){var p=new Z(c,16);if(p.bitLength()>this.n.bitLength())return!1;var w,I=function(Me){return $.crypto.Util.hashHex(Me,u)},U=ht(l),B=U.length,W=this.n.bitLength()-1,J=Math.ceil(W/8);if(-1===f||void 0===f)f=B;else if(-2===f)f=J-B-2;else if(f<-2)throw"invalid salt length";if(J<B+f+2)throw"data too long";var G=this.doPublic(p).toByteArray();for(w=0;w<G.length;w+=1)G[w]&=255;for(;G.length<J;)G.unshift(0);if(188!==G[J-1])throw"encoded message does not end in 0xbc";var K=(G=String.fromCharCode.apply(String,G)).substr(0,J-B-1),X=G.substr(K.length,B),oe=65280>>8*J-W&255;if(0!=(K.charCodeAt(0)&oe))throw"bits beyond keysize not zero";var ae=Rf(X,K.length,I),le=[];for(w=0;w<K.length;w+=1)le[w]=K.charCodeAt(w)^ae.charCodeAt(w);le[0]&=~oe;var De=J-B-f-2;for(w=0;w<De;w+=1)if(0!==le[w])throw"leftmost octets not zero";if(1!==le[De])throw"0x01 marker not found";return X===ht(I(Ge("\0\0\0\0\0\0\0\0"+U+String.fromCharCode.apply(String,le.slice(-f)))))},et.SALT_LEN_HLEN=-1,et.SALT_LEN_MAX=-2,et.SALT_LEN_RECOVER=-2,In.hex2dn=function(l,c){if(void 0===c&&(c=0),"30"!==l.substr(c,2))throw"malformed DN";for(var u=new Array,f=Ye.getChildIdx(l,c),p=0;p<f.length;p++)u.push(In.hex2rdn(l,f[p]));return"/"+(u=u.map(function(w){return w.replace("/","\\/")})).join("/")},In.hex2rdn=function(l,c){if(void 0===c&&(c=0),"31"!==l.substr(c,2))throw"malformed RDN";for(var u=new Array,f=Ye.getChildIdx(l,c),p=0;p<f.length;p++)u.push(In.hex2attrTypeValue(l,f[p]));return(u=u.map(function(w){return w.replace("+","\\+")})).join("+")},In.hex2attrTypeValue=function(l,c){var u=Ye,f=u.getV;if(void 0===c&&(c=0),"30"!==l.substr(c,2))throw"malformed attribute type and value";var p=u.getChildIdx(l,c);2!==p.length||l.substr(p[0],2);var w=f(l,p[0]),I=$.asn1.ASN1Util.oidHexToInt(w);return $.asn1.x509.OID.oid2atype(I)+"="+ht(f(l,p[1]))},In.getPublicKeyFromCertHex=function(l){var c=new In;return c.readCertHex(l),c.getPublicKey()},In.getPublicKeyFromCertPEM=function(l){var c=new In;return c.readCertPEM(l),c.getPublicKey()},In.getPublicKeyInfoPropOfCertPEM=function(l){var c,u,f=Ye.getVbyList,p={algparam:null};return(c=new In).readCertPEM(l),u=c.getPublicKeyHex(),p.keyhex=f(u,0,[1],"03").substr(2),p.algoid=f(u,0,[0,0],"06"),"2a8648ce3d0201"===p.algoid&&(p.algparam=f(u,0,[0,1],"06")),p},In.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==$&&$||(N.KJUR=$={}),void 0!==$.jws&&$.jws||($.jws={}),$.jws.JWS=function(){var l=$.jws.JWS.isSafeJSONString;this.parseJWS=function(c,u){if(void 0===this.parsedJWS||!u&&void 0===this.parsedJWS.sigvalH){var f=c.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==f)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var p=f[1],w=f[2],I=f[3],U=p+"."+w;if(this.parsedJWS={},this.parsedJWS.headB64U=p,this.parsedJWS.payloadB64U=w,this.parsedJWS.sigvalB64U=I,this.parsedJWS.si=U,!u){var B=Xe(I),W=Js(B,16);this.parsedJWS.sigvalH=B,this.parsedJWS.sigvalBI=W}var J=$r(p),G=$r(w);if(this.parsedJWS.headS=J,this.parsedJWS.payloadS=G,!l(J,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+J}}},$.jws.JWS.sign=function(l,c,u,f,p){var w,I,U,W=$.jws.JWS,J=W.readSafeJSONString,G=W.isSafeJSONString,K=$.crypto,X=K.Mac,oe=K.Signature,ae=JSON;if("string"!=typeof c&&"object"!=(void 0===c?"undefined":y(c)))throw"spHeader must be JSON string or object: "+c;if("object"==(void 0===c?"undefined":y(c))&&(w=ae.stringify(I=c)),"string"==typeof c){if(!G(w=c))throw"JWS Head is not safe JSON string: "+w;I=J(w)}if(U=u,"object"==(void 0===u?"undefined":y(u))&&(U=ae.stringify(u)),""!=l&&null!=l||void 0===I.alg||(l=I.alg),""!=l&&null!=l&&void 0===I.alg&&(I.alg=l,w=ae.stringify(I)),l!==I.alg)throw"alg and sHeader.alg doesn't match: "+l+"!="+I.alg;var le=null;if(void 0===W.jwsalg2sigalg[l])throw"unsupported alg name: "+l;le=W.jwsalg2sigalg[l];var De=is(w)+"."+is(U),_e="";if("Hmac"==le.substr(0,4)){if(void 0===f)throw"mac key shall be specified for HS* alg";var Me=new X({alg:le,prov:"cryptojs",pass:f});Me.updateString(De),_e=Me.doFinal()}else{var Oe;-1!=le.indexOf("withECDSA")?((Oe=new oe({alg:le})).init(f,p),Oe.updateString(De),hASN1Sig=Oe.sign(),_e=$.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)):"none"!=le&&((Oe=new oe({alg:le})).init(f,p),Oe.updateString(De),_e=Oe.sign())}return De+"."+cn(_e)},$.jws.JWS.verify=function(l,c,u){var f,w=$.jws.JWS,I=w.readSafeJSONString,U=$.crypto,B=U.ECDSA,W=U.Mac,J=U.Signature;void 0!==y(et)&&(f=et);var G=l.split(".");if(3!==G.length)return!1;var le,K=G[0]+"."+G[1],X=Xe(G[2]),oe=I($r(G[0])),ae=null;if(void 0===oe.alg)throw"algorithm not specified in header";if(le=(ae=oe.alg).substr(0,2),null!=u&&"[object Array]"===Object.prototype.toString.call(u)&&u.length>0&&-1==(":"+u.join(":")+":").indexOf(":"+ae+":"))throw"algorithm '"+ae+"' not accepted in the list";if("none"!=ae&&null===c)throw"key shall be specified to verify.";if("string"==typeof c&&-1!=c.indexOf("-----BEGIN ")&&(c=Ln.getKey(c)),!("RS"!=le&&"PS"!=le||c instanceof f))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==le&&!(c instanceof B))throw"key shall be a ECDSA obj for ES* algs";var De=null;if(void 0===w.jwsalg2sigalg[oe.alg])throw"unsupported alg name: "+ae;if("none"==(De=w.jwsalg2sigalg[ae]))throw"not supported";if("Hmac"==De.substr(0,4)){if(void 0===c)throw"hexadecimal key shall be specified for HMAC";var _e=new W({alg:De,pass:c});return _e.updateString(K),X==_e.doFinal()}if(-1!=De.indexOf("withECDSA")){var Me,Oe=null;try{Oe=B.concatSigToASN1Sig(X)}catch{return!1}return(Me=new J({alg:De})).init(c),Me.updateString(K),Me.verify(Oe)}return(Me=new J({alg:De})).init(c),Me.updateString(K),Me.verify(X)},$.jws.JWS.parse=function(l){var u,f,p=l.split("."),w={};if(2!=p.length&&3!=p.length)throw"malformed sJWS: wrong number of '.' splitted elements";return u=p[1],3==p.length&&(f=p[2]),w.headerObj=$.jws.JWS.readSafeJSONString($r(p[0])),w.payloadObj=$.jws.JWS.readSafeJSONString($r(u)),w.headerPP=JSON.stringify(w.headerObj,null,"  "),w.payloadPP=null==w.payloadObj?$r(u):JSON.stringify(w.payloadObj,null,"  "),void 0!==f&&(w.sigHex=Xe(f)),w},$.jws.JWS.verifyJWT=function(l,c,u){var f=$.jws,p=f.JWS,w=p.readSafeJSONString,I=p.inArray,U=p.includedArray,B=l.split("."),W=B[0],J=B[1],G=(Xe(B[2]),w($r(W))),K=w($r(J));if(void 0===G.alg)return!1;if(void 0===u.alg)throw"acceptField.alg shall be specified";if(!I(G.alg,u.alg)||void 0!==K.iss&&"object"===y(u.iss)&&!I(K.iss,u.iss)||void 0!==K.sub&&"object"===y(u.sub)&&!I(K.sub,u.sub))return!1;if(void 0!==K.aud&&"object"===y(u.aud))if("string"==typeof K.aud){if(!I(K.aud,u.aud))return!1}else if("object"==y(K.aud)&&!U(K.aud,u.aud))return!1;var X=f.IntDate.getNow();return void 0!==u.verifyAt&&"number"==typeof u.verifyAt&&(X=u.verifyAt),void 0!==u.gracePeriod&&"number"==typeof u.gracePeriod||(u.gracePeriod=0),!(void 0!==K.exp&&"number"==typeof K.exp&&K.exp+u.gracePeriod<X||void 0!==K.nbf&&"number"==typeof K.nbf&&X<K.nbf-u.gracePeriod||void 0!==K.iat&&"number"==typeof K.iat&&X<K.iat-u.gracePeriod||void 0!==K.jti&&void 0!==u.jti&&K.jti!==u.jti||!p.verify(l,c,u.alg))},$.jws.JWS.includedArray=function(l,c){var u=$.jws.JWS.inArray;if(null===l||"object"!==(void 0===l?"undefined":y(l))||"number"!=typeof l.length)return!1;for(var f=0;f<l.length;f++)if(!u(l[f],c))return!1;return!0},$.jws.JWS.inArray=function(l,c){if(null===c||"object"!==(void 0===c?"undefined":y(c))||"number"!=typeof c.length)return!1;for(var u=0;u<c.length;u++)if(c[u]==l)return!0;return!1},$.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},$.jws.JWS.isSafeJSONString=function(l,c,u){var f=null;try{return"object"!=(void 0===(f=Yl(l))?"undefined":y(f))||f.constructor===Array?0:(c&&(c[u]=f),1)}catch{return 0}},$.jws.JWS.readSafeJSONString=function(l){var c=null;try{return"object"!=(void 0===(c=Yl(l))?"undefined":y(c))||c.constructor===Array?null:c}catch{return null}},$.jws.JWS.getEncodedSignatureValueFromJWS=function(l){var c=l.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==c)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return c[1]},$.jws.JWS.getJWKthumbprint=function(l){if("RSA"!==l.kty&&"EC"!==l.kty&&"oct"!==l.kty)throw"unsupported algorithm for JWK Thumprint";var c="{";if("RSA"===l.kty){if("string"!=typeof l.n||"string"!=typeof l.e)throw"wrong n and e value for RSA key";c+='"e":"'+l.e+'",',c+='"kty":"'+l.kty+'",',c+='"n":"'+l.n+'"}'}else if("EC"===l.kty){if("string"!=typeof l.crv||"string"!=typeof l.x||"string"!=typeof l.y)throw"wrong crv, x and y value for EC key";c+='"crv":"'+l.crv+'",',c+='"kty":"'+l.kty+'",',c+='"x":"'+l.x+'",',c+='"y":"'+l.y+'"}'}else if("oct"===l.kty){if("string"!=typeof l.k)throw"wrong k value for oct(symmetric) key";c+='"kty":"'+l.kty+'",',c+='"k":"'+l.k+'"}'}var u=Ge(c);return cn($.crypto.Util.hashHex(u,"sha256"))},$.jws.IntDate={},$.jws.IntDate.get=function(l){var c=$.jws.IntDate,u=c.getNow,f=c.getZulu;if("now"==l)return u();if("now + 1hour"==l)return u()+3600;if("now + 1day"==l)return u()+86400;if("now + 1month"==l)return u()+2592e3;if("now + 1year"==l)return u()+31536e3;if(l.match(/Z$/))return f(l);if(l.match(/^[0-9]+$/))return parseInt(l);throw"unsupported format: "+l},$.jws.IntDate.getZulu=function(l){return Rt(l)},$.jws.IntDate.getNow=function(){return~~(new Date/1e3)},$.jws.IntDate.intDate2UTCString=function(l){return new Date(1e3*l).toUTCString()},$.jws.IntDate.intDate2Zulu=function(l){var c=new Date(1e3*l);return("0000"+c.getUTCFullYear()).slice(-4)+("00"+(c.getUTCMonth()+1)).slice(-2)+("00"+c.getUTCDate()).slice(-2)+("00"+c.getUTCHours()).slice(-2)+("00"+c.getUTCMinutes()).slice(-2)+("00"+c.getUTCSeconds()).slice(-2)+"Z"},N.SecureRandom=Ur,N.rng_seed_time=Ct,N.BigInteger=Z,N.RSAKey=et,N.EDSA=$.crypto.EDSA,N.DSA=$.crypto.DSA,N.Signature=$.crypto.Signature,N.MessageDigest=$.crypto.MessageDigest,N.Mac=$.crypto.Mac,N.Cipher=$.crypto.Cipher,N.KEYUTIL=Ln,N.ASN1HEX=Ye,N.X509=In,N.CryptoJS=z,N.b64tohex=Ke,N.b64toBA=yt,N.stoBA=Ql,N.BAtos=Zl,N.BAtohex=Ys,N.stohex=gi,N.stob64=function(c){return Ee(gi(c))},N.stob64u=function(c){return Qs(Ee(gi(c)))},N.b64utos=function(c){return Zl(yt(It(c)))},N.b64tob64u=Qs,N.b64utob64=It,N.hex2b64=Ee,N.hextob64u=cn,N.b64utohex=Xe,N.utf8tob64u=is,N.b64utoutf8=$r,N.utf8tob64=function(c){return Ee(ea(gc(c)))},N.b64toutf8=function(c){return decodeURIComponent(pc(Ke(c)))},N.utf8tohex=os,N.hextoutf8=Pn,N.hextorstr=ht,N.rstrtohex=Ge,N.hextob64=Zs,N.hextob64nl=Xs,N.b64nltohex=Tf,N.hextopem=we,N.pemtohex=Wr,N.hextoArrayBuffer=function(c){if(c.length%2!=0)throw"input is not even length";if(null==c.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var u=new ArrayBuffer(c.length/2),f=new DataView(u),p=0;p<c.length/2;p++)f.setUint8(p,parseInt(c.substr(2*p,2),16));return u},N.ArrayBuffertohex=function(c){for(var u="",f=new DataView(c),p=0;p<c.byteLength;p++)u+=("00"+f.getUint8(p).toString(16)).slice(-2);return u},N.zulutomsec=it,N.zulutosec=Rt,N.zulutodate=function(c){return new Date(it(c))},N.datetozulu=function(c,u,f){var p,w=c.getUTCFullYear();if(u){if(w<1950||2049<w)throw"not proper year for UTCTime: "+w;p=(""+w).slice(-2)}else p=("000"+w).slice(-4);if(p+=("0"+(c.getUTCMonth()+1)).slice(-2),p+=("0"+c.getUTCDate()).slice(-2),p+=("0"+c.getUTCHours()).slice(-2),p+=("0"+c.getUTCMinutes()).slice(-2),p+=("0"+c.getUTCSeconds()).slice(-2),f){var I=c.getUTCMilliseconds();0!==I&&(p+="."+(I=(I=("00"+I).slice(-3)).replace(/0+$/g,"")))}return p+"Z"},N.uricmptohex=ea,N.hextouricmp=pc,N.ipv6tohex=Xl,N.hextoipv6=ss,N.hextoip=rr,N.iptohex=function(c){var u="malformed IP address";if(!(c=c.toLowerCase(c)).match(/^[0-9.]+$/)){if(c.match(/^[0-9a-f:]+$/)&&-1!==c.indexOf(":"))return Xl(c);throw u}var f=c.split(".");if(4!==f.length)throw u;var p="";try{for(var w=0;w<4;w++)p+=("0"+parseInt(f[w]).toString(16)).slice(-2);return p}catch{throw u}},N.encodeURIComponentAll=gc,N.newline_toUnix=function(c){return c.replace(/\r\n/gm,"\n")},N.newline_toDos=function(c){return(c=c.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},N.hextoposhex=mc,N.intarystrtohex=function(c){c=(c=(c=c.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return c.split(/,/).map(function(u,f,p){var w=parseInt(u);if(w<0||255<w)throw"integer not in range 0-255";return("00"+w.toString(16)).slice(-2)}).join("")}catch(u){throw"malformed integer array string: "+u}},N.strdiffidx=function(c,u){var f=c.length;c.length>u.length&&(f=u.length);for(var p=0;p<f;p++)if(c.charCodeAt(p)!=u.charCodeAt(p))return p;return c.length!=u.length?f:-1},N.KJUR=$,N.crypto=$.crypto,N.asn1=$.asn1,N.jws=$.jws,N.lang=$.lang}).call(this,H(27).Buffer)},function(be,N,H){"use strict";(function(k){var y=H(29),M=H(30),S=H(31);function g(){return _.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function v(Y,C){if(g()<C)throw new RangeError("Invalid typed array length");return _.TYPED_ARRAY_SUPPORT?(Y=new Uint8Array(C)).__proto__=_.prototype:(null===Y&&(Y=new _(C)),Y.length=C),Y}function _(Y,C,E){if(!(_.TYPED_ARRAY_SUPPORT||this instanceof _))return new _(Y,C,E);if("number"==typeof Y){if("string"==typeof C)throw new Error("If encoding is specified then the first argument must be a string");return j(this,Y)}return T(this,Y,C,E)}function T(Y,C,E,q){if("number"==typeof C)throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&C instanceof ArrayBuffer?function(ee,pe,xe,Ie){if(xe<0||pe.byteLength<xe)throw new RangeError("'offset' is out of bounds");if(pe.byteLength<xe+(Ie||0))throw new RangeError("'length' is out of bounds");return pe=void 0===xe&&void 0===Ie?new Uint8Array(pe):void 0===Ie?new Uint8Array(pe,xe):new Uint8Array(pe,xe,Ie),_.TYPED_ARRAY_SUPPORT?(ee=pe).__proto__=_.prototype:ee=L(ee,pe),ee}(Y,C,E,q):"string"==typeof C?function(ee,pe,xe){if("string"==typeof xe&&""!==xe||(xe="utf8"),!_.isEncoding(xe))throw new TypeError('"encoding" must be a valid string encoding');var Ie=0|x(pe,xe),pt=(ee=v(ee,Ie)).write(pe,xe);return pt!==Ie&&(ee=ee.slice(0,pt)),ee}(Y,C,E):function(ee,pe){if(_.isBuffer(pe)){var xe=0|A(pe.length);return 0===(ee=v(ee,xe)).length||pe.copy(ee,0,0,xe),ee}if(pe){if(typeof ArrayBuffer<"u"&&pe.buffer instanceof ArrayBuffer||"length"in pe)return"number"!=typeof pe.length||(pt=pe.length)!=pt?v(ee,0):L(ee,pe);if("Buffer"===pe.type&&S(pe.data))return L(ee,pe.data)}var pt;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(Y,C)}function D(Y){if("number"!=typeof Y)throw new TypeError('"size" argument must be a number');if(Y<0)throw new RangeError('"size" argument must not be negative')}function j(Y,C){if(D(C),Y=v(Y,C<0?0:0|A(C)),!_.TYPED_ARRAY_SUPPORT)for(var E=0;E<C;++E)Y[E]=0;return Y}function L(Y,C){var E=C.length<0?0:0|A(C.length);Y=v(Y,E);for(var q=0;q<E;q+=1)Y[q]=255&C[q];return Y}function A(Y){if(Y>=g())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g().toString(16)+" bytes");return 0|Y}function x(Y,C){if(_.isBuffer(Y))return Y.length;if(typeof ArrayBuffer<"u"&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(Y)||Y instanceof ArrayBuffer))return Y.byteLength;"string"!=typeof Y&&(Y=""+Y);var E=Y.length;if(0===E)return 0;for(var q=!1;;)switch(C){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":case void 0:return Xn(Y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*E;case"hex":return E>>>1;case"base64":return fr(Y).length;default:if(q)return Xn(Y).length;C=(""+C).toLowerCase(),q=!0}}function R(Y,C,E){var q=Y[C];Y[C]=Y[E],Y[E]=q}function F(Y,C,E,q,te){if(0===Y.length)return-1;if("string"==typeof E?(q=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,isNaN(E)&&(E=te?0:Y.length-1),E<0&&(E=Y.length+E),E>=Y.length){if(te)return-1;E=Y.length-1}else if(E<0){if(!te)return-1;E=0}if("string"==typeof C&&(C=_.from(C,q)),_.isBuffer(C))return 0===C.length?-1:P(Y,C,E,q,te);if("number"==typeof C)return C&=255,_.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?te?Uint8Array.prototype.indexOf.call(Y,C,E):Uint8Array.prototype.lastIndexOf.call(Y,C,E):P(Y,[C],E,q,te);throw new TypeError("val must be string, number or Buffer")}function P(Y,C,E,q,te){var ee,pe=1,xe=Y.length,Ie=C.length;if(void 0!==q&&("ucs2"===(q=String(q).toLowerCase())||"ucs-2"===q||"utf16le"===q||"utf-16le"===q)){if(Y.length<2||C.length<2)return-1;pe=2,xe/=2,Ie/=2,E/=2}function pt(hr,Gt){return 1===pe?hr[Gt]:hr.readUInt16BE(Gt*pe)}if(te){var Ct=-1;for(ee=E;ee<xe;ee++)if(pt(Y,ee)===pt(C,-1===Ct?0:ee-Ct)){if(-1===Ct&&(Ct=ee),ee-Ct+1===Ie)return Ct*pe}else-1!==Ct&&(ee-=ee-Ct),Ct=-1}else for(E+Ie>xe&&(E=xe-Ie),ee=E;ee>=0;ee--){for(var mt=!0,pi=0;pi<Ie;pi++)if(pt(Y,ee+pi)!==pt(C,pi)){mt=!1;break}if(mt)return ee}return-1}function z(Y,C,E,q){E=Number(E)||0;var te=Y.length-E;q?(q=Number(q))>te&&(q=te):q=te;var ee=C.length;if(ee%2!=0)throw new TypeError("Invalid hex string");q>ee/2&&(q=ee/2);for(var pe=0;pe<q;++pe){var xe=parseInt(C.substr(2*pe,2),16);if(isNaN(xe))return pe;Y[E+pe]=xe}return pe}function se(Y,C,E,q){return Or(Xn(C,Y.length-E),Y,E,q)}function ie(Y,C,E,q){return Or(function(ee){for(var pe=[],xe=0;xe<ee.length;++xe)pe.push(255&ee.charCodeAt(xe));return pe}(C),Y,E,q)}function Se(Y,C,E,q){return ie(Y,C,E,q)}function Ee(Y,C,E,q){return Or(fr(C),Y,E,q)}function Ke(Y,C,E,q){return Or(function(ee,pe){for(var xe,Ie,Ct=[],mt=0;mt<ee.length&&!((pe-=2)<0);++mt)Ie=(xe=ee.charCodeAt(mt))>>8,Ct.push(xe%256),Ct.push(Ie);return Ct}(C,Y.length-E),Y,E,q)}function yt(Y,C,E){return y.fromByteArray(0===C&&E===Y.length?Y:Y.slice(C,E))}function Z(Y,C,E){E=Math.min(Y.length,E);for(var q=[],te=C;te<E;){var ee,pe,xe,Ie,pt=Y[te],Ct=null,mt=pt>239?4:pt>223?3:pt>191?2:1;if(te+mt<=E)switch(mt){case 1:pt<128&&(Ct=pt);break;case 2:128==(192&(ee=Y[te+1]))&&(Ie=(31&pt)<<6|63&ee)>127&&(Ct=Ie);break;case 3:pe=Y[te+2],128==(192&(ee=Y[te+1]))&&128==(192&pe)&&(Ie=(15&pt)<<12|(63&ee)<<6|63&pe)>2047&&(Ie<55296||Ie>57343)&&(Ct=Ie);break;case 4:pe=Y[te+2],xe=Y[te+3],128==(192&(ee=Y[te+1]))&&128==(192&pe)&&128==(192&xe)&&(Ie=(15&pt)<<18|(63&ee)<<12|(63&pe)<<6|63&xe)>65535&&Ie<1114112&&(Ct=Ie)}null===Ct?(Ct=65533,mt=1):Ct>65535&&(q.push((Ct-=65536)>>>10&1023|55296),Ct=56320|1023&Ct),q.push(Ct),te+=mt}return function(hr){var Gt=hr.length;if(Gt<=Ze)return String.fromCharCode.apply(String,hr);for(var qs="",Ur=0;Ur<Gt;)qs+=String.fromCharCode.apply(String,hr.slice(Ur,Ur+=Ze));return qs}(q)}N.Buffer=_,N.SlowBuffer=function(C){return+C!=C&&(C=0),_.alloc(+C)},N.INSPECT_MAX_BYTES=50,_.TYPED_ARRAY_SUPPORT=void 0!==k.TYPED_ARRAY_SUPPORT?k.TYPED_ARRAY_SUPPORT:function(){try{var C=new Uint8Array(1);return C.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===C.foo()&&"function"==typeof C.subarray&&0===C.subarray(1,1).byteLength}catch{return!1}}(),N.kMaxLength=g(),_.poolSize=8192,_._augment=function(Y){return Y.__proto__=_.prototype,Y},_.from=function(Y,C,E){return T(null,Y,C,E)},_.TYPED_ARRAY_SUPPORT&&(_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0})),_.alloc=function(Y,C,E){return null,pe=C,xe=E,D(ee=Y),ee<=0?v(null,ee):void 0!==pe?"string"==typeof xe?v(null,ee).fill(pe,xe):v(null,ee).fill(pe):v(null,ee);var ee,pe,xe},_.allocUnsafe=function(Y){return j(null,Y)},_.allocUnsafeSlow=function(Y){return j(null,Y)},_.isBuffer=function(C){return!(null==C||!C._isBuffer)},_.compare=function(C,E){if(!_.isBuffer(C)||!_.isBuffer(E))throw new TypeError("Arguments must be Buffers");if(C===E)return 0;for(var q=C.length,te=E.length,ee=0,pe=Math.min(q,te);ee<pe;++ee)if(C[ee]!==E[ee]){q=C[ee],te=E[ee];break}return q<te?-1:te<q?1:0},_.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(C,E){if(!S(C))throw new TypeError('"list" argument must be an Array of Buffers');if(0===C.length)return _.alloc(0);var q;if(void 0===E)for(E=0,q=0;q<C.length;++q)E+=C[q].length;var te=_.allocUnsafe(E),ee=0;for(q=0;q<C.length;++q){var pe=C[q];if(!_.isBuffer(pe))throw new TypeError('"list" argument must be an Array of Buffers');pe.copy(te,ee),ee+=pe.length}return te},_.byteLength=x,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var C=this.length;if(C%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var E=0;E<C;E+=2)R(this,E,E+1);return this},_.prototype.swap32=function(){var C=this.length;if(C%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var E=0;E<C;E+=4)R(this,E,E+3),R(this,E+1,E+2);return this},_.prototype.swap64=function(){var C=this.length;if(C%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var E=0;E<C;E+=8)R(this,E,E+7),R(this,E+1,E+6),R(this,E+2,E+5),R(this,E+3,E+4);return this},_.prototype.toString=function(){var C=0|this.length;return 0===C?"":0===arguments.length?Z(this,0,C):function(q,te,ee){var pe=!1;if((void 0===te||te<0)&&(te=0),te>this.length||((void 0===ee||ee>this.length)&&(ee=this.length),ee<=0)||(ee>>>=0)<=(te>>>=0))return"";for(q||(q="utf8");;)switch(q){case"hex":return gn(this,te,ee);case"utf8":case"utf-8":return Z(this,te,ee);case"ascii":return on(this,te,ee);case"latin1":case"binary":return ze(this,te,ee);case"base64":return yt(this,te,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ht(this,te,ee);default:if(pe)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),pe=!0}}.apply(this,arguments)},_.prototype.equals=function(C){if(!_.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C||0===_.compare(this,C)},_.prototype.inspect=function(){var C="",E=N.INSPECT_MAX_BYTES;return this.length>0&&(C=this.toString("hex",0,E).match(/.{2}/g).join(" "),this.length>E&&(C+=" ... ")),"<Buffer "+C+">"},_.prototype.compare=function(C,E,q,te,ee){if(!_.isBuffer(C))throw new TypeError("Argument must be a Buffer");if(void 0===E&&(E=0),void 0===q&&(q=C?C.length:0),void 0===te&&(te=0),void 0===ee&&(ee=this.length),E<0||q>C.length||te<0||ee>this.length)throw new RangeError("out of range index");if(te>=ee&&E>=q)return 0;if(te>=ee)return-1;if(E>=q)return 1;if(this===C)return 0;for(var pe=(ee>>>=0)-(te>>>=0),xe=(q>>>=0)-(E>>>=0),Ie=Math.min(pe,xe),pt=this.slice(te,ee),Ct=C.slice(E,q),mt=0;mt<Ie;++mt)if(pt[mt]!==Ct[mt]){pe=pt[mt],xe=Ct[mt];break}return pe<xe?-1:xe<pe?1:0},_.prototype.includes=function(C,E,q){return-1!==this.indexOf(C,E,q)},_.prototype.indexOf=function(C,E,q){return F(this,C,E,q,!0)},_.prototype.lastIndexOf=function(C,E,q){return F(this,C,E,q,!1)},_.prototype.write=function(C,E,q,te){if(void 0===E)te="utf8",q=this.length,E=0;else if(void 0===q&&"string"==typeof E)te=E,q=this.length,E=0;else{if(!isFinite(E))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");E|=0,isFinite(q)?(q|=0,void 0===te&&(te="utf8")):(te=q,q=void 0)}var ee=this.length-E;if((void 0===q||q>ee)&&(q=ee),C.length>0&&(q<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");for(var pe=!1;;)switch(te){case"hex":return z(this,C,E,q);case"utf8":case"utf-8":return se(this,C,E,q);case"ascii":return ie(this,C,E,q);case"latin1":case"binary":return Se(this,C,E,q);case"base64":return Ee(this,C,E,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ke(this,C,E,q);default:if(pe)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),pe=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ze=4096;function on(Y,C,E){var q="";E=Math.min(Y.length,E);for(var te=C;te<E;++te)q+=String.fromCharCode(127&Y[te]);return q}function ze(Y,C,E){var q="";E=Math.min(Y.length,E);for(var te=C;te<E;++te)q+=String.fromCharCode(Y[te]);return q}function gn(Y,C,E){var q=Y.length;(!C||C<0)&&(C=0),(!E||E<0||E>q)&&(E=q);for(var te="",ee=C;ee<E;++ee)te+=Fr(Y[ee]);return te}function Ht(Y,C,E){for(var q=Y.slice(C,E),te="",ee=0;ee<q.length;ee+=2)te+=String.fromCharCode(q[ee]+256*q[ee+1]);return te}function Ce(Y,C,E){if(Y%1!=0||Y<0)throw new RangeError("offset is not uint");if(Y+C>E)throw new RangeError("Trying to access beyond buffer length")}function St(Y,C,E,q,te,ee){if(!_.isBuffer(Y))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>te||C<ee)throw new RangeError('"value" argument is out of bounds');if(E+q>Y.length)throw new RangeError("Index out of range")}function Ft(Y,C,E,q){C<0&&(C=65535+C+1);for(var te=0,ee=Math.min(Y.length-E,2);te<ee;++te)Y[E+te]=(C&255<<8*(q?te:1-te))>>>8*(q?te:1-te)}function Bt(Y,C,E,q){C<0&&(C=4294967295+C+1);for(var te=0,ee=Math.min(Y.length-E,4);te<ee;++te)Y[E+te]=C>>>8*(q?te:3-te)&255}function Zt(Y,C,E,q,te,ee){if(E+q>Y.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function Ut(Y,C,E,q,te){return te||Zt(Y,0,E,4),M.write(Y,C,E,q,23,4),E+4}function mn(Y,C,E,q,te){return te||Zt(Y,0,E,8),M.write(Y,C,E,q,52,8),E+8}_.prototype.slice=function(C,E){var q,te=this.length;if((C=~~C)<0?(C+=te)<0&&(C=0):C>te&&(C=te),(E=void 0===E?te:~~E)<0?(E+=te)<0&&(E=0):E>te&&(E=te),E<C&&(E=C),_.TYPED_ARRAY_SUPPORT)(q=this.subarray(C,E)).__proto__=_.prototype;else{var ee=E-C;q=new _(ee,void 0);for(var pe=0;pe<ee;++pe)q[pe]=this[pe+C]}return q},_.prototype.readUIntLE=function(C,E,q){C|=0,E|=0,q||Ce(C,E,this.length);for(var te=this[C],ee=1,pe=0;++pe<E&&(ee*=256);)te+=this[C+pe]*ee;return te},_.prototype.readUIntBE=function(C,E,q){C|=0,E|=0,q||Ce(C,E,this.length);for(var te=this[C+--E],ee=1;E>0&&(ee*=256);)te+=this[C+--E]*ee;return te},_.prototype.readUInt8=function(C,E){return E||Ce(C,1,this.length),this[C]},_.prototype.readUInt16LE=function(C,E){return E||Ce(C,2,this.length),this[C]|this[C+1]<<8},_.prototype.readUInt16BE=function(C,E){return E||Ce(C,2,this.length),this[C]<<8|this[C+1]},_.prototype.readUInt32LE=function(C,E){return E||Ce(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+16777216*this[C+3]},_.prototype.readUInt32BE=function(C,E){return E||Ce(C,4,this.length),16777216*this[C]+(this[C+1]<<16|this[C+2]<<8|this[C+3])},_.prototype.readIntLE=function(C,E,q){C|=0,E|=0,q||Ce(C,E,this.length);for(var te=this[C],ee=1,pe=0;++pe<E&&(ee*=256);)te+=this[C+pe]*ee;return te>=(ee*=128)&&(te-=Math.pow(2,8*E)),te},_.prototype.readIntBE=function(C,E,q){C|=0,E|=0,q||Ce(C,E,this.length);for(var te=E,ee=1,pe=this[C+--te];te>0&&(ee*=256);)pe+=this[C+--te]*ee;return pe>=(ee*=128)&&(pe-=Math.pow(2,8*E)),pe},_.prototype.readInt8=function(C,E){return E||Ce(C,1,this.length),128&this[C]?-1*(255-this[C]+1):this[C]},_.prototype.readInt16LE=function(C,E){E||Ce(C,2,this.length);var q=this[C]|this[C+1]<<8;return 32768&q?4294901760|q:q},_.prototype.readInt16BE=function(C,E){E||Ce(C,2,this.length);var q=this[C+1]|this[C]<<8;return 32768&q?4294901760|q:q},_.prototype.readInt32LE=function(C,E){return E||Ce(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},_.prototype.readInt32BE=function(C,E){return E||Ce(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},_.prototype.readFloatLE=function(C,E){return E||Ce(C,4,this.length),M.read(this,C,!0,23,4)},_.prototype.readFloatBE=function(C,E){return E||Ce(C,4,this.length),M.read(this,C,!1,23,4)},_.prototype.readDoubleLE=function(C,E){return E||Ce(C,8,this.length),M.read(this,C,!0,52,8)},_.prototype.readDoubleBE=function(C,E){return E||Ce(C,8,this.length),M.read(this,C,!1,52,8)},_.prototype.writeUIntLE=function(C,E,q,te){C=+C,E|=0,q|=0,te||St(this,C,E,q,Math.pow(2,8*q)-1,0);var ee=1,pe=0;for(this[E]=255&C;++pe<q&&(ee*=256);)this[E+pe]=C/ee&255;return E+q},_.prototype.writeUIntBE=function(C,E,q,te){C=+C,E|=0,q|=0,te||St(this,C,E,q,Math.pow(2,8*q)-1,0);var ee=q-1,pe=1;for(this[E+ee]=255&C;--ee>=0&&(pe*=256);)this[E+ee]=C/pe&255;return E+q},_.prototype.writeUInt8=function(C,E,q){return C=+C,E|=0,q||St(this,C,E,1,255,0),_.TYPED_ARRAY_SUPPORT||(C=Math.floor(C)),this[E]=255&C,E+1},_.prototype.writeUInt16LE=function(C,E,q){return C=+C,E|=0,q||St(this,C,E,2,65535,0),_.TYPED_ARRAY_SUPPORT?(this[E]=255&C,this[E+1]=C>>>8):Ft(this,C,E,!0),E+2},_.prototype.writeUInt16BE=function(C,E,q){return C=+C,E|=0,q||St(this,C,E,2,65535,0),_.TYPED_ARRAY_SUPPORT?(this[E]=C>>>8,this[E+1]=255&C):Ft(this,C,E,!1),E+2},_.prototype.writeUInt32LE=function(C,E,q){return C=+C,E|=0,q||St(this,C,E,4,4294967295,0),_.TYPED_ARRAY_SUPPORT?(this[E+3]=C>>>24,this[E+2]=C>>>16,this[E+1]=C>>>8,this[E]=255&C):Bt(this,C,E,!0),E+4},_.prototype.writeUInt32BE=function(C,E,q){return C=+C,E|=0,q||St(this,C,E,4,4294967295,0),_.TYPED_ARRAY_SUPPORT?(this[E]=C>>>24,this[E+1]=C>>>16,this[E+2]=C>>>8,this[E+3]=255&C):Bt(this,C,E,!1),E+4},_.prototype.writeIntLE=function(C,E,q,te){if(C=+C,E|=0,!te){var ee=Math.pow(2,8*q-1);St(this,C,E,q,ee-1,-ee)}var pe=0,xe=1,Ie=0;for(this[E]=255&C;++pe<q&&(xe*=256);)C<0&&0===Ie&&0!==this[E+pe-1]&&(Ie=1),this[E+pe]=(C/xe>>0)-Ie&255;return E+q},_.prototype.writeIntBE=function(C,E,q,te){if(C=+C,E|=0,!te){var ee=Math.pow(2,8*q-1);St(this,C,E,q,ee-1,-ee)}var pe=q-1,xe=1,Ie=0;for(this[E+pe]=255&C;--pe>=0&&(xe*=256);)C<0&&0===Ie&&0!==this[E+pe+1]&&(Ie=1),this[E+pe]=(C/xe>>0)-Ie&255;return E+q},_.prototype.writeInt8=function(C,E,q){return C=+C,E|=0,q||St(this,C,E,1,127,-128),_.TYPED_ARRAY_SUPPORT||(C=Math.floor(C)),C<0&&(C=255+C+1),this[E]=255&C,E+1},_.prototype.writeInt16LE=function(C,E,q){return C=+C,E|=0,q||St(this,C,E,2,32767,-32768),_.TYPED_ARRAY_SUPPORT?(this[E]=255&C,this[E+1]=C>>>8):Ft(this,C,E,!0),E+2},_.prototype.writeInt16BE=function(C,E,q){return C=+C,E|=0,q||St(this,C,E,2,32767,-32768),_.TYPED_ARRAY_SUPPORT?(this[E]=C>>>8,this[E+1]=255&C):Ft(this,C,E,!1),E+2},_.prototype.writeInt32LE=function(C,E,q){return C=+C,E|=0,q||St(this,C,E,4,2147483647,-2147483648),_.TYPED_ARRAY_SUPPORT?(this[E]=255&C,this[E+1]=C>>>8,this[E+2]=C>>>16,this[E+3]=C>>>24):Bt(this,C,E,!0),E+4},_.prototype.writeInt32BE=function(C,E,q){return C=+C,E|=0,q||St(this,C,E,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),_.TYPED_ARRAY_SUPPORT?(this[E]=C>>>24,this[E+1]=C>>>16,this[E+2]=C>>>8,this[E+3]=255&C):Bt(this,C,E,!1),E+4},_.prototype.writeFloatLE=function(C,E,q){return Ut(this,C,E,!0,q)},_.prototype.writeFloatBE=function(C,E,q){return Ut(this,C,E,!1,q)},_.prototype.writeDoubleLE=function(C,E,q){return mn(this,C,E,!0,q)},_.prototype.writeDoubleBE=function(C,E,q){return mn(this,C,E,!1,q)},_.prototype.copy=function(C,E,q,te){if(q||(q=0),te||0===te||(te=this.length),E>=C.length&&(E=C.length),E||(E=0),te>0&&te<q&&(te=q),te===q||0===C.length||0===this.length)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("sourceStart out of bounds");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),C.length-E<te-q&&(te=C.length-E+q);var ee,pe=te-q;if(this===C&&q<E&&E<te)for(ee=pe-1;ee>=0;--ee)C[ee+E]=this[ee+q];else if(pe<1e3||!_.TYPED_ARRAY_SUPPORT)for(ee=0;ee<pe;++ee)C[ee+E]=this[ee+q];else Uint8Array.prototype.set.call(C,this.subarray(q,q+pe),E);return pe},_.prototype.fill=function(C,E,q,te){if("string"==typeof C){if("string"==typeof E?(te=E,E=0,q=this.length):"string"==typeof q&&(te=q,q=this.length),1===C.length){var ee=C.charCodeAt(0);ee<256&&(C=ee)}if(void 0!==te&&"string"!=typeof te)throw new TypeError("encoding must be a string");if("string"==typeof te&&!_.isEncoding(te))throw new TypeError("Unknown encoding: "+te)}else"number"==typeof C&&(C&=255);if(E<0||this.length<E||this.length<q)throw new RangeError("Out of range index");if(q<=E)return this;var pe;if(E>>>=0,q=void 0===q?this.length:q>>>0,C||(C=0),"number"==typeof C)for(pe=E;pe<q;++pe)this[pe]=C;else{var xe=_.isBuffer(C)?C:Xn(new _(C,te).toString()),Ie=xe.length;for(pe=0;pe<q-E;++pe)this[pe+E]=xe[pe%Ie]}return this};var Hr=/[^+\/0-9A-Za-z-_]/g;function Fr(Y){return Y<16?"0"+Y.toString(16):Y.toString(16)}function Xn(Y,C){var E;C=C||1/0;for(var q=Y.length,te=null,ee=[],pe=0;pe<q;++pe){if((E=Y.charCodeAt(pe))>55295&&E<57344){if(!te){if(E>56319){(C-=3)>-1&&ee.push(239,191,189);continue}if(pe+1===q){(C-=3)>-1&&ee.push(239,191,189);continue}te=E;continue}if(E<56320){(C-=3)>-1&&ee.push(239,191,189),te=E;continue}E=65536+(te-55296<<10|E-56320)}else te&&(C-=3)>-1&&ee.push(239,191,189);if(te=null,E<128){if((C-=1)<0)break;ee.push(E)}else if(E<2048){if((C-=2)<0)break;ee.push(E>>6|192,63&E|128)}else if(E<65536){if((C-=3)<0)break;ee.push(E>>12|224,E>>6&63|128,63&E|128)}else{if(!(E<1114112))throw new Error("Invalid code point");if((C-=4)<0)break;ee.push(E>>18|240,E>>12&63|128,E>>6&63|128,63&E|128)}}return ee}function fr(Y){return y.toByteArray(function(E){if((E=(te=E,te.trim?te.trim():te.replace(/^\s+|\s+$/g,"")).replace(Hr,"")).length<2)return"";for(var te;E.length%4!=0;)E+="=";return E}(Y))}function Or(Y,C,E,q){for(var te=0;te<q&&!(te+E>=C.length||te>=Y.length);++te)C[te+E]=Y[te];return te}}).call(this,H(28))},function(be,N){var H;H=function(){return this}();try{H=H||new Function("return this")()}catch{"object"==typeof window&&(H=window)}be.exports=H},function(be,N,H){"use strict";N.byteLength=function(j){var L=_(j),x=L[1];return 3*(L[0]+x)/4-x},N.toByteArray=function(j){for(var L,A=_(j),x=A[0],R=A[1],F=new M(3*(x+(Ke=R))/4-Ke),P=0,z=R>0?x-4:x,se=0;se<z;se+=4)L=y[j.charCodeAt(se)]<<18|y[j.charCodeAt(se+1)]<<12|y[j.charCodeAt(se+2)]<<6|y[j.charCodeAt(se+3)],F[P++]=L>>16&255,F[P++]=L>>8&255,F[P++]=255&L;var Ke;return 2===R&&(L=y[j.charCodeAt(se)]<<2|y[j.charCodeAt(se+1)]>>4,F[P++]=255&L),1===R&&(L=y[j.charCodeAt(se)]<<10|y[j.charCodeAt(se+1)]<<4|y[j.charCodeAt(se+2)]>>2,F[P++]=L>>8&255,F[P++]=255&L),F},N.fromByteArray=function(j){for(var L,A=j.length,x=A%3,R=[],F=0,P=A-x;F<P;F+=16383)R.push(T(j,F,F+16383>P?P:F+16383));return 1===x?R.push(k[(L=j[A-1])>>2]+k[L<<4&63]+"=="):2===x&&R.push(k[(L=(j[A-2]<<8)+j[A-1])>>10]+k[L>>4&63]+k[L<<2&63]+"="),R.join("")};for(var k=[],y=[],M=typeof Uint8Array<"u"?Uint8Array:Array,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,v=S.length;g<v;++g)k[g]=S[g],y[S.charCodeAt(g)]=g;function _(D){var j=D.length;if(j%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var L=D.indexOf("=");return-1===L&&(L=j),[L,L===j?0:4-L%4]}function T(D,j,L){for(var x,R=[],F=j;F<L;F+=3)R.push(k[(x=(D[F]<<16&16711680)+(D[F+1]<<8&65280)+(255&D[F+2]))>>18&63]+k[x>>12&63]+k[x>>6&63]+k[63&x]);return R.join("")}y["-".charCodeAt(0)]=62,y["_".charCodeAt(0)]=63},function(be,N){N.read=function(H,k,y,M,S){var g,v,_=8*S-M-1,T=(1<<_)-1,D=T>>1,j=-7,L=y?S-1:0,A=y?-1:1,x=H[k+L];for(L+=A,g=x&(1<<-j)-1,x>>=-j,j+=_;j>0;g=256*g+H[k+L],L+=A,j-=8);for(v=g&(1<<-j)-1,g>>=-j,j+=M;j>0;v=256*v+H[k+L],L+=A,j-=8);if(0===g)g=1-D;else{if(g===T)return v?NaN:1/0*(x?-1:1);v+=Math.pow(2,M),g-=D}return(x?-1:1)*v*Math.pow(2,g-M)},N.write=function(H,k,y,M,S,g){var v,_,T,D=8*g-S-1,j=(1<<D)-1,L=j>>1,A=23===S?Math.pow(2,-24)-Math.pow(2,-77):0,x=M?0:g-1,R=M?1:-1,F=k<0||0===k&&1/k<0?1:0;for(k=Math.abs(k),isNaN(k)||k===1/0?(_=isNaN(k)?1:0,v=j):(v=Math.floor(Math.log(k)/Math.LN2),k*(T=Math.pow(2,-v))<1&&(v--,T*=2),(k+=v+L>=1?A/T:A*Math.pow(2,1-L))*T>=2&&(v++,T/=2),v+L>=j?(_=0,v=j):v+L>=1?(_=(k*T-1)*Math.pow(2,S),v+=L):(_=k*Math.pow(2,L-1)*Math.pow(2,S),v=0));S>=8;H[y+x]=255&_,x+=R,_/=256,S-=8);for(v=v<<S|_,D+=S;D>0;H[y+x]=255&v,x+=R,v/=256,D-=8);H[y+x-R]|=128*F}},function(be,N){var H={}.toString;be.exports=Array.isArray||function(k){return"[object Array]"==H.call(k)}},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=function(M){var S=M.jws,g=M.KeyUtil,v=M.X509,_=M.crypto,T=M.hextob64u,D=M.b64tohex,j=M.AllowedSigningAlgs;return function(){function L(){!function(x,R){if(!(x instanceof R))throw new TypeError("Cannot call a class as a function")}(this,L)}return L.parseJwt=function(x){k.Log.debug("JoseUtil.parseJwt");try{var R=S.JWS.parse(x);return{header:R.headerObj,payload:R.payloadObj}}catch(F){k.Log.error(F)}},L.validateJwt=function(x,R,F,P,z,se,ie){k.Log.debug("JoseUtil.validateJwt");try{if("RSA"===R.kty)if(R.e&&R.n)R=g.getKey(R);else{if(!R.x5c||!R.x5c.length)return k.Log.error("JoseUtil.validateJwt: RSA key missing key material",R),Promise.reject(new Error("RSA key missing key material"));var Se=D(R.x5c[0]);R=v.getPublicKeyFromCertHex(Se)}else{if("EC"!==R.kty)return k.Log.error("JoseUtil.validateJwt: Unsupported key type",R&&R.kty),Promise.reject(new Error(R.kty));if(!(R.crv&&R.x&&R.y))return k.Log.error("JoseUtil.validateJwt: EC key missing key material",R),Promise.reject(new Error("EC key missing key material"));R=g.getKey(R)}return L._validateJwt(x,R,F,P,z,se,ie)}catch(Ee){return k.Log.error(Ee&&Ee.message||Ee),Promise.reject("JWT validation failed")}},L.validateJwtAttributes=function(x,R,F,P,z,se){P||(P=0),z||(z=parseInt(Date.now()/1e3));var ie=L.parseJwt(x).payload;if(!ie.iss)return k.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(ie.iss!==R)return k.Log.error("JoseUtil._validateJwt: Invalid issuer in token",ie.iss),Promise.reject(new Error("Invalid issuer in token: "+ie.iss));if(!ie.aud)return k.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(ie.aud===F||Array.isArray(ie.aud)&&ie.aud.indexOf(F)>=0))return k.Log.error("JoseUtil._validateJwt: Invalid audience in token",ie.aud),Promise.reject(new Error("Invalid audience in token: "+ie.aud));if(ie.azp&&ie.azp!==F)return k.Log.error("JoseUtil._validateJwt: Invalid azp in token",ie.azp),Promise.reject(new Error("Invalid azp in token: "+ie.azp));if(!se){var Ee=z+P,Ke=z-P;if(!ie.iat)return k.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(Ee<ie.iat)return k.Log.error("JoseUtil._validateJwt: iat is in the future",ie.iat),Promise.reject(new Error("iat is in the future: "+ie.iat));if(ie.nbf&&Ee<ie.nbf)return k.Log.error("JoseUtil._validateJwt: nbf is in the future",ie.nbf),Promise.reject(new Error("nbf is in the future: "+ie.nbf));if(!ie.exp)return k.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(ie.exp<Ke)return k.Log.error("JoseUtil._validateJwt: exp is in the past",ie.exp),Promise.reject(new Error("exp is in the past:"+ie.exp))}return Promise.resolve(ie)},L._validateJwt=function(x,R,F,P,z,se,ie){return L.validateJwtAttributes(x,F,P,z,se,ie).then(function(Se){try{return S.JWS.verify(x,R,j)?Se:(k.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(Ee){return k.Log.error(Ee&&Ee.message||Ee),Promise.reject(new Error("signature validation failed"))}})},L.hashString=function(x,R){try{return _.Util.hashString(x,R)}catch(F){k.Log.error(F)}},L.hexToBase64Url=function(x){try{return T(x)}catch(R){k.Log.error(R)}},L}()};var k=H(0);be.exports=N.default},function(be,N,H){var k=H(34),y=H(35);be.exports=function(S,g,v){var _=g&&v||0;"string"==typeof S&&(g="binary"===S?new Array(16):null,S=null);var T=(S=S||{}).random||(S.rng||k)();if(T[6]=15&T[6]|64,T[8]=63&T[8]|128,g)for(var D=0;D<16;++D)g[_+D]=T[D];return g||y(T)}},function(be,N){var H=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(H){var k=new Uint8Array(16);be.exports=function(){return H(k),k}}else{var y=new Array(16);be.exports=function(){for(var S,g=0;g<16;g++)0==(3&g)&&(S=4294967296*Math.random()),y[g]=S>>>((3&g)<<3)&255;return y}}},function(be,N){for(var H=[],k=0;k<256;++k)H[k]=(k+256).toString(16).substr(1);be.exports=function(M,S){var g=S||0;return[H[M[g++]],H[M[g++]],H[M[g++]],H[M[g++]],"-",H[M[g++]],H[M[g++]],"-",H[M[g++]],H[M[g++]],"-",H[M[g++]],H[M[g++]],"-",H[M[g++]],H[M[g++]],H[M[g++]],H[M[g++]],H[M[g++]],H[M[g++]]].join("")}},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.SigninResponse=void 0;var k=function(){function M(S,g){for(var v=0;v<g.length;v++){var _=g[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(S,_.key,_)}}return function(S,g,v){return g&&M(S.prototype,g),v&&M(S,v),S}}(),y=H(3);N.SigninResponse=function(){function M(S){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";!function(T,D){if(!(T instanceof D))throw new TypeError("Cannot call a class as a function")}(this,M);var v=y.UrlUtility.parseUrlFragment(S,g);this.error=v.error,this.error_description=v.error_description,this.error_uri=v.error_uri,this.code=v.code,this.state=v.state,this.id_token=v.id_token,this.session_state=v.session_state,this.access_token=v.access_token,this.token_type=v.token_type,this.scope=v.scope,this.profile=void 0,this.expires_in=v.expires_in}return k(M,[{key:"expires_in",get:function(){if(this.expires_at){var g=parseInt(Date.now()/1e3);return this.expires_at-g}},set:function(g){var v=parseInt(g);if("number"==typeof v&&v>0){var _=parseInt(Date.now()/1e3);this.expires_at=_+v}}},{key:"expired",get:function(){var g=this.expires_in;if(void 0!==g)return g<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),M}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.SignoutRequest=void 0;var k=H(0),y=H(3),M=H(8);N.SignoutRequest=function S(g){var v=g.url,_=g.id_token_hint,T=g.post_logout_redirect_uri,D=g.data,j=g.extraQueryParams,L=g.request_type;if(function(R,F){if(!(R instanceof F))throw new TypeError("Cannot call a class as a function")}(this,S),!v)throw k.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var A in _&&(v=y.UrlUtility.addQueryParam(v,"id_token_hint",_)),T&&(v=y.UrlUtility.addQueryParam(v,"post_logout_redirect_uri",T),D&&(this.state=new M.State({data:D,request_type:L}),v=y.UrlUtility.addQueryParam(v,"state",this.state.id))),j)v=y.UrlUtility.addQueryParam(v,A,j[A]);this.url=v}},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.SignoutResponse=void 0;var k=H(3);N.SignoutResponse=function y(M){!function(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}(this,y);var S=k.UrlUtility.parseUrlFragment(M,"?");this.error=S.error,this.error_description=S.error_description,this.error_uri=S.error_uri,this.state=S.state}},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.InMemoryWebStorage=void 0;var k=function(){function M(S,g){for(var v=0;v<g.length;v++){var _=g[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(S,_.key,_)}}return function(S,g,v){return g&&M(S.prototype,g),v&&M(S,v),S}}(),y=H(0);N.InMemoryWebStorage=function(){function M(){(function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")})(this,M),this._data={}}return M.prototype.getItem=function(g){return y.Log.debug("InMemoryWebStorage.getItem",g),this._data[g]},M.prototype.setItem=function(g,v){y.Log.debug("InMemoryWebStorage.setItem",g),this._data[g]=v},M.prototype.removeItem=function(g){y.Log.debug("InMemoryWebStorage.removeItem",g),delete this._data[g]},M.prototype.key=function(g){return Object.getOwnPropertyNames(this._data)[g]},k(M,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),M}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.UserManager=void 0;var k=function(){function A(x,R){for(var F=0;F<R.length;F++){var P=R[F];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}return function(x,R,F){return R&&A(x.prototype,R),F&&A(x,F),x}}(),y=H(0),M=H(9),S=H(41),g=H(15),v=H(47),_=H(49),T=H(18),D=H(20),j=H(10),L=H(4);N.UserManager=function(A){function x(){var R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},F=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.SilentRenewService,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T.SessionMonitor,z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:D.TokenRevocationClient,se=arguments.length>4&&void 0!==arguments[4]?arguments[4]:j.TokenClient,ie=arguments.length>5&&void 0!==arguments[5]?arguments[5]:L.JoseUtil;(function(Ke,yt){if(!(Ke instanceof yt))throw new TypeError("Cannot call a class as a function")})(this,x),R instanceof S.UserManagerSettings||(R=new S.UserManagerSettings(R));var Se=function(Ke,yt){if(!Ke)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!yt||"object"!=typeof yt&&"function"!=typeof yt?Ke:yt}(this,A.call(this,R));return Se._events=new v.UserManagerEvents(R),Se._silentRenewService=new F(Se),Se.settings.automaticSilentRenew&&(y.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),Se.startSilentRenew()),Se.settings.monitorSession&&(y.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),Se._sessionMonitor=new P(Se)),Se._tokenRevocationClient=new z(Se._settings),Se._tokenClient=new se(Se._settings),Se._joseUtil=ie,Se}return function(F,P){if("function"!=typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function, not "+typeof P);F.prototype=Object.create(P&&P.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(F,P):F.__proto__=P)}(x,A),x.prototype.getUser=function(){var F=this;return this._loadUser().then(function(P){return P?(y.Log.info("UserManager.getUser: user loaded"),F._events.load(P,!1),P):(y.Log.info("UserManager.getUser: user not found in storage"),null)})},x.prototype.removeUser=function(){var F=this;return this.storeUser(null).then(function(){y.Log.info("UserManager.removeUser: user removed from storage"),F._events.unload()})},x.prototype.signinRedirect=function(){var F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(F=Object.assign({},F)).request_type="si:r",this._signinStart(F,this._redirectNavigator,{useReplaceToNavigate:F.useReplaceToNavigate}).then(function(){y.Log.info("UserManager.signinRedirect: successful")})},x.prototype.signinRedirectCallback=function(F){return this._signinEnd(F||this._redirectNavigator.url).then(function(P){return P.profile&&P.profile.sub?y.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",P.profile.sub):y.Log.info("UserManager.signinRedirectCallback: no sub"),P})},x.prototype.signinPopup=function(){var F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(F=Object.assign({},F)).request_type="si:p";var P=F.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return P?(F.redirect_uri=P,F.display="popup",this._signin(F,this._popupNavigator,{startUrl:P,popupWindowFeatures:F.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:F.popupWindowTarget||this.settings.popupWindowTarget}).then(function(z){return z&&(z.profile&&z.profile.sub?y.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",z.profile.sub):y.Log.info("UserManager.signinPopup: no sub")),z})):(y.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},x.prototype.signinPopupCallback=function(F){return this._signinCallback(F,this._popupNavigator).then(function(P){return P&&(P.profile&&P.profile.sub?y.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",P.profile.sub):y.Log.info("UserManager.signinPopupCallback: no sub")),P}).catch(function(P){y.Log.error(P.message)})},x.prototype.signinSilent=function(){var F=this,P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(P=Object.assign({},P)).request_type="si:s",this._loadUser().then(function(z){return z&&z.refresh_token?(P.refresh_token=z.refresh_token,F._useRefreshToken(P)):(P.id_token_hint=P.id_token_hint||F.settings.includeIdTokenInSilentRenew&&z&&z.id_token,z&&F._settings.validateSubOnSilentRenew&&(y.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",z.profile.sub),P.current_sub=z.profile.sub),F._signinSilentIframe(P))})},x.prototype._useRefreshToken=function(){var F=this;return this._tokenClient.exchangeRefreshToken(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).then(function(z){return z?z.access_token?F._loadUser().then(function(se){if(se){var ie=Promise.resolve();return z.id_token&&(ie=F._validateIdTokenFromTokenRefreshToken(se.profile,z.id_token)),ie.then(function(){return y.Log.debug("UserManager._useRefreshToken: refresh token response success"),se.id_token=z.id_token,se.access_token=z.access_token,se.refresh_token=z.refresh_token||se.refresh_token,se.expires_in=z.expires_in,F.storeUser(se).then(function(){return F._events.load(se),se})})}return null}):(y.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(y.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},x.prototype._validateIdTokenFromTokenRefreshToken=function(F,P){var z=this;return this._metadataService.getIssuer().then(function(se){return z._joseUtil.validateJwtAttributes(P,se,z._settings.client_id,z._settings.clockSkew).then(function(ie){return ie?ie.sub!==F.sub?(y.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):ie.auth_time&&ie.auth_time!==F.auth_time?(y.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):ie.azp&&ie.azp!==F.azp?(y.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!ie.azp&&F.azp?(y.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(y.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})},x.prototype._signinSilentIframe=function(){var F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},P=F.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return P?(F.redirect_uri=P,F.prompt=F.prompt||"none",this._signin(F,this._iframeNavigator,{startUrl:P,silentRequestTimeout:F.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(z){return z&&(z.profile&&z.profile.sub?y.Log.info("UserManager.signinSilent: successful, signed in sub: ",z.profile.sub):y.Log.info("UserManager.signinSilent: no sub")),z})):(y.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},x.prototype.signinSilentCallback=function(F){return this._signinCallback(F,this._iframeNavigator).then(function(P){return P&&(P.profile&&P.profile.sub?y.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",P.profile.sub):y.Log.info("UserManager.signinSilentCallback: no sub")),P})},x.prototype.signinCallback=function(F){var P=this;return this.readSigninResponseState(F).then(function(z){var se=z.state;return"si:r"===se.request_type?P.signinRedirectCallback(F):"si:p"===se.request_type?P.signinPopupCallback(F):"si:s"===se.request_type?P.signinSilentCallback(F):Promise.reject(new Error("invalid response_type in state"))})},x.prototype.signoutCallback=function(F,P){var z=this;return this.readSignoutResponseState(F).then(function(se){var ie=se.state,Se=se.response;return ie?"so:r"===ie.request_type?z.signoutRedirectCallback(F):"so:p"===ie.request_type?z.signoutPopupCallback(F,P):Promise.reject(new Error("invalid response_type in state")):Se})},x.prototype.querySessionStatus=function(){var F=this,P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(P=Object.assign({},P)).request_type="si:s";var z=P.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return z?(P.redirect_uri=z,P.prompt="none",P.response_type=P.response_type||this.settings.query_status_response_type,P.scope=P.scope||"openid",P.skipUserInfo=!0,this._signinStart(P,this._iframeNavigator,{startUrl:z,silentRequestTimeout:P.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(se){return F.processSigninResponse(se.url).then(function(ie){if(y.Log.debug("UserManager.querySessionStatus: got signin response"),ie.session_state&&ie.profile.sub)return y.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",ie.profile.sub),{session_state:ie.session_state,sub:ie.profile.sub,sid:ie.profile.sid};y.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(ie){if(ie.session_state&&F.settings.monitorAnonymousSession&&("login_required"==ie.message||"consent_required"==ie.message||"interaction_required"==ie.message||"account_selection_required"==ie.message))return y.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:ie.session_state};throw ie})})):(y.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},x.prototype._signin=function(F,P){var z=this;return this._signinStart(F,P,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(ie){return z._signinEnd(ie.url,F)})},x.prototype._signinStart=function(F,P){var z=this,se=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return P.prepare(se).then(function(ie){return y.Log.debug("UserManager._signinStart: got navigator window handle"),z.createSigninRequest(F).then(function(Se){return y.Log.debug("UserManager._signinStart: got signin request"),se.url=Se.url,se.id=Se.state.id,ie.navigate(se)}).catch(function(Se){throw ie.close&&(y.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),ie.close()),Se})})},x.prototype._signinEnd=function(F){var P=this,z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(F).then(function(se){y.Log.debug("UserManager._signinEnd: got signin response");var ie=new g.User(se);if(z.current_sub){if(z.current_sub!==ie.profile.sub)return y.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",ie.profile.sub),Promise.reject(new Error("login_required"));y.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return P.storeUser(ie).then(function(){return y.Log.debug("UserManager._signinEnd: user stored"),P._events.load(ie),ie})})},x.prototype._signinCallback=function(F,P){return y.Log.debug("UserManager._signinCallback"),P.callback(F)},x.prototype.signoutRedirect=function(){var F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(F=Object.assign({},F)).request_type="so:r";var P=F.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return P&&(F.post_logout_redirect_uri=P),this._signoutStart(F,this._redirectNavigator,{useReplaceToNavigate:F.useReplaceToNavigate}).then(function(){y.Log.info("UserManager.signoutRedirect: successful")})},x.prototype.signoutRedirectCallback=function(F){return this._signoutEnd(F||this._redirectNavigator.url).then(function(P){return y.Log.info("UserManager.signoutRedirectCallback: successful"),P})},x.prototype.signoutPopup=function(){var F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(F=Object.assign({},F)).request_type="so:p";var P=F.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return F.post_logout_redirect_uri=P,F.display="popup",F.post_logout_redirect_uri&&(F.state=F.state||{}),this._signout(F,this._popupNavigator,{startUrl:P,popupWindowFeatures:F.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:F.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){y.Log.info("UserManager.signoutPopup: successful")})},x.prototype.signoutPopupCallback=function(F,P){return void 0===P&&"boolean"==typeof F&&(P=F,F=null),this._popupNavigator.callback(F,P,"?").then(function(){y.Log.info("UserManager.signoutPopupCallback: successful")})},x.prototype._signout=function(F,P){var z=this;return this._signoutStart(F,P,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(ie){return z._signoutEnd(ie.url)})},x.prototype._signoutStart=function(){var F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},P=this,se=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return arguments[1].prepare(se).then(function(ie){return y.Log.debug("UserManager._signoutStart: got navigator window handle"),P._loadUser().then(function(Se){return y.Log.debug("UserManager._signoutStart: loaded current user from storage"),(P._settings.revokeAccessTokenOnSignout?P._revokeInternal(Se):Promise.resolve()).then(function(){var Ee=F.id_token_hint||Se&&Se.id_token;return Ee&&(y.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),F.id_token_hint=Ee),P.removeUser().then(function(){return y.Log.debug("UserManager._signoutStart: user removed, creating signout request"),P.createSignoutRequest(F).then(function(Ke){return y.Log.debug("UserManager._signoutStart: got signout request"),se.url=Ke.url,Ke.state&&(se.id=Ke.state.id),ie.navigate(se)})})})}).catch(function(Se){throw ie.close&&(y.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),ie.close()),Se})})},x.prototype._signoutEnd=function(F){return this.processSignoutResponse(F).then(function(P){return y.Log.debug("UserManager._signoutEnd: got signout response"),P})},x.prototype.revokeAccessToken=function(){var F=this;return this._loadUser().then(function(P){return F._revokeInternal(P,!0).then(function(z){if(z)return y.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),P.access_token=null,P.refresh_token=null,P.expires_at=null,P.token_type=null,F.storeUser(P).then(function(){y.Log.debug("UserManager.revokeAccessToken: user stored"),F._events.load(P)})})}).then(function(){y.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},x.prototype._revokeInternal=function(F,P){var z=this;if(F){var ie=F.refresh_token;return this._revokeAccessTokenInternal(F.access_token,P).then(function(Se){return z._revokeRefreshTokenInternal(ie,P).then(function(Ee){return Se||Ee||y.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),Se||Ee})})}return Promise.resolve(!1)},x.prototype._revokeAccessTokenInternal=function(F,P){return!F||F.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(F,P).then(function(){return!0})},x.prototype._revokeRefreshTokenInternal=function(F,P){return F?this._tokenRevocationClient.revoke(F,P,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},x.prototype.startSilentRenew=function(){this._silentRenewService.start()},x.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},x.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(F){return F?(y.Log.debug("UserManager._loadUser: user storageString loaded"),g.User.fromStorageString(F)):(y.Log.debug("UserManager._loadUser: no user storageString"),null)})},x.prototype.storeUser=function(F){if(F){y.Log.debug("UserManager.storeUser: storing user");var P=F.toStorageString();return this._userStore.set(this._userStoreKey,P)}return y.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},k(x,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),x}(M.OidcClient)},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.UserManagerSettings=void 0;var k=function(){function L(A,x){for(var R=0;R<x.length;R++){var F=x[R];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(A,F.key,F)}}return function(A,x,R){return x&&L(A.prototype,x),R&&L(A,R),A}}(),y=(H(0),H(5)),M=H(42),S=H(43),g=H(45),v=H(6),_=H(1),T=H(12);N.UserManagerSettings=function(L){function A(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},R=x.popup_redirect_uri,F=x.popup_post_logout_redirect_uri,P=x.popupWindowFeatures,z=x.popupWindowTarget,se=x.silent_redirect_uri,ie=x.silentRequestTimeout,Se=x.automaticSilentRenew,Ee=void 0!==Se&&Se,Ke=x.validateSubOnSilentRenew,yt=void 0!==Ke&&Ke,Z=x.includeIdTokenInSilentRenew,Ze=void 0===Z||Z,on=x.monitorSession,ze=void 0===on||on,gn=x.monitorAnonymousSession,Ht=void 0!==gn&&gn,Ce=x.checkSessionInterval,St=void 0===Ce?2e3:Ce,Ft=x.stopCheckSessionOnError,Bt=void 0===Ft||Ft,Zt=x.query_status_response_type,Ut=x.revokeAccessTokenOnSignout,mn=void 0!==Ut&&Ut,Hr=x.accessTokenExpiringNotificationTime,Fr=void 0===Hr?60:Hr,Xn=x.redirectNavigator,fr=void 0===Xn?new M.RedirectNavigator:Xn,Or=x.popupNavigator,Y=void 0===Or?new S.PopupNavigator:Or,C=x.iframeNavigator,E=void 0===C?new g.IFrameNavigator:C,q=x.userStore,te=void 0===q?new v.WebStorageStateStore({store:_.Global.sessionStorage}):q;!function(xe,Ie){if(!(xe instanceof Ie))throw new TypeError("Cannot call a class as a function")}(this,A);var ee=function(xe,Ie){if(!xe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Ie||"object"!=typeof Ie&&"function"!=typeof Ie?xe:Ie}(this,L.call(this,arguments[0]));return ee._popup_redirect_uri=R,ee._popup_post_logout_redirect_uri=F,ee._popupWindowFeatures=P,ee._popupWindowTarget=z,ee._silent_redirect_uri=se,ee._silentRequestTimeout=ie,ee._automaticSilentRenew=Ee,ee._validateSubOnSilentRenew=yt,ee._includeIdTokenInSilentRenew=Ze,ee._accessTokenExpiringNotificationTime=Fr,ee._monitorSession=ze,ee._monitorAnonymousSession=Ht,ee._checkSessionInterval=St,ee._stopCheckSessionOnError=Bt,ee._query_status_response_type=Zt||(arguments[0]&&arguments[0].response_type?T.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":"id_token"),ee._revokeAccessTokenOnSignout=mn,ee._redirectNavigator=fr,ee._popupNavigator=Y,ee._iframeNavigator=E,ee._userStore=te,ee}return function(R,F){if("function"!=typeof F&&null!==F)throw new TypeError("Super expression must either be null or a function, not "+typeof F);R.prototype=Object.create(F&&F.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(R,F):R.__proto__=F)}(A,L),k(A,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),A}(y.OidcClientSettings)},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.RedirectNavigator=void 0;var k=function(){function M(S,g){for(var v=0;v<g.length;v++){var _=g[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(S,_.key,_)}}return function(S,g,v){return g&&M(S.prototype,g),v&&M(S,v),S}}(),y=H(0);N.RedirectNavigator=function(){function M(){!function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}(this,M)}return M.prototype.prepare=function(){return Promise.resolve(this)},M.prototype.navigate=function(g){return g&&g.url?(g.useReplaceToNavigate?window.location.replace(g.url):window.location=g.url,Promise.resolve()):(y.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},k(M,[{key:"url",get:function(){return window.location.href}}]),M}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.PopupNavigator=void 0;var k=H(0),y=H(44);N.PopupNavigator=function(){function M(){!function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}(this,M)}return M.prototype.prepare=function(g){var v=new y.PopupWindow(g);return Promise.resolve(v)},M.prototype.callback=function(g,v,_){k.Log.debug("PopupNavigator.callback");try{return y.PopupWindow.notifyOpener(g,v,_),Promise.resolve()}catch(T){return Promise.reject(T)}},M}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.PopupWindow=void 0;var k=function(){function _(T,D){for(var j=0;j<D.length;j++){var L=D[j];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(T,L.key,L)}}return function(T,D,j){return D&&_(T.prototype,D),j&&_(T,j),T}}(),y=H(0),M=H(3);N.PopupWindow=function(){function _(T){var D=this;(function(x,R){if(!(x instanceof R))throw new TypeError("Cannot call a class as a function")})(this,_),this._promise=new Promise(function(A,x){D._resolve=A,D._reject=x}),this._popup=window.open("",T.popupWindowTarget||"_blank",T.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;"),this._popup&&(y.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return _.prototype.navigate=function(D){return this._popup?D&&D.url?(y.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=D.id,this._id&&(window["popupCallback_"+D.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=D.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},_.prototype._success=function(D){y.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(D)},_.prototype._error=function(D){y.Log.error("PopupWindow.error: ",D),this._cleanup(),this._reject(new Error(D))},_.prototype.close=function(){this._cleanup(!1)},_.prototype._cleanup=function(D){y.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!D&&this._popup.close(),this._popup=null},_.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},_.prototype._callback=function(D,j){this._cleanup(j),D?(y.Log.debug("PopupWindow.callback success"),this._success({url:D})):(y.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},_.notifyOpener=function(D,j,L){if(window.opener){if(D=D||window.location.href){var A=M.UrlUtility.parseUrlFragment(D,L);if(A.state){var R=window.opener["popupCallback_"+A.state];R?(y.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),R(D,j)):y.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else y.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else y.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},k(_,[{key:"promise",get:function(){return this._promise}}]),_}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.IFrameNavigator=void 0;var k=H(0),y=H(46);N.IFrameNavigator=function(){function M(){!function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}(this,M)}return M.prototype.prepare=function(g){var v=new y.IFrameWindow(g);return Promise.resolve(v)},M.prototype.callback=function(g){k.Log.debug("IFrameNavigator.callback");try{return y.IFrameWindow.notifyParent(g),Promise.resolve()}catch(v){return Promise.reject(v)}},M}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.IFrameWindow=void 0;var k=function(){function M(S,g){for(var v=0;v<g.length;v++){var _=g[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(S,_.key,_)}}return function(S,g,v){return g&&M(S.prototype,g),v&&M(S,v),S}}(),y=H(0);N.IFrameWindow=function(){function M(S){var g=this;(function(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this._promise=new Promise(function(v,_){g._resolve=v,g._reject=_}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.style.width=0,this._frame.style.height=0,window.document.body.appendChild(this._frame)}return M.prototype.navigate=function(g){if(g&&g.url){var v=g.silentRequestTimeout||1e4;y.Log.debug("IFrameWindow.navigate: Using timeout of:",v),this._timer=window.setTimeout(this._timeout.bind(this),v),this._frame.src=g.url}else this._error("No url provided");return this.promise},M.prototype._success=function(g){this._cleanup(),y.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(g)},M.prototype._error=function(g){this._cleanup(),y.Log.error(g),this._reject(new Error(g))},M.prototype.close=function(){this._cleanup()},M.prototype._cleanup=function(){this._frame&&(y.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},M.prototype._timeout=function(){y.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},M.prototype._message=function(g){if(y.Log.debug("IFrameWindow.message"),this._timer&&g.origin===this._origin&&g.source===this._frame.contentWindow){var v=g.data;v?this._success({url:v}):this._error("Invalid response from frame")}},M.notifyParent=function(g){y.Log.debug("IFrameWindow.notifyParent"),window.frameElement&&(g=g||window.location.href)&&(y.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(g,location.protocol+"//"+location.host))},k(M,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),M}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.UserManagerEvents=void 0;var k=H(0),y=H(16),M=H(17);N.UserManagerEvents=function(S){function g(v){!function(D,j){if(!(D instanceof j))throw new TypeError("Cannot call a class as a function")}(this,g);var _=function(D,j){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!j||"object"!=typeof j&&"function"!=typeof j?D:j}(this,S.call(this,v));return _._userLoaded=new M.Event("User loaded"),_._userUnloaded=new M.Event("User unloaded"),_._silentRenewError=new M.Event("Silent renew error"),_._userSignedIn=new M.Event("User signed in"),_._userSignedOut=new M.Event("User signed out"),_._userSessionChanged=new M.Event("User session changed"),_}return function(_,T){if("function"!=typeof T&&null!==T)throw new TypeError("Super expression must either be null or a function, not "+typeof T);_.prototype=Object.create(T&&T.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(_,T):_.__proto__=T)}(g,S),g.prototype.load=function(_){var T=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];k.Log.debug("UserManagerEvents.load"),S.prototype.load.call(this,_),T&&this._userLoaded.raise(_)},g.prototype.unload=function(){k.Log.debug("UserManagerEvents.unload"),S.prototype.unload.call(this),this._userUnloaded.raise()},g.prototype.addUserLoaded=function(_){this._userLoaded.addHandler(_)},g.prototype.removeUserLoaded=function(_){this._userLoaded.removeHandler(_)},g.prototype.addUserUnloaded=function(_){this._userUnloaded.addHandler(_)},g.prototype.removeUserUnloaded=function(_){this._userUnloaded.removeHandler(_)},g.prototype.addSilentRenewError=function(_){this._silentRenewError.addHandler(_)},g.prototype.removeSilentRenewError=function(_){this._silentRenewError.removeHandler(_)},g.prototype._raiseSilentRenewError=function(_){k.Log.debug("UserManagerEvents._raiseSilentRenewError",_.message),this._silentRenewError.raise(_)},g.prototype.addUserSignedIn=function(_){this._userSignedIn.addHandler(_)},g.prototype.removeUserSignedIn=function(_){this._userSignedIn.removeHandler(_)},g.prototype._raiseUserSignedIn=function(){k.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},g.prototype.addUserSignedOut=function(_){this._userSignedOut.addHandler(_)},g.prototype.removeUserSignedOut=function(_){this._userSignedOut.removeHandler(_)},g.prototype._raiseUserSignedOut=function(){k.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},g.prototype.addUserSessionChanged=function(_){this._userSessionChanged.addHandler(_)},g.prototype.removeUserSessionChanged=function(_){this._userSessionChanged.removeHandler(_)},g.prototype._raiseUserSessionChanged=function(){k.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},g}(y.AccessTokenEvents)},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Timer=void 0;var k=function(){function g(v,_){for(var T=0;T<_.length;T++){var D=_[T];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(v,D.key,D)}}return function(v,_,T){return _&&g(v.prototype,_),T&&g(v,T),v}}(),y=H(0),M=H(1),S=H(17);N.Timer=function(g){function v(_){var T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.Global.timer,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;!function(A,x){if(!(A instanceof x))throw new TypeError("Cannot call a class as a function")}(this,v);var j=function(A,x){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!x||"object"!=typeof x&&"function"!=typeof x?A:x}(this,g.call(this,_));return j._timer=T,j._nowFunc=D||function(){return Date.now()/1e3},j}return function(T,D){if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function, not "+typeof D);T.prototype=Object.create(D&&D.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(T,D):T.__proto__=D)}(v,g),v.prototype.init=function(T){T<=0&&(T=1),T=parseInt(T);var D=this.now+T;if(this.expiration===D&&this._timerHandle)y.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),y.Log.debug("Timer.init timer "+this._name+" for duration:",T),this._expiration=D;var j=5;T<j&&(j=T),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*j)}},v.prototype.cancel=function(){this._timerHandle&&(y.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},v.prototype._callback=function(){y.Log.debug("Timer.callback; "+this._name+" timer expires in:",this._expiration-this.now),this._expiration<=this.now&&(this.cancel(),g.prototype.raise.call(this))},k(v,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),v}(S.Event)},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.SilentRenewService=void 0;var k=H(0);N.SilentRenewService=function(){function y(M){(function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")})(this,y),this._userManager=M}return y.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(S){}).catch(function(S){k.Log.error("SilentRenewService.start: Error from getUser:",S.message)}))},y.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},y.prototype._tokenExpiring=function(){var S=this;this._userManager.signinSilent().then(function(g){k.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(g){k.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",g.message),S._userManager.events._raiseSilentRenewError(g)})},y}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.CordovaPopupNavigator=void 0;var k=H(21);N.CordovaPopupNavigator=function(){function y(){!function(S,g){if(!(S instanceof g))throw new TypeError("Cannot call a class as a function")}(this,y)}return y.prototype.prepare=function(S){var g=new k.CordovaPopupWindow(S);return Promise.resolve(g)},y}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.CordovaIFrameNavigator=void 0;var k=H(21);N.CordovaIFrameNavigator=function(){function y(){!function(S,g){if(!(S instanceof g))throw new TypeError("Cannot call a class as a function")}(this,y)}return y.prototype.prepare=function(S){S.popupWindowFeatures="hidden=yes";var g=new k.CordovaPopupWindow(S);return Promise.resolve(g)},y}()},function(be,N,H){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Version="1.10.1"}])},504:(We,be,N)=>{const H=N(779),k={isNumericId:D=>/^[1-9][0-9]*$/.test(D),isEntityId:D=>/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)$/.test(D),isEntitySchemaId:D=>/^E[1-9][0-9]*$/.test(D),isItemId:D=>/^Q[1-9][0-9]*$/.test(D),isPropertyId:D=>/^P[1-9][0-9]*$/.test(D),isLexemeId:D=>/^L[1-9][0-9]*$/.test(D),isFormId:D=>/^L[1-9][0-9]*-F[1-9][0-9]*$/.test(D),isSenseId:D=>/^L[1-9][0-9]*-S[1-9][0-9]*$/.test(D),isGuid:D=>/^((Q|P|L)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)\$[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(D),isHash:D=>/^[0-9a-f]{40}$/.test(D),isPropertyClaimsId:D=>{const[j,L]=D.split("#");return k.isEntityId(j)&&k.isPropertyId(L)},isRevisionId:D=>/^\d+$/.test(D),isEntityPageTitle:D=>{if("string"!=typeof D)return!1;let[j,L]=D.split(":");return j&&L?M(j)&&k[`is${j}Id`](L):(L=j,k.isItemId(L))}},y=["Item","Property","Lexeme"],M=D=>y.includes(D);k.getNumericId=D=>{if(!(D=>/^(Q|P|L)[1-9][0-9]*$/.test(D))(D))throw new Error(`invalid entity id: ${D}`);return D.replace(/^(Q|P|L)/,"")},k.wikibaseTimeToDateObject=H;const g=D=>j=>{try{return D(j)}catch{const A=(j=j.time||j)[0];let[x,R]=j.slice(1).split("T");return x=x.replace(/-00/g,"-01"),`${A}${x}T${R}`}};k.wikibaseTimeToEpochTime=g(D=>H(D).getTime()),k.wikibaseTimeToISOString=g(D=>H(D).toISOString()),k.wikibaseTimeToSimpleDay=g(D=>{if("object"==typeof D){const{time:j,precision:L}=D;D=9===L?j.replace("-01-01T","-00-00T"):10===L?j.replace("-01T","-00T"):j}return D.split("T")[0].replace(/^\+/,"").replace(/^(-?)0+/,"$1").replace(/-00$/,"").replace(/-00$/,"")}),k.getImageUrl=(D,j)=>{let L=`https://commons.wikimedia.org/wiki/Special:FilePath/${D}`;return"number"==typeof j&&(L+=`?width=${j}`),L},k.getEntityIdFromGuid=D=>{const j=D.split(/[$-]/);if(6===j.length)return j[0].toUpperCase();if(7===j.length)return j.slice(0,2).join("-").toUpperCase();throw new Error(`invalid guid: ${D}`)},We.exports=k},802:(We,be,N)=>{const{wikibaseTimeToISOString:H,wikibaseTimeToEpochTime:k,wikibaseTimeToSimpleDay:y}=N(504),M=R=>R.value,g=(R,F)=>_(R,F.entityPrefix),v={item:"Q",lexeme:"L",property:"P"},_=(R,F)=>{const{value:P}=R,z=P.id||v[P["entity-type"]]+P["numeric-id"];return"string"==typeof F?`${F}:${z}`:z},A={iso:H,epoch:k,"simple-day":y,none:R=>R.time||R},x={commonsMedia:M,"external-id":M,"geo-shape":M,"globe-coordinate":(R,F)=>F.keepRichValues?R.value:[R.value.latitude,R.value.longitude],math:M,monolingualtext:(R,F)=>F.keepRichValues?R.value:R.value.text,"musical-notation":M,quantity:(R,F)=>{const{value:P}=R,z=parseFloat(P.amount);if(F.keepRichValues){const se={amount:parseFloat(P.amount),unit:P.unit.replace(/^https?:\/\/.*\/entity\//,"")};return null!=P.upperBound&&(se.upperBound=parseFloat(P.upperBound)),null!=P.lowerBound&&(se.lowerBound=parseFloat(P.lowerBound)),se}return z},string:M,"tabular-data":M,time:(R,F)=>{let P;if(P="function"==typeof F.timeConverter?F.timeConverter(R.value):((R="iso")=>{const F=A[R];if(!F)throw new Error(`invalid converter key: ${JSON.stringify(R).substring(0,100)}`);return F})(F.timeConverter)(R.value),F.keepRichValues){const{timezone:z,before:se,after:ie,precision:Se,calendarmodel:Ee}=R.value;return{time:P,timezone:z,before:se,after:ie,precision:Se,calendarmodel:Ee}}return P},url:M,"wikibase-entityid":g,"wikibase-form":g,"wikibase-item":g,"wikibase-lexeme":g,"wikibase-property":g,"wikibase-sense":g};We.exports={parsers:x,parse:(R,F,P,z)=>{R=(R=R||F.type).replace(" ","-");try{return x[R](F,P)}catch(se){throw"parsers[datatype] is not a function"===se.message&&(se.message=`${R} claim parser isn't implemented\n        Claim id: ${z}\n        Please report to https://github.com/maxlath/wikibase-sdk/issues`),se}}}},254:(We,be,N)=>{const{simplifyEntity:H}=N(464),k={entities:y=>{y=y.body||y;const{entities:M}=y;return Object.keys(M).forEach(S=>{M[S]=H(M[S])}),M},pagesTitles:y=>(y=y.body||y).query.search.map(M=>M.title)};We.exports={wb:k,wd:k}},513:We=>{const be=y=>{const M=y.reduce(H,{});return M.preferred||M.normal||[]},H=(y,M)=>{const{rank:S}=M;return y[S]||(y[S]=[]),y[S].push(M),y};We.exports={truthyClaims:y=>{const M={};return Object.keys(y).forEach(S=>{M[S]=be(y[S])}),M},truthyPropertyClaims:be,nonDeprecatedPropertyClaims:y=>y.filter(M=>"deprecated"!==M.rank)}},245:(We,be,N)=>{const{labels:H,descriptions:k,aliases:y,lemmas:M,glosses:S}=N(366),{simplifyClaim:g,simplifyPropertyClaims:v,simplifyClaims:_,simplifyQualifier:T,simplifyPropertyQualifiers:D,simplifyQualifiers:j,simplifyReferences:L}=N(896),{simplifyForm:A,simplifyForms:x}=N(46),{simplifySense:R,simplifySenses:F}=N(55),P=N(889),z=N(424);We.exports={labels:H,descriptions:k,aliases:y,claim:g,propertyClaims:v,claims:_,qualifier:T,propertyQualifiers:D,qualifiers:j,references:L,sitelinks:P,snak:g,propertySnaks:v,snaks:_,lemmas:M,glosses:S,form:A,forms:x,sense:R,senses:F,sparqlResults:z}},896:(We,be,N)=>{const{parse:H}=N(802),{uniq:k}=N(787),{truthyPropertyClaims:y,nonDeprecatedPropertyClaims:M}=N(513),S=(P,...z)=>{const{propertyPrefix:se}=T(z),ie={};for(let Se in P){const Ee=P[Se];se&&(Se=se+":"+Se),ie[Se]=g(Ee,...z)}return ie},g=(P,...z)=>{if(null==P||0===P.length)return[];const{keepNonTruthy:se,keepNonDeprecated:ie,areSubSnaks:Se}=T(z);return ie?P=M(P):se||Se||(P=y(P)),(P=P.map(Ee=>_(Ee,...z)).filter(v))[0]&&"object"!=typeof P[0]?k(P):P},v=P=>void 0!==P,_=(P,...z)=>{z=T(z);const{keepQualifiers:se,keepReferences:ie,keepIds:Se,keepHashes:Ee,keepTypes:Ke,keepSnaktypes:yt,keepRanks:Z}=F(z),{mainsnak:Ze,rank:on}=P;let ze,gn,Ht,Ce,St,Ft;if(Ze?(gn=Ze.datatype,Ht=Ze.datavalue,Ce=Ze.snaktype):(Ht=P.datavalue,gn=P.datatype,Ce=P.snaktype,P.hash?St=!0:Ft=!0),Ht)ze=H(gn,Ht,z,P.id);else if("somevalue"===Ce)ze=z.somevalueValue;else{if("novalue"!==Ce)throw new Error("no datavalue or special snaktype found");ze=z.novalueValue}if(St){if(!(Ee||Ke||yt))return ze;const Ut={value:ze};return Ee&&(Ut.hash=P.hash),Ke&&(Ut.type=gn),yt&&(Ut.snaktype=Ce),Ut}if(Ft)return Ke?{type:gn,value:ze}:ze;if(!(se||ie||Se||Ke||yt||Z))return ze;const Bt={value:ze};Ke&&(Bt.type=gn),yt&&(Bt.snaktype=Ce),Z&&(Bt.rank=on);const Zt=x(z);return Zt.keepHashes=Ee,se&&(Bt.qualifiers=D(P.qualifiers,Zt)),ie&&(P.references=P.references||[],Bt.references=L(P.references,Zt)),Se&&(Bt.id=P.id),Bt},T=P=>{if(null==P)return{};if(P[0]&&"object"==typeof P[0])return P[0];const[z,se,ie]=P;return{entityPrefix:z,propertyPrefix:se,keepQualifiers:ie}},D=(P,z)=>S(P,x(z)),L=(P,z)=>P.map(se=>A(se,z)),A=(P,z)=>{const se=x(z),ie=S(P.snaks,se);return se.keepHashes?{snaks:ie,hash:P.hash}:ie},x=(P={})=>P.areSubSnaks?P:Object.assign({},P,{areSubSnaks:!0}),R=["keepQualifiers","keepReferences","keepIds","keepHashes","keepTypes","keepSnaktypes","keepRanks","keepRichValues"],F=P=>(P.keepAll&&R.forEach(z=>{null==P[z]&&(P[z]=!0)}),P);We.exports={simplifyClaims:S,simplifyPropertyClaims:g,simplifyClaim:_,simplifyQualifiers:D,simplifyPropertyQualifiers:(P,z)=>g(P,x(z)),simplifyQualifier:_,simplifyReferences:L}},464:(We,be,N)=>{const H=N(245),k=(S,g)=>{const{type:v}=S,_={id:S.id,type:v,modified:S.modified};return S.datatype&&(_.datatype=S.datatype),"item"===v?(y(S,_,"labels"),y(S,_,"descriptions"),y(S,_,"aliases"),y(S,_,"claims",g),y(S,_,"sitelinks",g)):"property"===v?(_.datatype=S.datatype,y(S,_,"labels"),y(S,_,"descriptions"),y(S,_,"aliases"),y(S,_,"claims",g)):"lexeme"===v&&(y(S,_,"lemmas"),_.lexicalCategory=S.lexicalCategory,_.language=S.language,y(S,_,"claims",g),y(S,_,"forms",g),y(S,_,"senses",g)),_},y=(S,g,v,_)=>{null!=S[v]&&(g[v]=H[v](S[v],_))},M=(S,g={})=>{S.entities&&(S=S.entities);const{entityPrefix:v}=g;return Object.keys(S).reduce((_,T)=>{const D=S[T];return v&&(T=`${v}:${T}`),_[T]=k(D,g),_},{})};H.entity=k,H.entities=M,We.exports={simplifyEntity:k,simplifyEntities:M}},46:(We,be,N)=>{const{isFormId:H}=N(504),{representations:k}=N(366),{simplifyClaims:y}=N(896),M=(g,v)=>{const{id:_,representations:T,grammaticalFeatures:D,claims:j}=g;if(!H(_))throw new Error("invalid form object");return{id:_,representations:k(T),grammaticalFeatures:D,claims:y(j,v)}};We.exports={simplifyForm:M,simplifyForms:(g,v)=>g.map(_=>M(_,v))}},55:(We,be,N)=>{const{isSenseId:H}=N(504),{glosses:k}=N(366),{simplifyClaims:y}=N(896),M=(g,v)=>{const{id:_,glosses:T,claims:D}=g;if(!H(_))throw new Error("invalid sense object");return{id:_,glosses:k(T),claims:y(D,v)}};We.exports={simplifySense:M,simplifySenses:(g,v)=>g.map(_=>M(_,v))}},889:(We,be,N)=>{const{getSitelinkUrl:H}=N(493);We.exports=(y,M={})=>{let{addUrl:S,keepBadges:g,keepAll:v}=M;return g=g||v,Object.keys(y).reduce(k({sitelinks:y,addUrl:S,keepBadges:g}),{})};const k=({sitelinks:y,addUrl:M,keepBadges:S})=>(g,v)=>{if(null==y[v])return g[v]=y[v],g;const{title:_,badges:T}=y[v];return M||S?(g[v]={title:_},M&&(g[v].url=H(v,_)),S&&(g[v].badges=T)):g[v]=_,g}},424:We=>{We.exports=(L,A={})=>{"string"==typeof L&&(L=JSON.parse(L));const{vars:x}=L.head,R=L.results.bindings;if(1===x.length&&!0===A.minimize){const se=x[0];return R.map(ie=>be(ie[se])).filter(ie=>null!=ie)}const{richVars:F,associatedVars:P,standaloneVars:z}=v(x);return R.map(T(F,P,z))};const be=L=>{if(!L)return;let{datatype:A}=L;return A=A&&A.replace("http://www.w3.org/2001/XMLSchema#",""),(N[L.type]||k(A))(L)},N={uri:L=>S(L.value),bnode:()=>null},H=L=>parseFloat(L.value),k=L=>(L=L&&L.replace("http://www.w3.org/2001/XMLSchema#",""),y[L]||M),y={decimal:H,integer:H,float:H,double:H,boolean:L=>"true"===L.value},M=L=>L.value,S=L=>L.match(/http.*\/entity\/statement\//)?g(L):L.replace(/^https?:\/\/.*\/entity\//,"").replace(/^https?:\/\/.*\/prop\/direct\//,""),g=L=>{const A=(L=L.replace(/^https?:\/\/.*\/entity\/statement\//,"")).split("-");return A[0]+"$"+A.slice(1).join("-")},v=L=>{let A=L.filter(P=>L.some(_(P)));A=A.filter(P=>!A.some(z=>P!==z&&P.startsWith(z)));const x=new RegExp(`^(${A.join("|")})[A-Z]`),R=L.filter(P=>x.test(P)),F=L.filter(P=>!A.includes(P)&&!x.test(P));return{richVars:A,associatedVars:R,standaloneVars:F}},_=L=>{const A=new RegExp(`^${L}[A-Z]\\w+`);return A.test.bind(A)},T=(L,A,x)=>R=>{const F={};for(const P of L){const z={},se=be(R[P]);null!=se&&(z.value=se);for(const ie of A)ie.startsWith(P)&&D(R,P,ie,z);Object.keys(z).length>0&&(F[P]=z)}for(const P of x)F[P]=be(R[P]);return F},D=(L,A,x,R)=>{let F=x.split(A)[1];F=F[0].toLowerCase()+F.slice(1),F=j[F]||F;const P=L[x];null!=P&&(R[F]=P.value)},j={altLabel:"aliases"}},366:We=>{const be=k=>y=>{const M={};return Object.keys(y).forEach(S=>{const g=y[S];M[S]=null!=g?k?g.map(N):g.value:k?[]:null}),M},N=k=>k.value,H=be(!1);We.exports={labels:H,descriptions:H,aliases:be(!0),lemmas:H,representations:H,glosses:H}},493:(We,be,N)=>{const{fixedEncodeURIComponent:H,replaceSpaceByUnderscores:k,isPlainObject:y}=N(787),{isPropertyId:M}=N(504),S="https://www.wikidata.org/wiki/",g=N(538),_=R=>F=>`https://${R}.wikimedia.org/wiki/${F}`,T={commons:_("commons"),mediawiki:R=>`https://www.mediawiki.org/wiki/${R}`,meta:_("meta"),species:_("species"),wikidata:R=>M(R)?`${S}Property:${R}`:`${S}${R}`,wikimania:_("wikimania")},D=/^https?:\/\/([\w-]{2,10})\.(\w+)\.org\/\w+\/(.*)/,j=R=>{if(R.startsWith("http")){const F=R,P=F.match(D);if(!P)throw new Error(`invalid sitelink url: ${F}`);let Se,[z,se,ie]=P.slice(1);return ie=decodeURIComponent(ie),"www"===z?(z="en",Se=se):"commons"===z?(z="en",se=Se="commons"):(z=z.replace(/-/g,"_"),Se=`${z}${se}`.replace("wikipedia","wiki")),{lang:z,project:se,key:Se,title:ie,url:F}}{const F=R,P=L[F];if(P)return{lang:"en",project:P,key:F};let[z,se,ie]=F.split("wik");if(null!=ie)throw new Error(`invalid sitelink key: ${F}`);if(-1===g.indexOf(z))throw new Error(`sitelink lang not found: ${z}. Updating wikibase-sdk to a more recent version might fix the issue.`);z=z.replace(/_/g,"-");const Se=x[se];if(!Se)throw new Error(`sitelink project not found: ${Se}`);return{lang:z,project:Se,key:F}}},L={commonswiki:"commons",mediawikiwiki:"mediawiki",metawiki:"meta",specieswiki:"specieswiki",wikidatawiki:"wikidata",wikimaniawiki:"wikimania"},x={i:"wikipedia",isource:"wikisource",iquote:"wikiquote",tionary:"wiktionary",ibooks:"wikibooks",iversity:"wikiversity",ivoyage:"wikivoyage",inews:"wikinews"};We.exports={getSitelinkUrl:(R,F)=>{if(y(R)&&(F=R.title,R=R.site),!R)throw new Error("missing a site");if(!F)throw new Error("missing a title");const P=R.replace(/wiki$/,""),z=T[P]||T[R];if(z)return z(F);const{lang:se,project:ie}=j(R);return`https://${se}.${ie}.org/wiki/${F=H(k(F))}`},getSitelinkData:j,isSitelinkKey:R=>{try{return j(R),!0}catch{return!1}}}},538:We=>{We.exports=["aa","ab","ace","ady","af","ak","als","alt","ami","am","ang","an","arc","ar","ary","arz","ast","as","atj","avk","av","awa","ay","azb","az","ban","bar","bat_smg","ba","bcl","be_x_old","be","bg","bh","bi","bjn","bm","bn","bo","bpy","br","bs","bug","bxr","ca","cbk_zam","cdo","ceb","ce","cho","chr","ch","chy","ckb","co","crh","cr","csb","cs","cu","cv","cy","dag","da","de","din","diq","dsb","dty","dv","dz","ee","el","eml","en","eo","es","et","eu","ext","fa","ff","fiu_vro","fi","fj","fo","frp","frr","fr","fur","fy","gag","gan","ga","gcr","gd","glk","gl","gn","gom","gor","got","gu","guw","gv","hak","ha","haw","he","hif","hi","ho","hr","hsb","ht","hu","hy","hyw","hz","ia","id","ie","ig","ii","ik","ilo","inh","io","is","it","iu","jam","ja","jbo","jv","kaa","kab","ka","kbd","kbp","kcg","kg","ki","kj","kk","kl","km","kn","koi","ko","krc","kr","ksh","ks","ku","kv","kw","ky","lad","la","lbe","lb","lez","lfn","lg","lij","li","lld","lmo","ln","lo","lrc","ltg","lt","lv","mad","mai","map_bms","mdf","mg","mhr","mh","min","mi","mk","ml","mni","mn","mnw","mo","mrj","mr","ms","mt","mus","mwl","myv","my","mzn","nah","nap","na","nds_nl","nds","ne","new","ng","nia","nl","nn","nov","no","nqo","nrm","nso","nv","ny","oc","olo","om","or","os","pag","pam","pap","pa","pcd","pdc","pfl","pih","pi","pl","pms","pnb","pnt","ps","pt","pwn","qu","rm","rmy","rn","roa_rup","roa_tara","ro","rue","ru","rw","sah","sat","sa","scn","sco","sc","sd","se","sg","shi","shn","sh","shy","simple","si","skr","sk","sl","smn","sm","sn","sources","so","sq","srn","sr","ss","stq","st","su","sv","sw","szl","szy","ta","tay","tcy","tet","te","tg","th","ti","tk","tl","tn","to","tpi","trv","tr","ts","tt","tum","tw","tyv","ty","udm","ug","uk","ur","uz","vec","vep","ve","vi","vls","vo","war","wa","wo","wuu","xal","xh","xmf","yi","yo","yue","za","zea","zh_classical","zh_min_nan","zh_yue","zh","zu"]},694:(We,be,N)=>{const H=N(504),k=(y,M)=>S=>{if(!H[M](S))throw new Error(`invalid ${y}: ${S}`)};We.exports={entityId:k("entity id","isEntityId"),propertyId:k("property id","isPropertyId"),entityPageTitle:k("entity page title","isEntityPageTitle"),revisionId:k("revision id","isRevisionId")}},779:We=>{We.exports=H=>{"object"==typeof H&&(H=H.time);const k=H[0];let[y,M]=H.slice(1).split("T");return y=y.replace(/-00/g,"-01"),be(k,`${y}T${M}`)};const be=(H,k)=>{const y=k.split("-")[0];return"-"===H||y.length>4?N(H,k,y):new Date(k)},N=(H,k,y)=>{let M;return M=4===y.length?`${H}00${k}`:5===y.length?`${H}0${k}`:H+k,new Date(M)}},256:(We,be,N)=>{const{isPlainObject:H}=N(787),k=/^\d+[|\d]*$/;We.exports=y=>M=>{if(!H(M))throw new Error(`expected parameters to be passed as an object, got ${M} (${typeof M})`);for(const R in M)if(R.startsWith("sr")){const F=R.replace(/^sr/,"");if(null!=M[F])throw new Error(`${F} and ${R} are the same`);M[F]=M[R]}const{search:S,haswbstatement:g,format:v="json",limit:_,offset:T,profile:D,sort:j}=M;let{namespace:L,prop:A}=M;if(!S&&!g)throw new Error('missing "search" or "haswbstatement" parameter');let x="";if(S&&(x+=S),g){const R=g instanceof Array?g:[g];for(const F of R)x+="-"===F[0]?` -haswbstatement:${F.slice(1)}`:` haswbstatement:${F}`}if(null!=_&&("number"!=typeof _||_<1))throw new Error(`invalid limit: ${_}`);if(null!=T&&("number"!=typeof T||T<0))throw new Error(`invalid offset: ${T}`);if(L instanceof Array?L=L.join("|"):"number"==typeof L&&(L=L.toString()),L&&!k.test(L))throw new Error(`invalid namespace: ${L}`);if(null!=D&&"string"!=typeof D)throw new Error(`invalid profile: ${D} (${typeof D}, expected string)`);if(null!=j&&"string"!=typeof j)throw new Error(`invalid sort: ${j} (${typeof j}, expected string)`);if(null!=A&&(L instanceof Array&&(A=A.join("|")),"string"!=typeof A))throw new Error(`invalid prop: ${A} (${typeof A}, expected string)`);return y({action:"query",list:"search",srsearch:x.trim(),format:v,srnamespace:L,srlimit:_,sroffset:T,srqiprofile:D,srsort:j,srprop:A})}},968:(We,be,N)=>{const{isPlainObject:H,forceArray:k,shortLang:y}=N(787),M=N(694);We.exports=S=>(g,v,_,T,D)=>{if(H(g)&&({ids:g,languages:v,props:_,format:T,redirects:D}=g),T=T||"json",!(g&&g.length>0))throw new Error("no id provided");(g=k(g)).forEach(M.entityId),g.length>50&&console.warn("getEntities accepts 50 ids max to match Wikidata API limitations:\n      this request won't get all the desired entities.\n      You can use getManyEntities instead to generate several request urls\n      to work around this limitation");const j={action:"wbgetentities",ids:g.join("|"),format:T};return!1===D&&(j.redirects="no"),v&&(v=k(v).map(y),j.languages=v.join("|")),_&&_.length>0&&(j.props=k(_).join("|")),S(j)}},901:(We,be,N)=>{const{isPlainObject:H,forceArray:k,shortLang:y}=N(787);We.exports=S=>(g,v,_,T,D,j)=>{if(H(g)){const A=g;g=A.titles,v=A.sites,_=A.languages,T=A.props,D=A.format,j=A.redirects}if(D=D||"json",!(g&&g.length>0))throw new Error("no titles provided");v&&v.length>0||(v=["enwiki"]),g=k(g),v=k(v).map(M),T=k(T);const L={action:"wbgetentities",titles:g.join("|"),sites:v.join("|"),format:D};return 1===v.length&&1===g.length&&(L.normalize=!0),_&&(_=k(_).map(y),L.languages=_.join("|")),T&&T.length>0&&(L.props=T.join("|")),!1===j&&(L.redirects="no"),S(L)};const M=S=>2===S.length?`${S}wiki`:S},533:(We,be,N)=>{const H=N(694),{isPlainObject:k}=N(787);We.exports=(y,M)=>(S,g)=>(k(S)&&(g=S.revision,S=S.id),H.entityId(S),H.revisionId(g),`${y}/${M}/index.php?title=Special:EntityData/${S}.json&revision=${g}`)},234:(We,be,N)=>{const{isPlainObject:H}=N(787);We.exports=y=>{const M=N(968)(y);return(S,g,v,_,T)=>{if(H(S)&&({ids:S,languages:g,props:v,format:_,redirects:T}=S),!(S instanceof Array))throw new Error("getManyEntities expects an array of ids");return k(S).map(D=>M(D,g,v,_,T))}};const k=y=>{const M=[];for(;y.length>0;){const S=y.slice(0,50);y=y.slice(50),M.push(S)}return M}},140:(We,be,N)=>{const{forceArray:H}=N(787),{isItemId:k}=N(504),y=N(694);We.exports=D=>{const j=N(447)(D);return(L,A,x={})=>{const{limit:R,caseInsensitive:F,keepProperties:P}=x,z=F?_:v,se=P?"":"FILTER NOT EXISTS { ?subject rdf:type wikibase:Property . } ";let ie=H(L);ie.forEach(y.propertyId),ie=ie.map(T).join("|");let Ee=`SELECT DISTINCT ?subject WHERE { ${S(A,z,ie,se)} }`;return R&&(Ee+=` LIMIT ${R}`),j(Ee)}};const S=(D,j,L,A)=>D instanceof Array?"{ "+D.map(g).map(R=>j(L,R,A)).join("} UNION {")+" }":j(L,g(D),A),g=D=>(k(D)?D=`wd:${D}`:"string"==typeof D&&(D=`'${D}'`),D),v=(D,j,L,A)=>`?subject ${D} ${j} .\n    ${L}`,_=(D,j,L,A)=>`?subject ${D} ?value .\n    FILTER (lcase(?value) = ${j.toLowerCase()})\n    ${L}`,T=D=>"wdt:"+D},308:(We,be,N)=>{const{forceArray:H}=N(787),k=N(694);We.exports=S=>(g,v={})=>{(g=H(g)).forEach(k.entityPageTitle);const _=1===g.length,T={action:"query",prop:"revisions"};T.titles=g.join("|"),T.format=v.format||"json",_&&(T.rvlimit=v.limit||"max"),_&&v.start&&(T.rvstart=y(v.start)),_&&v.end&&(T.rvend=y(v.end));const{prop:D,user:j,excludeuser:L,tag:A}=v;return T.rvprop=D?H(D).join("|"):"ids|flags|timestamp|user|userid|size|slotsize|sha1|slotsha1|contentmodel|comment|parsedcomment|content|tags|roles|oresscores",T.rvslots="*",j&&(T.rvuser=j),L&&(T.rvexcludeuser=L),A&&(T.rvtag=A),S(T)};const y=S=>"number"==typeof S&&S<M?S:Math.trunc(new Date(S).getTime()/1e3),M=new Date("2000-01-01").getTime()},317:(We,be,N)=>{const{isPlainObject:H}=N(787),k=["item","property","lexeme","form","sense"];We.exports=y=>(M,S,g,v,_)=>{let T,D;if(H(M)){const j=M;M=j.search,S=j.language,g=j.limit,D=j.continue,v=j.format,_=j.uselang,T=j.type}if(!(M&&M.length>0))throw new Error("search can't be empty");if(S=S||"en",_=_||S,g=g||"20",v=v||"json",T=T||"item",D=D||"0",!k.includes(T))throw new Error(`invalid type: ${T}`);return y({action:"wbsearchentities",search:M,language:S,limit:g,continue:D,format:v,uselang:_,type:T})}},447:(We,be,N)=>{const{fixedEncodeURIComponent:H}=N(787);We.exports=k=>y=>{const M=H(y);return`${k}?format=json&query=${M}`}},880:We=>{const be=typeof location<"u"&&typeof document<"u";We.exports=H=>k=>(be&&(k.origin="*"),Object.keys(k).forEach(y=>{null==k[y]&&delete k[y]}),H+"?"+(H=>new URLSearchParams(H).toString())(k))},787:We=>{We.exports={shortLang:N=>N.toLowerCase().split("_")[0],forceArray:N=>("string"==typeof N&&(N=[N]),N||[]),isPlainObject:N=>!(!N||"object"!=typeof N||N instanceof Array),fixedEncodeURIComponent:N=>encodeURIComponent(N).replace(/[!'()*]/g,be),replaceSpaceByUnderscores:N=>N.replace(/\s/g,"_"),uniq:N=>Array.from(new Set(N))};const be=N=>"%"+N.charCodeAt(0).toString(16)},166:(We,be,N)=>{const{isPlainObject:H}=N(787),k=N(245),y=N(254),M=N(504),S=N(493),g=N(513),_=Object.assign({simplify:k,parse:y},M,S,g),T=x=>{if(!H(x))throw new Error("invalid config");const{instance:R,sparqlEndpoint:F}=x;let z,se,ie,Se,{wgScriptPath:P="w"}=x;if(P=P.replace(/^\//,""),!R&&!F)throw new Error("one of instance or sparqlEndpoint should be set at initialization.\nTip: if you just want to access functions that don't need an instance or a sparqlEndpoint,\nthose are also exposed directly on the module object. Exemple:\nconst { isItemId, simplify } = require('wikibase-sdk')");if(R){D("instance",R),se=R.replace(/\/$/,"").replace(`/${P}/api.php`,""),ie=`${se}/${P}/api.php`;const Ke=N(880)(ie);z={searchEntities:N(317)(Ke),cirrusSearchPages:N(256)(Ke),getEntities:N(968)(Ke),getManyEntities:N(234)(Ke),getRevisions:N(308)(Ke),getEntityRevision:N(533)(R,P),getEntitiesFromSitelinks:N(901)(Ke)}}else z={searchEntities:A("searchEntities"),cirrusSearchPages:A("cirrusSearchPages"),getEntities:A("getEntities"),getManyEntities:A("getManyEntities"),getRevisions:A("getRevisions"),getEntityRevision:A("getEntityRevision"),getEntitiesFromSitelinks:A("getEntitiesFromSitelinks")};return F?(D("sparqlEndpoint",F),Se={sparqlQuery:N(447)(F),getReverseClaims:N(140)(F)}):Se={sparqlQuery:L("sparqlQuery"),getReverseClaims:L("getReverseClaims")},Object.assign({instance:{root:se,apiEndpoint:ie}},_,z,Se)};Object.assign(T,_);const D=(x,R)=>{if("string"!=typeof R||!R.startsWith("http"))throw new Error(`invalid ${x}: ${R}`)},j=x=>R=>()=>{throw new Error(`${R} requires ${x} to be set at initialization`)},L=j("a sparqlEndpoint"),A=j("an instance");We.exports=T}},We=>{We(We.s=449)}]);